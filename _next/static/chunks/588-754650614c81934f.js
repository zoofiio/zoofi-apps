"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{54381:function(t,e,n){n.d(e,{E3:function(){return opsOrderAethir},Ly:function(){return getIBGTPrice},ZK:function(){return getNftTokensIdsByUser},_c:function(){return getBvaultsPtSynthetic},bY:function(){return getNftsByAlchemy},bi:function(){return getOpsStatsAethir},gf:function(){return getBeraTokensPrices},l6:function(){return getBvaultEpochYtPrices},mX:function(){return getOpsAdmins},oz:function(){return getNftsByZoofi}});var a=n(78784),r=n(83606),i=n(13854),o=n(96555),u=n(53414),c=n(1936);let getBvaultEpochYtPrices=(t,e,n)=>a.ZP.get(t,"/api/bvault/getEpochYTPrices/".concat(e,"/").concat(n)),getBvaultsPtSynthetic=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.ZP.post(t,"/api/bvault/batchGetEpochPtSynthetic",{bvaults:e})},getNftTokensIdsByUser=(t,e,n)=>a.ZP.post(t,"/api/nft/".concat(n,"/tokenIds"),{tokens:e}),getNftsByZoofi=(t,e,n)=>a.ZP.get(t,"/api/nft/erc721Balance/".concat(t,"/").concat(e,"/").concat(n)),getBeraTokensPrices=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["0x6969696969696969696969696969696969696969","0x0000000000000000000000000000000000000000","0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce","0x656b95E550C07a9ffe548bd4085c72418Ceb1dba","0x549943e04f40284185054145c6E4e9568C1D3241","0x779Ded0c9e1022225f8E0630b35a9b54bE713736","0x688e72142674041f8f6Af4c808a4045cA1D6aC82","0x0555E30da8f98308EdB960aa94C0Db47230d2B9c","0x2F6F07CDcf3588944Bf4C42aC74ff24bF56e7590","0x9b6761bf2397Bb5a6624a856cC84A3A14Dcd3fe5","0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"];return r.Z.post("https://chgbtcc9ffu7rbdw2kmu4urwy.stellate.sh/",{operationName:"GetTokenCurrentPrices",variables:{chains:["BERACHAIN"],addressIn:t},query:"query GetTokenCurrentPrices($chains: [GqlChain!]!, $addressIn: [String!]!) {\n  tokenGetCurrentPrices(chains: $chains, addressIn: $addressIn) {\n    address\n    chain\n    price\n    updatedAt\n    updatedBy\n    __typename\n  }\n}"}).then(e=>{let n=e.data.data.tokenGetCurrentPrices,a={};for(let t of n)a[t.address]=t;let r={};for(let e of t){let t=a[e.toLowerCase()];t&&(r[e]=(0,i.su)(t.price.toFixed(6)))}return r})},getIBGTPrice=()=>r.Z.post("https://api.zoofi.io/api/third/ibgt").then(t=>{var e;return null===(e=(0,c.z)(t.data.underlyingTokens,t.data.rewardTokens))||void 0===e?void 0:e.find(t=>"iBGT"===t.symbol)}).then(t=>t?(0,i.su)(t.price.toFixed(6)):o.Pq),s={[u.Fo.id]:"eth-sepolia",[u.ue.id]:"base-mainnet",[u.On.id]:"berachain-mainnet",[u.yX.id]:"arb-mainnet"},getNftsByAlchemy=async(t,e,n)=>{let a;if(!s[t])throw Error("Not Support");let i=[];for(;;){let{pageKey:o,nfts:u}=await function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return r.Z.get("https://".concat(s[t],".g.alchemy.com/nft/v3/7UXJgo01vxWHLJDk09Y0qZct8Y3zMDbX/getNFTsForOwner?owner=").concat(n,"&contractAddresses[]=").concat(e,"&pageSize=").concat(i),{params:a?{pageKey:a}:{}}).then(t=>({pageKey:t.data.pageKey,nfts:t.data.ownedNfts.map(t=>t.tokenId)}))}();if(i=i.concat(u),!o)break;a=o}return i},getOpsAdmins=(t,e)=>a.ZP.get(t,"/api/ops/admins",{},{headers:{Authorization:e}}),getOpsStatsAethir=(t,e)=>a.ZP.get(t,"/api/ops/nodeops-stats-aethir",{},{headers:{Authorization:e}}),opsOrderAethir=(t,e,n)=>a.ZP.post(t,"/api/ops/nodeops-order/".concat(n),{},{headers:{Authorization:e}})},53080:function(t,e,n){n.d(e,{A_:function(){return calcTPriceVT},SL:function(){return useLntWithdrawPrice},VM:function(){return useLntVaultLogs},WB:function(){return useLntHookPoolkey},hD:function(){return useLntVaultOperators},jY:function(){return useLntVault},lQ:function(){return useLntVaultTimes},p2:function(){return useLntVaultWithdrawState},ph:function(){return calcLPApy},qu:function(){return calcVtApy},ze:function(){return useLntVaultYTRewards}});var a=n(55645),r=n(68705),i=n(7347),o=n(96555),u=n(27092),c=n(13854),s=n(62013),d=n(80329),l=n(14848),f=n(37974),h=n(82790),y=n(42302);function useLntVault(t){return(0,u.B8)({key:"fetLntVault:".concat(t.vault),fetfn:async()=>{let e=(0,s.B)(t.chain),{lntdata:n,...i}=await (0,c.S0)({lntdata:e.readContract({abi:a.KA,code:r.f,functionName:"queryLntVault",args:[t.vault]}),expiryTime:t.isAethir?e.readContract({abi:a.qU,address:t.vault,functionName:"vtPriceEndTime"}):Promise.resolve(1784968222n),startTime:t.isAethir?e.readContract({abi:a.qU,address:t.vault,functionName:"vtPriceStartTime"}):Promise.resolve(1750840222n)});return{...n,...i}}})}function useLntWithdrawPrice(t){return(0,u.B8)({key:"LntWithdrawPrice:".concat(t.vault),initResult:0n,fetfn:async()=>(0,s.B)(t.chain).readContract({abi:a.KA,code:r.f,functionName:"calcRedeem",args:[t.vault,1n]})})}function useLntHookPoolkey(t){var e,n;let r=useLntVault(t);return(0,u.B8)({key:(n=null===(e=r.result)||void 0===e?void 0:e.vtSwapPoolHook)&&n!==h.DR?"LntHookPoolkey:".concat(t.vault,":").concat(n):"",fetfn:async()=>(0,s.B)(t.chain).readContract({abi:a.$6,address:r.result.vtSwapPoolHook,functionName:"poolKey"})})}async function getRewardsBy(t,e,n){return n.readContract({abi:a.KA,code:r.f,functionName:"earned",args:[t,e]}).then(t=>t.map(t=>[t.token,t.value]))}function useLntVaultYTRewards(t){var e,n;let a=useLntVault(t),{address:r}=(0,y.m)(),i=(0,u.B8)({key:(n=null===(e=a.result)||void 0===e?void 0:e.YT)&&n!==h.DR&&r?"fetLntVaultYTRewards:".concat(n,":").concat(r):"",fetfn:async()=>{let e=(0,s.B)(t.chain);return getRewardsBy(a.result.YT,r,e)}});return"fetching"===a.status&&(i.status="fetching"),i}function useLntVaultOperators(t){var e;let n=useLntVault(t),r=(0,u.B8)({key:(e=t.MockNodeDelegator)?"fetLntVaultOperators:".concat(e):"",initResult:[],fetfn:async()=>{let e=(0,s.B)(t.chain),n=await e.readContract({abi:a.zK,address:t.MockNodeDelegator,functionName:"operators"});return Promise.all(n.map(n=>e.readContract({abi:a.zK,address:t.MockNodeDelegator,functionName:"getOperatorInfo",args:[n]}).then(t=>{let[e,a]=t;return{address:n,capacity:e,delegations:a}})))}});return"fetching"===n.status&&(r.status="fetching"),r}function useLntVaultTimes(t){var e,n,a;let r=useLntVault(t),i=(0,d.N)((0,l.z)()/1e3),o=(0,f.H)((null!==(n=t.startTime)&&void 0!==n?n:0n).toString()),u=(0,f.H)((null!==(a=null===(e=r.result)||void 0===e?void 0:e.expiryTime)&&void 0!==a?a:0n).toString()),s=u>o?Math.min(Math.max((i-o)*100/(u-o),0),100):100,h="".concat((0,d.N)(s,2),"%"),y=(0,c.Y)((u-i)*1e3);return{progressPercent:h,remain:y,remainStr:"~ ".concat(y," remaining")}}function useLntVaultLogs(t){return(0,u.B8)({key:"LntVaultLogs:".concat(t.vault),fetfn:async()=>(0,s.B)(t.chain).readContract({abi:a.KA,code:r.f,functionName:"getLog",args:[t.vault]})})}function useLntVaultWithdrawState(t){let e=(0,u.B8)({key:t.isAethir?"LntWithdrawWindows:".concat(t.vault):"",initResult:[],fetfn:async()=>{let e=(0,s.B)(t.chain),n=await e.readContract({abi:a.qU,address:t.vault,functionName:"redeemStrategy"}),r=await e.readContract({abi:a.T_,address:n,functionName:"canRedeem"});if(r)return[{startTime:(0,c.M_)(),duration:10000000000n}];let i=await e.readContract({abi:a.T_,address:n,functionName:"redeemTimeWindowsCount"}),[o,u]=await e.readContract({abi:a.T_,address:n,functionName:"redeemTimeWindows",args:[0n,i]});return o.map((t,e)=>({startTime:t,duration:u[e]})).sort((t,e)=>t.startTime>e.startTime?1:t.startTime<e.startTime?-1:0)}}),n=(0,c.M_)(),r=e.result.findIndex(t=>t.startTime<=n&&n<=t.startTime+t.duration),i=!t.isAethir||r>=0;return{inWindow:i,wWindow:i&&t.isAethir?e.result[r]:void 0,nWindow:r<0?e.result.find(t=>t.startTime>n):void 0}}function calcTPriceVT(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0n;if(!n||!e)return 0;let o=(0,i.kb)(e.T,t.chain),u=(0,i.kb)(e.VT,t.chain),s=(0,c.pF)(n.t+a,o.decimals),d=(0,c.pF)(n.vt+r,u.decimals),l=(0,c.pF)(n.R,18),f=s+d>0?Math.min(d/(s+d),1):0,h=(0,c.pF)(n.rateScalar,18),y=(0,c.pF)(n.rateAnchor,18);return 0!=h&&1-f!=0?Math.log(f/(1-f)/l)/h+y:0}function calcVtApy(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0n;if(!n||!e)return 0;let i=calcTPriceVT(t,e,n,a,r),u=!e||e.expiryTime<=(0,c.M_)()?0:(0,c.pF)((e.expiryTime-(0,c.M_)())*10000n/o.SH,4);return Math.pow(i,1/u)-1}function calcLPApy(t,e,n){let a=0,r=0;if(n&&e){let o=calcVtApy(t,e,n),u=calcTPriceVT(t,e,n),s=(0,c.pF)(n.vt,(0,i.kb)(e.VT,t.chain).decimals),d=(0,c.pF)(n.t,(0,i.kb)(e.T,t.chain).decimals);a=s/(d*u+s)*o,r=0/(s/u+d)}return{apy:a+r+0,items:[{name:"VT APY",value:a},{name:"SwapFee",value:r},{name:"Airdrop",value:0}]}}},27092:function(t,e,n){n.d(e,{B8:function(){return useFet},VZ:function(){return isError},d6:function(){return isSuccess},hg:function(){return isLoading},iM:function(){return reFet}});var a=n(96555),r=n(13854),i=n(68495),o=n.n(i),u=n(77317);let c={},s={};function initFS(t){return{key:t.key,status:"idle",result:t.initResult,lastUpDate:0}}let d=new(o());async function runFetImpl(t){var e,n;let a=c[t.key].runId,i=Object.hasOwn(s,t.key),o=null!==(e=t.retry)&&void 0!==e?e:3;for(;o>0;){o--;try{if(a!==c[t.key].runId)break;let e=await (i?"function"==typeof s[t.key]?s[t.key]():s[t.key]:t.fetfn());if(a!==c[t.key].runId)break;return c[t.key].fs.result=e,c[t.key].fs.lastUpDate=now(),c[t.key].fs.status="success",d.emit(t.key,c[t.key].fs),e}catch(e){if(0==o){if(a!==c[t.key].runId)break;c[t.key].fs.status="error",c[t.key].fs.error=e,d.emit(t.key,c[t.key].fs)}if(console.error("RunFetError: fetKey:".concat(t.key," retryCount:").concat(o),e),await (0,r._v)(null!==(n=t.retryInterval)&&void 0!==n?n:500),0==o)throw e}}}function runFet(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c[t.key]){var n;(n=t.key)&&(c[n].runId>999999?c[n].runId=0:c[n].runId++),runFetImpl(t)}else c[t.key]={fet:t,runId:0,fs:initFS(t)},runFetImpl(t);return c[t.key].fs.status="fetching",c[t.key].fs.error=void 0,e&&d.emit(t.key,c[t.key].fs),c[t.key].fs}function now(){return new Date().getTime()}let updateReducer=t=>(t+1)%1e6;function useFet(t){var e;let n=function(){let[,t]=(0,u.useReducer)(updateReducer,0);return t}(),r=(null===(e=c[t.key])||void 0===e?void 0:e.fs)||initFS(t),i=!!t.key&&(!r||"idle"==r.status);return i&&(r=runFet(t)),(0,u.useEffect)(()=>{var e;a.hc&&(window.fets=c);let r=(e=t=>{n()},t.key?(d.on(t.key,e),()=>{d.off(t.key,e)}):()=>{});return function(t){var e,n;let a=null===(e=c[t.key])||void 0===e?void 0:e.fs,r=null!==(n=t.cacheTime)&&void 0!==n?n:1e3;return!!(t.key&&a&&"fetching"!==a.status&&now()-a.lastUpDate>r)}(t)&&(runFet(t),n()),r},[t.key]),r}function isLoading(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0!=e.length&&!!e.find(t=>"fetching"===t.status&&0==t.lastUpDate)}function isSuccess(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return!(0==e.length||e.find(t=>0==t.lastUpDate))}function isError(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0!=e.length&&!!e.find(t=>"error"===t.status)}function reFet(){for(var t,e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];for(let e of n){let n="string"==typeof e?null===(t=c[e])||void 0===t?void 0:t.fet:e;n&&runFet(n,!0)}}},78784:function(t,e,n){var a=n(53414),r=n(96555),i=n(83606);let o={},instance=t=>{let e=a.Af.find(e=>t==e.id),n=r.Sz||!e.testnet?"https://api.".concat(r.Kh.value):"https://beta-api.".concat(r.Kh.value);return o[n]||(o[n]=i.Z.create({baseURL:n,timeout:1e4,headers:{"Content-Type":"application/json"}})),o[n]};async function get(t,e){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=await instance(t).get(e,{...r,params:a});if(console.info("res:",null==i?void 0:i.data),(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.code)!==200)throw i.data;return i.data.data}async function post(t,e){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=await instance(t).post(e,a,r);if((null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.code)!==200)throw i.data;return i.data.data}e.ZP={get,post}}}]);