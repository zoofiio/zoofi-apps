"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1387],{61387:function(e,t,n){n.d(t,{Ak:function(){return Expandable},At:function(){return N},Tt:function(){return Erc20Approve},UT:function(){return GeneralAction},_t:function(){return AsyncInfo},pk:function(){return k},us:function(){return ContractAll}});var r=n(52987),s=n(99409),a=n(13854),l=n(62013),i=n(64370),c=n(95499),d=n(77317),o=n(23125),x=n(30742),u=n(58409),p=n(88501),m=n(31236),f=n(45207),h=n(85058),g=n(57834),v=n(45820),y=n(38070),b=n(77087),j=n(87701);let N={menu:()=>(0,a.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,a.cn)({"!bg-primary/30":e.isFocused,"!bg-primary/60":e.isSelected}),control:()=>"bg-white dark:bg-black !min-h-[58px] !border-primary/30 !shadow-none",singleValue:()=>"dark:text-white"},k="bg-white dark:bg-transparent border-primary/70 w-full h-14 text-right pr-4 font-bold text-sm border focus:border-2  rounded-md outline-none ",defConvertArg=(e,t,n)=>"uint8"==n.type?parseInt((e||"").replaceAll(" ","")):n.type.startsWith("uint")?BigInt((e||"").replaceAll(" ","")):"bytes32"==n.type?(0,m.$G)(e,{size:32}):"bool"==n.type?"true"==e:e,convertArgs=(e,t,n)=>{try{return e.map((e,r)=>{let s=t[r];return n?n(e,r,s):defConvertArg(e,r,s)})}catch(e){return}};function Expandable(e){let{children:t,tit:n,disable:s}=e,[a,l]=(0,d.useState)(!1);return(0,r.jsxs)("div",{className:"animitem flex flex-col w-full bg-white dark:bg-transparent rounded-lg overflow-hidden border border-solid border-primary/40",children:[(0,r.jsxs)("div",{className:"px-5 py-2 min-h-[58px] flex justify-between items-center text-sm",children:[(0,r.jsx)("div",{className:"font-medium text-base",children:n}),s?t:(0,r.jsxs)("div",{className:"px-2 py-1 rounded-full border border-solid border-primary flex items-center text-xs text-primary cursor-pointer ",onClick:()=>l(!a),children:[(0,r.jsx)("span",{className:"mr-[5px]",children:a?"Close":"Expand"}),a?(0,r.jsx)(x.iRh,{}):(0,r.jsx)(x.tv1,{})]})]}),(0,r.jsx)(o.Collapse,{isOpened:a,theme:{content:"bg-gray-200 dark:bg-transparent p-4 flex flex-col gap-2"},children:t})]})}function GeneralAction(e){var t,n;let{abi:o,address:x,functionName:m,tit:f,infos:h,convertArg:N,txProps:w,onArgs:A,argsDef:C}=e,T=o.find(e=>"function"==e.type&&e.name==m),E=(null==T?void 0:null===(t=T.inputs)||void 0===t?void 0:t.length)||0,[{args:S},M]=(0,u.Z)({args:Array(E).fill("")});(0,d.useEffect)(()=>{A&&A(S)},[S]);let{data:_,isLoading:I,isError:q,refetch:G}=(0,i.a)({queryKey:["queryInfo",x,m,h],enabled:!!h,queryFn:async()=>(0,a.IE)(h)}),O=(0,d.useMemo)(()=>S.map((e,t)=>e||(null==C?void 0:C[t])||""),[C,S]),W=(0,s.pK)(),{data:$,mutate:F,isPending:J}=(0,c.D)({mutationFn:async()=>await (0,l.B)(W).readContract({abi:o,address:x,functionName:m,...S.length?{args:convertArgs(S,T.inputs,N)}:{}}),onError:a.S3});if(!T)return;let R=T.stateMutability.includes("payable"),U=(!T.inputs||0==T.inputs.length)&&R,Z=R?convertArgs(O,T.inputs,N):void 0;return(0,r.jsxs)(Expandable,{tit:f||m,disable:U,children:[null===(n=T.inputs)||void 0===n?void 0:n.map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"opacity-60 absolute top-1/2 left-2 -translate-y-1/2 text-xs",children:[e.name,"(",e.type,")"]}),(0,r.jsx)("input",{type:"text",value:O[t],onChange:e=>M({args:S.map((n,r)=>t==r?e.target.value:n)}),className:(0,a.cn)(k)})]},"input_".concat(t))),(0,r.jsxs)("div",{className:(0,a.cn)("whitespace-pre-wrap"),children:[I&&(0,r.jsx)(b.$,{}),!(0,j.k)(_)&&JSON.stringify(_,void 0,2)]}),(0,r.jsx)("div",{className:(0,a.cn)("whitespace-pre-wrap"),children:!(0,j.k)($)&&JSON.stringify($,void 0,2)}),R?(0,r.jsxs)("div",{className:"flex gap-5 items-center",children:[(0,r.jsx)(g.$M,{...w||{},onTxSuccess:()=>{var e;h&&G(),null==w||null===(e=w.onTxSuccess)||void 0===e||e.call(w)},tx:"Write",txs:[{abi:o,address:x,functionName:m,...S.length?{args:Z}:{}}],disabled:(null==w?void 0:w.disabled)||!!S.length&&!Z,className:(0,a.cn)("!mt-0 flex items-center justify-center gap-4",U?"max-w-[100px]":"w-full")}),(0,r.jsx)(y.N,{txs:[{abi:o,address:x,functionName:m,...S.length?{args:Z}:{}}]})]}):(0,r.jsx)(v.k6,{className:(0,p.m)("flex items-center justify-center gap-4",(0,a.cn)("!mt-0 flex items-center justify-center gap-4",U?"max-w-[100px]":"w-full")),onClick:()=>F(),busy:J,busyShowContent:!0,disabled:!1,children:"Read"})]})}function ContractAll(e){let{abi:t,address:n,tit:s,itemInfos:a}=e,[l,i]=(0,d.useMemo)(()=>{let e=[],n=[];for(let r of t)if("function"==r.type){let t=r.stateMutability.includes("payable");t?n.push(r):e.push(r)}return[e,n]},[t]);return(0,r.jsx)(Expandable,{tit:s,children:(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 col-span-2",children:[(0,r.jsx)("div",{className:"font-bold text-2xl",children:"Read"}),l.map((e,t)=>(0,r.jsx)(GeneralAction,{abi:[e],address:n,functionName:e.name,infos:null==a?void 0:a[e.name]},"read_".concat(t)))]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 col-span-3",children:[(0,r.jsx)("div",{className:"font-bold text-2xl",children:"Write"}),i.map((e,t)=>(0,r.jsx)(GeneralAction,{abi:[e],address:n,functionName:e.name,infos:null==a?void 0:a[e.name]},"write_".concat(t)))]})]})})}function Erc20Approve(){let[e,t]=(0,u.Z)({token:"",spender:"",amount:0n});return(0,r.jsxs)(Expandable,{tit:"Erc20Approve",children:[(0,r.jsx)("input",{type:"text",placeholder:"token",value:e.token,onChange:e=>t({token:e.target.value}),className:(0,a.cn)(k)}),(0,r.jsx)("input",{type:"text",placeholder:"spender",value:e.spender,onChange:e=>t({spender:e.target.value}),className:(0,a.cn)(k)}),(0,r.jsx)("input",{type:"text",placeholder:"amount",value:e.amount.toString(),onChange:e=>{try{t({amount:(0,a.su)(e.target.value,0)})}catch(e){}},className:(0,a.cn)(k)}),(0,r.jsx)(g.vZ,{tx:"Write",disabled:!(0,f.U)(e.token)||!(0,f.U)(e.spender)||e.amount<=0n,config:{abi:h.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]},className:"!mt-0 w-full flex items-center justify-center gap-4"})]})}function AsyncInfo(e){let{infos:t,keys:n,className:s}=e,{data:l,isFetching:c,isError:d,refetch:o}=(0,i.a)({queryKey:["queryAsyncInfo",n,t],enabled:!!t,queryFn:async()=>(0,a.IE)(t)});return(0,r.jsxs)("div",{className:(0,a.cn)("whitespace-pre-wrap animitem",s),children:[c&&(0,r.jsx)(b.$,{}),d&&!c&&(0,r.jsx)("div",{className:"text-red-400",children:"Error"}),!(0,j.k)(l)&&JSON.stringify(l,void 0,2),(0,r.jsx)(v.k6,{onClick:()=>o(),children:"Refresh"})]})}},38070:function(e,t,n){n.d(t,{N:function(){return AddMultiTx},a:function(){return MultiTxTemp}});var r=n(52987),s=n(13854),a=n(65512),l=n(62573),i=n(93108),c=n(57834),d=n(16804),o=n(45820),x=n(25282);let u=(0,i.Ue)((e,t)=>({txs:[],addTx(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];r.length>0&&e({txs:t().txs.concat(r)})},editTx(n,r){let s=t().txs;if(n<0||n>=s.length)return;let a=[...s];a[n]=r,e({txs:a})},removeTx(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];if(0==r.length)return;let a=[...t().txs].filter((e,t)=>!r.includes(t));e({txs:a})}}));function MultiTxTemp(e){let{className:t}=e,{txs:n,removeTx:i}=u();if(0==n.length)return null;let clearTxs=()=>u.setState({txs:[]});return(0,r.jsx)(d.o,{trigger:(0,r.jsx)("div",{style:{textShadow:" 0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1), 0px 2px 4px rgb(0 0 0 / 0.1)"},className:(0,s.cn)("fixed top-28 right-12 shadow-lg rounded-md px-3 py-2 bg-primary/60 text-red-500 font-medium text-shadow cursor-pointer",t),children:n.length}),children:(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4 p-5",children:[(0,r.jsx)("div",{className:"font-medium text-lg",children:"Multi Tx"}),(0,r.jsx)("div",{className:"w-full flex flex-col gap-2 overflow-y-auto max-h-[31.25rem]",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex bg-primary/20 rounded-md items-center gap-4 px-3 py-1",children:[(0,r.jsxs)("span",{children:["(",(0,s.lS)(e.address),")"]}),(0,r.jsx)("span",{children:(0,s.lS)(e.functionName)}),(0,a.d)(e.args)>0&&(0,r.jsx)(x.C,{children:JSON.stringify(e.args,void 0,2)}),(0,r.jsx)(l.P1Z,{className:"text-3xl cursor-pointer hover:text-red-500 ml-auto shrink-0",onClick:()=>i(t)})]},"tx_item_".concat(t)))}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(c.$M,{tx:"Execute",className:"flex-1",txs:n,onTxSuccess:clearTxs}),(0,r.jsx)(o.k6,{className:"w-20 shrink-0",onClick:clearTxs,children:"Clear"})]})]})})}function AddMultiTx(e){let{disabled:t,txs:n,className:a,...l}=e,{addTx:i}=u();return(0,r.jsx)(o.k6,{disabled:t||0===n.length,onClick:()=>i(...n),className:(0,s.cn)("w-36 shrink-0",a),...l,children:"Add to Temp"})}}}]);