(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{18466:function(e,t,s){Promise.resolve().then(s.bind(s,46672))},46672:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(31113),n=s(4283),l=s(66499),i=s(95889),r=s(22139),c=s(59175),o=s(26361),d=s(22818),u=s(55349),m=s(83978),x=s.n(m),f=s(64103),p=s(96670),h=s(84944);function useLntVault(e){return(0,u.o)(t=>t.sliceLntVaultsStore.vaults[e]||(0,o.Yb)({current:(0,o.Yb)({},0n)},0n),["sliceLntVaultsStore.vaults.".concat(e)])}function useUpLntVaultForUserAction(e,t){let{address:s}=(0,p.m)(),a=(0,c.p)();return()=>{(0,o.XD)(async()=>{if(null==t||t(),!s)return;await Promise.all([u.w.getState().sliceTokenStore.updateTokensBalance(a,[e.vToken,e.vestingToken],s),u.w.getState().sliceTokenStore.updateNftBalance(a,[e.asset],s),u.w.getState().sliceTokenStore.updateTokenTotalSupply(a,[e.vToken,e.vestingToken]),u.w.getState().sliceLntVaultsStore.updateLntVaults(a,[e]),u.w.getState().sliceLntVaultsStore.updateUserNftStat(a,e,s)]);let n=u.w.getState().sliceLntVaultsStore.vaults[e.vault];n.epochCount>0n&&(await u.w.getState().sliceLntVaultsStore.updateEpoches(a,e,n.epochCount>1n?[n.epochCount,n.epochCount-1n]:[n.epochCount]),await u.w.getState().sliceLntVaultsStore.updateUserEpoches(a,e,s))},3,1e3)}}function useLntVaultNftStat(e){return(0,u.o)(t=>t.sliceLntVaultsStore.userNftStat[e]||[],["sliceLntVaultsStore.userNftStat.".concat(e)])}function calcVtAmountBy(e,t){if(!e.initialized)return 0n;let s=e.nftVestingEndTime,a=e.nftVestingDuration,n=e.nftVtAmount,l=s-t;l<0n&&(l=0n),l>a&&(l=a);let i=a>0n?l*n/a:0n;return i}function calcItemVtAmount(e,t){return calcVtAmountBy(e,"Deposited"==t.stat?t.claimableTime:t.startTime)}var v=s(36602),g=s(64370),j=s(36834),b=s(69708),N=s(12485),y=s(36847),w=s(93650),S=s(14993),T=s(85665),k=s(58409),L=s(20265),V=s(12687),C=s(91214),I=s(95702),P=s(2811),B=s(49041),E=s(64217),Y=s(11292);let bnToNum=e=>x().round(parseFloat((0,Y.d)(BigInt(e))),5),logTrans=e=>x().round(Math.log10(90*e+1),5),revertLog=e=>x().round((Math.pow(10,e)-1)/90,5);function LntVaultEpochYtPrices(e){let{vc:t,epochId:s}=e,{data:n}=(0,g.a)({queryKey:["bvualt-epoch-yt-prices",t.vault,s],queryFn:()=>(0,P.cb)(t.vault,s),initialData:[]}),[l,i]=(0,S.Z)(!0),{options:r}=(0,f.useMemo)(()=>{let e=n.map(e=>[(0,o.G$)(1e3*e.time,o.mv.ALL),l?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>l?revertLog(e).toString():e.toString(),t={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new E.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:t}},[n,l]);return(0,a.jsxs)("div",{className:"card p-4 mx-auto max-w-4xl w-full min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,a.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,a.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,a.jsx)("span",{className:(0,o.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",l?"bg-primary":"bg-transparent"),onClick:()=>i(),children:"LOG"})}),(0,a.jsx)(B.Z,{option:r,style:{height:240}})]})}var A=s(2987),D=s(75496),q=s(60689),R=s(54825),F=s(15506);function LntVaultYInfo(e){let{vc:t}=e,s=useLntVault(t.vault),l=s.current,i=s.current.yTokenTotalSupply>s.current.vaultYTokenBalance?s.nftVtAmount*r.Pq/s.current.yTokenTotalSupply-s.current.vaultYTokenBalance:0n,[c]=function(e){let t=(0,u.o)(()=>(function(e){let t=u.w.getState(),s=t.sliceLntVaultsStore.vaults[e],a=(null==s?void 0:s.current.vaultYTokenBalance)||0n,n=(null==s?void 0:s.Y)||0n,l=n>0n?a*r.Pq/n:0n,i=((null==s?void 0:s.current.yTokenTotalSupply)||0n)-((null==s?void 0:s.current.vaultYTokenBalance)||0n),c=(null==s?void 0:s.nftVtAmount)||0n,o=i>0n?c*r.Pq/i:0n;console.info("calcBootst:",(0,h.d)(l),(0,h.d)(o));let d=o*l/r.Pq;return d})(e),["sliceLntVaultsStore.vaults.".concat(e)]);return[(0,h.d)(t,0),t]}(t.vault);return(0,a.jsxs)("div",{className:"card !p-0 overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,a.jsx)(n.Z,{className:"text-[3.375rem]",showbg:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-xl text-black font-semibold",children:t.yTokenSymbol}),(0,a.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Yield token"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"text-base font-medium",children:[(0,a.jsx)("div",{className:"text-xs",children:"Yield Boosted"}),(0,a.jsxs)("span",{className:"text-4xl font-semibold",children:[c,"x"]})]}),(0,a.jsxs)("span",{className:"text-xs rounded-full whitespace-nowrap bg-slate-400 self-end px-1",children:["1YT = Yield of ",(0,h.d)(i,2)," token"]})]}),(0,a.jsxs)("div",{className:"text-base font-medium",children:[(0,a.jsx)("div",{className:"text-xs",children:"Total Supply"}),(0,a.jsx)("div",{className:"font-semibold",children:(0,h.d)(s.current.yTokenTotalSupply)})]}),l&&(0,a.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Epoch ".concat(l.epochId.toString())}),(0,a.jsxs)("span",{className:"scale-90",children:["~",(0,o.Y)((l.startTime+l.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,a.jsx)(j.k,{value:(e=>{let t=BigInt(Math.floor(new Date().getTime()/1e3));if(t<e.startTime)return 0;if(t-l.startTime>=l.duration)return 100;let s=(t-l.startTime)*100n/e.duration;return parseInt(s.toString())})(l),className:"mt-2 rounded-full overflow-hidden"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"scale-90",children:(0,o.G$)(1000n*l.startTime,o.mv.ALL2)}),(0,a.jsx)("span",{className:"scale-90",children:(0,o.G$)((l.startTime+l.duration)*1000n,o.mv.ALL2)})]})]})]})]})}function LntVaultYTrans(e){let{vc:t}=e,[s,n]=(0,f.useState)(""),m=(0,o.su)(s),x=useLntVault(t.vault),p=(0,u.o)(e=>e.sliceTokenStore.balances[x.current.ytSwapPaymentToken]||0n,["sliceTokenStore.balances.".concat(x.current.ytSwapPaymentToken)]),v=(0,c.p)(),[j,b]=(0,f.useState)(["calcSwap",t.vault,m,v]);(0,w.Z)(()=>b(["calcSwap",t.vault,m,v]),300,["calcSwap",t.vault,m,v]);let{data:y,isFetching:T}=(0,g.a)({queryKey:j,enabled:!!x.initialized,queryFn:()=>(0,d.B)(v).readContract({abi:l.qU,address:t.vault,functionName:"calcSwap",args:[m]})}),[k,L]=(0,S.Z)(!1),I=x.current.vaultYTokenBalance,P=(0,o.ok)(y,"1"),B=I>0n?x.Y*r.Pq/I:0n,E=B>0n?r.Pq*r.Pq/B:0n,Y=k?"1 PayToken=".concat((0,h.d)(E)," YT"):"1 YT=".concat((0,h.d)(B)," ","PayToken"),A=I>P?(x.Y+m)*r.Pq/(I-P):0n,D=(0,o.Kl)(P,void 0,!0),q=A>B&&B>0n?(A-B)*BigInt(1e10)/B:0n,R=useUpLntVaultForUserAction(t);return(0,a.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,a.jsx)(C.W,{asset:"PayToken",amount:s,balance:p,setAmount:n}),(0,a.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,a.jsx)(C.W,{asset:t.yTokenSymbol,assetIcon:"Venom",loading:T&&!!s,readonly:!0,disable:!0,checkBalance:!1,amount:D}),(0,a.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>L()}),(0,a.jsx)("span",{children:"Price: ".concat(Y)})]}),(0,a.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,o.Jh)(q,10,2))})]}),(0,a.jsx)(V.v,{className:"mx-auto mt-auto",tx:"Buy",disabled:!x.current.ytSwapPaymentToken||m<=0n||m>p,confirmations:i.EI,config:{abi:l.qU,address:t.vault,functionName:"swap",args:[m]},approves:x.current.ytSwapPaymentToken?{[x.current.ytSwapPaymentToken]:m}:{},spender:t.vault,onTxSuccess:()=>{n(""),R()}})]})}function BribeTit(e){return(0,a.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,a.jsx)(I.cL,{symbol:"GreenDot",size:14}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name})]})}function LntVaultPools(e){var t;let{vc:s}=e,[n,r]=(0,f.useState)(!1),c=function(e){let t=(0,u.o)(t=>{let s=t.sliceLntVaultsStore.vaults[e];if(!s||s.epochCount<=0n)return[];let a=x().range(1,parseInt((s.epochCount+1n).toString())).reverse(),n=t.sliceLntVaultsStore.epoches;return a.map(t=>n["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceLntVaultsStore.vaults.".concat(e),"sliceLntVaultsStore.epoches"]),s=(0,u.o)(t=>t.sliceLntVaultsStore.userEpoches[e]||[],["sliceLntVaultsStore.userEpoches.".concat(e)]);return(0,f.useMemo)(()=>{let e=s.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,o.Yb)({...t,...e[t.epochId.toString()]||{opt1:[],opt2:[]}},0n))},[t,s])}(s.vault),d=(0,f.useMemo)(()=>(console.info("epochesData:",c),n?c.filter(e=>e.opt1.reduce((e,t)=>e+t.earned,0n)>0n||e.opt2.reduce((e,t)=>e+t.earned,0n)>0n||e.userClaimableYTPoints>0n):c),[c,n]),[m,p]=(0,T.Z)(),[v,g]=(0,f.useState)(null===(t=d[0])||void 0===t?void 0:t.epochId),j=(0,f.useMemo)(()=>v?d.find(e=>e.epochId==v):d[0],[d,v]),b=(null==j?void 0:j.userBalanceYToken)||0n,N=(null==j?void 0:j.userYTPoints)||0n,y=(null==j?void 0:j.userClaimableYTPoints)||0n,onRowClick=e=>{var t;g(null===(t=d[e])||void 0===t?void 0:t.epochId)},w=(null==j?void 0:j.opt2)||[];null==j||j.opt1;let S=useUpLntVaultForUserAction(s);return(0,a.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,a.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:m,children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,a.jsx)("span",{children:"My Pool Only"}),(0,a.jsx)(R.r,{checked:n,onChange:r})]}),(0,a.jsx)(L.aV,{className:d.length>6?"pr-5":"",width:p.width,height:280,rowHeight:e=>{let{index:t}=e;return t<d.length-1?76:56},overscanRowCount:6,rowCount:d.length,rowRenderer:function(e){let{key:t,style:s,index:n}=e,l=d[n],i="".concat((0,o.G$)(1000n*l.startTime),"-").concat((0,o.G$)((l.startTime+l.duration)*1000n));return(0,a.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,a.jsxs)("div",{className:(0,o.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<d.length-1?"mb-[20px]":""),children:[(0,a.jsxs)("div",{className:"text-sm",children:["Epoch ",d[n].epochId.toString()]}),(0,a.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:i})]})},t)}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,a.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==j?void 0:j.epochId)||1n).toString()]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-20 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"YT Balance"}),(0,a.jsx)("span",{className:"text-xs dark:text-white/60",children:(0,h.d)(b)})]}),(0,a.jsxs)("div",{className:"flex items-center relative",children:[(0,a.jsx)("span",{className:"text-sm",children:"YT Points"}),(0,a.jsx)("span",{className:" dark:text-white/60 ml-16",children:(0,h.d)(N,void 0,23)}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,a.jsx)("span",{className:"dark:text-white/60",children:"Claimable"}),(0,a.jsx)("span",{children:(0,h.d)(y,void 0,23)})]}),(0,a.jsx)(V.v,{className:"w-28 ml-auto",tx:"Claim",disabled:!j,confirmations:i.EI,config:{abi:l.Ww,address:null==j?void 0:j.ytRewardsPoolOpt2,functionName:"collectYt"},onTxSuccess:()=>{S()}})]}),w.length>0&&(0,a.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,a.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,a.jsx)(BribeTit,{name:e.symbol}),(0,a.jsx)("div",{className:"absolute left-1/2",children:(0,h.d)(e.earned)})]},e.token)),(0,a.jsx)("span",{className:"absolute left-0 top-0",children:"Bonus base on YT Points"}),(0,a.jsx)("span",{className:"absolute left-1/2 top-0 dark:text-white/60",children:"Claimable"}),(0,a.jsx)(V.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!j,confirmations:i.EI,config:{abi:l.Ww,address:null==j?void 0:j.ytRewardsPoolOpt2,functionName:"getRewards"},onTxSuccess:()=>{S()}})]})]})]})]})]})}function LntVaultDeposit(e){let{vc:t,onSuccess:s}=e,n=useLntVault(t.vault),[r,c]=(0,k.Z)({}),d=x().keys(r).filter(e=>r[e]).map(e=>BigInt(e)),u=(0,v.b7)(t.asset),m=useUpLntVaultForUserAction(t);return(0,a.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5",children:[(0,a.jsx)("div",{className:"w-full text-start",children:"Licenses ID"}),(0,a.jsx)("div",{className:"w-[32rem] h-72 overflow-y-auto",children:(0,a.jsx)("div",{className:"w-full gap-2 grid grid-cols-4 ",children:u.map(e=>(0,a.jsxs)("div",{className:(0,o.cn)("flex gap-1 items-center cursor-pointer",{"text-primary":r[e.toString()]}),onClick:()=>c({[e.toString()]:!r[e.toString()]}),children:[(0,a.jsx)("div",{className:(0,o.cn)("w-3 h-3 border border-black/20 bg-[#EBEBEB] rounded-full",{"bg-primary":r[e.toString()]})}),"#",e.toString()]},e.toString()))})}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("span",{children:"Receive"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-4xl font-medium mr-1",children:(0,h.d)(function(e,t){if(0==t)return 0n;let s=BigInt(Math.round(x().now()/1e3))+e.NftDepositLeadingTime+1n;return calcVtAmountBy(e,s)*BigInt(t)}(n,d.length))}),"VT"]})]}),(0,a.jsx)(V.L,{tx:"Deposit",approves:{[t.asset]:!0},spender:t.vault,confirmations:i.EI,onTxSuccess:()=>{let e={};d.forEach(t=>{e[t.toString()]=!1}),c(e),s(),m()},config:{abi:l.qU,address:t.vault,functionName:"batchDepositNft",enabled:d.length>0,args:[d]}}),(0,a.jsxs)("div",{children:["Wait Time: ",(0,o.Y)(1000n*n.NftDepositLeadingTime)]}),(0,a.jsx)("div",{children:"Please claim VT in the ‘History Activities’ section."})]})}function LntVaultWithdraw(e){var t;let{vc:s,onSuccess:n}=e,r=useLntVault(s.vault),[c,d]=(0,k.Z)({}),u=x().keys(c).filter(e=>c[e]).map(e=>BigInt(e)),m=useLntVaultNftStat(s.vault).filter(e=>"DepositedClaimed"==e.stat),f=m.map(e=>e.nftTokenId);m.filter(e=>c["".concat(e.nftTokenId)]);let p=useUpLntVaultForUserAction(s),g=(0,v.ln)(),j=r.epochCount>0n?(r.current.startTime+r.current.duration)*1000n-BigInt(x().now()):0n,b=j>1000n*r.NftRedeemWaitingPeriod?j:1000n*r.NftRedeemWaitingPeriod;return(0,a.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5",children:[(0,a.jsx)("div",{className:"w-full text-start",children:"Licenses ID"}),(0,a.jsx)("div",{className:"w-[32rem] h-72 overflow-y-auto",children:(0,a.jsx)("div",{className:"w-full gap-2 grid grid-cols-4 ",children:f.map(e=>(0,a.jsxs)("div",{className:(0,o.cn)("flex gap-1 items-center cursor-pointer",{"text-primary":c[e.toString()]}),onClick:()=>d({[e.toString()]:!c[e.toString()]}),children:[(0,a.jsx)("div",{className:(0,o.cn)("w-3 h-3 border border-black/20 bg-[#EBEBEB] rounded-full",{"bg-primary":c[e.toString()]})}),"#",e.toString()]},e.toString()))})}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("span",{children:"Need to Burn"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-4xl font-medium mr-1",children:(0,h.d)(0==(t=u.length)?0n:calcVtAmountBy(r,BigInt(Math.round(x().now()/1e3)))*BigInt(t))}),"VT"]}),(0,a.jsxs)("div",{children:["VT Balance: ",(0,h.d)(g[s.vToken])]})]}),(0,a.jsx)(V.L,{tx:"Request",confirmations:i.EI,onTxSuccess:()=>{let e={};u.forEach(t=>{e[t.toString()]=!1}),d(e),n(),p()},config:{abi:l.qU,address:s.vault,functionName:"batchRedeemNft",enabled:u.length>0,args:[u]}}),(0,a.jsxs)("div",{children:["Wait Time: ",(0,o.Y)(b)]}),(0,a.jsx)("div",{children:"Please claim Licenses in the ‘History Activities’ section."})]})}function LntVesting(e){let{vc:t}=e,s=useLntVault(t.vault),[{swap:n,receive:r},c]=(0,k.Z)({swap:{token:t.asset,symbol:t.assetSymbol},receive:{token:t.vToken,symbol:t.vTokenSymbol}}),[d,u]=(0,f.useState)("");(0,o.su)(d);let m=(0,f.useRef)(null),g=(0,f.useRef)(null),j=useLntVaultNftStat(t.vault),b=(0,v.A5)(t.vToken),w=j.filter(e=>"Deposited"==e.stat),S=j.filter(e=>"Redeemed"==e.stat),{address:T}=(0,p.m)(),{data:L,refetch:P}=(0,F.D2)({query:{enabled:!!T&&!!s.current.ytSwapPaymentToken},abi:l.zn,address:t.nftStakingPool,functionName:"earned",args:[T,s.current.ytSwapPaymentToken]}),B=useUpLntVaultForUserAction(t);return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-5 text-sm font-medium",children:[(0,a.jsxs)("div",{className:"card lg:col-span-3 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:["Deposited",(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-base font-semibold",children:j.length})," Licenses"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:["Claimable Fees",(0,a.jsx)(I.cL,{symbol:t.vestingSymbol,size:16,className:"ml-auto"}),(0,a.jsx)("span",{className:"text-base font-semibold ml-1",children:(0,h.d)(L)}),(0,a.jsx)(V.v,{className:"w-20 ml-4",tx:"Claim",onTxSuccess:()=>{P(),B()},confirmations:i.EI,config:{abi:l.zn,address:t.nftStakingPool,functionName:"getRewards"}})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-5 items-center",children:[(0,a.jsx)(A.o,{triggerRef:m,triggerProps:{className:"flex-1"},trigger:(0,a.jsx)(q.k,{className:"flex-1",children:"Deposit"}),children:(0,a.jsx)(LntVaultDeposit,{vc:t,onSuccess:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()}})}),(0,a.jsx)(A.o,{triggerRef:g,triggerProps:{className:"flex-1"},trigger:(0,a.jsx)(q.k,{className:"flex-1",children:"Withdraw"}),children:(0,a.jsx)(LntVaultWithdraw,{vc:t,onSuccess:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()}})})]})]}),(0,a.jsxs)("div",{className:"card lg:order-1 flex flex-col gap-2 text-center",children:[(0,a.jsx)("div",{children:"Total Deposited"}),(0,a.jsx)("div",{className:"text-base font-semibold",children:s.nftCount.toString()}),(0,a.jsx)("div",{className:"opacity-70",children:"Licenses"})]}),(0,a.jsxs)("div",{className:"card lg:order-1 flex flex-col gap-2 text-center",children:[(0,a.jsx)("div",{children:"vERA Total Supply"}),(0,a.jsx)("div",{className:"text-base font-semibold",children:(0,h.d)(b)}),(0,a.jsx)("div",{className:"opacity-70",children:"$3,121,000"})]}),(0,a.jsxs)("div",{className:"card lg:order-1 flex flex-col gap-2 text-center",children:[(0,a.jsx)("div",{children:"Buyback"}),(0,a.jsx)("div",{className:"text-base font-semibold",children:"921,000,231.222"}),(0,a.jsxs)("div",{className:"flex w-full items-center ",children:[(0,a.jsx)("div",{className:"flex w-full h-3 bg-gray-200 rounded-full ",children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(40,"%"),background:"linear-gradient(90deg, #C2B7FD 0%, #6466F1 100%)"}})}),(0,a.jsxs)("div",{className:"text-sm  text-right opacity-60 ml-[10px]",children:[40,"%"]})]})]}),(0,a.jsxs)("div",{className:"card lg:row-span-2 lg:col-span-2 flex flex-col gap-2 justify-between items-center",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-base font-semibold mb-1",children:"Swap"}),(0,a.jsx)(C.W,{asset:n.symbol,amount:d,balance:(0,o.su)("123.4"),setAmount:u})]}),(0,a.jsx)("div",{className:"rounded-full w-8 h-8 border-2 border-primary text-primary hover:opacity-60 cursor-pointer text-2xl flex justify-center items-center",children:(0,a.jsx)(y.y5_,{className:"m-auto"})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-base font-semibold mb-1",children:"Receive"}),(0,a.jsx)(C.W,{asset:r.symbol,disable:!0,amount:"124.123"}),(0,a.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.k$E,{className:"text-sm text-primary cursor-pointer inline-block"}),(0,a.jsx)("span",{children:"Price: 1".concat(n.symbol," = 0.73").concat(r.symbol)})]}),(0,a.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,o.Jh)(0n,10,2))})]})]})]})]}),(0,a.jsx)("div",{children:"Historical Activities"}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{children:"Deposit"}),(0,a.jsx)(D.ZP,{header:["Licenses ID","Start Time","Due Time","Tx","VT Minted",""],data:w.map(e=>["#".concat(e.nftTokenId),(0,o.G$)(1000n*e.startTime,o.mv.ALL),(0,o.G$)(1000n*e.claimableTime,o.mv.ALL),(0,o.lS)(e.tx),(0,h.d)(calcItemVtAmount(s,e)),(0,a.jsx)(V.v,{tx:"Claim",className:"w-32",onTxSuccess:B,disabled:!s.initialized||1000n*e.claimableTime>BigInt(x().now()),confirmations:i.EI,config:{abi:l.qU,address:t.vault,functionName:"claimDepositNft",args:[e.nftTokenId]}},"claim")])})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{children:"Withdraw"}),(0,a.jsx)(D.ZP,{header:["Licenses ID","Start Time","Due Time","Tx","VT Burned",""],data:S.map(e=>["#".concat(e.nftTokenId),(0,o.G$)(1000n*e.startTime,o.mv.ALL),(0,o.G$)(1000n*e.claimableTime,o.mv.ALL),(0,o.lS)(e.tx),(0,h.d)(calcItemVtAmount(s,e)),(0,a.jsx)(V.v,{tx:"Claim",className:"w-32",onTxSuccess:B,disabled:!s.initialized||1000n*e.claimableTime>BigInt(x().now()),confirmations:i.EI,config:{abi:l.qU,address:t.vault,functionName:"claimRedeemNft",args:[e.nftTokenId]}},"claim")])})]})]})}function LntYield(e){let{vc:t}=e,s=useLntVault(t.vault);return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,a.jsx)(LntVaultYInfo,{vc:t}),(0,a.jsx)(LntVaultEpochYtPrices,{vc:t,epochId:s.epochCount}),(0,a.jsx)(LntVaultYTrans,{vc:t}),(0,a.jsx)(LntVaultPools,{vc:t})]})}function LntOperators(e){let{vc:t}=e;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(D.ZP,{header:["Operator","Address","Delegted","Fill rate(7d)","Status"],data:[1,2,3,4,5].map(e=>["Operator".concat(e),"0x29ef789...df678","".concat(9*e),"99%",(0,a.jsx)("div",{className:"px-2 py-1 rounded-xl bg-green-400 w-fit text-white dark:text-black",children:"Active"},"status")])})})}function LNTVaultCard(e){var t;let{vc:s}=e,n=(0,b.useRouter)(),l=useLntVault(s.vault),i="flex flex-col gap-1 font-medium text-sm",r="opacity-60 text-xs font-semibold",c=(0,v.A5)(s.vToken);return(0,a.jsxs)("div",{className:(0,o.cn)("card  overflow-hidden flex p-6 items-center justify-between cursor-pointer",{}),onClick:()=>n.push("/lnt-vaults?vault=".concat(s.vault)),children:[(0,a.jsx)("img",{src:"/logo-alt.svg"}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("div",{className:r,children:"Total Delegated"}),(0,a.jsx)("div",{children:(0,h.d)(null==l?void 0:l.nftCount,0,0)})]}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("div",{className:r,children:"VT Supply"}),(0,a.jsx)("div",{children:(0,h.d)(c)})]}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("div",{className:r,children:"YT Supply"}),(0,a.jsx)("div",{children:(0,h.d)(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.yTokenTotalSupply)})]}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("div",{className:r,children:"VT Buyback"}),(0,a.jsxs)("div",{className:"flex w-36 items-center ",children:[(0,a.jsx)("div",{className:"flex w-full h-4 bg-gray-200 rounded-full ",children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(40,"%"),background:"linear-gradient(90deg, #C2B7FD 0%, #6466F1 100%)"}})}),(0,a.jsxs)("div",{className:"text-sm  text-right opacity-60 ml-[10px]",children:[40,"%"]})]})]})]})}var U=s(44939),O=s(16738),W=s(31889),M=s(62600),Z=s(59781);function LntVaultPage(e){var t;let{vc:s,tab:n}=e,{address:l}=(0,p.m)(),i=useLntVault(s.vault),r=(0,c.p)();(0,g.a)({queryKey:["UpdateLntVaultDetails",s,l,i.epochCount.toString()],enabled:i.epochCount>0n,queryFn:async()=>!!l&&(await Promise.all([u.w.getState().sliceLntVaultsStore.updateEpoches(r,s),u.w.getState().sliceLntVaultsStore.updateUserEpoches(r,s,l)]),!0)}),(0,g.a)({queryKey:["UpdateUserLntVault",s,l,i.epochCount.toString()],queryFn:async()=>!!l&&(await Promise.all([u.w.getState().sliceLntVaultsStore.updateUserNftStat(r,s,l),u.w.getState().sliceTokenStore.updateNftBalance(r,[s.asset],l)]),!0)});let d=(0,b.useRouter)(),m=[{tab:"Vesting Token",content:(0,a.jsx)(LntVesting,{vc:s})},{tab:"Yield Token",content:(0,a.jsx)(LntYield,{vc:s})},{tab:"Node Operators",content:(0,a.jsx)(LntOperators,{vc:s})}],x=(null===(t=m.find(e=>(0,o.pi)(e.tab)==n))||void 0===t?void 0:t.tab)||m[0].tab;return(0,a.jsx)(O.x,{listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",currentTab:x,onTabChange:e=>(0,Z.p2)(d,s.vault,e),data:m})}function Vaults(){let e=(0,c.p)(),t=(i.f_[e]||[]).filter(e=>!e.onEnv||e.onEnv.includes(r.Vi)),s=(0,b.useSearchParams)(),n=s.get("vault"),l=s.get("tab"),o=t.find(e=>e.vault==n);return(0,W.tK)(),(0,a.jsx)(U.E,{children:(0,a.jsx)("div",{className:"w-full max-w-[1160px] px-4 mx-auto md:pb-8",children:o?(0,a.jsx)(LntVaultPage,{vc:o,tab:l}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"page-title",children:"LNT-Vaults"}),(0,a.jsx)(M.r,{numItems:1,className:"gap-5 mt-4",children:t.map((e,t)=>(0,a.jsx)(LNTVaultCard,{vc:e},"group_vault_item_".concat(t)))})]})})})}},15506:function(e,t,s){"use strict";s.d(t,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),s(22818);var a=s(83978),n=s.n(a);s(64103);var l=s(30308),i=s(59307),r=s(93108);let c=(0,r.Ue)(e=>({time:n().now(),update:()=>{e({time:n().now()})}}));function useWandContractRead(e){let{time:t}=c();return(0,l.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}function useWandContractReads(e){let{time:t}=c();return(0,i.N)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},69708:function(e,t,s){e.exports=s(53240)},58409:function(e,t,s){"use strict";var a=s(64103);t.Z=function(e){void 0===e&&(e={});var t=(0,a.useState)(e),s=t[0],n=t[1];return[s,(0,a.useCallback)(function(e){n(function(t){return Object.assign({},t,e instanceof Function?e(t):e)})},[])]}},25e3:function(e,t,s){"use strict";s.d(t,{L:function(){return readContract}});var a=s(12537),n=s(96685);function readContract(e,t){let{chainId:s,...l}=t,i=e.getClient({chainId:s}),r=(0,n.s)(i,a.L,"readContract");return r(l)}},64828:function(e,t,s){"use strict";s.d(t,{J:function(){return readContracts}});var a=s(33066),n=s(74659),l=s(96685);async function multicall_multicall(e,t){let{allowFailure:s=!0,chainId:a,contracts:i,...r}=t,c=e.getClient({chainId:a}),o=(0,l.s)(c,n.A,"multicall");return o({allowFailure:s,contracts:i,...r})}var i=s(25e3);async function readContracts(e,t){let{allowFailure:s=!0,blockNumber:n,blockTag:l,...r}=t,c=t.contracts;try{let t=c.reduce((t,s,a)=>{let n=s.chainId??e.state.chainId;return{...t,[n]:[...t[n]||[],{contract:s,index:a}]}},{}),a=(await Promise.all(Object.entries(t).map(([t,a])=>multicall_multicall(e,{...r,allowFailure:s,blockNumber:n,blockTag:l,chainId:parseInt(t),contracts:a.map(({contract:e})=>e)})))).flat(),i=Object.values(t).flatMap(e=>e.map(({index:e})=>e));return a.reduce((e,t,s)=>(e&&(e[i[s]]=t),e),[])}catch(t){if(t instanceof a.uq)throw t;let promises=()=>c.map(t=>(0,i.L)(e,{...t,blockNumber:n,blockTag:l}));if(s)return(await Promise.allSettled(promises())).map(e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"});return await Promise.all(promises())}}},96685:function(e,t,s){"use strict";function getAction(e,t,s){let a=e[t.name];if("function"==typeof a)return a;let n=e[s];return"function"==typeof n?n:s=>t(e,s)}s.d(t,{s:function(){return getAction}})},30308:function(e,t,s){"use strict";s.d(t,{u:function(){return useReadContract}});var a=s(25e3),n=s(55046),l=s(44178),i=s(90283),r=s(57728);function useReadContract(e={}){let{abi:t,address:s,functionName:c,query:o={}}=e,d=(0,r.Z)(e),u=(0,i.x)({config:d}),m=function(e,t={}){return{async queryFn({queryKey:s}){let n=t.abi;if(!n)throw Error("abi is required");let{address:l,functionName:i,scopeKey:r,...c}=s[1];if(!l)throw Error("address is required");if(!i)throw Error("functionName is required");let o=c.args;return(0,a.L)(e,{abi:n,address:l,functionName:i,args:o,...c})},queryKey:function(e={}){let{abi:t,...s}=e;return["readContract",(0,n.O)(s)]}(t)}}(d,{...e,chainId:e.chainId??u}),x=!!(s&&t&&c&&(o.enabled??!0));return(0,l.aM)({...o,...m,enabled:x,structuralSharing:o.structuralSharing??l.if})}},59307:function(e,t,s){"use strict";s.d(t,{N:function(){return useReadContracts}});var a=s(64828),n=s(55046),l=s(64103),i=s(44178),r=s(90283),c=s(57728);function useReadContracts(e={}){let{contracts:t=[],query:s={}}=e,o=(0,c.Z)(e),d=(0,r.x)({config:o}),u=function(e,t={}){return{async queryFn({queryKey:s}){let n=[],l=s[1].contracts.length;for(let e=0;e<l;e++){let a=s[1].contracts[e],l=t.contracts?.[e].abi;n.push({...a,abi:l})}let{scopeKey:i,...r}=s[1];return(0,a.J)(e,{...r,contracts:n})},queryKey:function(e={}){let t=[];for(let s of e.contracts??[]){let{abi:a,...n}=s;t.push({...n,chainId:n.chainId??e.chainId})}return["readContracts",(0,n.O)({...e,contracts:t})]}(t)}}(o,{...e,chainId:d}),m=(0,l.useMemo)(()=>{let e=!1;for(let s of t){let{abi:t,address:a,functionName:n}=s;if(!t||!a||!n){e=!1;break}e=!0}return!!(e&&(s.enabled??!0))},[t,s.enabled]);return(0,i.aM)({...u,...s,enabled:m,structuralSharing:s.structuralSharing??i.if})}}},function(e){e.O(0,[7495,4881,7622,7073,4105,3560,3183,3606,4408,8410,8880,8750,2355,313,6499,2831,3514,4058,7093,604,1744],function(){return e(e.s=18466)}),_N_E=e.O()}]);