(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9777],{35875:function(e,a,t){Promise.resolve().then(t.bind(t,41033))},41033:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return AdminPage}});var s=t(52987),r=t(57834),c=t(61387),i=t(38070),n=t(26694),o=t(77087),d=t(11914),l=t(24113),u=t(46881),m=t(55645),v=t(68705),f=t(61650),h=t(53414),x=t(13854),p=t(62013),T=t(64370),N=t(77317),b=t(58409),j=t(31236),g=t(35164),w=t(52468);function UpdateVaultParams(e){let{paramList:a,vault:t,protocoSettingAddress:i,chain:n}=e,d=(0,N.useMemo)(()=>a.map((e,a)=>({...e,show:"".concat(e.show,"(").concat(e.value,")"),key:"param:".concat(a)})),[a]),[{value:m,param:v},f]=(0,b.Z)({value:"",param:d[0]}),{data:h,refetch:U,isFetching:k}=(0,T.a)({queryKey:["vualtParams:",n,t,a],queryFn:async()=>{let e={},s=(0,p.B)(n);return a.forEach(a=>{e["".concat(a.show,"(").concat(a.value,")")]=s.readContract({abi:u.$4,address:i,functionName:"vaultParamValue",args:[t,(0,j.$G)(a.value,{size:32})]}).then(e=>(0,g.b)(e||0n,"number"==typeof a.units?a.units:10))}),(0,x.S0)(e)}}),y="number"==typeof v.units?v.units:10;return(0,s.jsxs)(c.Ak,{tit:"Vault Param Vaule",children:[(0,s.jsx)(l.G,{className:"w-full animitem z-50",itemClassName:"p-3",currentClassName:"p-3",listClassName:"max-h-[350px] overflow-y-auto",options:d,onChange:e=>f({param:e})}),(0,s.jsx)("input",{value:m.toString(),onChange:e=>{let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");f({value:a})},type:"number",className:(0,x.cn)(c.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,s.jsxs)("div",{className:"text-sm flex flex-col items-start min-h-[300px] whitespace-pre-wrap",children:[k&&(0,s.jsx)(o.$,{className:"text-xl"}),JSON.stringify(h,void 0,2)]}),(0,s.jsx)(r.vZ,{tx:"Write",config:{abi:u.$4,address:i,functionName:"updateVaultParamValue",args:[t,(0,j.$G)(v.value,{size:32}),(0,w.v)(m,y)]},onTxSuccess:()=>{f({value:""}),U()},className:" w-full flex items-center justify-center gap-4"})]})}let U=[{show:"",value:"VTC",units:18},{show:"",value:"BuybackDiscountThreshold",units:18},{show:"",value:"BuybackProfitCommissionRate",units:18},{show:"",value:"initialAnchor",units:18},{show:"",value:"scalarRoot",units:18},{show:"",value:"vtSwapFee",units:18},{show:"",value:"R",units:18}];function AdminPage(){let e=f.f,a=e.map(e=>({key:e.vault,show:"LNT-Vault(".concat(e.vault,")"),vc:e})),[t,r]=(0,N.useState)(a[0]),o=a.length>0?t:void 0;return(0,s.jsx)(n.E,{children:(0,s.jsxs)("div",{className:"w-full flex",children:[(0,s.jsx)(i.a,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full mx-auto px-5",children:[(0,s.jsx)("div",{className:"animitem text-lg whitespace-pre-wrap p-2 bg-primary/20 rounded-xl",children:JSON.stringify({Decimal18:"000000000000000000"},void 0,2)}),(0,s.jsx)(l.G,{className:"w-full animitem z-50",itemClassName:"p-3",currentClassName:"p-3",options:a,onChange:r}),o&&(0,s.jsxs)(d.Wg,{chains:[o.vc.chain],children:[(0,s.jsx)(c._t,{keys:[o.vc.vault],infos:()=>(0,p.B)(o.vc.chain).readContract({abi:m.KA,code:v.f,functionName:"queryLntVault",args:[o.vc.vault]})}),o.vc.protocalSettings&&(0,s.jsx)(UpdateVaultParams,{chain:o.vc.chain,vault:o.vc.vault,protocoSettingAddress:o.vc.protocalSettings,paramList:U}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"withdrawProfitT",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"close",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateAutoBuyback",address:o.vc.vault,infos:()=>(0,p.B)(o.vc.chain).readContract({abi:m.qU,address:o.vc.vault,functionName:"autoBuyback"})}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateCheckerNode",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"setUser",address:o.vc.vault,argsDef:["","",(2n**63n).toString()]}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"batchSetUser",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"removeLastSetUserRecords",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"buybackVT",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateVTPriceTime",address:o.vc.vault,infos:()=>(0,x.S0)({vtPriceStartTime:(0,p.B)(o.vc.chain).readContract({abi:m.qU,address:o.vc.vault,functionName:"vtPriceStartTime"}),vtPriceEndTime:(0,p.B)(o.vc.chain).readContract({abi:m.qU,address:o.vc.vault,functionName:"vtPriceEndTime"})})}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateVTAOracle",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateRedeemStrategy",address:o.vc.vault,infos:()=>(0,p.B)(o.vc.chain).readContract({abi:m.qU,address:o.vc.vault,functionName:"redeemStrategy"})}),(0,s.jsx)(c.UT,{abi:m.qU,functionName:"updateVTSwapHook",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:m.eB,functionName:"transferOwnership",address:o.vc.protocol}),(0,s.jsx)(c.UT,{abi:m.eB,functionName:"acceptOwnership",address:o.vc.protocol}),(0,h.Jg)(o.vc.chain)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:u.Oq,tit:"mockErc721 setTester",functionName:"setTester",address:o.vc.asset}),(0,s.jsx)(c.UT,{abi:u.Oq,tit:"mintMockErc721 (".concat(o.vc.asset,")"),functionName:"safeMint",address:o.vc.asset})]}),o.vc.AethirNFT&&(0,s.jsx)(c.us,{tit:"MockAethirNFT",abi:m.xV,address:o.vc.AethirNFT}),o.vc.AethirVToracle&&(0,s.jsx)(c.us,{tit:"AethirVToracle",abi:m.le,address:o.vc.AethirVToracle}),o.vc.AethirRedeemStrategy&&(0,s.jsx)(c.us,{tit:"AethirRedeemStrategy",abi:m.T_,address:o.vc.AethirRedeemStrategy,itemInfos:{updateRedeemStrategy:{ONLY_WITHIN_REDEEM_TIME_WINDOW:0,ALLOWED:1,FORBIDDEN:2},redeemTimeWindows:async()=>{let e=(0,p.B)(o.vc.chain),a=await e.readContract({abi:m.T_,address:o.vc.AethirRedeemStrategy,functionName:"redeemTimeWindowsCount"}),t=await e.readContract({abi:m.T_,address:o.vc.AethirRedeemStrategy,functionName:"redeemTimeWindows",args:[0n,a]});return t[0].map((e,a)=>"".concat((0,x.G$)(1000n*e,x.mv.ALL),"       --   ").concat(t[1][a]))}}}),o.vc.MockaVTOracle&&(0,s.jsx)(c.UT,{abi:m.k2,tit:"set aVT mockaVToracle",functionName:"setaVT",address:o.vc.MockaVTOracle}),o.vc.MockNodeDelegator&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:m.zK,functionName:"addOperator",address:o.vc.MockNodeDelegator}),(0,s.jsx)(c.UT,{abi:m.zK,functionName:"removeOperator",address:o.vc.MockNodeDelegator})]}),o.vc.MockT&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:u.vJ,tit:"mockT setTester",functionName:"setTester",address:o.vc.MockT}),(0,s.jsx)(c.UT,{abi:u.vJ,tit:"mintT (".concat(o.vc.MockT,")"),functionName:"mint",address:o.vc.MockT})]}),o.vc.MockRewardDistribuitor&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:m.j0,tit:"addReward (".concat(o.vc.MockRewardDistribuitor,")"),functionName:"addReward",address:o.vc.MockRewardDistribuitor}),(0,s.jsx)(c.UT,{abi:m.j0,tit:"addT (".concat(o.vc.MockRewardDistribuitor,")"),functionName:"addT",address:o.vc.MockRewardDistribuitor})]}),(0,s.jsx)(c.Tt,{})]})]})]})})}},24113:function(e,a,t){"use strict";t.d(a,{G:function(){return SimpleSelect}});var s=t(52987),r=t(13854),c=t(77317),i=t(94029),n=t(23449);function SimpleSelect(e){let{options:a,value:t,defValue:o,onChange:d,className:l,itemClassName:u,currentClassName:m,listClassName:v}=e,[f,h]=(0,c.useState)(!1),[x,p]=(0,c.useState)(o||a[0]);(0,c.useEffect)(()=>{!a.length||x&&a.find(e=>e!==x)||(p(o||a[0]),null==d||d(o||a[0]))},[a,o,x]);let T=t||x,N=(0,c.useRef)(null);(0,n.Z)(N,()=>h(!1));let renderItem=e=>e?"string"==typeof e?e:e.show:null;return 0==a.length?null:(0,s.jsxs)("div",{ref:N,className:(0,r.cn)("w-auto rounded relative border-gray-400/60 border dark:bg-white/5 bg-white select-none cursor-pointer",l),children:[(0,s.jsxs)("div",{className:(0,r.cn)("flex items-center justify-between gap-5 px-2 py-1",m),onClick:()=>h(!f),children:[(0,s.jsx)("div",{className:"flex items-center",children:renderItem(T)}),f?(0,s.jsx)(i.E0f,{}):(0,s.jsx)(i.IAR,{})]}),f&&(0,s.jsx)("div",{className:(0,r.cn)("mt-1 absolute overflow-hidden z-50 top-full w-full right-0 flex flex-col rounded bg-white dark:bg-black border-gray-400/60 border",v),children:a.map(e=>(0,s.jsx)("div",{className:(0,r.cn)("w-auto cursor-pointer px-2 py-1 hover:bg-primary/30",u),onClick:()=>{p(e),null==d||d(e),h(!1)},children:renderItem(e)},"string"==typeof e?e:e.key))})]})}}},function(e){e.O(0,[2257,9891,4345,6358,8109,5097,6445,893,4354,7459,8468,1331,3262,3099,2153,9054,3132,7834,7479,1387,4195,6338,1744],function(){return e(e.s=35875)}),_N_E=e.O()}]);