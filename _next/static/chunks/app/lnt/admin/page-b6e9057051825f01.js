(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9777],{35875:function(e,a,t){Promise.resolve().then(t.bind(t,41033))},41033:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return AdminPage}});var s=t(52987),r=t(57834),c=t(61387),n=t(38070),i=t(26694),o=t(77087),u=t(11914),d=t(24113),l=t(46881),v=t(55645),m=t(68705),f=t(61650),h=t(53414),x=t(13854),p=t(62013),T=t(64370),N=t(77317),b=t(58409),g=t(31236),j=t(35164),w=t(52468);function UpdateVaultParams(e){let{paramList:a,vault:t,protocoSettingAddress:n,chain:i}=e,u=(0,N.useMemo)(()=>a.map((e,a)=>({...e,show:"".concat(e.show,"(").concat(e.value,")"),key:"param:".concat(a)})),[a]),[{value:v,param:m},f]=(0,b.Z)({value:"",param:u[0]}),{data:h,refetch:U,isFetching:k}=(0,T.a)({queryKey:["vualtParams:",i,t,a],queryFn:async()=>{let e={},s=(0,p.B)(i);return a.forEach(a=>{e["".concat(a.show,"(").concat(a.value,")")]=s.readContract({abi:l.$4,address:n,functionName:"vaultParamValue",args:[t,(0,g.$G)(a.value,{size:32})]}).then(e=>(0,j.b)(e||0n,"number"==typeof a.units?a.units:10))}),(0,x.S0)(e)}}),y="number"==typeof m.units?m.units:10;return(0,s.jsxs)(c.Ak,{tit:"Vault Param Vaule",children:[(0,s.jsx)(d.G,{className:"w-full animitem z-50",itemClassName:"p-3",currentClassName:"p-3",listClassName:"max-h-[350px] overflow-y-auto",options:u,onChange:e=>f({param:e})}),(0,s.jsx)("input",{value:v.toString(),onChange:e=>{let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");f({value:a})},type:"number",className:(0,x.cn)(c.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,s.jsxs)("div",{className:"text-sm flex flex-col items-start min-h-[300px] whitespace-pre-wrap",children:[k&&(0,s.jsx)(o.$,{className:"text-xl"}),JSON.stringify(h,void 0,2)]}),(0,s.jsx)(r.vZ,{tx:"Write",config:{abi:l.$4,address:n,functionName:"updateVaultParamValue",args:[t,(0,g.$G)(m.value,{size:32}),(0,w.v)(v,y)]},onTxSuccess:()=>{f({value:""}),U()},className:" w-full flex items-center justify-center gap-4"})]})}let U=[{show:"",value:"VTC",units:18},{show:"",value:"BuybackDiscountThreshold",units:18},{show:"",value:"BuybackProfitCommissionRate",units:18},{show:"",value:"initialAnchor",units:18},{show:"",value:"scalarRoot",units:18},{show:"",value:"vtSwapFee",units:18},{show:"",value:"R",units:18}];function AdminPage(){let e=f.f,a=e.map(e=>({key:e.vault,show:"LNT-Vault(".concat(e.vault,")"),vc:e})),[t,r]=(0,N.useState)(a[0]),o=a.length>0?t:void 0;return(0,s.jsx)(i.E,{children:(0,s.jsxs)("div",{className:"w-full flex",children:[(0,s.jsx)(n.a,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full mx-auto px-5",children:[(0,s.jsx)("div",{className:"animitem text-lg whitespace-pre-wrap p-2 bg-primary/20 rounded-xl",children:JSON.stringify({Decimal18:"000000000000000000"},void 0,2)}),(0,s.jsx)(d.G,{className:"w-full animitem z-50",itemClassName:"p-3",currentClassName:"p-3",options:a,onChange:r}),o&&(0,s.jsxs)(u.Wg,{chains:[o.vc.chain],children:[(0,s.jsx)(c._t,{keys:[o.vc.vault],infos:()=>(0,p.B)(o.vc.chain).readContract({abi:v.KA,code:m.f,functionName:"queryLntVault",args:[o.vc.vault]})}),o.vc.protocalSettings&&(0,s.jsx)(UpdateVaultParams,{chain:o.vc.chain,vault:o.vc.vault,protocoSettingAddress:o.vc.protocalSettings,paramList:U}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"withdrawProfitT",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"close",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateAutoBuyback",address:o.vc.vault,infos:()=>(0,p.B)(o.vc.chain).readContract({abi:v.qU,address:o.vc.vault,functionName:"autoBuyback"})}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateCheckerNode",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"setUser",address:o.vc.vault,argsDef:["","",(2n**64n).toString()]}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"batchSetUser",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"removeLastSetUserRecords",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"buybackVT",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateVTPriceTime",address:o.vc.vault,infos:()=>(0,x.S0)({vtPriceStartTime:(0,p.B)(o.vc.chain).readContract({abi:v.qU,address:o.vc.vault,functionName:"vtPriceStartTime"}),vtPriceEndTime:(0,p.B)(o.vc.chain).readContract({abi:v.qU,address:o.vc.vault,functionName:"vtPriceEndTime"})})}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateVTAOracle",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateRedeemStrategy",address:o.vc.vault,infos:()=>(0,p.B)(o.vc.chain).readContract({abi:v.qU,address:o.vc.vault,functionName:"redeemStrategy"})}),(0,s.jsx)(c.UT,{abi:v.qU,functionName:"updateVTSwapHook",address:o.vc.vault}),(0,s.jsx)(c.UT,{abi:v.eB,functionName:"transferOwnership",address:o.vc.protocol}),(0,s.jsx)(c.UT,{abi:v.eB,functionName:"acceptOwnership",address:o.vc.protocol}),(0,h.Jg)(o.vc.chain)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:l.Oq,tit:"mockErc721 setTester",functionName:"setTester",address:o.vc.asset}),(0,s.jsx)(c.UT,{abi:l.Oq,tit:"mintMockErc721 (".concat(o.vc.asset,")"),functionName:"safeMint",address:o.vc.asset})]}),o.vc.AethirNFT&&(0,s.jsx)(c.us,{tit:"MockAethirNFT",abi:v.xV,address:o.vc.AethirNFT}),o.vc.AethirVToracle&&(0,s.jsx)(c.us,{tit:"AethirVToracle",abi:v.le,address:o.vc.AethirVToracle}),o.vc.AethirRedeemStrategy&&(0,s.jsx)(c.us,{tit:"AethirRedeemStrategy",abi:v.T_,address:o.vc.AethirRedeemStrategy,itemInfos:{updateRedeemStrategy:{ONLY_WITHIN_REDEEM_TIME_WINDOW:0,ALLOWED:1,FORBIDDEN:2},redeemTimeWindows:async()=>{let e=(0,p.B)(o.vc.chain),a=await e.readContract({abi:v.T_,address:o.vc.AethirRedeemStrategy,functionName:"redeemTimeWindowsCount"}),t=await e.readContract({abi:v.T_,address:o.vc.AethirRedeemStrategy,functionName:"redeemTimeWindows",args:[0n,a]});return t[0].map((e,a)=>"".concat((0,x.G$)(1000n*e,x.mv.ALL),"       --   ").concat(t[1][a]))}}}),o.vc.MockaVTOracle&&(0,s.jsx)(c.UT,{abi:v.k2,tit:"set aVT mockaVToracle",functionName:"setaVT",address:o.vc.MockaVTOracle}),o.vc.MockNodeDelegator&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:v.zK,functionName:"addOperator",address:o.vc.MockNodeDelegator}),(0,s.jsx)(c.UT,{abi:v.zK,functionName:"removeOperator",address:o.vc.MockNodeDelegator})]}),o.vc.MockT&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:l.vJ,tit:"mockT setTester",functionName:"setTester",address:o.vc.MockT}),(0,s.jsx)(c.UT,{abi:l.vJ,tit:"mintT (".concat(o.vc.MockT,")"),functionName:"mint",address:o.vc.MockT})]}),o.vc.MockRewardDistribuitor&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.UT,{abi:v.j0,tit:"addReward (".concat(o.vc.MockRewardDistribuitor,")"),functionName:"addReward",address:o.vc.MockRewardDistribuitor}),(0,s.jsx)(c.UT,{abi:v.j0,tit:"addT (".concat(o.vc.MockRewardDistribuitor,")"),functionName:"addT",address:o.vc.MockRewardDistribuitor})]}),(0,s.jsx)(c.Tt,{})]})]})]})})}},24113:function(e,a,t){"use strict";t.d(a,{G:function(){return SimpleSelect}});var s=t(52987),r=t(13854),c=t(77317),n=t(53360),i=t(23449);function SimpleSelect(e){let{options:a,value:t,defValue:o,onChange:u,className:d,itemClassName:l,currentClassName:v,listClassName:m}=e,[f,h]=(0,c.useState)(!1),[x,p]=(0,c.useState)(o||a[0]);(0,c.useEffect)(()=>{!a.length||x&&a.find(e=>e!==x)||(p(o||a[0]),null==u||u(o||a[0]))},[a,o,x]);let T=t||x,N=(0,c.useRef)(null);(0,i.Z)(N,()=>h(!1));let renderItem=e=>e?"string"==typeof e?e:e.show:null;return 0==a.length?null:(0,s.jsxs)("div",{ref:N,className:(0,r.cn)("w-auto rounded relative border-gray-400/60 border dark:bg-white/5 bg-white select-none cursor-pointer",d),children:[(0,s.jsxs)("div",{className:(0,r.cn)("flex items-center justify-between gap-5 px-2 py-1",v),onClick:()=>h(!f),children:[(0,s.jsx)("div",{className:"flex items-center",children:renderItem(T)}),f?(0,s.jsx)(n.E0f,{}):(0,s.jsx)(n.IAR,{})]}),f&&(0,s.jsx)("div",{className:(0,r.cn)("mt-1 absolute overflow-hidden z-50 top-full w-full right-0 flex flex-col rounded bg-white dark:bg-black border-gray-400/60 border",m),children:a.map(e=>(0,s.jsx)("div",{className:(0,r.cn)("w-auto cursor-pointer px-2 py-1 hover:bg-primary/30",l),onClick:()=>{p(e),null==u||u(e),h(!1)},children:renderItem(e)},"string"==typeof e?e:e.key))})]})}},23449:function(e,a,t){"use strict";var s=t(77317),r=t(17695),c=["mousedown","touchstart"];a.Z=function(e,a,t){void 0===t&&(t=c);var n=(0,s.useRef)(a);(0,s.useEffect)(function(){n.current=a},[a]),(0,s.useEffect)(function(){for(var handler=function(a){var t=e.current;t&&!t.contains(a.target)&&n.current(a)},a=0,s=t;a<s.length;a++){var c=s[a];(0,r.on)(document,c,handler)}return function(){for(var e=0,a=t;e<a.length;e++){var s=a[e];(0,r.S1)(document,s,handler)}}},[t,e])}}},function(e){e.O(0,[4881,7495,7622,5294,3979,3113,6115,6445,6532,1348,8468,2437,2111,3099,8628,9054,3132,7834,7479,1387,4195,6338,1744],function(){return e(e.s=35875)}),_N_E=e.O()}]);