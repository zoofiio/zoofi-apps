(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8767],{5049:function(e,t,n){Promise.resolve().then(n.bind(n,23717))},23717:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var a=n(52987),s=n(98145),r=n(61387),i=n(26694),l=n(16804),d=n(27022),c=n(77087),o=n(45820),u=n(24113),m=n(55645),f=n(54381),p=n(61650),x=n(53414),h=n(37077),v=n.n(h),g=n(77317),b=n(47259),hooks_useCopy=()=>{let[e,t]=(0,g.useState)(!1);return{copyTextToClipboard:function(e){v()(e),t(!0),setTimeout(()=>t(!1),500),b.A.success("Copied!")},isCopied:e}},N=n(53080),C=n(27092),y=n(13854),j=n(62013),E=n(95499),k=n(38462),w=n(93342),S=n(64329),A=n(86589),B=n(58409),D=n(32125),_=n(85058),T=n(74724),I=n(97995),U=n(45207),F=n(41331),O=n(7041),P=n(42302);function NumItem(e){let{num:t,tit:n,numClassName:s}=e;return(0,a.jsxs)("div",{className:"animitem flex flex-col p-5 items-center gap-6 rounded-xl border border-primary/10",children:[(0,a.jsx)("div",{className:"text-center text-base",children:n}),(0,a.jsx)("div",{className:(0,y.cn)("text-5xl font-medium text-center",s),children:null!=t?t:"-"})]})}function AethirOpsManager(e){var t,n,s,i,u,p,x,h,v,g,D,U,O,P,R,X,M;let{vc:H,token:L}=e,{copyTextToClipboard:Z}=hooks_useCopy(),G=(0,N.jY)(H),V=(0,C.B8)({key:G.result?"AethirOpsManagerData: ".concat(H.vault):"",fetfn:async()=>{let e=(0,j.B)(H.chain),t=await e.readContract({abi:_.Hr,functionName:"balanceOf",address:G.result.NFT,args:[H.vault]}),n=(0,k.w)(parseInt(t.toString())).map(e=>BigInt(e)),a=(0,T.V)(["function tokenOfOwnerByIndex(address owner, uint256 index) public view returns (uint256)"]),s=await e.readContract({abi:m.qU,address:H.vault,functionName:"setUserRecordCount"}),getSetUsers=async()=>{let t=[],n=s/100n;for(let e=0n;e<n;e++)t.push({index:100n*e,count:100n});let a=s%100n;return a>0&&t.push({index:100n*n,count:a}),Promise.all(t.map(t=>{let{index:n,count:a}=t;return e.readContract({abi:m.qU,address:H.vault,functionName:"setUserRecordsInfo",args:[n,a]}).then(e=>{let[t,n,a,s]=e;return t.map((e,t)=>({tokenId:e,owner:n[t],user:a[t],isBanned:s[t]}))})})).then(w.x)},r=await (0,y.S0)({vaultNft:Promise.all(n.map(t=>e.readContract({abi:a,functionName:"tokenOfOwnerByIndex",address:G.result.NFT,args:[H.vault,t]}).then(e=>e.toString()))),setUsers:getSetUsers(),opsStats:(0,f.bi)(H.chain,L)}),i={},l=[];for(let e of r.opsStats.burners){for(let t of(e.burner_wallet=e.burner_wallet.startsWith("0x")?e.burner_wallet:"0x".concat(e.burner_wallet),e.delegated_nfts))i[t]=e;l.push(e.burner_wallet)}let d={};for(let e of r.setUsers)d[e.tokenId.toString()]=e;let c=[],o=[],u=[];for(let e of r.vaultNft)i[e]?u.push(e):d[e]&&l.find(t=>(0,I.E)(t,d[e].user))?c.push(e):o.push(e);return{...r,pending:c,error:o,success:u,inSetUsersMap:d,inBunnerNftMap:i}}}),[{detailBuner:q,delegateTo:W,delegateIds:Y,delegateExpire:Q,openCofrimOrder:$,filterVaultNftIds:z},J]=(0,B.Z)({delegateTo:"",delegateExpire:2n**63n,openCofrimOrder:!1}),K=null!==(U=null!=W?W:null===(n=V.result)||void 0===n?void 0:null===(t=n.opsStats.burners[0])||void 0===t?void 0:t.burner_wallet)&&void 0!==U?U:"",ee=null!==(O=null!=Y?Y:null===(s=V.result)||void 0===s?void 0:s.error.join(","))&&void 0!==O?O:"",{mutate:et,isPending:en}=(0,E.D)({mutationFn:async()=>(0,f.E3)(H.chain,L,1),onError:y.S3,onSuccess:()=>{b.A.success("Success!"),J({openCofrimOrder:!1}),(0,C.iM)(V.key)}}),{data:ea}=(0,F.p)(),{mutate:es,isPending:er}=(0,E.D)({mutationFn:async()=>{if(!ea||!ee||!K||!Q)throw Error("Please input!");let e=(null!=ee?ee:"").split(",").map(e=>(0,S.f)(e)).filter(Boolean).map(BigInt),t=e.map(()=>K);await ea.writeContract({abi:m.qU,address:H.vault,functionName:"batchSetUser",args:[e,t,Q]})},onError:y.S3,onSuccess:()=>{b.A.success("Success!"),(0,C.iM)(V.key)}}),ei=null!==(P=null===(i=V.result)||void 0===i?void 0:i.opsStats.burners)&&void 0!==P?P:[],bunerCapacity=e=>{var t,n,a;return(null!==(a=null===(n=V.result)||void 0===n?void 0:null===(t=n.opsStats.deployments.find(t=>t.plan_id==e))||void 0===t?void 0:t.no_of_nodes)&&void 0!==a?a:1)*100},createAt=e=>{var t,n,a;return null!==(a=null===(n=V.result)||void 0===n?void 0:null===(t=n.opsStats.deployments.find(t=>t.plan_id==e))||void 0===t?void 0:t.start_date)&&void 0!==a?a:"-"},el=(null!==(R=null===(u=V.result)||void 0===u?void 0:u.vaultNft)&&void 0!==R?R:[]).reverse(),ed=null!==(X=null===(p=V.result)||void 0===p?void 0:p.inBunnerNftMap)&&void 0!==X?X:{},ec=null!==(M=null===(x=V.result)||void 0===x?void 0:x.inSetUsersMap)&&void 0!==M?M:{},inSetUsers=e=>ec[e]&&ei.find(t=>(0,I.E)(t.burner_wallet,ec[e].user)),eo=(()=>{if(z)try{let e=z.trim().split(",").map(e=>e.trim()).filter(Boolean),t={};for(let n of e)t[n]=!0;return t}catch(e){return{}}})(),eu=eo?el.filter(e=>eo[e]):el,em="flex flex-col gap-2 p-5 bg-black/10 dark:bg-white/10 rounded-xl";return(0,C.hg)(V)?(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[" ",(0,a.jsx)(c.$,{})]}):(0,C.VZ)(V)?(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{children:"Network error!"}),(0,a.jsx)(o.k6,{onClick:()=>(0,C.iM)(V.key),children:"Refresh"})]}):(0,a.jsxs)("div",{className:(0,y.cn)(em,"gap-5"),children:[(0,a.jsx)("div",{className:" font-semibold text-2xl",children:H.tit}),(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(240px,1fr))] gap-5",children:[(0,a.jsx)(NumItem,{tit:"Vault Deposited",num:null===(h=V.result)||void 0===h?void 0:h.vaultNft.length,numClassName:""}),(0,a.jsx)(NumItem,{tit:"Delegate Success",num:null===(v=V.result)||void 0===v?void 0:v.success.length,numClassName:"text-green-500"}),(0,a.jsx)(NumItem,{tit:"Delegate Pending",num:null===(g=V.result)||void 0===g?void 0:g.pending.length,numClassName:"text-yellow-500"}),(0,a.jsx)(NumItem,{tit:"Not Delegate",num:null===(D=V.result)||void 0===D?void 0:D.error.length,numClassName:"text-red-500"})]}),(0,a.jsxs)("div",{className:(0,y.cn)(em,"overflow-x-auto"),children:[(0,a.jsx)("div",{className:"font-semibold text-xl",children:"BurnerList"}),(0,a.jsx)(d.ZP,{header:["Item","Burner Address","Delegated","Remaining","Created","Expires"],data:ei.map((e,t)=>["".concat(t+1),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.lS)(e.burner_wallet)," ",(0,a.jsx)(A.esY,{className:"cursor-pointer",onClick:t=>{Z(e.burner_wallet),t.stopPropagation(),t.preventDefault()}})]},"burneraddress"),"".concat(e.delegated_nfts_count),(0,a.jsx)("div",{className:"",children:"".concat(bunerCapacity(e.plan_id)-e.delegated_nfts_count)},"ramining"),createAt(e.plan_id).replaceAll("+0000","").trim(),e.expire_at.replaceAll("+0000","").trim()]),onClickRow:e=>J({detailBuner:ei[e]})})]}),(0,a.jsxs)("div",{className:em,children:[(0,a.jsx)("div",{children:"Set Delegate (batchSetUser)"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("input",{className:(0,y.cn)(r.pk),placeholder:"Burner address",value:K,onChange:e=>J({delegateTo:e.target.value})}),(0,a.jsx)("input",{className:(0,y.cn)(r.pk),placeholder:"NftIds(,分割多个)",value:ee,onChange:e=>J({delegateIds:e.target.value})}),(0,a.jsx)("input",{className:(0,y.cn)(r.pk),placeholder:"ExpireTime",value:Q.toString(),onChange:e=>J({delegateExpire:(0,y.Qt)(e.target.value)})}),(0,a.jsx)(o.k6,{onClick:es,busy:er,disabled:er,children:"Delegate"})]})]}),(0,a.jsxs)("div",{className:(0,y.cn)(em,"flex-row items-center gap-6"),children:[(0,a.jsx)(r.UT,{abi:m.qU,functionName:"updateCheckerNode",address:H.vault,infos:()=>(0,j.B)(H.chain).readContract({abi:m.qU,address:H.vault,functionName:"checkerNode"})}),(0,a.jsx)(o.k6,{onDoubleClick:()=>J({openCofrimOrder:!0}),children:"Order from Nodeops(Double Click)"}),(0,a.jsxs)(l.o,{open:$,className:"p-5",onOpenChange:e=>!e&&J({openCofrimOrder:!1}),children:[(0,a.jsx)("div",{children:"Comfirm Order"}),(0,a.jsx)("div",{children:"是否确认下单？"}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(o.k6,{onClick:et,busy:en,disabled:en,children:"Confrim"})})]})]}),(0,a.jsxs)("div",{className:(0,y.cn)(em,"overflow-x-auto"),children:[(0,a.jsx)("div",{className:"font-semibold text-xl",children:"Vault NFT"}),(0,a.jsx)("input",{className:(0,y.cn)(r.pk),placeholder:"FilterNftIds(,分割多个)",value:z,onChange:e=>J({filterVaultNftIds:e.target.value})}),(0,a.jsx)(d.ZP,{header:["Lisense ID","Status","isBanned"],data:eu.map(e=>{var t,n;let s=ed[e]?"Sucsess":inSetUsers(e)?"Pending":"Error";return["".concat(e),(0,a.jsx)("div",{className:(0,y.cn)("",{"text-green-500":"Sucsess"==s,"text-yellow-500":"Pending"==s,"text-red-500":"Error"==s}),children:s},"status"),"".concat(null!==(n=null===(t=ec[e])||void 0===t?void 0:t.isBanned)&&void 0!==n&&n)]})})]}),(0,a.jsxs)(l.o,{open:!!q,className:"p-5",onOpenChange:e=>!e&&J({detailBuner:void 0}),children:[(0,a.jsx)("div",{children:"Lisense ID"}),q&&(0,a.jsx)("div",{className:"w-[600px] grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-1 p-5",children:q.delegated_nfts.map(e=>(0,a.jsx)("div",{className:"px-2 py-1 rounded bg-primary/10",children:e},e))})]})]})}let R=["add","del"];function Page(){let[e,t]=(0,D.Z)("ops-token",""),{signMessageAsync:n}=(0,O.Q)(),{address:l}=(0,P.m)(),d=(0,C.B8)({key:e?"OpsAdmins":"",initResult:[],fetfn:async()=>(0,f.mX)(x.yX.id,e)}),{mutate:c}=(0,E.D)({mutationFn:async()=>{let e=await n({message:"Auth for zoofi ops"}),a=btoa(e);await (0,f.mX)(x.yX.id,a),t(btoa(e))},onError:y.S3}),{mutate:m,isPending:h}=(0,E.D)({mutationFn:async t=>{if(!v||!(0,U.U)(v))throw Error("Params errors");await (0,f.UV)(x.yX.id,e,{type:t,user:v})},onSuccess:()=>(0,C.iM)(d.key),onError:y.S3}),[v,b]=(0,g.useState)(""),[N,j]=(0,g.useState)("add");return(0,a.jsx)(i.E,{className:"flex flex-col gap-5 max-w-6xl",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-5 bg-black/10 dark:bg-white/10 rounded-xl",children:[(0,a.jsx)("div",{className:"font-semibold text-2xl",children:"OpsAdmins"}),(0,a.jsx)("div",{className:"p-5 rounded bg-primary/10",children:JSON.stringify(d.result,void 0,2)}),(0,a.jsx)("input",{className:(0,y.cn)(r.pk),value:v,onChange:e=>b(e.target.value)}),(0,a.jsx)(u.G,{options:R,onChange:j}),(0,a.jsx)(o.k6,{className:"flex gap-5 items-center justify-center",onClick:()=>m(N),busy:h,disabled:h,children:"Modify Admins"})]}),p.f.filter(e=>e.isAethir&&!e.test).map(t=>(0,a.jsx)(AethirOpsManager,{vc:t,token:e},t.vault))]}):(0,a.jsx)("div",{className:"py-36 px-5",children:l?(0,a.jsx)(o.k6,{onClick:()=>c(),className:"",children:"Login"}):(0,a.jsx)(s.Z,{})})})}},98145:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectBtn}});var a=n(52987),s=n(66038),r=n(77317),i=n(44726),l=n(42302),d=n(68654),c=n(77087),o=n(11914),u=n(45820);function ConnectBtn(){(0,i.Z)(1024);let{isConnected:e,chainId:t}=(0,l.m)(),n=(0,s.We)(),{chains:m}=(0,o.UW)(),f=(0,d.o)(),[p,x]=(0,r.useState)(!1),h=(0,r.useSyncExternalStore)(e=>(document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)),()=>"visible"==document.visibilityState);return((0,r.useEffect)(()=>{if(h&&!p)return null==t||m.find(e=>e.id===t)?x(!1):(console.info("needSwitchChainTo:",m[0].id,m.map(e=>e.id)),x(!0),setTimeout(()=>{"visible"===document.visibilityState&&Promise.race([f.switchChainAsync({chainId:m[0].id}),new Promise((e,t)=>setTimeout(()=>t("Timeout"),3e3))]).catch(console.error).finally(()=>x(!1))},300)),()=>{}},[m,t,h]),p)?(0,a.jsx)(c.$,{className:"text-2xl"}):e?(0,a.jsx)(s.NL,{chainStatus:"none",showBalance:!1}):(0,a.jsx)(u.k6,{className:"mt-0 w-fit",onClick:()=>{var e;return null===(e=n.openConnectModal)||void 0===e?void 0:e.call(n)},children:(0,a.jsx)("span",{className:"font-medium text-sm whitespace-nowrap",children:"Connect Wallet"})})}},7347:function(e,t,n){"use strict";n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var a=n(82790),s=n(97995),r=n(13631),i=n(64090),l=n(53414);let d=[{address:a.DR,symbol:"ETH",decimals:18,chain:[r.R.id,i.F.id],isNative:!0},{address:a.DR,symbol:"0G",decimals:18,chain:[l.Cn.id],isNative:!0},{address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,chain:[r.R.id,i.F.id],isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:[i.F.id]},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:[i.F.id]},{address:"0xe01C85599300f9ED5DE2d7D4FE3Dc2Dc4c5c3877",symbol:"0G",decimals:18,chain:[l.Cn.id]},{address:"0x78A8D4014000dF30b49eB0c29822B6C7C79D68cA",symbol:"v0G",decimals:18,chain:[l.Cn.id]},{address:"0x937F60B54dA360b31D60372d2e19FE55Cb8eee53",symbol:"y0G",decimals:18,chain:[l.Cn.id]},{address:"0x8D44BF9d72039C22dB4e8d7aB50d27038002fAC8",symbol:"lp0G",decimals:18,chain:[l.Cn.id]},{address:"0xd839962d55d9e8309f0f64c391887a33ab8cb4d0",symbol:"ATH",decimals:18,chain:[l.yX.id]},{address:"0x01e80CC2b282D6f926605c20e5aF7D74345615Ac",symbol:"vATH",decimals:18,chain:[l.yX.id]},{address:"0xf79f736e6787911a5167ebfac7ca5c3de4327a88",symbol:"lpATH",decimals:18,chain:[l.yX.id]},{address:"0xc87B37a581ec3257B734886d9d3a581F5A9d056c",symbol:"ATH",decimals:18,chain:[l.yX.id]},{address:"0x24ef95c39DfaA8f9a5ADf58edf76C5b22c34Ef46",symbol:"vATH",decimals:18,chain:[l.yX.id]},{address:"0xbf4b4A83708474528A93C123F817e7f2A0637a88",symbol:"lpATH",decimals:18,chain:[l.yX.id]}],c=d.reduce((e,t)=>t.chain.reduce((e,n)=>({...e,["".concat(n,"_").concat(t.address.toLowerCase())]:t}),e),{});function getTokenBy(e,t,n){if(!e||!t)return;let a="".concat(t,"_").concat(e.toLowerCase()),s=c[a];if(!s){let{symbol:s="Token",decimals:r=18,isNative:i}=null!=n?n:{};return c[a]={address:e,chain:[t],symbol:s,decimals:r,isNative:i},c[a]}return s}function isNativeToken(e){return(0,s.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==a.DR}},62013:function(e,t,n){"use strict";n.d(t,{B:function(){return getPC}});var a=n(53414),s=n(93108);let r=(0,s.Ue)((e,t)=>({readingCount:0,upReadingCount:n=>e({readingCount:t().readingCount+n})}));var i=n(93342),l=n(61469),d=n(50995),c=n(28987);let o={};function getPC(e,t){o[e]||(o[e]={pcs:function(e){let t=a.Af.find(t=>t.id==e);if(!t)throw"No Chain for chianId:".concat(e);let n=function(e){let t=(0,l.X)(e.rpcUrls);return(0,i.x)(t.map(t=>e.rpcUrls[t].http))}(t);if(0==n.length)throw"No Chain rpc for chianId:".concat(e);let s=n.map(t=>{let n=(0,d.v)({batch:{multicall:a.y1},chain:a.Af.find(t=>t.id==e),transport:(0,c.d)(t,{batch:a.Xp})}),s=n.readContract;return n.readContract=async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{return r.getState().upReadingCount(1),await s(...t)}catch(e){throw console.error("readError",e,"\nArgs",[...t]),e}finally{r.getState().upReadingCount(-1)}},n});return s}(e),current:0});let n=o[e];if("number"==typeof t)return n.pcs[t%n.pcs.length];{let e=n.pcs[n.current];return n.current++,n.current>=n.pcs.length&&(n.current=0),e}}}},function(e){e.O(0,[2257,9891,4345,6358,8109,5097,8733,6445,4850,7459,8468,1331,3262,3851,3099,4362,9847,2516,7834,15,3813,1387,4195,6338,1744],function(){return e(e.s=5049)}),_N_E=e.O()}]);