(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8767],{5049:function(e,t,n){Promise.resolve().then(n.bind(n,23717))},23717:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var a=n(52987),s=n(98145),i=n(61387),r=n(26694),l=n(16804),d=n(27022),o=n(77087),c=n(45820),u=n(24113),m=n(55645),f=n(54381),x=n(61650),h=n(53414),p=n(37077),v=n.n(p),g=n(77317),b=n(47259),hooks_useCopy=()=>{let[e,t]=(0,g.useState)(!1);return{copyTextToClipboard:function(e){v()(e),t(!0),setTimeout(()=>t(!1),500),b.A.success("Copied!")},isCopied:e}},N=n(53080),C=n(27092),y=n(13854),w=n(62013),j=n(29293),E=n(95499),k=n(38462),A=n(93342),S=n(64329),D=n(86589),_=n(58409),B=n(32125),I=n(85058),T=n(74724),U=n(97995),F=n(43955),O=n(45207),P=n(41331),R=n(7041),X=n(42302);function NumItem(e){let{num:t,tit:n,numClassName:s}=e;return(0,a.jsxs)("div",{className:"animitem flex flex-col p-5 items-center gap-6 rounded-xl border border-primary/60",children:[(0,a.jsx)("div",{className:"text-center text-base",children:n}),(0,a.jsx)("div",{className:(0,y.cn)("text-5xl font-medium text-center",s),children:null!=t?t:"-"})]})}function AethirOpsManager(e){var t,n,s,r,u,x,h,p,v,g,B,O,R,X,L,M,H,V,Z,G,W,q,$,Y,Q,z;let{vc:J,token:K}=e,{copyTextToClipboard:ee}=hooks_useCopy(),et=(0,N.jY)(J),en=(0,C.B8)({key:et.result?"AethirOpsManagerData: ".concat(J.vault):"",fetfn:async()=>{let e=(0,w.B)(J.chain),t=await e.readContract({abi:I.Hr,functionName:"balanceOf",address:et.result.NFT,args:[J.vault]}),n=(0,k.w)(parseInt(t.toString())).map(e=>BigInt(e)),a=(0,T.V)(["function tokenOfOwnerByIndex(address owner, uint256 index) public view returns (uint256)"]),s=await e.readContract({abi:m.qU,address:J.vault,functionName:"setUserRecordCount"});console.info("setUserCount:",s);let getSetUsers=async()=>{let t=[],n=s/100n;for(let e=0n;e<n;e++)t.push({index:100n*e,count:100n});let a=s%100n;return a>0&&t.push({index:100n*n,count:a}),Promise.all(t.map(t=>{let{index:n,count:a}=t;return e.readContract({abi:m.qU,address:J.vault,functionName:"setUserRecordsInfo",args:[n,a]}).then(e=>{let[t,n,a,s]=e;return t.map((e,t)=>({tokenId:e,owner:n[t],user:a[t],isBanned:s[t]}))})})).then(A.x)},getVaultNft=async()=>Promise.all(n.map(t=>e.readContract({abi:a,functionName:"tokenOfOwnerByIndex",address:et.result.NFT,args:[J.vault,t]}).then(e=>e.toString()))),i=await (0,y.S0)({vaultNft:getVaultNft(),setUsers:getSetUsers(),opsStats:(0,f.bi)(J.chain,K),rewards:(0,f._V)(J.chain,K)}),r={},l=[];for(let e of i.opsStats.burners){for(let t of(e.burner_wallet=e.burner_wallet.startsWith("0x")?e.burner_wallet:"0x".concat(e.burner_wallet),e.delegated_nfts))r[t]=e;l.push(e.burner_wallet)}let d={};for(let e of i.setUsers)d[e.tokenId.toString()]=e;let o=[],c=[],u=[];for(let e of i.vaultNft)r[e]?u.push(e):d[e]&&l.find(t=>(0,U.E)(t,d[e].user))?o.push(e):c.push(e);return{...i,pending:o,error:c,success:u,inSetUsersMap:d,inBunnerNftMap:r}}}),[{detailBuner:ea,delegateTo:es,delegateIds:ei,delegateExpire:er,openCofrimOrder:el,filterVaultNftIds:ed},eo]=(0,_.Z)({delegateTo:"",delegateExpire:2n**63n,openCofrimOrder:!1}),ec=null!==(V=null!=es?es:null===(n=en.result)||void 0===n?void 0:null===(t=n.opsStats.burners[0])||void 0===t?void 0:t.burner_wallet)&&void 0!==V?V:"",eu=null!==(Z=null!=ei?ei:null===(s=en.result)||void 0===s?void 0:s.error.join(","))&&void 0!==Z?Z:"",{mutate:em,isPending:ef}=(0,E.D)({mutationFn:async()=>(0,f.E3)(J.chain,K,1),onError:y.S3,onSuccess:()=>{b.A.success("Success!"),eo({openCofrimOrder:!1}),(0,C.iM)(en.key)}}),{data:ex}=(0,P.p)(),{mutate:eh,isPending:ep}=(0,E.D)({mutationFn:async()=>{if(!ex||!eu||!ec||!er)throw Error("Please input!");let e=(null!=eu?eu:"").split(",").map(e=>(0,S.f)(e)).filter(Boolean).map(BigInt),t=e.map(()=>ec);await ex.writeContract({abi:m.qU,address:J.vault,functionName:"batchSetUser",args:[e,t,er]})},onError:y.S3,onSuccess:()=>{b.A.success("Success!"),(0,C.iM)(en.key)}}),ev=null!==(G=null===(r=en.result)||void 0===r?void 0:r.opsStats.burners)&&void 0!==G?G:[],bunerCapacity=e=>{var t,n,a;return(null!==(a=null===(n=en.result)||void 0===n?void 0:null===(t=n.opsStats.deployments.find(t=>t.plan_id==e))||void 0===t?void 0:t.no_of_nodes)&&void 0!==a?a:1)*100},createAt=e=>{var t,n,a;return null!==(a=null===(n=en.result)||void 0===n?void 0:null===(t=n.opsStats.deployments.find(t=>t.plan_id==e))||void 0===t?void 0:t.start_date)&&void 0!==a?a:"-"},eg=(null!==(W=null===(u=en.result)||void 0===u?void 0:u.vaultNft)&&void 0!==W?W:[]).reverse(),eb=null!==(q=null===(x=en.result)||void 0===x?void 0:x.inBunnerNftMap)&&void 0!==q?q:{},eN=null!==($=null===(h=en.result)||void 0===h?void 0:h.inSetUsersMap)&&void 0!==$?$:{},inSetUsers=e=>eN[e]&&ev.find(t=>(0,U.E)(t.burner_wallet,eN[e].user)),eC=(()=>{if(ed)try{let e=ed.trim().split(",").map(e=>e.trim()).filter(Boolean),t={};for(let n of e)t[n]=!0;return t}catch(e){return{}}})(),ey=eC?eg.filter(e=>eC[e]):eg,ew="flex flex-col gap-2 p-5 bg-black/10 dark:bg-white/10 rounded-xl";return(0,C.hg)(en)?(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[" ",(0,a.jsx)(o.$,{})]}):(0,C.VZ)(en)?(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{children:"Network error!"}),(0,a.jsx)(c.k6,{onClick:()=>(0,C.iM)(en.key),children:"Refresh"})]}):(0,C.d6)(en)?(0,a.jsxs)("div",{className:(0,y.cn)(ew,"gap-5"),children:[(0,a.jsx)("div",{className:" font-semibold text-2xl",children:J.tit}),(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(240px,1fr))] gap-5",children:[(0,a.jsx)(NumItem,{tit:"Vault Deposited",num:null===(p=en.result)||void 0===p?void 0:p.vaultNft.length,numClassName:""}),(0,a.jsx)(NumItem,{tit:"Delegate Success",num:null===(v=en.result)||void 0===v?void 0:v.success.length,numClassName:"text-green-500"}),(0,a.jsx)(NumItem,{tit:"Delegate Pending",num:null===(g=en.result)||void 0===g?void 0:g.pending.length,numClassName:"text-yellow-500"}),(0,a.jsx)(NumItem,{tit:"Not Delegate",num:null===(B=en.result)||void 0===B?void 0:B.error.length,numClassName:"text-red-500"})]}),(0,a.jsxs)("div",{className:(0,y.cn)(ew,"overflow-x-auto"),children:[(0,a.jsx)("div",{className:"font-semibold text-xl",children:"BurnerList"}),(0,a.jsx)(d.ZP,{header:["Item","Burner Address","Delegated","Remaining","Created","Expires"],data:ev.map((e,t)=>["".concat(t+1),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.lS)(e.burner_wallet)," ",(0,a.jsx)(D.esY,{className:"cursor-pointer",onClick:t=>{ee(e.burner_wallet),t.stopPropagation(),t.preventDefault()}})]},"burneraddress"),"".concat(e.delegated_nfts_count),(0,a.jsx)("div",{className:"",children:"".concat(bunerCapacity(e.plan_id)-e.delegated_nfts_count)},"ramining"),createAt(e.plan_id).replaceAll("+0000","").trim(),e.expire_at.replaceAll("+0000","").trim()]),onClickRow:e=>eo({detailBuner:ev[e]})})]}),(0,a.jsxs)(i.Ak,{className:"bg-black/10 dark:bg-white/10 rounded-xl",tit:"Rewards",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-5",children:[(0,a.jsx)(NumItem,{tit:"Un Claim",num:(0,j.d)((0,F.f)(null!==(Y=null===(O=en.result)||void 0===O?void 0:O.rewards.claimable_ath)&&void 0!==Y?Y:"0")),numClassName:""}),(0,a.jsx)(NumItem,{tit:"Claimed",num:(0,j.d)(null===(R=en.result)||void 0===R?void 0:R.rewards.totalClaimed),numClassName:"text-yellow-500"}),(0,a.jsx)(NumItem,{tit:"Un Withdraw",num:(0,j.d)(null===(X=en.result)||void 0===X?void 0:X.rewards.pendingClaimed),numClassName:"text-red-500"}),(0,a.jsx)(NumItem,{tit:"Withdrawal",num:(0,j.d)(null===(L=en.result)||void 0===L?void 0:L.rewards.withdrawAmount),numClassName:"text-green-500"}),(0,a.jsx)(NumItem,{tit:"Claim Fee",num:5*(null!==(Q=null===(M=en.result)||void 0===M?void 0:M.rewards.claims.length)&&void 0!==Q?Q:0),numClassName:"text-orange-500"})]}),(0,a.jsx)("div",{children:"Un withdraw list:"}),(0,a.jsx)(d.ZP,{header:["OrderID","Amount","Claim At","Can Withdraw At"],data:(null!==(z=null===(H=en.result)||void 0===H?void 0:H.rewards.claims)&&void 0!==z?z:[]).filter(e=>{var t;return!(null===(t=en.result)||void 0===t?void 0:t.rewards.withdrawsOrderIds.includes(e.orderId))}).map((e,t)=>["".concat(e.orderId),(0,j.d)(e.amount),(0,y.G$)(1e3*e.time,y.mv.ALL),(0,y.G$)((e.time+e.cliffSecond)*1e3,y.mv.ALL)])})]}),(0,a.jsxs)(i.Ak,{className:"bg-black/10 dark:bg-white/10 rounded-xl",tit:"Set Delegate (batchSetUser)",children:[(0,a.jsx)("input",{className:(0,y.cn)(i.pk),placeholder:"Burner address",value:ec,onChange:e=>eo({delegateTo:e.target.value})}),(0,a.jsx)("input",{className:(0,y.cn)(i.pk),placeholder:"NftIds(,分割多个)",value:eu,onChange:e=>eo({delegateIds:e.target.value})}),(0,a.jsx)("input",{className:(0,y.cn)(i.pk),placeholder:"ExpireTime",value:er.toString(),onChange:e=>eo({delegateExpire:(0,y.Qt)(e.target.value)})}),(0,a.jsx)(c.k6,{onClick:eh,busy:ep,disabled:ep,children:"Delegate"})]}),(0,a.jsxs)("div",{className:(0,y.cn)(ew,"flex-row items-center gap-6"),children:[(0,a.jsx)(i.UT,{abi:m.qU,functionName:"updateCheckerNode",address:J.vault,infos:()=>(0,w.B)(J.chain).readContract({abi:m.qU,address:J.vault,functionName:"checkerNode"})}),(0,a.jsx)(c.k6,{onDoubleClick:()=>eo({openCofrimOrder:!0}),children:"Order from Nodeops(Double Click)"}),(0,a.jsxs)(l.o,{open:el,className:"p-5",onOpenChange:e=>!e&&eo({openCofrimOrder:!1}),children:[(0,a.jsx)("div",{children:"Comfirm Order"}),(0,a.jsx)("div",{children:"是否确认下单？"}),(0,a.jsx)("div",{className:"pt-8",children:(0,a.jsx)(c.k6,{onClick:em,busy:ef,disabled:ef,children:"Confrim"})})]})]}),(0,a.jsxs)("div",{className:(0,y.cn)(ew,"overflow-x-auto"),children:[(0,a.jsx)("div",{className:"font-semibold text-xl",children:"Vault NFT"}),(0,a.jsx)("input",{className:(0,y.cn)(i.pk),placeholder:"FilterNftIds(,分割多个)",value:ed,onChange:e=>eo({filterVaultNftIds:e.target.value})}),(0,a.jsx)(d.ZP,{header:["Lisense ID","Status","isBanned"],data:ey.map(e=>{var t,n;let s=eb[e]?"Sucsess":inSetUsers(e)?"Pending":"Error";return["".concat(e),(0,a.jsx)("div",{className:(0,y.cn)("",{"text-green-500":"Sucsess"==s,"text-yellow-500":"Pending"==s,"text-red-500":"Error"==s}),children:s},"status"),"".concat(null!==(n=null===(t=eN[e])||void 0===t?void 0:t.isBanned)&&void 0!==n&&n)]})})]}),(0,a.jsxs)(l.o,{open:!!ea,className:"p-5",onOpenChange:e=>!e&&eo({detailBuner:void 0}),children:[(0,a.jsx)("div",{children:"Lisense ID"}),ea&&(0,a.jsx)("div",{className:"w-[600px] grid grid-cols-[repeat(auto-fill,minmax(100px,1fr))] gap-1 p-5",children:ea.delegated_nfts.map(e=>(0,a.jsx)("div",{className:"px-2 py-1 rounded bg-primary/10",children:e},e))})]})]}):null}let L=["add","del"];function Page(){let[e,t]=(0,B.Z)("ops-token",""),{signMessageAsync:n}=(0,R.Q)(),{address:l}=(0,X.m)(),d=(0,C.B8)({key:e?"OpsAdmins":"",initResult:[],fetfn:async()=>(0,f.mX)(h.yX.id,e)}),{mutate:o}=(0,E.D)({mutationFn:async()=>{let e=await n({message:"Auth for zoofi ops"}),a=btoa(e);await (0,f.mX)(h.yX.id,a),t(btoa(e))},onError:y.S3}),{mutate:m,isPending:p}=(0,E.D)({mutationFn:async t=>{if(!v||!(0,O.U)(v))throw Error("Params errors");await (0,f.UV)(h.yX.id,e,{type:t,user:v})},onSuccess:()=>(0,C.iM)(d.key),onError:y.S3}),[v,b]=(0,g.useState)(""),[N,w]=(0,g.useState)("add");return(0,a.jsx)(r.E,{className:"flex flex-col gap-5 max-w-6xl",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Ak,{className:"bg-black/10 dark:bg-white/10 rounded-xl",tit:"Admins",children:[(0,a.jsx)("div",{className:"p-5 rounded bg-primary/10",children:JSON.stringify(d.result,void 0,2)}),(0,a.jsx)("input",{className:(0,y.cn)(i.pk),value:v,onChange:e=>b(e.target.value)}),(0,a.jsx)(u.G,{options:L,onChange:w}),(0,a.jsx)(c.k6,{className:"flex gap-5 items-center justify-center",onClick:()=>m(N),busy:p,disabled:p,children:"Modify Admins"})]}),x.f.filter(e=>e.isAethir&&!e.test).map(t=>(0,a.jsx)(AethirOpsManager,{vc:t,token:e},t.vault))]}):(0,a.jsx)("div",{className:"py-36 px-5",children:l?(0,a.jsx)(c.k6,{onClick:()=>o(),className:"",children:"Login"}):(0,a.jsx)(s.Z,{})})})}},98145:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectBtn}});var a=n(52987),s=n(66038),i=n(77317),r=n(44726),l=n(42302),d=n(68654),o=n(77087),c=n(11914),u=n(45820);function ConnectBtn(){(0,r.Z)(1024);let{isConnected:e,chainId:t}=(0,l.m)(),n=(0,s.We)(),{chains:m}=(0,c.UW)(),f=(0,d.o)(),[x,h]=(0,i.useState)(!1),p=(0,i.useSyncExternalStore)(e=>(document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)),()=>"visible"==document.visibilityState);return((0,i.useEffect)(()=>{if(p&&!x)return null==t||m.find(e=>e.id===t)?h(!1):(console.info("needSwitchChainTo:",m[0].id,m.map(e=>e.id)),h(!0),setTimeout(()=>{"visible"===document.visibilityState&&Promise.race([f.switchChainAsync({chainId:m[0].id}),new Promise((e,t)=>setTimeout(()=>t("Timeout"),3e3))]).catch(console.error).finally(()=>h(!1))},300)),()=>{}},[m,t,p]),x)?(0,a.jsx)(o.$,{className:"text-2xl"}):e?(0,a.jsx)(s.NL,{chainStatus:"none",showBalance:!1}):(0,a.jsx)(u.k6,{className:"mt-0 w-fit",onClick:()=>{var e;return null===(e=n.openConnectModal)||void 0===e?void 0:e.call(n)},children:(0,a.jsx)("span",{className:"font-medium text-sm whitespace-nowrap",children:"Connect Wallet"})})}},7347:function(e,t,n){"use strict";n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var a=n(82790),s=n(97995),i=n(13631),r=n(64090),l=n(53414);let d=[{address:a.DR,symbol:"ETH",decimals:18,chain:[i.R.id,r.F.id],isNative:!0},{address:a.DR,symbol:"0G",decimals:18,chain:[l.Cn.id],isNative:!0},{address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,chain:[i.R.id,r.F.id],isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:[r.F.id]},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:[r.F.id]},{address:"0xe01C85599300f9ED5DE2d7D4FE3Dc2Dc4c5c3877",symbol:"0G",decimals:18,chain:[l.Cn.id]},{address:"0x78A8D4014000dF30b49eB0c29822B6C7C79D68cA",symbol:"v0G",decimals:18,chain:[l.Cn.id]},{address:"0x937F60B54dA360b31D60372d2e19FE55Cb8eee53",symbol:"y0G",decimals:18,chain:[l.Cn.id]},{address:"0x8D44BF9d72039C22dB4e8d7aB50d27038002fAC8",symbol:"lp0G",decimals:18,chain:[l.Cn.id]},{address:"0xd839962d55d9e8309f0f64c391887a33ab8cb4d0",symbol:"ATH",decimals:18,chain:[l.yX.id]},{address:"0x01e80CC2b282D6f926605c20e5aF7D74345615Ac",symbol:"vATH",decimals:18,chain:[l.yX.id]},{address:"0xf79f736e6787911a5167ebfac7ca5c3de4327a88",symbol:"lpATH",decimals:18,chain:[l.yX.id]},{address:"0xc87B37a581ec3257B734886d9d3a581F5A9d056c",symbol:"ATH",decimals:18,chain:[l.yX.id]},{address:"0x24ef95c39DfaA8f9a5ADf58edf76C5b22c34Ef46",symbol:"vATH",decimals:18,chain:[l.yX.id]},{address:"0xbf4b4A83708474528A93C123F817e7f2A0637a88",symbol:"lpATH",decimals:18,chain:[l.yX.id]}],o=d.reduce((e,t)=>t.chain.reduce((e,n)=>({...e,["".concat(n,"_").concat(t.address.toLowerCase())]:t}),e),{});function getTokenBy(e,t,n){if(!e||!t)return;let a="".concat(t,"_").concat(e.toLowerCase()),s=o[a];if(!s){let{symbol:s="Token",decimals:i=18,isNative:r}=null!=n?n:{};return o[a]={address:e,chain:[t],symbol:s,decimals:i,isNative:r},o[a]}return s}function isNativeToken(e){return(0,s.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==a.DR}},62013:function(e,t,n){"use strict";n.d(t,{B:function(){return getPC}});var a=n(53414),s=n(93108);let i=(0,s.Ue)((e,t)=>({readingCount:0,upReadingCount:n=>e({readingCount:t().readingCount+n})}));var r=n(93342),l=n(61469),d=n(50995),o=n(28987);let c={};function getPC(e,t){c[e]||(c[e]={pcs:function(e){let t=a.Af.find(t=>t.id==e);if(!t)throw"No Chain for chianId:".concat(e);let n=function(e){let t=(0,l.X)(e.rpcUrls);return(0,r.x)(t.map(t=>e.rpcUrls[t].http))}(t);if(0==n.length)throw"No Chain rpc for chianId:".concat(e);let s=n.map(t=>{let n=(0,d.v)({batch:{multicall:a.y1},chain:a.Af.find(t=>t.id==e),transport:(0,o.d)(t,{batch:a.Xp})}),s=n.readContract;return n.readContract=async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{return i.getState().upReadingCount(1),await s(...t)}catch(e){throw console.error("readError",e,"\nArgs",[...t]),e}finally{i.getState().upReadingCount(-1)}},n});return s}(e),next:0,time:0});let n=c[e];if("number"==typeof t)return n.time=Date.now(),n.pcs[t%n.pcs.length];{let e=Date.now();n.pcs.length>1&&e-n.time>a.Xp.wait&&(n.next++,n.next>=n.pcs.length&&(n.next=0),n.time=e);let t=n.pcs[n.next];return t}}}},function(e){e.O(0,[2257,9891,4345,6358,8109,5097,8733,6445,4850,7459,8468,7150,3262,3606,4362,6092,2516,7834,8933,6339,1387,4195,6338,1744],function(){return e(e.s=5049)}),_N_E=e.O()}]);