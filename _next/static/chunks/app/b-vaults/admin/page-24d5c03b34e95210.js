(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9158],{94529:function(e,a,t){Promise.resolve().then(t.bind(t,12900))},12900:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return AdminPage}});var s=t(52987),n=t(57834),o=t(61387),r=t(38070),d=t(26694),c=t(46881),l=t(58400),i=t(96555),u=t(13854),E=t(62013),p=t(64370),b=t(77317),f=t(58409),m=t(99409),A=t(5807),B=t(45631),y=t(85665),x=t(31236),C=t(35164),D=t(52468),v=t(45207),S=t(85058),T=t(65811),F=t(48481),k=t(82714),g=t(9309),N=t(63880);let h=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}];function UpdateVaultParams(e){let{paramList:a,vault:t,protocoSettingAddress:r}=e,d=(0,b.useMemo)(()=>a.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[a]),[{value:l,param:i},E]=(0,f.Z)({value:"",param:d[0]}),{data:p,refetch:m}=function(e={}){let{contracts:a=[],query:t={}}=e,s=(0,N.Z)(e),n=(0,g.x)({config:s}),o=function(e,a={}){return{async queryFn({queryKey:t}){let s=[],n=t[1].contracts.length;for(let e=0;e<n;e++){let n=t[1].contracts[e],o=a.contracts?.[e].abi;s.push({...n,abi:o})}let{scopeKey:o,...r}=t[1];return(0,T.J)(e,{...r,contracts:s})},queryKey:function(e={}){let a=[];for(let t of e.contracts??[]){let{abi:s,...n}=t;a.push({...n,chainId:n.chainId??e.chainId})}return["readContracts",(0,F.OP)({...e,contracts:a})]}(a)}}(s,{...e,chainId:n}),r=(0,b.useMemo)(()=>{let e=!1;for(let t of a){let{abi:a,address:s,functionName:n}=t;if(!a||!s||!n){e=!1;break}e=!0}return!!(e&&(t.enabled??!0))},[a,t.enabled]);return(0,k.aM)({...o,...t,enabled:r,structuralSharing:t.structuralSharing??F.if})}({contracts:a.map(e=>({abi:c.$4,address:r,functionName:"vaultParamValue",args:[t,(0,x.$G)(e.value,{size:32})]}))}),A=(0,b.useMemo)(()=>(p||[]).map((e,t)=>{let s=a[t];return"".concat(s.label,"(").concat(s.value,"): ").concat((0,C.b)(e.result||0n,"number"==typeof s.units?s.units:10))}),[p]),v="number"==typeof i.units?i.units:10,[S,h]=(0,y.Z)();return(0,s.jsxs)(o.Ak,{tit:"Vault Param Vaule",children:[(0,s.jsx)(B.ZP,{classNames:o.At,maxMenuHeight:h.height+110,value:i,options:d,onChange:e=>E({param:e})}),(0,s.jsx)("input",{value:l.toString(),onChange:e=>{let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");E({value:a})},type:"number",className:(0,u.cn)(o.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,s.jsx)(n.vZ,{tx:"Write",config:{abi:c.$4,address:r,functionName:"updateVaultParamValue",args:[t,(0,x.$G)(i.value,{size:32}),(0,D.v)(l,v)]},onTxSuccess:()=>{E({value:""}),m()},className:" w-full flex items-center justify-center gap-4"}),(0,s.jsx)("div",{className:"text-sm flex flex-col items-start",ref:S,children:A.map((e,a)=>(0,s.jsx)("div",{children:e},"info_".concat(a)))})]})}function Erc20Approve(){let[e,a]=(0,f.Z)({token:"",spender:"",amount:0n});return(0,s.jsxs)(o.Ak,{tit:"Erc20Approve",children:[(0,s.jsx)("input",{type:"text",placeholder:"token",value:e.token,onChange:e=>a({token:e.target.value}),className:(0,u.cn)(o.pk)}),(0,s.jsx)("input",{type:"text",placeholder:"spender",value:e.spender,onChange:e=>a({spender:e.target.value}),className:(0,u.cn)(o.pk)}),(0,s.jsx)("input",{type:"text",placeholder:"amount",value:e.amount.toString(),onChange:e=>{try{a({amount:(0,u.su)(e.target.value,0)})}catch(e){}},className:(0,u.cn)(o.pk)}),(0,s.jsx)(n.vZ,{tx:"Write",disabled:!(0,v.U)(e.token)||!(0,v.U)(e.spender)||e.amount<=0n,config:{abi:S.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]},className:"!mt-0 w-full flex items-center justify-center gap-4"})]})}function AdminPage(){let{current:e,setState:a,stateOptions:t,bsQuery:{isLoading:n}}=function(){let e=(0,m.pK)(),a=(0,b.useMemo)(()=>(l.Fw[e]||[]).filter(e=>e.onEnv&&e.onEnv.includes(i.Vi)),[e]),t=(0,b.useMemo)(()=>{let e=a.map(e=>({label:e.assetSymbol,value:e.vault,data:e,type:"B-Vault"}));return[...e].map(e=>({...e,label:"".concat(e.label,"     (").concat(e.type,": ").concat((0,u.lS)(e.data.vault),")")}))},[a]),s=(0,p.a)({queryKey:["queryBvualts",e,a],queryFn:async()=>{let t=(0,E.B)(e),s=Promise.all(a.map(e=>t.readContract({abi:c.j5,functionName:"closed",address:e.vault}))),n=Promise.all(a.map(e=>t.readContract({abi:c.j5,functionName:"epochIdCount",address:e.vault}))),[o,r]=await Promise.all([s,n]),d=await Promise.all(a.map((e,a)=>r[a]>0n?t.readContract({abi:c.j5,functionName:"epochInfoById",address:e.vault,args:[r[a]]}):Promise.resolve(void 0))),l={};for(let e=0;e<a.length;e++){let t=a[e];r[e]>0n?l[t.vault]="".concat(o[e]?"Closed":"Active","    Epoch").concat(r[e],"   (").concat((0,u.G$)(1000n*d[e].startTime),")"):l[t.vault]="UnStart"}return l}}),n=(0,b.useMemo)(()=>s.data?t.map(e=>"B-Vault"===e.type?{...e,label:"".concat(e.label," ").concat(s.data[e.data.vault])}:e):[],[t,s.data]),[{current:o},r]=(0,f.Z)({current:t[0]});return{current:o,setState:r,options:t,bsQuery:s,stateOptions:n}}();return(0,s.jsx)(d.E,{children:(0,s.jsxs)("div",{className:"w-full flex",children:[(0,s.jsx)(r.a,{}),n?(0,s.jsx)("div",{className:"flex w-full justify-center items-center h-screen",children:(0,s.jsx)(A.fCD,{className:"text-3xl animate-spin"})}):(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,s.jsx)("div",{className:"text-lg whitespace-pre-wrap p-2 bg-primary/20 rounded-xl",children:JSON.stringify({Decimal18:"000000000000000000"},void 0,2)}),(0,s.jsx)(B.ZP,{classNames:o.At,defaultValue:t[0],options:t,onChange:e=>e&&a({current:e})}),"B-Vault"==e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:e.data.vault,paramList:h,protocoSettingAddress:e.data.protocolSettingsAddress}),["close","pause","unpause","pauseRedeemPool","unpauseRedeemPool","setBriber"].map(a=>(0,s.jsx)(o.UT,{abi:c.j5,functionName:a,address:e.data.vault},"b-vault-".concat(a))),(0,s.jsx)(o.UT,{tit:"transferOwnership",abi:c.RR,functionName:"transferOwnership",address:e.data.protocolAddress}),(0,s.jsx)(o.UT,{tit:"upsertParamConfig",abi:c.$4,functionName:"upsertParamConfig",address:e.data.protocolSettingsAddress})]}),(0,s.jsx)(Erc20Approve,{})]})]})})}},26694:function(e,a,t){"use strict";t.d(a,{E:function(){return PageWrap}});var s=t(52987),n=t(13854);t(77317);var o=t(78525);function PageWrap(e){let{children:a,className:t}=e;return(0,o.l)(e=>e.theme),(0,s.jsx)("div",{className:(0,n.cn)("h-auto pt-[30px] pb-6",t),children:a})}},58400:function(e,a,t){"use strict";t.d(a,{Fw:function(){return i},TE:function(){return c},_C:function(){return d}});var s=t(53414),n=t(13854);let o={[s.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[s.On.id]:"0x4737c3BAB13a1Ad94ede8B46Bc6C22fb8bBE9c81"},r={[s.BG.id]:"0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",[s.On.id]:"0x7D3Cec2f46279229277802D30702e4E7FB19bAC0"},d={[s.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[s.On.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},c={[s.BG.id]:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",[s.On.id]:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce"},l={[s.BG.id]:"0xDf1126d3627b7f5D2a44d978A7180AcbD3c34aB6",[s.On.id]:"0x6E603014ACE3Ae06F34Ffe259106Af77c056d913"},i=(0,n.Yb)({[s.BG.id]:[{vault:"0x9700FEa232560E4048DD924623491926282125bE",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x575287Cd8CB9A49e0EE00Bf0C71Eac337Ab8FeBa",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:l[s.BG.id],isOld:!0,onEnv:["beta"]},{vault:"0x5C88005534FB5C5B01445eC5bC944ebA0818554f",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x19f4cE524268a01bfAFf8B433110d8304b096be0",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:l[s.BG.id],isOld:!0,onEnv:["beta"]},{vault:"0x9Ef9cE44c82111e967904059edf12701e17e6C03",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x0C2553919748093b0760EA825C85dc5a72142932",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:l[s.BG.id],isOld:!0,onEnv:["beta","test"]},{vault:"0x77412b08bB3a8c38F7D0DC7D1158C5E7bfE03Eea",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x02FEDe9cf47c3D8aCE52613C2a45bC588D4e0516",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0xCC5AeD7b81dc45f02329Cc2Bf2c64B873D0be752",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x05425F978a87DC80827f6c4a104FCbc6E9021ecc",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0x12f5F1f53B419d1E5F3084E649001Ff091683ADc",asset:"0x0001513F4a1f86da0f02e647609E9E2c630B3a14",assetSymbol:"WBERA-YEET",pToken:"0x256938Bf1A340e6F80eAA35798b08a122783BEDF",pTokenSymbol:"pWBERA-YEET",yTokenSymbol:"yWBERA-YEET",rewardSymbol:"WBERA-YEET",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0x6A2A4d8Fe425dC783e67b90d88922c5890BfA78c",asset:"0x0001513F4a1f86da0f02e647609E9E2c630B3a14",assetSymbol:"WBERA-YEET",pToken:"0x890FDA8E5ce053D34aaA64B23d250f9AF04979e4",pTokenSymbol:"pWBERA-YEET",yTokenSymbol:"yWBERA-YEET",yeetLiqSymbol:"LIQ-TRI-YEET",rewardSymbol:"LIQ-TRI-YEET",protocolAddress:o[s.BG.id],protocolSettingsAddress:r[s.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]}],[s.On.id]:[{vault:"0xf579c039c52ab795F0C4E358d3b462bE883cDd9F",asset:"0x9659dc8c1565E0bd82627267e3b4eEd1a377ebE6",pToken:"0xF0d0CEAE071b3aDfaad4Aa1722c9E9A94fb7Dd04",pTokenV2:!0,assetSymbol:"WETH-WBERA",pTokenSymbol:"pWETHWBERA",yTokenSymbol:"yWETHWBERA",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:l[s.On.id],onEnv:["test","prod"]},{vault:"0x94822b9BA715E9e3079ed12489Dc7A016694FC67",asset:"0xdd70a5ef7d8cfe5c5134b5f9874b09fb5ce812b4",pToken:"0x0DA715b18AaF66c7c044D4F315D479f6036728Ea",pTokenV2:!0,assetSymbol:"WBERA-WETH",pTokenSymbol:"pWBERAWETH",yTokenSymbol:"yWBERAWETH",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:l[s.On.id],onEnv:["test","prod"]},{vault:"0xE6d15592F337f54E8BD47e56BbB22aF12F0D4083",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0xc2C5EaDF0f48702bEEDD2e2a35517e1fC4dBF7A7",pTokenV2:!0,assetSymbol:"HONEY-USDC",pTokenSymbol:"pUSDCeHONEY",yTokenSymbol:"yUSDCeHONEY",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:l[s.On.id],onEnv:["test","prod"]},{vault:"0x702B707c2F8dd26F4F1e51cF425035d355A02767",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0xA58f5A2487abaBc5c5A23E3e3796E6615d12FCaf",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:l[s.On.id],onEnv:["test","prod"]},{vault:"0x6686bDfF3ad20AE45E811c2451DfeE8AA0f338C0",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0x83f933af46458102cf54Eabe441DBB659a1B2eA5",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:o[s.On.id],protocolSettingsAddress:r[s.On.id],bQueryAddres:l[s.On.id],onEnv:["test","prod"]},{vault:"0x33C42E171cFD7Ec85D3dB34D7f6d3D8121f64E63",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0x70B851f6877D16D6D5aD546B17d06281b8aBDd4b",assetSymbol:"HONEY-USDC",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",rewardSymbol:"iBGT",protocolAddress:"0xc0fA386aE92f18A783476d09121291A1972C30Dc",protocolSettingsAddress:"0x8c6E434Bb1C51728BdCc250255c1F654471d85eB",bQueryAddres:l[s.On.id],onEnv:["test","prod"]}]},[])},65811:function(e,a,t){"use strict";t.d(a,{J:function(){return readContracts}});var s=t(93994),n=t(70137),o=t(59575);async function multicall_multicall(e,a){let{allowFailure:t=!0,chainId:s,contracts:r,...d}=a,c=e.getClient({chainId:s}),l=(0,o.s)(c,n.A,"multicall");return l({allowFailure:t,contracts:r,...d})}var r=t(9218);async function readContracts(e,a){let{allowFailure:t=!0,blockNumber:n,blockTag:d,...c}=a,l=a.contracts;try{let a={};for(let[t,s]of l.entries()){let n=s.chainId??e.state.chainId;a[n]||(a[n]=[]),a[n]?.push({contract:s,index:t})}let s=(await Promise.all(Object.entries(a).map(([a,s])=>multicall_multicall(e,{...c,allowFailure:t,blockNumber:n,blockTag:d,chainId:Number.parseInt(a),contracts:s.map(({contract:e})=>e)})))).flat(),o=Object.values(a).flatMap(e=>e.map(({index:e})=>e));return s.reduce((e,a,t)=>(e&&(e[o[t]]=a),e),[])}catch(a){if(a instanceof s.uq)throw a;let promises=()=>l.map(a=>(function(e,a){let{chainId:t,...s}=a,n=e.getClient({chainId:t}),d=(0,o.s)(n,r.L,"readContract");return d(s)})(e,{...a,blockNumber:n,blockTag:d}));if(t)return(await Promise.allSettled(promises())).map(e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"});return await Promise.all(promises())}}},59575:function(e,a,t){"use strict";function getAction(e,a,t){let s=e[a.name];if("function"==typeof s)return s;let n=e[t];return"function"==typeof n?n:t=>a(e,t)}t.d(a,{s:function(){return getAction}})}},function(e){e.O(0,[4881,7495,7622,5294,3979,3113,6445,6532,1348,8468,2437,2111,3099,1445,8628,9054,3132,7834,1387,4195,6338,1744],function(){return e(e.s=94529)}),_N_E=e.O()}]);