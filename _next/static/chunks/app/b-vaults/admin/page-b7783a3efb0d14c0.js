(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9158],{94529:function(e,a,t){Promise.resolve().then(t.bind(t,70157))},70157:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return AdminPage}});var n=t(52987),s=t(57834),o=t(61387),l=t(38070),d=t(26694),r=t(46881),c=t(58400),u=t(96555),i=t(13854),p=t(62013),f=t(64370),m=t(77317),b=t(58409),E=t(99409),x=t(86589),A=t(45631),B=t(85665),v=t(50298),C=t(93469),y=t(30796),D=t(67048),S=t(19219),F=t(12029);let g=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}];function UpdateVaultParams(e){let{paramList:a,vault:t,protocoSettingAddress:l}=e,d=(0,m.useMemo)(()=>a.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[a]),[{value:c,param:u},p]=(0,b.Z)({value:"",param:d[0]}),{data:f,refetch:E}=(0,F.N)({contracts:a.map(e=>({abi:r.$4,address:l,functionName:"vaultParamValue",args:[t,(0,v.$G)(e.value,{size:32})]}))}),x=(0,m.useMemo)(()=>(f||[]).map((e,t)=>{let n=a[t];return"".concat(n.label,"(").concat(n.value,"): ").concat((0,C.b)(e.result||0n,"number"==typeof n.units?n.units:10))}),[f]),D="number"==typeof u.units?u.units:10,[S,g]=(0,B.Z)();return(0,n.jsxs)(o.Ak,{tit:"Vault Param Vaule",children:[(0,n.jsx)(A.ZP,{classNames:o.At,maxMenuHeight:g.height+110,value:u,options:d,onChange:e=>p({param:e})}),(0,n.jsx)("input",{value:c.toString(),onChange:e=>{let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");p({value:a})},type:"number",className:(0,i.cn)(o.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,n.jsx)(s.vZ,{tx:"Write",config:{abi:r.$4,address:l,functionName:"updateVaultParamValue",args:[t,(0,v.$G)(u.value,{size:32}),(0,y.v)(c,D)]},onTxSuccess:()=>{p({value:""}),E()},className:" w-full flex items-center justify-center gap-4"}),(0,n.jsx)("div",{className:"text-sm flex flex-col items-start",ref:S,children:x.map((e,a)=>(0,n.jsx)("div",{children:e},"info_".concat(a)))})]})}function Erc20Approve(){let[e,a]=(0,b.Z)({token:"",spender:"",amount:0n});return(0,n.jsxs)(o.Ak,{tit:"Erc20Approve",children:[(0,n.jsx)("input",{type:"text",placeholder:"token",value:e.token,onChange:e=>a({token:e.target.value}),className:(0,i.cn)(o.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"spender",value:e.spender,onChange:e=>a({spender:e.target.value}),className:(0,i.cn)(o.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"amount",value:e.amount.toString(),onChange:e=>{try{a({amount:(0,i.su)(e.target.value,0)})}catch(e){}},className:(0,i.cn)(o.pk)}),(0,n.jsx)(s.vZ,{tx:"Write",disabled:!(0,D.U)(e.token)||!(0,D.U)(e.spender)||e.amount<=0n,config:{abi:S.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]},className:"!mt-0 w-full flex items-center justify-center gap-4"})]})}function AdminPage(){let{current:e,setState:a,stateOptions:t,bsQuery:{isLoading:s}}=function(){let e=(0,E.pK)(),a=(0,m.useMemo)(()=>(c.Fw[e]||[]).filter(e=>e.onEnv&&e.onEnv.includes(u.Vi)),[e]),t=(0,m.useMemo)(()=>{let e=a.map(e=>({label:e.assetSymbol,value:e.vault,data:e,type:"B-Vault"}));return[...e].map(e=>({...e,label:"".concat(e.label,"     (").concat(e.type,": ").concat((0,i.lS)(e.data.vault),")")}))},[a]),n=(0,f.a)({queryKey:["queryBvualts",e,a],queryFn:async()=>{let t=(0,p.B)(e),n=Promise.all(a.map(e=>t.readContract({abi:r.j5,functionName:"closed",address:e.vault}))),s=Promise.all(a.map(e=>t.readContract({abi:r.j5,functionName:"epochIdCount",address:e.vault}))),[o,l]=await Promise.all([n,s]),d=await Promise.all(a.map((e,a)=>l[a]>0n?t.readContract({abi:r.j5,functionName:"epochInfoById",address:e.vault,args:[l[a]]}):Promise.resolve(void 0))),c={};for(let e=0;e<a.length;e++){let t=a[e];l[e]>0n?c[t.vault]="".concat(o[e]?"Closed":"Active","    Epoch").concat(l[e],"   (").concat((0,i.G$)(1000n*d[e].startTime),")"):c[t.vault]="UnStart"}return c}}),s=(0,m.useMemo)(()=>n.data?t.map(e=>"B-Vault"===e.type?{...e,label:"".concat(e.label," ").concat(n.data[e.data.vault])}:e):[],[t,n.data]),[{current:o},l]=(0,b.Z)({current:t[0]});return{current:o,setState:l,options:t,bsQuery:n,stateOptions:s}}();return(0,n.jsx)(d.E,{children:(0,n.jsxs)("div",{className:"w-full flex",children:[(0,n.jsx)(l.a,{}),s?(0,n.jsx)("div",{className:"flex w-full justify-center items-center h-screen",children:(0,n.jsx)(x.fCD,{className:"text-3xl animate-spin"})}):(0,n.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,n.jsx)("div",{className:"text-lg whitespace-pre-wrap p-2 bg-primary/20 rounded-xl",children:JSON.stringify({Decimal18:"000000000000000000"},void 0,2)}),(0,n.jsx)(A.ZP,{classNames:o.At,defaultValue:t[0],options:t,onChange:e=>e&&a({current:e})}),"B-Vault"==e.type&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:e.data.vault,paramList:g,protocoSettingAddress:e.data.protocolSettingsAddress}),["close","pause","unpause","pauseRedeemPool","unpauseRedeemPool","setBriber"].map(a=>(0,n.jsx)(o.UT,{abi:r.j5,functionName:a,address:e.data.vault},"b-vault-".concat(a))),(0,n.jsx)(o.UT,{tit:"transferOwnership",abi:r.RR,functionName:"transferOwnership",address:e.data.protocolAddress}),(0,n.jsx)(o.UT,{tit:"upsertParamConfig",abi:r.$4,functionName:"upsertParamConfig",address:e.data.protocolSettingsAddress})]}),(0,n.jsx)(Erc20Approve,{})]})]})})}},58400:function(e,a,t){"use strict";t.d(a,{Fw:function(){return u},TE:function(){return r},_C:function(){return d}});var n=t(53414),s=t(13854);let o={[n.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[n.On.id]:"0x4737c3BAB13a1Ad94ede8B46Bc6C22fb8bBE9c81"},l={[n.BG.id]:"0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",[n.On.id]:"0x7D3Cec2f46279229277802D30702e4E7FB19bAC0"},d={[n.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[n.On.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},r={[n.BG.id]:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",[n.On.id]:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce"},c={[n.BG.id]:"0xDf1126d3627b7f5D2a44d978A7180AcbD3c34aB6",[n.On.id]:"0x6E603014ACE3Ae06F34Ffe259106Af77c056d913"},u=(0,s.Yb)({[n.On.id]:[{vault:"0xf579c039c52ab795F0C4E358d3b462bE883cDd9F",asset:"0x9659dc8c1565E0bd82627267e3b4eEd1a377ebE6",pToken:"0xF0d0CEAE071b3aDfaad4Aa1722c9E9A94fb7Dd04",pTokenV2:!0,assetSymbol:"WETH-WBERA",pTokenSymbol:"pWETHWBERA",yTokenSymbol:"yWETHWBERA",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:c[n.On.id],onEnv:["test","prod"]},{vault:"0x94822b9BA715E9e3079ed12489Dc7A016694FC67",asset:"0xdd70a5ef7d8cfe5c5134b5f9874b09fb5ce812b4",pToken:"0x0DA715b18AaF66c7c044D4F315D479f6036728Ea",pTokenV2:!0,assetSymbol:"WBERA-WETH",pTokenSymbol:"pWBERAWETH",yTokenSymbol:"yWBERAWETH",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:c[n.On.id],onEnv:["test","prod"]},{vault:"0xE6d15592F337f54E8BD47e56BbB22aF12F0D4083",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0xc2C5EaDF0f48702bEEDD2e2a35517e1fC4dBF7A7",pTokenV2:!0,assetSymbol:"HONEY-USDC",pTokenSymbol:"pUSDCeHONEY",yTokenSymbol:"yUSDCeHONEY",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:c[n.On.id],onEnv:["test","prod"]},{vault:"0x702B707c2F8dd26F4F1e51cF425035d355A02767",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0xA58f5A2487abaBc5c5A23E3e3796E6615d12FCaf",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:c[n.On.id],onEnv:["test","prod"]},{vault:"0x6686bDfF3ad20AE45E811c2451DfeE8AA0f338C0",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0x83f933af46458102cf54Eabe441DBB659a1B2eA5",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:o[n.On.id],protocolSettingsAddress:l[n.On.id],bQueryAddres:c[n.On.id],onEnv:["test","prod"]},{vault:"0x33C42E171cFD7Ec85D3dB34D7f6d3D8121f64E63",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0x70B851f6877D16D6D5aD546B17d06281b8aBDd4b",assetSymbol:"HONEY-USDC",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",rewardSymbol:"iBGT",protocolAddress:"0xc0fA386aE92f18A783476d09121291A1972C30Dc",protocolSettingsAddress:"0x8c6E434Bb1C51728BdCc250255c1F654471d85eB",bQueryAddres:c[n.On.id],onEnv:["test","prod"]}]},[])}},function(e){e.O(0,[2257,9891,4345,6358,8109,1137,6647,6324,5920,6398,3262,7553,9877,2516,7834,2198,1387,4195,6338,1744],function(){return e(e.s=94529)}),_N_E=e.O()}]);