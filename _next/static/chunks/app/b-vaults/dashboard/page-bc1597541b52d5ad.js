(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{37031:function(e,t,n){Promise.resolve().then(n.bind(n,82275))},82275:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var s=n(31113),a=n(95702),l=n(44939),i=n(75496),r=n(87031),o=n(44020),c=n(22139),u=n(59175),d=n(31889),m=n(63402),p=n(83978),f=n.n(p),h=n(26361),x=n(18358),v=n(84944),b=n(24378),y=n(64103);let E=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function DashItem(e){let{title:t,sub:n,tHeader:a,tData:l,tableProps:r}=e;return(0,s.jsxs)("div",{className:"card whitespace-nowrap",children:["string"==typeof t?(0,s.jsx)("div",{className:"text-2xl leading-none font-semibold",children:t}):t,"string"==typeof n?(0,s.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:n}):n,(0,s.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:(0,s.jsx)(i.ZP,{headerClassName:"border-b-0",header:a,data:l,...r||{}})})]})}function TVLItem(){let e=function(){let e=(0,u.p)(),t=r.Fw[e].filter(e=>(e.onEnv||[]).includes(c.Vi)),n=(0,m.o)(e=>e.sliceBVaultsStore.bvaults),s=(0,m.o)(e=>e.sliceTokenStore.prices),a=[].concat(f().chain(t).mapValues(e=>{let t=o.P[e.asset],a=n[e.vault],l=t&&a&&a.lpLiq&&a.lpBase&&a.lpQuote&&s[t.base]&&s[t.quote],i=l?(s[t.base]*a.lpBase+s[t.quote]*a.lpQuote)/a.lpLiq:s[e.asset]||c.Pq,r=(null==a?void 0:a.lpLiq)||(null==a?void 0:a.lockedAssetTotal)||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:i,amount:r,usdAmount:i*r/c.Pq}}).values().reduce((e,t)=>{let n=e.find(e=>e.symbol==t.symbol);return n?(n.amount+=t.amount,n.usdAmount+=t.usdAmount,e):[...e,t]},[]).value()),l=a.reduce((e,t)=>e+t.usdAmount,0n);return{tvl:l,tvlItems:a}}(),t=(0,y.useMemo)(()=>e.tvlItems.map(e=>[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:e.symbol,size:20}),(0,s.jsx)("span",{children:e.symbol})]},"icon"),"$".concat((0,v.d)(e.price)),(0,v.d)(e.amount),"$".concat((0,v.d)(e.usdAmount))]),[e.tvlItems]);return(0,s.jsx)(DashItem,{title:"Total Value Locked",sub:"$".concat((0,v.d)(e.tvl)),tHeader:["Asset","NAV","Amount","Total"],tData:t})}function BVaultROI(e){let{vc:t}=e,{roi:n}=(0,b.tY)(t);return(0,s.jsx)(s.Fragment,{children:(0,h.Jh)(n,18,2)})}function BVaultsItem(){let e=(0,u.p)(),t=(0,y.useMemo)(()=>r.Fw[e].filter(e=>(e.onEnv||[]).includes(c.Vi)),[e]),n=(0,m.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),l=(0,m.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),i=(0,y.useMemo)(()=>{let e=t.map(e=>{let t=(0,h.ok)(n,[e.vault,"lockedAssetTotal"]),s=t*(0,h.ok)(l,[e.asset])/c.Pq,a=o.P[e.asset];if(a){let t=(0,h.ok)(n,[e.vault,"lpBase"]),i=(0,h.ok)(n,[e.vault,"lpQuote"]);s=(t*(0,h.ok)(l,[a.base])+i*(0,h.ok)(l,[a.quote]))/c.Pq}let[i,r]=a?e.assetSymbol.split("-"):["",""],u=Math.max(22+5*(0,v.d)(t).length,5*(0,v.d)(s).length+5);return{bvc:e,totalDeposit:t,totalDepositUsd:s,totalLeftWidth:u,lp:a,baseSymbol:i,quoteSymbol:r}}),i=e.reduce((e,t)=>Math.max(e,t.totalLeftWidth),0)+48;return e.map(e=>{let{bvc:t,totalDeposit:l,totalDepositUsd:r,lp:o,baseSymbol:c,quoteSymbol:u}=e;return[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:t.assetSymbol,size:20}),(0,s.jsx)("span",{children:t.assetSymbol})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-6 items-start",children:[(0,s.jsxs)("div",{style:{width:i},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a.cL,{symbol:t.assetSymbol,size:14}),(0,s.jsx)("span",{children:(0,v.d)(l)})]},"icon"),(0,s.jsxs)("div",{className:"opacity-60",children:["~",(0,v.d)(r)]})]}),o&&(0,s.jsxs)("div",{style:{width:i},children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:c,size:14}),(0,s.jsx)("span",{children:(0,v.d)((0,h.ok)(n,[t.vault,"lpBase"]))})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:u,size:14}),(0,s.jsx)("span",{children:(0,v.d)((0,h.ok)(n,[t.vault,"lpQuote"]))})]},"icon")]})]},"total"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[E,(0,s.jsxs)("span",{children:["Epoch ",(0,h.ok)(n,[t.vault,"epochCount"]).toString()]})]},"status"),(0,h.Jh)((0,x.lL)(t),10),(0,s.jsx)(BVaultROI,{vc:t},"roi")]})},[t,n,l]);return(0,s.jsx)(DashItem,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT ROI"],tData:i,tableProps:{span:{1:2},cellClassName:(e,t)=>0==t?"h-[3.5rem]":""}})}function Dashboard(){return(0,d.E)(),(0,s.jsx)(l.E,{children:(0,s.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,s.jsx)(TVLItem,{}),(0,s.jsx)(BVaultsItem,{})]})})}},44939:function(e,t,n){"use strict";n.d(t,{E:function(){return PageWrap}});var s=n(31113),a=n(26361);n(64103);var l=n(12045);function PageWrap(e){let{children:t,className:n}=e;return(0,l.l)(e=>e.theme),(0,s.jsx)("div",{className:(0,a.cn)("h-auto pt-[30px] pb-6",n),children:t})}},90168:function(e,t,n){"use strict";n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var s=n(67541),a=n(75847),l=n(60463),i=n(51186);let r=[{address:s.DR,symbol:"ETH",decimals:18,chain:[l.R.id,i.F.id],isNative:!0},{address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,chain:[l.R.id,i.F.id],isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:[i.F.id]},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:[i.F.id]}],o=r.reduce((e,t)=>t.chain.reduce((e,n)=>({...e,["".concat(n,"_").concat(t.address.toLowerCase())]:t}),e),{});function getTokenBy(e,t,n){if(!e||!t)return;let s=o["".concat(t,"_").concat(e.toLowerCase())];if(!s){let{symbol:s="Token",decimals:a=18,isNative:l}=null!=n?n:{};return{address:e,chain:[t],symbol:s,decimals:a,isNative:l}}return s}function isNativeToken(e){return(0,a.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==s.DR}},24378:function(e,t,n){"use strict";n.d(t,{tY:function(){return useBvaultROI}});var s=n(65940),a=n(22139),l=n(22818),i=n(63402),r=n(18358),o=n(64370),c=n(83978),u=n.n(c),d=n(11292),m=n(35004),p=n(70283),f=n(4848),h=n(59175),x=n(26361);function calcRestakingApy(e,t,n){let s=t>0n?e*n/t:0n;return s>100n*a.Pq?0n:s}function calcAdditionalApy(e,t,n,s,l){let i=t>0n&&n>0n?t+n*s:0n,r=i>0n?e*a.Pq/i:0n,o=a.Pq*s,c=r*o/a.Pq,u=l>0n?c*a.Pq/l:0n;return u}function useBvaultROI(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,v=(0,r.nr)(e.vault),{data:b,isLoading:y}=function(e){let t=(0,h.p)();return(0,o.a)({initialData:0n,queryKey:["getReturnsIBGT",e,t],queryFn:async()=>{let n=await f.ZP.get(t,"/api/bvault/getYieldiBGT/".concat(e)),s=BigInt(n.yield)/BigInt(n.dur);return s}})}(e.vault),{data:E,isLoading:g}=(0,p.x)(),k=v.current.duration+v.current.startTime,j=k>0n?k-BigInt(u().round(u().now()/1e3)):0n,B=v.current.yTokenAmountForSwapYT,P=B>0n?b*a.Pq*j/B:0n,T=(0,i.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,q=(0,i.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,A=(0,r.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,d.d)(T),(0,d.d)(A));let N=v.current.vaultYTokenBalance,w=B+n>0n?b*a.Pq*j/(B+n):0n,S=N>0n?v.Y*a.Pq/N:0n,I=S*A/a.Pq,L=c*A/a.Pq,C=calcRestakingApy(P,I,T),F=n>0n?calcRestakingApy(w,L,T):0n;console.info("restakingapy:",e.assetSymbol,(0,d.d)(C),(0,d.d)(P),(0,d.d)(S),(0,d.d)(I));let V=null===(t=E["".concat(e.vault)])||void 0===t?void 0:t[parseInt(v.epochCount.toString())],D=V&&V.token&&V.amount?(0,x.ok)(q,p.c[V.token])*(0,m.f)(V.amount.toFixed(6))/a.Pq:0n,{data:R,isLoading:Y}=function(e){let t=(0,r.nr)(e),n=(0,h.p)();return(0,o.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",n,e,t.current.adhocBribesPool],enabled:!!e&&!!t.current.adhocBribesPool,queryFn:async()=>{let e=(0,l.B)(n);return e.readContract({abi:s.q3,address:t.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),_=calcAdditionalApy(D,R,B,j,I),O=n>0n?calcAdditionalApy(D,R,B+n,j,L):0n,z=y||g||Y;return{roi:!z&&B>0n&&P>0n?C+_-a.Pq:0n,roiChange:!z&&B>0n&&P>0n?F+O-a.Pq:0n,restakingIncomesApy:C,additionalRoi:_}}},45236:function(e,t,n){"use strict";n.d(t,{s:function(){return parseAbiItem}});var s=n(1352),a=n(38026),l=n(42145),i=n(98702);function parseAbiItem(e){let t;if("string"==typeof e)t=(0,i.cK)(e);else{let n=(0,l.D)(e),s=e.length;for(let l=0;l<s;l++){let s=e[l];if(!(0,a.N0)(s)){t=(0,i.cK)(s,n);break}}}if(!t)throw new s.a_({signature:e});return t}},35004:function(e,t,n){"use strict";n.d(t,{f:function(){return parseEther}});var s=n(42087),a=n(33737);function parseEther(e,t="wei"){return(0,a.v)(e,s.ez[t])}}},function(e){e.O(0,[4881,7495,7622,4817,6271,1900,4948,6764,8251,3977,7093,604,1744],function(){return e(e.s=37031)}),_N_E=e.O()}]);