(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{59292:function(e,t,n){Promise.resolve().then(n.bind(n,62874))},62874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var s=n(52987),r=n(47857),a=n(26694),i=n(27022),l=n(58400),o=n(81501),c=n(96555),u=n(99409),d=n(422),p=n(21663),m=n(83978),h=n.n(m),f=n(13854),x=n(44100),v=n(29293),b=n(79075),y=n(77317);let g=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function DashItem(e){let{title:t,sub:n,tHeader:r,tData:a,tableProps:l}=e;return(0,s.jsxs)("div",{className:"animitem card whitespace-nowrap",children:["string"==typeof t?(0,s.jsx)("div",{className:"text-2xl leading-none font-semibold",children:t}):t,"string"==typeof n?(0,s.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:n}):n,(0,s.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:(0,s.jsx)(i.ZP,{headerClassName:"border-b-0",header:r,data:a,...l||{}})})]})}function TVLItem(){let e=function(){let e=(0,u.pK)(),t=l.Fw[e].filter(e=>(e.onEnv||[]).includes(c.Vi)),n=(0,p.o)(e=>e.sliceBVaultsStore.bvaults),s=(0,p.o)(e=>e.sliceTokenStore.prices),r=[].concat(h().chain(t).mapValues(e=>{let t=o.P[e.asset],r=n[e.vault],a=t&&r&&r.lpLiq&&r.lpBase&&r.lpQuote&&s[t.base]&&s[t.quote],i=a?(s[t.base]*r.lpBase+s[t.quote]*r.lpQuote)/r.lpLiq:s[e.asset]||c.Pq,l=(null==r?void 0:r.lpLiq)||(null==r?void 0:r.lockedAssetTotal)||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:i,amount:l,usdAmount:i*l/c.Pq}}).values().reduce((e,t)=>{let n=e.find(e=>e.symbol==t.symbol);return n?(n.amount+=t.amount,n.usdAmount+=t.usdAmount,e):[...e,t]},[]).value()),a=r.reduce((e,t)=>e+t.usdAmount,0n);return{tvl:a,tvlItems:r}}(),t=(0,y.useMemo)(()=>e.tvlItems.map(e=>[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.cL,{symbol:e.symbol,size:20}),(0,s.jsx)("span",{children:e.symbol})]},"icon"),"$".concat((0,v.d)(e.price)),(0,v.d)(e.amount),"$".concat((0,v.d)(e.usdAmount))]),[e.tvlItems]);return(0,s.jsx)(DashItem,{title:"Total Value Locked",sub:"$".concat((0,v.d)(e.tvl)),tHeader:["Asset","NAV","Amount","Total"],tData:t})}function BVaultROI(e){let{vc:t}=e,{roi:n}=(0,b.tY)(t);return(0,s.jsx)(s.Fragment,{children:(0,f.Jh)(n,18,2)})}function BVaultsItem(){let e=(0,u.pK)(),t=(0,y.useMemo)(()=>l.Fw[e].filter(e=>(e.onEnv||[]).includes(c.Vi)),[e]),n=(0,p.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),a=(0,p.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),i=(0,y.useMemo)(()=>{let e=t.map(e=>{let t=(0,f.ok)(n,[e.vault,"lockedAssetTotal"]),s=t*(0,f.ok)(a,[e.asset])/c.Pq,r=o.P[e.asset];if(r){let t=(0,f.ok)(n,[e.vault,"lpBase"]),i=(0,f.ok)(n,[e.vault,"lpQuote"]);s=(t*(0,f.ok)(a,[r.base])+i*(0,f.ok)(a,[r.quote]))/c.Pq}let[i,l]=r?e.assetSymbol.split("-"):["",""],u=Math.max(22+5*(0,v.d)(t).length,5*(0,v.d)(s).length+5);return{bvc:e,totalDeposit:t,totalDepositUsd:s,totalLeftWidth:u,lp:r,baseSymbol:i,quoteSymbol:l}}),i=e.reduce((e,t)=>Math.max(e,t.totalLeftWidth),0)+48;return e.map(e=>{let{bvc:t,totalDeposit:a,totalDepositUsd:l,lp:o,baseSymbol:c,quoteSymbol:u}=e;return[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.cL,{symbol:t.assetSymbol,size:20}),(0,s.jsx)("span",{children:t.assetSymbol})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-6 items-start",children:[(0,s.jsxs)("div",{style:{width:i},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r.cL,{symbol:t.assetSymbol,size:14}),(0,s.jsx)("span",{children:(0,v.d)(a)})]},"icon"),(0,s.jsxs)("div",{className:"opacity-60",children:["~",(0,v.d)(l)]})]}),o&&(0,s.jsxs)("div",{style:{width:i},children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.cL,{symbol:c,size:14}),(0,s.jsx)("span",{children:(0,v.d)((0,f.ok)(n,[t.vault,"lpBase"]))})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.cL,{symbol:u,size:14}),(0,s.jsx)("span",{children:(0,v.d)((0,f.ok)(n,[t.vault,"lpQuote"]))})]},"icon")]})]},"total"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[g,(0,s.jsxs)("span",{children:["Epoch ",(0,f.ok)(n,[t.vault,"epochCount"]).toString()]})]},"status"),(0,f.Jh)((0,x.lL)(t),10),(0,s.jsx)(BVaultROI,{vc:t},"roi")]})},[t,n,a]);return(0,s.jsx)(DashItem,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT ROI"],tData:i,tableProps:{span:{1:2},cellClassName:(e,t)=>0==t?"h-[3.5rem]":""}})}function Dashboard(){return(0,d.E)(),(0,s.jsx)(a.E,{children:(0,s.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,s.jsx)(TVLItem,{}),(0,s.jsx)(BVaultsItem,{})]})})}},79075:function(e,t,n){"use strict";n.d(t,{tY:function(){return useBvaultROI}});var s=n(46881),r=n(96555),a=n(62013),i=n(21663),l=n(44100),o=n(64370),c=n(83978),u=n.n(c),d=n(12771),p=n(43955),m=n(82799),h=n(78784),f=n(99409),x=n(13854);function calcRestakingApy(e,t,n){let s=t>0n?e*n/t:0n;return s>100n*r.Pq?0n:s}function calcAdditionalApy(e,t,n,s,a){let i=t>0n&&n>0n?t+n*s:0n,l=i>0n?e*r.Pq/i:0n,o=r.Pq*s,c=l*o/r.Pq,u=a>0n?c*r.Pq/a:0n;return u}function useBvaultROI(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,v=(0,l.nr)(e.vault),{data:b,isLoading:y}=function(e){let t=(0,f.pK)();return(0,o.a)({initialData:0n,queryKey:["getReturnsIBGT",e,t],queryFn:async()=>{let n=await h.ZP.get(t,"/api/bvault/getYieldiBGT/".concat(e)),s=BigInt(n.yield)/BigInt(n.dur);return s}})}(e.vault),{data:g,isLoading:w}=(0,m.x)(),P=v.current.duration+v.current.startTime,j=P>0n?P-BigInt(u().round(u().now()/1e3)):0n,k=v.current.yTokenAmountForSwapYT,q=k>0n?b*r.Pq*j/k:0n,B=(0,i.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,T=(0,i.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,A=(0,l.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,d.d)(B),(0,d.d)(A));let C=v.current.vaultYTokenBalance,S=k+n>0n?b*r.Pq*j/(k+n):0n,E=C>0n?v.Y*r.Pq/C:0n,N=E*A/r.Pq,R=c*A/r.Pq,I=calcRestakingApy(q,N,B),L=n>0n?calcRestakingApy(S,R,B):0n;console.info("restakingapy:",e.assetSymbol,(0,d.d)(I),(0,d.d)(q),(0,d.d)(E),(0,d.d)(N));let V=null===(t=g["".concat(e.vault)])||void 0===t?void 0:t[parseInt(v.epochCount.toString())],F=V&&V.token&&V.amount?(0,x.ok)(T,m.c[V.token])*(0,p.f)(V.amount.toFixed(6))/r.Pq:0n,{data:D,isLoading:O}=function(e){let t=(0,l.nr)(e),n=(0,f.pK)();return(0,o.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",n,e,t.current.adhocBribesPool],enabled:!!e&&!!t.current.adhocBribesPool,queryFn:async()=>{let e=(0,a.B)(n);return e.readContract({abi:s.q3,address:t.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),U=calcAdditionalApy(F,D,k,j,N),Y=n>0n?calcAdditionalApy(F,D,k+n,j,R):0n,z=y||w||O;return{roi:!z&&k>0n&&q>0n?I+U-r.Pq:0n,roiChange:!z&&k>0n&&q>0n?L+Y-r.Pq:0n,restakingIncomesApy:I,additionalRoi:U}}},64090:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var s=n(15874);let r=(0,s.a)({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0})},50995:function(e,t,n){"use strict";n.d(t,{v:function(){return createPublicClient}});var s=n(58346),r=n(36149);function createPublicClient(e){let{key:t="public",name:n="Public Client"}=e,a=(0,s.e)({...e,key:t,name:n,type:"publicClient"});return a.extend(r.I)}},28987:function(e,t,n){"use strict";n.d(t,{d:function(){return http}});var s=n(59459),r=n(75775);let UrlRequiredError=class UrlRequiredError extends r.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};var a=n(45676),i=n(82537),l=n(67103);let o={current:0,take(){return this.current++},reset(){this.current=0}};var c=n(62661);function http(e,t={}){let{batch:n,fetchOptions:r,key:u="http",methods:d,name:p="HTTP JSON-RPC",onFetchRequest:m,onFetchResponse:h,retryDelay:f,raw:x}=t;return({chain:v,retryCount:b,timeout:y})=>{let{batchSize:g=1e3,wait:w=0}="object"==typeof n?n:{},P=t.retryCount??b,j=y??t.timeout??1e4,k=e||v?.rpcUrls.default.http[0];if(!k)throw new UrlRequiredError;let q=function(e,t={}){return{async request(n){let{body:r,onRequest:a=t.onRequest,onResponse:c=t.onResponse,timeout:u=t.timeout??1e4}=n,d={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:p,method:m,signal:h}=d;try{let t;let n=await (0,i.F)(async({signal:t})=>{let n={...d,body:Array.isArray(r)?(0,l.P)(r.map(e=>({jsonrpc:"2.0",id:e.id??o.take(),...e}))):(0,l.P)({jsonrpc:"2.0",id:r.id??o.take(),...r}),headers:{"Content-Type":"application/json",...p},method:m||"POST",signal:h||(u>0?t:null)},s=new Request(e,n),i=await a?.(s,n)??{...n,url:e},c=await fetch(i.url??e,i);return c},{errorInstance:new s.W5({body:r,url:e}),timeout:u,signal:!0});if(c&&await c(n),n.headers.get("Content-Type")?.startsWith("application/json"))t=await n.json();else{t=await n.text();try{t=JSON.parse(t||"{}")}catch(e){if(n.ok)throw e;t={error:t}}}if(!n.ok)throw new s.Gg({body:r,details:(0,l.P)(t.error)||n.statusText,headers:n.headers,status:n.status,url:e});return t}catch(t){if(t instanceof s.Gg||t instanceof s.W5)throw t;throw new s.Gg({body:r,cause:t,url:e})}}}}(k,{fetchOptions:r,onRequest:m,onResponse:h,timeout:j});return(0,c.q)({key:u,methods:d,name:p,async request({method:e,params:t}){let r={method:e,params:t},{schedule:i}=(0,a.S)({id:k,wait:w,shouldSplitBatch:e=>e.length>g,fn:e=>q.request({body:e}),sort:(e,t)=>e.id-t.id}),fn=async e=>n?i(e):[await q.request({body:e})],[{error:l,result:o}]=await fn(r);if(x)return{error:l,result:o};if(l)throw new s.bs({body:r,error:l,url:k});return o},retryCount:P,retryDelay:f,timeout:j,type:"http"},{fetchOptions:r,url:k})}}},82537:function(e,t,n){"use strict";function withTimeout(e,{errorInstance:t=Error("timed out"),timeout:n,signal:s}){return new Promise((r,a)=>{(async()=>{let i;try{let l=new AbortController;n>0&&(i=setTimeout(()=>{s?l.abort():a(t)},n)),r(await e({signal:l?.signal||null}))}catch(e){e?.name==="AbortError"&&a(t),a(e)}finally{clearTimeout(i)}})()})}n.d(t,{F:function(){return withTimeout}})},43955:function(e,t,n){"use strict";n.d(t,{f:function(){return parseEther}});var s=n(93587),r=n(52468);function parseEther(e,t="wei"){return(0,r.v)(e,s.ez[t])}}},function(e){e.O(0,[4881,7495,7622,6445,6532,1348,1900,3606,9054,3132,3007,4195,6338,1744],function(){return e(e.s=59292)}),_N_E=e.O()}]);