(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{59292:function(e,t,n){Promise.resolve().then(n.bind(n,62874))},62874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var s=n(52987),a=n(47857),i=n(2680),r=n(27022),l=n(58400),c=n(81501),o=n(96555),d=n(99409),u=n(422),m=n(21663),f=n(13854),h=n(44100),p=n(29293),b=n(79075),x=n(77317);let y=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function DashItem(e){let{title:t,sub:n,tHeader:a,tData:i,tableProps:l}=e;return(0,s.jsxs)("div",{className:"animitem card whitespace-nowrap",children:["string"==typeof t?(0,s.jsx)("div",{className:"text-2xl leading-none font-semibold",children:t}):t,"string"==typeof n?(0,s.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:n}):n,(0,s.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:(0,s.jsx)(r.ZP,{headerClassName:"border-b-0",header:a,data:i,...l||{}})})]})}function TVLItem(){let e=function(){let e=(0,d.pK)(),t=l.Fw[e].filter(e=>(e.onEnv||[]).includes(o.Vi)),n=(0,m.o)(e=>e.sliceBVaultsStore.bvaults),s=(0,m.o)(e=>e.sliceTokenStore.prices),a=[].concat(t.map(e=>{let t=c.P[e.asset],a=n[e.vault],i=t&&a&&a.lpLiq&&a.lpBase&&a.lpQuote&&s[t.base]&&s[t.quote],r=i?(s[t.base]*a.lpBase+s[t.quote]*a.lpQuote)/a.lpLiq:s[e.asset]||o.Pq,l=(null==a?void 0:a.lpLiq)||(null==a?void 0:a.lockedAssetTotal)||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:r,amount:l,usdAmount:r*l/o.Pq}}).reduce((e,t)=>{let n=e.find(e=>e.symbol==t.symbol);return n?(n.amount+=t.amount,n.usdAmount+=t.usdAmount,e):[...e,t]},[])),i=a.reduce((e,t)=>e+t.usdAmount,0n);return{tvl:i,tvlItems:a}}(),t=(0,x.useMemo)(()=>e.tvlItems.map(e=>[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:e.symbol,size:20}),(0,s.jsx)("span",{children:e.symbol})]},"icon"),"$".concat((0,p.d)(e.price)),(0,p.d)(e.amount),"$".concat((0,p.d)(e.usdAmount))]),[e.tvlItems]);return(0,s.jsx)(DashItem,{title:"Total Value Locked",sub:"$".concat((0,p.d)(e.tvl)),tHeader:["Asset","NAV","Amount","Total"],tData:t})}function BVaultROI(e){let{vc:t}=e,{roi:n}=(0,b.tY)(t);return(0,s.jsx)(s.Fragment,{children:(0,f.Jh)(n,18,2)})}function BVaultsItem(){let e=(0,d.pK)(),t=(0,x.useMemo)(()=>l.Fw[e].filter(e=>(e.onEnv||[]).includes(o.Vi)),[e]),n=(0,m.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),i=(0,m.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),r=(0,x.useMemo)(()=>{let e=t.map(e=>{let t=(0,f.ok)(n,[e.vault,"lockedAssetTotal"]),s=t*(0,f.ok)(i,[e.asset])/o.Pq,a=c.P[e.asset];if(a){let t=(0,f.ok)(n,[e.vault,"lpBase"]),r=(0,f.ok)(n,[e.vault,"lpQuote"]);s=(t*(0,f.ok)(i,[a.base])+r*(0,f.ok)(i,[a.quote]))/o.Pq}let[r,l]=a?e.assetSymbol.split("-"):["",""],d=Math.max(22+5*(0,p.d)(t).length,5*(0,p.d)(s).length+5);return{bvc:e,totalDeposit:t,totalDepositUsd:s,totalLeftWidth:d,lp:a,baseSymbol:r,quoteSymbol:l}}),r=e.reduce((e,t)=>Math.max(e,t.totalLeftWidth),0)+48;return e.map(e=>{let{bvc:t,totalDeposit:i,totalDepositUsd:l,lp:c,baseSymbol:o,quoteSymbol:d}=e;return[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:t.assetSymbol,size:20}),(0,s.jsx)("span",{children:t.assetSymbol})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-6 items-start",children:[(0,s.jsxs)("div",{style:{width:r},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a.cL,{symbol:t.assetSymbol,size:14}),(0,s.jsx)("span",{children:(0,p.d)(i)})]},"icon"),(0,s.jsxs)("div",{className:"opacity-60",children:["~",(0,p.d)(l)]})]}),c&&(0,s.jsxs)("div",{style:{width:r},children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:o,size:14}),(0,s.jsx)("span",{children:(0,p.d)((0,f.ok)(n,[t.vault,"lpBase"]))})]},"icon"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(a.cL,{symbol:d,size:14}),(0,s.jsx)("span",{children:(0,p.d)((0,f.ok)(n,[t.vault,"lpQuote"]))})]},"icon")]})]},"total"),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[y,(0,s.jsxs)("span",{children:["Epoch ",(0,f.ok)(n,[t.vault,"epochCount"]).toString()]})]},"status"),(0,f.Jh)((0,h.lL)(t),10),(0,s.jsx)(BVaultROI,{vc:t},"roi")]})},[t,n,i]);return(0,s.jsx)(DashItem,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT ROI"],tData:r,tableProps:{span:{1:2},cellClassName:(e,t)=>0==t?"h-[3.5rem]":""}})}function Dashboard(){return(0,u.E)(),(0,s.jsx)(i.E,{children:(0,s.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,s.jsx)(TVLItem,{}),(0,s.jsx)(BVaultsItem,{})]})})}},7347:function(e,t,n){"use strict";n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var s=n(49461),a=n(75577),i=n(45359),r=n(49952),l=n(53414);let c=[{address:s.DR,symbol:"ETH",decimals:18,chain:i.R.id,isNative:!0},{address:s.DR,symbol:"ETH",decimals:18,chain:r.F.id,isNative:!0},{address:s.DR,symbol:"0G",decimals:18,chain:l.Cn.id,isNative:!0},{address:s.DR,symbol:"0G",decimals:18,chain:l.ZS.id,isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:r.F.id},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:r.F.id},{address:"0xe01C85599300f9ED5DE2d7D4FE3Dc2Dc4c5c3877",symbol:"0G",decimals:18,chain:l.Cn.id},{address:"0x78A8D4014000dF30b49eB0c29822B6C7C79D68cA",symbol:"v0G",decimals:18,chain:l.Cn.id},{address:"0x937F60B54dA360b31D60372d2e19FE55Cb8eee53",symbol:"y0G",decimals:18,chain:l.Cn.id},{address:"0x8D44BF9d72039C22dB4e8d7aB50d27038002fAC8",symbol:"lp0G",decimals:18,chain:l.Cn.id},{address:"0x88d6Cb5a4334658443e74bbDbd6FF7E49E8F31fb",symbol:"v0G",decimals:18,chain:l.ZS.id},{address:"0xC43aac9D6C5358ed0Bb4FEfAfc87961E9ec87a88",symbol:"lp0G",decimals:18,chain:l.ZS.id},{address:"0xd839962d55d9e8309f0f64c391887a33ab8cb4d0",symbol:"ATH",decimals:18,chain:l.yX.id},{address:"0x01e80CC2b282D6f926605c20e5aF7D74345615Ac",symbol:"vATH",decimals:18,chain:l.yX.id},{address:"0xf79f736e6787911a5167ebfac7ca5c3de4327a88",symbol:"lpATH",decimals:18,chain:l.yX.id},{address:"0xc87B37a581ec3257B734886d9d3a581F5A9d056c",symbol:"ATH",decimals:18,chain:l.yX.id},{address:"0x24ef95c39DfaA8f9a5ADf58edf76C5b22c34Ef46",symbol:"vATH",decimals:18,chain:l.yX.id},{address:"0xbf4b4A83708474528A93C123F817e7f2A0637a88",symbol:"lpATH",decimals:18,chain:l.yX.id}],o=c.reduce((e,t)=>({...e,["".concat(t.chain,"_").concat(t.address.toLowerCase())]:t}),{});function getTokenBy(e,t,n){if(!e||!t)return;let s="".concat(t,"_").concat(e.toLowerCase()),a=o[s];if(!a){let{symbol:a="Token",decimals:i=18,isNative:r}=null!=n?n:{};return o[s]={address:e,chain:t,symbol:a,decimals:i,isNative:r},o[s]}return a}function isNativeToken(e){return(0,a.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==s.DR}},79075:function(e,t,n){"use strict";n.d(t,{tY:function(){return useBvaultROI}});var s=n(46881),a=n(96555),i=n(62013),r=n(21663),l=n(44100),c=n(64370),o=n(62726),d=n(24313),u=n(82799),m=n(78784),f=n(99409),h=n(13854),p=n(80329),b=n(14848);function calcRestakingApy(e,t,n){let s=t>0n?e*n/t:0n;return s>100n*a.Pq?0n:s}function calcAdditionalApy(e,t,n,s,i){let r=t>0n&&n>0n?t+n*s:0n,l=r>0n?e*a.Pq/r:0n,c=a.Pq*s,o=l*c/a.Pq,d=i>0n?o*a.Pq/i:0n;return d}function useBvaultROI(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,y=(0,l.nr)(e.vault),{data:v,isLoading:g}=function(e){let t=(0,f.pK)();return(0,c.a)({initialData:0n,queryKey:["getReturnsIBGT",e,t],queryFn:async()=>{let n=await m.ZP.get(t,"/api/bvault/getYieldiBGT/".concat(e)),s=BigInt(n.yield)/BigInt(n.dur);return s}})}(e.vault),{data:A,isLoading:B}=(0,u.x)(),C=y.current.duration+y.current.startTime,E=C>0n?C-BigInt((0,p.N)((0,b.z)()/1e3)):0n,j=y.current.yTokenAmountForSwapYT,k=j>0n?v*a.Pq*E/j:0n,N=(0,r.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,T=(0,r.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,w=(0,l.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,o.d)(N),(0,o.d)(w));let D=y.current.vaultYTokenBalance,P=j+n>0n?v*a.Pq*E/(j+n):0n,S=D>0n?y.Y*a.Pq/D:0n,q=S*w/a.Pq,F=x*w/a.Pq,I=calcRestakingApy(k,q,N),R=n>0n?calcRestakingApy(P,F,N):0n;console.info("restakingapy:",e.assetSymbol,(0,o.d)(I),(0,o.d)(k),(0,o.d)(S),(0,o.d)(q));let L=null===(t=A["".concat(e.vault)])||void 0===t?void 0:t[parseInt(y.epochCount.toString())],V=L&&L.token&&L.amount?(0,h.ok)(T,u.c[L.token])*(0,d.f)(L.amount.toFixed(6))/a.Pq:0n,{data:G,isLoading:M}=function(e){let t=(0,l.nr)(e),n=(0,f.pK)();return(0,c.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",n,e,t.current.adhocBribesPool],enabled:!!e&&!!t.current.adhocBribesPool,queryFn:async()=>{let e=(0,i.B)(n);return e.readContract({abi:s.q3,address:t.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),H=calcAdditionalApy(V,G,j,E,q),O=n>0n?calcAdditionalApy(V,G,j+n,E,F):0n,X=g||B||M;return{roi:!X&&j>0n&&k>0n?I+H-a.Pq:0n,roiChange:!X&&j>0n&&k>0n?R+O-a.Pq:0n,restakingIncomesApy:I,additionalRoi:H}}},62013:function(e,t,n){"use strict";n.d(t,{B:function(){return getPC}});var s=n(53414),a=n(93108);let i=(0,a.Ue)((e,t)=>({readingCount:0,upReadingCount:n=>e({readingCount:t().readingCount+n})}));var r=n(93342),l=n(61469),c=n(95319),o=n(46502);let d={};function getPC(e,t){d[e]||(d[e]={pcs:function(e){let t=s.Af.find(t=>t.id==e);if(!t)throw"No Chain for chianId:".concat(e);let n=function(e){let t=(0,l.X)(e.rpcUrls);return(0,r.x)(t.map(t=>e.rpcUrls[t].http))}(t);if(0==n.length)throw"No Chain rpc for chianId:".concat(e);let a=n.map(t=>{let n=(0,c.v)({batch:{multicall:s.y1},chain:s.Af.find(t=>t.id==e),transport:(0,o.d)(t,{batch:s.Xp})}),a=n.readContract;return n.readContract=async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{return i.getState().upReadingCount(1),await a(...t)}catch(e){throw console.error("readError",e,"\nArgs",[...t]),e}finally{i.getState().upReadingCount(-1)}},n});return a}(e),next:0,time:0});let n=d[e];if("number"==typeof t)return n.time=Date.now(),n.pcs[t%n.pcs.length];{let e=Date.now();n.pcs.length>1&&e-n.time>s.Xp.wait&&(n.next++,n.next>=n.pcs.length&&(n.next=0),n.time=e);let t=n.pcs[n.next];return t}}},17132:function(e,t,n){"use strict";function decimalAdjust(e,t,n=0){if(Object.is(t=Number(t),-0)&&(t="-0"),n=Math.min(Number.parseInt(n,10),292)){let[s,a=0]=t.toString().split("e"),i=Math[e](Number(`${s}e${Number(a)+n}`));Object.is(i,-0)&&(i="-0");let[r,l=0]=i.toString().split("e");return Number(`${r}e${Number(l)-n}`)}return Math[e](Number(t))}n.d(t,{e:function(){return decimalAdjust}})},21532:function(e,t,n){"use strict";n.d(t,{G:function(){return floor}});var s=n(17132);function floor(e,t=0){return(0,s.e)("floor",e,t)}},38462:function(e,t,n){"use strict";function range(e,t,n=1){if(null==t&&(t=e,e=0),!Number.isInteger(n)||0===n)throw Error("The step value must be a non-zero integer.");let s=Math.max(Math.ceil((t-e)/n),0),a=Array(s);for(let t=0;t<s;t++)a[t]=e+t*n;return a}n.d(t,{w:function(){return range}})},24313:function(e,t,n){"use strict";n.d(t,{f:function(){return parseEther}});var s=n(89345),a=n(30796);function parseEther(e,t="wei"){return(0,a.v)(e,s.ez[t])}}},function(e){e.O(0,[2257,9891,1137,6647,6324,3606,1416,2516,2198,9987,4195,6338,1744],function(){return e(e.s=59292)}),_N_E=e.O()}]);