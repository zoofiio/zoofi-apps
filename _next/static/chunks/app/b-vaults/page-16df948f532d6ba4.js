(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9102],{77179:function(e,t,s){Promise.resolve().then(s.bind(s,42719))},42719:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(31113),n=s(59781);function Icon(e){let{showbg:t,showOutline:s,isHover:n,...l}=e;return(0,a.jsxs)("svg",{...l,width:"1em",height:"1em",viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_44_1607",x1:"13",y1:"14",x2:"41.5",y2:"43",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#0ED19A"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#007730"})]})}),(0,a.jsx)("path",{d:"M53.5 27C53.5 41.6355 41.6355 53.5 27 53.5C12.3645 53.5 0.5 41.6355 0.5 27C0.5 12.3645 12.3645 0.5 27 0.5C41.6355 0.5 53.5 12.3645 53.5 27Z",stroke:s?"currentColor":"transparent",fill:t?"url(#paint0_linear_44_1607)":"none"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7677 20.0734C22.3519 19.9523 21.8905 19.9873 21.4367 20.111C20.957 20.2417 20.4525 20.4803 19.9559 20.7933C18.963 21.4192 17.9551 22.3721 17.1834 23.4777C16.4134 24.581 15.8555 25.8699 15.8148 27.1675C15.7735 28.4856 16.2684 29.7798 17.5382 30.8428L17.5888 30.8851L17.6498 30.9106C18.8412 31.4086 20.7002 31.6235 22.3929 30.6138C24.0958 29.5981 25.5153 27.413 25.9703 23.352L25.9747 23.3128L25.9718 23.2734C25.8967 22.244 25.3238 21.4507 24.6753 20.9218C24.0613 20.4211 23.3253 20.113 22.7677 20.0734ZM18.0486 30.1419C19.0589 30.5452 20.5789 30.6904 21.9445 29.8759C23.323 29.0537 24.6584 27.1843 25.1016 23.2977C25.0373 22.5846 24.6352 22.0048 24.1228 21.5868C23.5899 21.1523 22.9985 20.9423 22.6742 20.9308L22.6115 20.9286L22.5519 20.9089C22.3414 20.8391 22.046 20.8383 21.6673 20.9415C21.2925 21.0436 20.8676 21.2395 20.4225 21.5201C19.532 22.0813 18.6072 22.9521 17.8985 23.9676C17.188 24.9855 16.7176 26.1152 16.6838 27.1943C16.6511 28.236 17.0226 29.2604 18.0486 30.1419Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.8155 20.0749C31.2227 19.9532 31.6736 19.99 32.1143 20.1144C32.5814 20.2462 33.0723 20.4861 33.5551 20.7998C34.5206 21.427 35.5019 22.3807 36.2558 23.4857C37.0083 24.5887 37.5559 25.875 37.6054 27.168C37.6557 28.4798 37.1904 29.7729 35.9684 30.8372L35.9176 30.8815L35.8555 30.9084C34.7013 31.4081 32.8973 31.6214 31.2475 30.6068C29.5922 29.5888 28.2058 27.405 27.7344 23.3506L27.73 23.3128L27.7324 23.2747C27.7964 22.2503 28.3418 21.4574 28.9677 20.9264C29.5574 20.4261 30.2694 20.1155 30.8155 20.0749ZM35.4454 30.1453C34.4796 30.5434 33.0239 30.6855 31.706 29.875C30.3697 29.0531 29.0623 27.1818 28.6026 23.2914C28.659 22.5741 29.0446 21.9952 29.5332 21.5806C30.0427 21.1484 30.6069 20.9429 30.9114 20.9321L30.9764 20.9298L31.0379 20.9087C31.233 20.8418 31.5118 20.8399 31.876 20.9427C32.2362 21.0444 32.6467 21.2396 33.0784 21.5201C33.9419 22.081 34.8422 22.9518 35.5355 23.9681C36.2302 24.9864 36.6952 26.1183 36.7367 27.2007C36.7767 28.2464 36.4242 29.2689 35.4454 30.1453Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.6119 15.2847C44.7015 17.0602 43.8394 19.0693 41.6541 21.1273C41.9706 21.8631 42.4553 23.38 42.7965 25.2776C43.198 27.5112 43.4107 30.3246 42.8991 33.0906C42.3867 35.8612 41.1432 38.6032 38.6182 40.6486C36.0943 42.6931 32.3413 44 26.8907 44H26.8876L26.8844 44C22.0048 43.9298 18.4181 42.9374 15.846 41.3349C13.2669 39.7282 11.7378 37.5264 10.9482 35.1004C9.41264 30.3822 10.677 24.8377 12.3231 21.0939C10.5789 18.9453 9.9052 16.9215 10.0106 15.1828C10.1197 13.3839 11.0607 11.948 12.3918 11.0655C14.9834 9.34733 19.0233 9.73505 21.353 13.3966C23.4967 12.706 25.8931 12.5683 28.028 12.6754C30.0474 12.7767 31.8603 13.0986 33.0494 13.3997C33.8381 11.5391 35.2887 10.5016 36.9057 10.1442C38.6088 9.76776 40.4771 10.1477 41.943 11.0586C43.4122 11.9715 44.5192 13.4471 44.6119 15.2847ZM33.724 14.0595C34.3667 12.2539 35.6543 11.3033 37.095 10.9849C38.5548 10.6622 40.1911 10.9867 41.4811 11.7883C42.7678 12.5878 43.6682 13.8326 43.7436 15.3277C43.8191 16.8226 43.0751 18.6797 40.8331 20.708L40.5822 20.9349L40.7438 21.231C40.972 21.6488 41.5478 23.2441 41.9406 25.4287C42.3311 27.6008 42.5307 30.304 42.044 32.9354C41.5582 35.5622 40.393 38.0983 38.0679 39.9818C35.7423 41.8657 32.2049 43.1381 26.894 43.1387C22.1229 43.0697 18.707 42.0998 16.3088 40.6058C13.917 39.1157 12.508 37.0863 11.7756 34.836C10.3011 30.3054 11.5673 24.8576 13.2253 21.2026L13.3366 20.9571L13.1628 20.7504C11.389 18.641 10.7865 16.751 10.8784 15.2345C10.9701 13.7224 11.7543 12.5246 12.8753 11.7814C15.1178 10.2946 18.7404 10.6182 20.7852 14.1314L20.9665 14.4428L21.3082 14.3217C23.386 13.5852 25.7962 13.4259 27.984 13.5357C30.1689 13.6453 32.0982 14.0214 33.1951 14.3305L33.5881 14.4412L33.724 14.0595Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7677 20.0734C22.3519 19.9523 21.8905 19.9873 21.4367 20.111C20.957 20.2417 20.4525 20.4803 19.9559 20.7933C18.963 21.4192 17.9551 22.3721 17.1834 23.4777C16.4134 24.581 15.8555 25.8699 15.8148 27.1675C15.7735 28.4856 16.2684 29.7798 17.5382 30.8428L17.5888 30.8851L17.6498 30.9106C18.8412 31.4086 20.7002 31.6235 22.3929 30.6138C24.0958 29.5981 25.5153 27.413 25.9703 23.352L25.9747 23.3128L25.9718 23.2734C25.8967 22.244 25.3238 21.4507 24.6753 20.9218C24.0613 20.4211 23.3253 20.113 22.7677 20.0734ZM18.0486 30.1419C19.0589 30.5452 20.5789 30.6904 21.9445 29.8759C23.323 29.0537 24.6584 27.1843 25.1016 23.2977C25.0373 22.5846 24.6352 22.0048 24.1228 21.5868C23.5899 21.1523 22.9985 20.9423 22.6742 20.9308L22.6115 20.9286L22.5519 20.9089C22.3414 20.8391 22.046 20.8383 21.6673 20.9415C21.2925 21.0436 20.8676 21.2395 20.4225 21.5201C19.532 22.0813 18.6072 22.9521 17.8985 23.9676C17.188 24.9855 16.7176 26.1152 16.6838 27.1943C16.6511 28.236 17.0226 29.2604 18.0486 30.1419Z",stroke:"currentColor",strokeLinecap:"round"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.8155 20.0749C31.2227 19.9532 31.6736 19.99 32.1143 20.1144C32.5814 20.2462 33.0723 20.4861 33.5551 20.7998C34.5206 21.427 35.5019 22.3807 36.2558 23.4857C37.0083 24.5887 37.5559 25.875 37.6054 27.168C37.6557 28.4798 37.1904 29.7729 35.9684 30.8372L35.9176 30.8815L35.8555 30.9084C34.7013 31.4081 32.8973 31.6214 31.2475 30.6068C29.5922 29.5888 28.2058 27.405 27.7344 23.3506L27.73 23.3128L27.7324 23.2747C27.7964 22.2503 28.3418 21.4574 28.9677 20.9264C29.5574 20.4261 30.2694 20.1155 30.8155 20.0749ZM35.4454 30.1453C34.4796 30.5434 33.0239 30.6855 31.706 29.875C30.3697 29.0531 29.0623 27.1818 28.6026 23.2914C28.659 22.5741 29.0446 21.9952 29.5332 21.5806C30.0427 21.1484 30.6069 20.9429 30.9114 20.9321L30.9764 20.9298L31.0379 20.9087C31.233 20.8418 31.5118 20.8399 31.876 20.9427C32.2362 21.0444 32.6467 21.2396 33.0784 21.5201C33.9419 22.081 34.8422 22.9518 35.5355 23.9681C36.2302 24.9864 36.6952 26.1183 36.7367 27.2007C36.7767 28.2464 36.4242 29.2689 35.4454 30.1453Z",stroke:"currentColor",strokeLinecap:"round"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.6119 15.2847C44.7015 17.0602 43.8394 19.0693 41.6541 21.1273C41.9706 21.8631 42.4553 23.38 42.7965 25.2776C43.198 27.5112 43.4107 30.3246 42.8991 33.0906C42.3867 35.8612 41.1432 38.6032 38.6182 40.6486C36.0943 42.6931 32.3413 44 26.8907 44H26.8876L26.8844 44C22.0048 43.9298 18.4181 42.9374 15.846 41.3349C13.2669 39.7282 11.7378 37.5264 10.9482 35.1004C9.41264 30.3822 10.677 24.8377 12.3231 21.0939C10.5789 18.9453 9.9052 16.9215 10.0106 15.1828C10.1197 13.3839 11.0607 11.948 12.3918 11.0655C14.9834 9.34733 19.0233 9.73505 21.353 13.3966C23.4967 12.706 25.8931 12.5683 28.028 12.6754C30.0474 12.7767 31.8603 13.0986 33.0494 13.3997C33.8381 11.5391 35.2887 10.5016 36.9057 10.1442C38.6088 9.76776 40.4771 10.1477 41.943 11.0586C43.4122 11.9715 44.5192 13.4471 44.6119 15.2847ZM33.724 14.0595C34.3667 12.2539 35.6543 11.3033 37.095 10.9849C38.5548 10.6622 40.1911 10.9867 41.4811 11.7883C42.7678 12.5878 43.6682 13.8326 43.7436 15.3277C43.8191 16.8226 43.0751 18.6797 40.8331 20.708L40.5822 20.9349L40.7438 21.231C40.972 21.6488 41.5478 23.2441 41.9406 25.4287C42.3311 27.6008 42.5307 30.304 42.044 32.9354C41.5582 35.5622 40.393 38.0983 38.0679 39.9818C35.7423 41.8657 32.2049 43.1381 26.894 43.1387C22.1229 43.0697 18.707 42.0998 16.3088 40.6058C13.917 39.1157 12.508 37.0863 11.7756 34.836C10.3011 30.3054 11.5673 24.8576 13.2253 21.2026L13.3366 20.9571L13.1628 20.7504C11.389 18.641 10.7865 16.751 10.8784 15.2345C10.9701 13.7224 11.7543 12.5246 12.8753 11.7814C15.1178 10.2946 18.7404 10.6182 20.7852 14.1314L20.9665 14.4428L21.3082 14.3217C23.386 13.5852 25.7962 13.4259 27.984 13.5357C30.1689 13.6453 32.0982 14.0214 33.1951 14.3305L33.5881 14.4412L33.724 14.0595Z",stroke:"currentColor",strokeLinecap:"round"})]})}var l=s(4283),r=s(66499),i=s(95889),o=s(44020),c=s(22139),d=s(78403),u=s(55349),m=s(18358),x=s(64370),p=s(83978),h=s.n(p),b=s(11292),f=s(42087),C=s(33737),v=s(70283),j=s(4848),g=s(26361),w=s(59175);function calcRestakingApy(e,t,s){let a=t>0n?e*s/t:0n;return a>100n*c.Pq?0n:a}function calcAdditionalApy(e,t,s,a,n){let l=t>0n&&s>0n?t+s*a:0n,r=l>0n?e*c.Pq/l:0n,i=c.Pq*a,o=r*i/c.Pq,d=n>0n?o*c.Pq/n:0n;return d}function useBvaultROI(e){var t,s;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,l=(0,m.nr)(e.vault),{data:i,isLoading:o}=(s=e.vault,(0,x.a)({initialData:0n,queryKey:["getReturnsIBGT",s],queryFn:async()=>{let e=await j.ZP.get("/api/bvault/getYieldiBGT/".concat(s)),t=BigInt(e.yield)/BigInt(e.dur);return t}})),{data:p,isLoading:N}=(0,v.x)(),y=l.current.duration+l.current.startTime,k=y>0n?y-BigInt(h().round(h().now()/1e3)):0n,B=l.current.yTokenAmountForSwapYT,T=B>0n?i*c.Pq*k/B:0n,S=(0,u.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,L=(0,u.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,P=(0,m.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,b.d)(S),(0,b.d)(P));let A=l.current.vaultYTokenBalance,V=B+a>0n?i*c.Pq*k/(B+a):0n,E=A>0n?l.Y*c.Pq/A:0n,R=E*P/c.Pq,I=n*P/c.Pq,F=calcRestakingApy(T,R,S),Y=a>0n?calcRestakingApy(V,I,S):0n;console.info("restakingapy:",e.assetSymbol,(0,b.d)(F),(0,b.d)(T),(0,b.d)(E),(0,b.d)(R));let q=null===(t=p["".concat(e.vault)])||void 0===t?void 0:t[parseInt(l.epochCount.toString())],D=q&&q.token&&q.amount?(0,g.ok)(L,v.c[q.token])*function(e,t="wei"){return(0,C.v)(e,f.ez[t])}(q.amount.toFixed(6))/c.Pq:0n,{data:M,isLoading:_}=function(e){let t=(0,m.nr)(e),s=(0,w.p)();return(0,x.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",s,e,t.current.adhocBribesPool],enabled:!!e&&!!t.current.adhocBribesPool,queryFn:async()=>{let e=(0,d.B)(s);return e.readContract({abi:r.q3,address:t.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),Z=calcAdditionalApy(D,M,B,k,R),U=a>0n?calcAdditionalApy(D,M,B+a,k,I):0n,O=o||N||_;return{roi:!O&&B>0n&&T>0n?F+Z-c.Pq:0n,roiChange:!O&&B>0n&&T>0n?Y+U-c.Pq:0n,restakingIncomesApy:F,additionalRoi:Z}}var N=s(84944),y=s(95499),k=s(36834),B=s(69708),T=s(64103),S=s(12485),L=s(93650),P=s(14993),A=s(85665),V=s(20265),E=s(47259);let R="0x0000000000000000000000000000000000000000";var I=s(4408),F=s(12687),Y=s(91214),q=s(2811),D=s(49041),M=s(64217);let bnToNum=e=>h().round(parseFloat((0,b.d)(BigInt(e))),5),logTrans=e=>h().round(Math.log10(90*e+1),5),revertLog=e=>h().round((Math.pow(10,e)-1)/90,5);function BvaultEpochYtPrices(e){let{bvc:t,epochId:s}=e,n=(0,w.p)(),{data:l}=(0,x.a)({queryKey:["bvualt-epoch-yt-prices",n,t.vault,s],queryFn:()=>(0,q.l6)(t.vault,s),initialData:[]}),[r,i]=(0,P.Z)(!0),{options:o}=(0,T.useMemo)(()=>{let e=l.map(e=>[(0,g.G$)(1e3*e.time,g.mv.ALL),r?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>r?revertLog(e).toString():e.toString(),t={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new M.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:t}},[l,r]);return(0,a.jsxs)("div",{className:"card p-4 mx-auto max-w-4xl w-full min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,a.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,a.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,a.jsx)("span",{className:(0,g.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",r?"bg-primary":"bg-transparent"),onClick:()=>i(),children:"LOG"})}),(0,a.jsx)(D.Z,{option:o,style:{height:240}})]})}var _=s(73216),Z=s(42487),U=s.n(Z),O=s(95702);function GetLP(e){let{address:t}=e,s=o.P[t],n=(0,w.p)();return s?(0,a.jsxs)("div",{className:"text-xs font-medium flex gap-2 justify-end items-center",children:[(0,a.jsx)(O.cL,{symbol:"berahub",size:18}),(0,a.jsx)(U(),{target:"_blank",className:"underline",href:(0,_.FN)(n,t),children:"Get LP on Beraswap"})]}):null}var W=s(75496),G=s(16738),H=s(60689),z=s(54825),K=s(6371);function BeraLine_Icon(e){let{showbg:t,showOutline:s,isHover:n,...l}=e;return(0,a.jsxs)("svg",{...l,width:"1em",height:"1em",viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_44_1592",x1:"8.5",y1:"11",x2:"44.5",y2:"47.5",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#FF8080"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#C62B23"})]})}),(0,a.jsx)("path",{d:"M53.5 27C53.5 41.6355 41.6355 53.5 27 53.5C12.3645 53.5 0.5 41.6355 0.5 27C0.5 12.3645 12.3645 0.5 27 0.5C41.6355 0.5 53.5 12.3645 53.5 27Z",stroke:s?"currentColor":"transparent",fill:t?"url(#paint0_linear_44_1592)":"none"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.1541 20.3085C39.5732 21.2853 39.8971 22.5549 40.1351 23.7526C40.3699 24.9338 40.5265 26.0724 40.6076 26.8437C41.7095 27.4146 42.723 28.6292 43.3458 30.1025C44.0169 31.6901 44.2631 33.6423 43.645 35.554C42.3948 39.4212 37.7309 42.8511 26.8177 42.996C16.16 43.1376 11.5736 39.485 10.3472 35.4442C9.74258 33.4522 9.9802 31.4238 10.6553 29.8269C11.2596 28.3975 12.2538 27.2325 13.3938 26.8141C13.3427 25.5473 13.6011 24.2121 13.946 23.0478C14.2749 21.9375 14.6899 20.958 15.018 20.305C12.9758 18.0421 12.0779 16.0588 12.015 14.4242C11.949 12.7086 12.8063 11.4422 14.0716 10.7387C16.4525 9.415 20.2702 10.0781 22.1671 13.1841C24.0255 12.0886 26.03 11.8681 27.7916 12.0431C29.4455 12.2074 30.9066 12.7218 31.875 13.2128C33.9337 9.96492 37.6393 9.28803 39.9545 10.6942C41.1675 11.431 41.9642 12.7272 41.9134 14.4402C41.8647 16.0834 41.0397 18.0689 39.1541 20.3085ZM39.5139 11.4138C37.5747 10.236 34.2003 10.7929 32.3991 13.9825L32.1891 14.3544L31.8184 14.1407C30.9732 13.6533 29.458 13.0557 27.7076 12.8818C25.9621 12.7084 24.0106 12.9583 22.2514 14.1266L21.8595 14.3869L21.6416 13.9709C20.0612 10.9534 16.5532 10.3243 14.4841 11.4747C13.4753 12.0355 12.8077 13.0168 12.8606 14.3919C12.9146 15.7953 13.7229 17.6702 15.84 19.952L16.045 20.173L15.9018 20.4379C15.5865 21.0213 15.1182 22.069 14.7576 23.2863C14.3959 24.5072 14.1523 25.8665 14.2586 27.0851L14.2906 27.4516L13.9303 27.5327C13.0294 27.7353 12.0522 28.6945 11.4352 30.1541C10.8278 31.5907 10.6159 33.4168 11.1571 35.2003C12.2225 38.7103 16.3093 42.2926 26.8064 42.1532C37.6121 42.0097 41.7628 38.6262 42.8396 35.2956C43.3851 33.6084 43.1729 31.8655 42.5659 30.4296C41.9536 28.9809 40.968 27.908 40.0419 27.5083L39.8123 27.4092L39.7889 27.1609C39.7196 26.4248 39.5594 25.1959 39.3051 23.9163C39.0492 22.6294 38.7045 21.3246 38.276 20.4175L38.1591 20.1701L38.3383 19.963C40.2776 17.7207 41.0252 15.8436 41.0676 14.4153C41.1093 13.0071 40.4692 11.9941 39.5139 11.4138Z",fill:"currentColor",stroke:"currentColor"})]})}function BullLine_Icon(e){let{showbg:t,showOutline:s,isHover:n,...l}=e;return(0,a.jsxs)("svg",{...l,width:"1em",height:"1em",viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_44_1600",x1:"12.5",y1:"11",x2:"44",y2:"43.5",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#53BAFF"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#1645BB"})]})}),(0,a.jsx)("path",{d:"M53.5 27C53.5 41.6355 41.6355 53.5 27 53.5C12.3645 53.5 0.5 41.6355 0.5 27C0.5 12.3645 12.3645 0.5 27 0.5C41.6355 0.5 53.5 12.3645 53.5 27Z",stroke:s?"currentColor":"transparent",fill:t?"url(#paint0_linear_44_1600)":"none"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.3474 9.07977C34.2292 9.13328 34.1505 9.21789 34.1021 9.28349C34.0458 9.35981 34.0063 9.44316 33.9773 9.5153C33.9197 9.65894 33.8737 9.83709 33.8321 10.0167C33.8034 10.1411 33.7753 10.272 33.7458 10.4097C33.6844 10.6964 33.6165 11.0132 33.5224 11.3631C33.2608 12.336 32.8347 13.3986 31.9878 14.1381C30.5643 13.4942 28.9114 13.129 27.0019 13.129C25.0857 13.129 23.4277 13.4916 22.0005 14.1311C21.1591 13.3921 20.7356 12.3333 20.4758 11.3635C20.382 11.0134 20.3144 10.6968 20.2533 10.4099C20.2239 10.2724 20.196 10.1414 20.1674 10.0171C20.126 9.83752 20.0802 9.65934 20.0227 9.51565C19.9938 9.44349 19.9543 9.36008 19.898 9.2837C19.8496 9.21801 19.7709 9.13332 19.6526 9.07978C19.3705 8.9303 19.0842 9.01466 18.8906 9.13842C18.6959 9.2629 18.5307 9.45885 18.3953 9.67115C18.1193 10.1037 17.8847 10.7338 17.7639 11.4623C17.5835 12.5492 17.6482 13.9094 18.2591 15.2396C17.479 14.9434 16.5358 14.6668 15.5995 14.4831C14.7583 14.3179 13.8938 14.2216 13.1298 14.2596C12.3819 14.2968 11.6484 14.4664 11.1537 14.9136L11.0121 15.0416L11.0042 15.2328C10.9212 17.2345 12.0777 19.0173 13.1963 20.2573C13.7632 20.8856 14.3388 21.3952 14.7837 21.7489C15.0062 21.9258 15.1987 22.0657 15.3439 22.1634C15.3543 22.1704 15.3645 22.1772 15.3746 22.1839C14.1735 25.7501 13.9568 29.6469 14.1621 32.4229C13.2788 33.7506 12.8124 35.4017 12.9672 37.4227L12.9697 37.4558L12.977 37.4883C13.9368 41.7468 17.3059 43.6085 20.4192 44.405C23.1897 45.1137 25.861 45.0068 26.6498 44.9753C26.7458 44.9714 26.814 44.9687 26.851 44.9687C29.1359 44.9687 32.2563 44.7329 34.9731 43.6958C37.6984 42.6554 40.0829 40.7783 40.7276 37.4753C40.9987 36.0868 40.7984 34.3173 39.8338 32.663C40.0478 29.859 39.8312 25.8566 38.5957 22.2034C38.6151 22.1907 38.6353 22.1774 38.6561 22.1634C38.8013 22.0657 38.9938 21.9258 39.2163 21.7489C39.6612 21.3952 40.2368 20.8856 40.8037 20.2573C41.9223 19.0173 43.0788 17.2345 42.9958 15.2328L42.9879 15.0416L42.8463 14.9136C42.3516 14.4664 41.6181 14.2968 40.8702 14.2596C40.1062 14.2216 39.2417 14.3179 38.4005 14.4831C37.4642 14.6668 36.521 14.9434 35.7409 15.2396C36.3518 13.9094 36.4165 12.5492 36.2361 11.4623C36.1153 10.7338 35.8807 10.1037 35.6047 9.67115C35.4693 9.45885 35.3041 9.2629 35.1094 9.13842C34.9158 9.01466 34.6295 8.9303 34.3474 9.07977ZM38.2748 21.3225C38.3808 21.247 38.5093 21.1508 38.6544 21.0355C39.0678 20.7069 39.6053 20.231 40.1327 19.6464C41.1567 18.5113 42.0769 17.0399 42.0942 15.4802C41.8183 15.3076 41.3941 15.1965 40.8255 15.1682C40.1604 15.1351 39.3742 15.2188 38.5741 15.3759C37.2691 15.6321 36.0031 16.0673 35.2445 16.4396C36.3954 17.6236 37.2825 19.0432 37.9575 20.5624C38.0688 20.813 38.1745 21.0665 38.2748 21.3225ZM34.4431 15.6914C35.4012 14.3064 35.537 12.782 35.3429 11.6118C35.2374 10.9757 35.038 10.4686 34.8424 10.1621C34.8124 10.1151 34.7843 10.0756 34.7585 10.0426C34.7448 10.0942 34.7301 10.1539 34.7142 10.2226C34.691 10.3228 34.6659 10.4399 34.6381 10.5692C34.5744 10.8661 34.4967 11.2282 34.3966 11.6003C34.1449 12.5367 33.7186 13.683 32.846 14.575C33.2379 14.7978 33.6103 15.0433 33.9639 15.3092C34.1278 15.4325 34.2875 15.56 34.4431 15.6914ZM31.9622 15.1326L32.0532 15.249L32.1068 15.2067C32.5749 15.4516 33.0124 15.7301 33.4213 16.0375C35.0643 17.2729 36.2689 18.9939 37.1306 20.9332C38.6548 24.3637 39.0802 28.4208 38.9891 31.4824C38.8321 31.3004 38.6637 31.1217 38.4837 30.9468C36.3739 28.8977 32.713 27.442 26.8511 27.6839C24.4429 27.5836 20.8648 27.9295 17.9413 29.32C16.8501 29.839 15.8381 30.5093 15.0131 31.3667C14.9282 28.7543 15.2226 25.421 16.2656 22.3777H16.2862V22.3179C16.46 21.8163 16.6542 21.3227 16.8705 20.8418C17.7321 18.9265 18.9365 17.2286 20.5795 16.0102C20.984 15.7102 21.4165 15.4382 21.879 15.1986L21.9429 15.249L22.0499 15.1122C23.4255 14.4342 25.06 14.0387 27.0019 14.0387C28.9478 14.0387 30.585 14.4419 31.9622 15.1326ZM21.1404 14.5649C20.2745 13.6743 19.8513 12.5329 19.6014 11.6C19.5016 11.2276 19.4243 10.8656 19.3608 10.5687C19.3332 10.4394 19.3082 10.3223 19.2851 10.2222C19.2694 10.1539 19.2548 10.0944 19.2412 10.043C19.2155 10.0759 19.1875 10.1153 19.1576 10.1621C18.962 10.4686 18.7626 10.9757 18.6571 11.6118C18.4639 12.7764 18.5975 14.2917 19.5431 15.6715C19.7048 15.536 19.871 15.4049 20.0417 15.2783C20.3896 15.0202 20.7556 14.7818 21.1404 14.5649ZM18.7286 16.4265C17.9671 16.0571 16.7156 15.629 15.4259 15.3759C14.6258 15.2188 13.8396 15.1351 13.1745 15.1682C12.6059 15.1965 12.1817 15.3076 11.9058 15.4802C11.9231 17.0399 12.8433 18.5113 13.8673 19.6464C14.3947 20.231 14.9322 20.7069 15.3456 21.0355C15.4773 21.1402 15.5953 21.2291 15.6953 21.3011C15.8052 21.02 15.9218 20.7418 16.0453 20.4672C16.7148 18.9789 17.5925 17.5887 18.7286 16.4265ZM37.8543 31.6009C35.9778 29.7784 32.5879 28.3543 26.8698 28.5936L26.8508 28.5944L26.8317 28.5936C24.5111 28.4944 21.0824 28.8326 18.3288 30.1422C16.9566 30.7949 15.7741 31.6782 14.9702 32.8468C14.176 34.0013 13.7319 35.4621 13.8676 37.3198C14.7285 41.0742 17.6898 42.768 20.6427 43.5234C23.2591 44.1928 25.767 44.0981 26.607 44.0663C26.7195 44.0621 26.8021 44.059 26.851 44.059C29.0938 44.059 32.0859 43.8248 34.6514 42.8454C37.2085 41.8692 39.2763 40.1833 39.839 37.3003C40.1512 35.7008 39.7331 33.4256 37.8543 31.6009Z",fill:"currentColor",stroke:"currentColor"})]})}let $={Bera:BeraLine_Icon,Bull:BullLine_Icon,Panda:Icon,Venom:l.Z,BeraLine:BeraLine_Icon,BullLine:BullLine_Icon,PandaLine:Icon,VenomLine:l.Z},J="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.jsx)("div",{className:(0,g.cn)(J,"border-b",{"border-l":n}),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,a.jsx)(O.cL,{symbol:e,size:14}),e]}),(0,a.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,a.jsx)("span",{className:"",children:(0,N.d)(t)}),(0,a.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,N.d)(s,2))})]})]})})},renderStat=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.jsx)("div",{className:(0,g.cn)(J,"border-b pb-10",{"border-l":n}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,a.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(O.cL,{symbol:t,size:14}),"string"==typeof s?(0,a.jsx)("span",{children:s}):s]})]})})},BtnWrap=e=>{let{children:t,onClick:s,...n}=e;return e.onClick?(0,a.jsx)(H.k,{...n,onClick:s,children:t}):(0,a.jsx)("div",{...n,onClick:s,children:t})},renderChoseSide=(e,t,s,n,l,r,i,o)=>{let c=$[e],d=$[n];return(0,a.jsxs)("div",{className:(0,g.cn)(J,"col-span-2 gap-4"),children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,a.jsx)(BtnWrap,{className:(0,g.cn)("h-[4.25rem] w-full relative"),onClick:i,children:(0,a.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,a.jsx)(c,{className:"text-4xl",showbg:!0}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:t}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:s})]})]})}),(0,a.jsx)(BtnWrap,{className:(0,g.cn)("h-[4.25rem] w-full relative"),onClick:o,children:(0,a.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,a.jsx)(d,{className:"text-4xl",showbg:!0}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:l}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:r})]})]})})]})]})};function TupleTxt(e){return(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,a.jsx)("div",{className:(0,g.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}function BVaultRedeem(e){let{bvc:t}=e,[s,n]=(0,T.useState)(""),l=(0,g.su)(s),i=(0,m.nr)(t.vault),o=(0,m.Vw)(t.vault)[0],c=(0,u.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),d=(0,m.R3)(t),x=i.current.duration>0n?"Waiting Time: ~".concat((0,g.Y)((i.current.duration+i.current.startTime)*1000n-BigInt(h().now()))):"";return(0,a.jsxs)("div",{className:(0,g.cn)("flex flex-col gap-1"),children:[(0,a.jsx)(Y.W,{asset:t.pTokenSymbol,assetIcon:"Panda",amount:s,balance:c,setAmount:n}),!i.closed&&(0,a.jsxs)("div",{className:"text-xs font-medium text-center",children:[x," ",(0,a.jsx)(K.C,{children:"Wait to claim after the Epoch ends."})]}),(0,a.jsx)(F.v,{className:"mx-auto mt-6",tx:"Request",spender:null==o?void 0:o.redeemPool,approves:{[t.pToken]:l},disabled:o&&l<=0n||l>c,config:{abi:r.gg,address:(null==o?void 0:o.redeemPool)||R,functionName:"redeem",args:[l]},onTxSuccess:()=>{n(""),d()}})]})}function BVaultRedeemAll(e){let{bvc:t}=e,s=(0,u.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),n=(0,m.R3)(t),{data:l}=(0,I.p)(),{ids:o,claimable:c}=(0,m.gz)(t.vault),x=(0,w.p)(),{mutate:p,isPending:h}=(0,y.D)({mutationKey:["readeemAll",s,c,o],mutationFn:async()=>{if(!l)throw"Error";let e=(0,d.B)(x);s>10n&&await l.writeContract({abi:r.j5,address:t.vault,functionName:"redeem",args:[s]}).then(t=>e.waitForTransactionReceipt({hash:t,confirmations:i.EI})),c>10n&&await l.writeContract({abi:r.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[o]}).then(t=>e.waitForTransactionReceipt({hash:t,confirmations:i.EI})),E.A.success("Transaction success")},onSuccess:n,onError:g.S3}),b=!l||s+c<=100n;return(0,a.jsxs)("div",{className:(0,g.cn)("flex justify-between items-center gap-5 flex-wrap"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-nowrap",children:[(0,a.jsx)(O.cL,{symbol:t.assetSymbol,size:30})," ",t.assetSymbol]}),(0,a.jsxs)("div",{className:"whitespace-nowrap",children:["Balance: ",(0,N.d)(s)]}),(0,a.jsxs)("div",{className:"whitespace-nowrap",children:["Claimable: ",(0,N.d)(c)]}),(0,a.jsx)(H.k,{className:"mx-auto mt-6 flex items-center justify-center gap-2",busy:h,disabled:b,onClick:p,children:"Redeem All"})]})}function BVaultClaim(e){let{bvc:t}=e,s=(0,m.nr)(t.vault),n=(0,m.Vw)(t.vault)[0],l=(null==n?void 0:n.redeemingBalance)||0n,{ids:i,claimable:o}=(0,m.gz)(t.vault),c=(0,m.R3)(t);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-base font-medium items-center gap-5 pt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-black/60 dark:text-white/60 text-sm",children:"Available to Claim"}),(0,a.jsxs)("div",{className:"flex gap-4 items-center whitespace-nowrap mt-2",children:[(0,a.jsx)(O.cL,{symbol:t.yeetLiqSymbol||t.assetSymbol,size:24}),(0,a.jsx)("span",{className:"font-semibold",children:t.yeetLiqSymbol||t.assetSymbol}),(0,a.jsx)("span",{className:"text-black/60 dark:text-white/60 ",children:(0,N.d)(o)})]})]}),(0,a.jsx)(F.v,{className:"ml-auto w-1/3",busyShowTxet:!1,tx:"Claim",disabled:o<=0n,config:{abi:r.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[i.length>40?i.slice(i.length-40):i]},onTxSuccess:()=>{c()}})]}),(0,a.jsx)("div",{className:"h-[1px] bg-border my-4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-black/60 dark:text-white/60 mb-4",children:"Pending Requests"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(Icon,{showbg:!0,className:"text-2xl"}),(0,a.jsx)("span",{className:"font-semibold",children:t.pTokenSymbol}),(0,a.jsx)("span",{className:"text-black/60 dark:text-white/60",children:(0,N.d)(l)}),(0,a.jsxs)("div",{className:"ml-auto text-xs text-black/60 dark:text-white/60 ",children:["Settlement Time : ",(0,a.jsx)("span",{className:"text-black dark:text-white font-semibold pr-2",children:(0,g.G$)((s.current.duration+s.current.startTime)*1000n,g.mv.DATE2)})," ",(0,g.Y)((s.current.duration+s.current.startTime)*1000n-BigInt(h().now()))]})]})]})]})}function BVaultP(e){var t;let{bvc:s}=e,[l,i]=(0,T.useState)(""),c=(0,g.su)(l),d=o.P[s.asset],x=!!d,p=x?"PT":s.pTokenSymbol,h=x?"LP":s.assetSymbol,b=(0,m.nr)(s.vault),f=(0,u.o)(e=>e.sliceTokenStore.balances[s.asset]||0n,["sliceTokenStore.balances.".concat(s.asset)]),[C]=(0,m.oU)(s),{data:v}=(0,I.p)(),j=(0,m.R3)(s),w=(0,B.useSearchParams)(),y=w.get("subtab"),k=(0,B.useRouter)(),S=[{tab:"Buy",content:(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full max-w-xl",children:[(0,a.jsx)(Y.W,{asset:s.assetSymbol,amount:l,balance:f,setAmount:i}),(0,a.jsx)(GetLP,{address:s.asset}),(0,a.jsx)("div",{className:"text-xs font-medium text-center",children:"Receive 1 ".concat(p," for every ").concat(h)}),(0,a.jsx)(F.v,{className:"mx-auto mt-4",tx:"Buy",disabled:c<=0n||c>f,spender:s.vault,approves:{[s.asset]:c},config:{abi:r.j5,address:s.vault,functionName:"deposit",args:[c]},onTxSuccess:()=>{i(""),j()}})]})},{tab:"Withdraw",content:(0,a.jsx)(BVaultRedeem,{bvc:s})},{tab:"Claim",content:(0,a.jsx)(BVaultClaim,{bvc:s})}],L=null===(t=S.find(e=>e.tab.toLowerCase()==y))||void 0===t?void 0:t.tab;return(0,a.jsxs)("div",{className:(0,g.cn)("flex flex-col gap-5","max-w-4xl mx-auto w-full","max-w-xl"),children:[(0,a.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,a.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-5",children:[(0,a.jsx)(Icon,{className:"text-[3.375rem]",showbg:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-xl text-black font-semibold",children:s.pTokenSymbol}),(0,a.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,a.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,a.jsx)(TupleTxt,{tit:"APY Est.",sub:C}),(0,a.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,a.jsx)(a.Fragment,{children:(0,N.d)(b.pTokenTotal)})})]}),(0,a.jsx)("div",{className:"flex px-2 pb-5",children:(0,a.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==v||v.watchAsset({type:"ERC20",options:{address:s.pToken,symbol:s.pTokenSymbol,decimals:18}}).catch(g.S3)},children:"Add to wallet"})})]}),(0,a.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,a.jsx)(G.x,{currentTab:L,data:S,onTabChange:e=>(0,n.rc)(k,s.vault,"principal_panda",e)})})]})}function BVaultYInfo(e){let{bvc:t}=e,s=t.assetSymbol.includes("-"),n=s?"YT":t.yTokenSymbol,r=s?"LP token":t.assetSymbol,i=(0,m.nr)(t.vault),o=i.current,d=i.current.yTokenAmountForSwapYT>0n?i.lockedAssetTotal*c.Pq/i.current.yTokenAmountForSwapYT:0n,[u]=(0,m.v7)(t.vault),{roi:x,restakingIncomesApy:p,additionalRoi:h}=useBvaultROI(t);return(0,a.jsxs)("div",{className:"card !p-0 overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,a.jsx)(l.Z,{className:"text-[3.375rem]",showbg:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-xl text-black font-semibold",children:t.yTokenSymbol}),(0,a.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Yield token"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,a.jsx)("div",{className:"flex justify-between items-baseline gap-4 flex-wrap",children:(0,a.jsxs)("div",{className:"text-xs flex gap-2 items-end",children:[(0,a.jsxs)(K.C,{node:(0,a.jsx)("span",{className:"text-2xl font-medium underline underline-offset-2 relative top-0.5",children:(0,g.Jh)(x,18,2)}),children:[(0,a.jsxs)("div",{children:["Berachain Emission: ",(0,g.Jh)(p,18,2)]}),(0,a.jsxs)("div",{children:["Additional airdrops: ",(0,g.Jh)(h,18,2)]}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:"YT Spent: -100%"})]}),"Est.ROI in remaining days"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap justify-between",children:[(0,a.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,a.jsx)(a.Fragment,{children:(0,N.d)(i.current.yTokenAmountForSwapYT)})}),(0,a.jsxs)("span",{className:"text-xs",children:["1",n," = Yield of ",(0,N.d)(d,2)," ",r]})]}),o&&(0,a.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Epoch ".concat(o.epochId.toString())}),(0,a.jsxs)("span",{className:"scale-90",children:["~",(0,g.Y)((o.startTime+o.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,a.jsx)(k.k,{value:(e=>{let t=BigInt(Math.floor(new Date().getTime()/1e3));if(t<e.startTime)return 0;if(t-o.startTime>=o.duration)return 100;let s=(t-o.startTime)*100n/e.duration;return parseInt(s.toString())})(o),className:"mt-2 rounded-full overflow-hidden"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"scale-90",children:(0,g.G$)(1000n*o.startTime,g.mv.ALL2)}),(0,a.jsx)("span",{className:"scale-90",children:(0,g.G$)((o.startTime+o.duration)*1000n,g.mv.ALL2)})]})]})]})]})}function BVaultYTrans(e){let{bvc:t}=e,s=t.assetSymbol.includes("-");s||t.pTokenSymbol;let n=s?"YT":t.yTokenSymbol,l=s?"LP token":t.assetSymbol,[i,o]=(0,T.useState)(""),p=(0,g.su)(i),h=(0,m.nr)(t.vault),b=(0,u.o)(e=>e.sliceTokenStore.balances[t.asset]||0n,["sliceTokenStore.balances.".concat(t.asset)]),f=(0,w.p)(),[C,v]=(0,T.useState)(["calcSwap",t.vault,p,f]);(0,L.Z)(()=>v(["calcSwap",t.vault,p,f]),300,["calcSwap",t.vault,p,f]);let{data:j,isFetching:y}=(0,x.a)({queryKey:C,enabled:p>0n,queryFn:()=>(0,d.B)(f).readContract({abi:r.j5,address:t.vault,functionName:"calcSwap",args:[p]})}),[k,B]=(0,P.Z)(!1),A=h.current.vaultYTokenBalance,V=p>0n?(0,g.ok)(j,"1"):0n,E=A>0n?h.Y*c.Pq/A:0n,R=E>0n?c.Pq*c.Pq/E:0n,I=k?"1 ".concat(l,"=").concat((0,N.d)(R)," ").concat(n):"1 ".concat(n,"=").concat((0,N.d)(E)," ").concat(l),q=A>V?(h.Y+p)*c.Pq/(A-V):0n,D=(0,g.Kl)(V,void 0,!0),M=q>E&&E>0n?(q-E)*BigInt(1e10)/E:0n,_=(0,m.R3)(t),{roi:Z,roiChange:U}=useBvaultROI(t,V,q);return(0,a.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,a.jsx)(Y.W,{asset:t.assetSymbol,amount:i,balance:b,setAmount:o}),(0,a.jsx)(GetLP,{address:t.asset}),(0,a.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,a.jsx)(Y.W,{asset:t.yTokenSymbol,assetIcon:"Venom",loading:y&&!!i,readonly:!0,disable:!0,checkBalance:!1,amount:D}),(0,a.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>B()}),(0,a.jsx)("span",{children:"Price: ".concat(I)})]}),(0,a.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,g.Jh)(M,10,2))})]}),V>0n&&(0,a.jsxs)("div",{className:"text-xs font-medium text-center my-auto text-black/80 dark:text-white/80",children:["Implied ROI Change: ",(0,g.Jh)(Z,18,2)," ","->"," ",(0,a.jsx)("span",{className:(0,g.cn)({"text-red-400":Z-U>=BigInt(1e17)}),children:(0,g.Jh)(U,18,2)})]}),(0,a.jsx)(F.v,{className:"mx-auto mt-auto",tx:"Buy",disabled:p<=0n||p>b,config:{abi:r.j5,address:t.vault,functionName:"swap",args:[p]},approves:{[t.asset]:p},spender:t.vault,onTxSuccess:()=>{o(""),_()}})]})}function BribeTit(e){return(0,a.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,a.jsx)(O.cL,{symbol:"GreenDot",size:14}),(0,a.jsx)(K.C,{node:(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,g.lS)(e.name,6,0)}),children:e.name.length>6?e.name:null})]})}function BVaultPoolsOld(e){var t;let{bvc:s}=e,[n,l]=(0,T.useState)(!1),i=(0,m.Vw)(s.vault),o=(0,T.useMemo)(()=>n?i.filter(e=>e.bribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):i,[i,n]),[d,u]=(0,A.Z)(),x="text-black/60 dark:text-white/60 text-sm",[p,h]=(0,T.useState)(null===(t=o[0])||void 0===t?void 0:t.epochId),b=(0,T.useMemo)(()=>p?o.find(e=>e.epochId==p):o[0],[o,p]),f=(null==b?void 0:b.userBalanceYToken)||0n,C=(null==b?void 0:b.userBalanceYTokenSyntyetic)||0n,onRowClick=e=>{var t;h(null===(t=o[e])||void 0===t?void 0:t.epochId)},v=(null==b?void 0:b.bribes)||[],j=(0,T.useMemo)(()=>{let e=v.find(e=>e.bribeAmount>0n);return e&&0n!=e.bribeTotalAmount?(0,g.Jh)(e.bribeAmount*c.Pq/e.bribeTotalAmount,18):(0,g.Jh)(0n,0n)},[v]),w=(0,m.R3)(s);return(0,a.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,a.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,a.jsxs)("div",{className:(0,g.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:d,children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,a.jsx)("span",{children:"My Pool Only"}),(0,a.jsx)(z.r,{checked:n,onChange:l})]}),(0,a.jsx)(V.aV,{className:o.length>6?"pr-5":"",width:u.width,height:280,rowHeight:e=>{let{index:t}=e;return t<o.length-1?76:56},overscanRowCount:6,rowCount:o.length,rowRenderer:function(e){let{key:t,style:s,index:n}=e,l=o[n],r="".concat((0,g.G$)(1000n*l.startTime),"-").concat((0,g.G$)((l.startTime+l.duration)*1000n));return(0,a.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,a.jsxs)("div",{className:(0,g.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<o.length-1?"mb-[20px]":""),children:[(0,a.jsxs)("div",{className:"text-sm",children:["Epoch ",o[n].epochId.toString()]}),(0,a.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},t)}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"Accumulated Rewards"}),(0,a.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==b?void 0:b.epochId)||1n).toString()]})]}),(0,a.jsx)("div",{className:"mt-2 rounded-lg border border-solid border-border px-4 py-1 h-[8.125rem] overflow-auto",children:(0,a.jsx)(W.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",headerItemClassName:"py-1",rowClassName:"text-center",cellClassName:"py-0",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:v.map(e=>["",(0,a.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,N.d)(e.bribeTotalAmount),(0,N.d)(e.bribeAmount),""])})}),(0,a.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"font-semibold text-xs",children:[(0,a.jsxs)("div",{children:["My yToken: ",(0,a.jsx)("span",{className:(0,g.cn)(x),children:(0,N.d)(f)})]}),(0,a.jsxs)("div",{children:["Time Weighted Points:"," ",(0,a.jsx)("span",{className:(0,g.cn)(x),children:f>0n&&0n==C?"Reward received":(0,N.d)(C)})]})]}),(0,a.jsxs)("div",{className:"text-sm",children:["My Share: ",(0,a.jsx)("span",{className:(0,g.cn)(x,"text-xl"),children:j})]})]}),(0,a.jsx)("span",{className:"text-xs mx-auto",children:"You can harvest at the end of Epoch"}),(0,a.jsx)(F.v,{className:"mx-auto mt-4",tx:"Harvest",disabled:!b||!(null==b?void 0:b.settled),config:{abi:r.j5,address:s.vault,functionName:"claimBribes",args:[null==b?void 0:b.epochId]},onTxSuccess:()=>{w()}})]})]})]})}function BVaultPools(e){var t,s;let{bvc:n}=e,[l,i]=(0,T.useState)(!1),o=(0,m.Vw)(n.vault),c=(0,T.useMemo)(()=>l?o.filter(e=>e.sBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n||e.aBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):o,[o,l]),[d,u]=(0,A.Z)(),[x,p]=(0,T.useState)(null===(t=c[0])||void 0===t?void 0:t.epochId),h=(0,T.useMemo)(()=>x?c.find(e=>e.epochId==x):c[0],[c,x]),b=(null==h?void 0:h.userBalanceYToken)||0n,f=(null==h?void 0:h.userBalanceYTokenSyntyetic)||0n,C=(null==h?void 0:h.userClaimableYTokenSyntyetic)||0n,onRowClick=e=>{var t;p(null===(t=c[e])||void 0===t?void 0:t.epochId)};(0,T.useEffect)(()=>{var e,t;o.length&&p((null===(e=c[0])||void 0===e?void 0:e.epochId)||(null===(t=o[0])||void 0===t?void 0:t.epochId))},[o.length]);let j=(null==h?void 0:h.sBribes)||[],w=(null==h?void 0:h.aBribes)||[],{data:y}=(0,v.x)(),k=null===(s=y["".concat(n.vault)])||void 0===s?void 0:s[parseInt((x||0n).toString())],B=(0,m.R3)(n);return(0,a.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,a.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,a.jsxs)("div",{className:(0,g.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:d,children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,a.jsx)("span",{children:"My Pool Only"}),(0,a.jsx)(z.r,{checked:l,onChange:i})]}),(0,a.jsx)(V.aV,{className:c.length>6?"pr-5":"",width:u.width,height:280,rowHeight:e=>{let{index:t}=e;return t<c.length-1?76:56},overscanRowCount:6,rowCount:c.length,rowRenderer:function(e){let{key:t,style:s,index:n}=e,l=c[n],r="".concat((0,g.G$)(1000n*l.startTime),"-").concat((0,g.G$)((l.startTime+l.duration)*1000n));return(0,a.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,a.jsxs)("div",{className:(0,g.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<c.length-1?"mb-[20px]":""),children:[(0,a.jsxs)("div",{className:"text-sm",children:["Epoch ",c[n].epochId.toString()]}),(0,a.jsx)("div",{className:"text-xs opacity-60 mt-1",children:r})]})},t)}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,a.jsxs)("span",{className:"text-xs opacity-60",children:["Epoch ",((null==h?void 0:h.epochId)||1n).toString()]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-12 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"YT Balance"}),(0,a.jsx)("span",{className:"text-sm opacity-60",children:(0,N.d)(b)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[j.map(e=>(0,a.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,a.jsx)(BribeTit,{name:e.bribeSymbol}),(0,a.jsx)("div",{className:"absolute left-1/2",children:(0,N.d)(e.bribeAmount)})]},e.bribeToken)),(0,a.jsx)("span",{className:"absolute left-0 top-0",children:"Berachain Emission"}),(0,a.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,a.jsx)(F.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!h,config:{abi:r.l0,address:null==h?void 0:h.stakingBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,a.jsxs)("div",{className:"flex items-center relative",children:[(0,a.jsxs)("span",{className:"text-sm",children:["YT Points ",(0,a.jsx)(K.C,{children:"YT Points are calculated based on the duration of YT holding and apply to some uncertain rewards, such as airdrops."})]}),(0,a.jsx)("span",{className:" opacity-60 ml-10",children:(0,N.d)(f,void 0,23)}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,a.jsx)("span",{className:"opacity-60",children:"Claimable"}),(0,a.jsx)("span",{children:(0,N.d)(C,void 0,23)})]}),(0,a.jsx)(F.v,{className:"w-28 ml-auto",tx:"Claim",disabled:!h,config:{abi:r.q3,address:null==h?void 0:h.adhocBribesPool,functionName:"collectYT"},onTxSuccess:()=>{B()}})]}),w.length>0&&(0,a.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,a.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,a.jsx)(BribeTit,{name:e.bribeSymbol}),(0,a.jsx)("div",{className:"absolute left-1/2",children:(0,N.d)(e.bribeAmount)})]},e.bribeToken)),(0,a.jsx)("span",{className:"absolute left-0 top-0",children:"Additional Incentives"}),(0,a.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,a.jsx)(F.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!h,config:{abi:r.q3,address:null==h?void 0:h.adhocBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,a.jsxs)("div",{className:"text-center text-sm font-medium flex items-center flex-nowrap justify-center whitespace-nowrap mt-auto gap-1",children:["Additional Airdrops: ",k?(0,a.jsxs)(a.Fragment,{children:[k.amount," ",(0,a.jsx)(O.cL,{symbol:k.token,size:16})," ",k.token," ",(0,a.jsx)(K.C,{children:"Will be distributed based on YT points after Epoch ends"})]}):"TBD"]})]})]})]})]})}function BVaultB(e){let{bvc:t}=e,s=(0,m.nr)(t.vault);return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,a.jsx)(BVaultYInfo,{bvc:t}),(0,a.jsx)(BvaultEpochYtPrices,{bvc:t,epochId:s.epochCount}),(0,a.jsx)(BVaultYTrans,{bvc:t}),t.isOld?(0,a.jsx)(BVaultPoolsOld,{bvc:t}):(0,a.jsx)(BVaultPools,{bvc:t})]})}function BVaultCard(e){let{vc:t}=e,s=(0,B.useRouter)(),[l,r]=t.assetSymbol.split("-"),i=(0,m.nr)(t.vault),d=o.P[t.asset],x=(0,u.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),p=d&&x[d.base]||0n,b=d&&x[d.quote]||0n,f=i.lpBase||0n,C=i.lpQuote||0n,v=f*p/c.Pq,j=C*b/c.Pq,w=v+j;0n===w&&(w=i.lockedAssetTotal);let[y]=(0,m.v7)(t.vault),[k]=(0,m.oU)(t),T="Epoch ".concat(((null==i?void 0:i.epochCount)||0n).toString()),S=0n==i.epochCount?"-- -- --":(0,g.G$)((i.current.startTime+i.current.duration)*1000n,g.mv.DATE2),L=0n==i.epochCount?"":(0,g.Y)((i.current.startTime+i.current.duration)*1000n-BigInt(h().now())),{roi:P}=useBvaultROI(t);return(0,a.jsxs)("div",{className:(0,g.cn)("card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,a.jsxs)("div",{className:(0,g.cn)(J,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[d?(0,a.jsx)(O.rw,{symbol1:l,symbol2:r,size:28}):(0,a.jsx)(O.cL,{symbol:t.assetSymbol,size:44}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t.assetSymbol}),(0,a.jsx)("div",{className:" text-sm font-medium",children:t.assetSymbol.includes("-")?"LP Token":""})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,N.d)(w,2)]})]})]}),renderToken(l,f,v),renderToken(r,C,j,!0),renderStat("Settlement Time",i.closed?"status-red":"status-green",i.closed?"Closed":(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,a.jsx)("span",{children:S}),(0,a.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:L})]}),i.epochCount>0n&&(0,a.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:T})]})),renderStat("Reward",t.rewardSymbol||"iBGT",t.rewardSymbol||"iBGT",!0),renderChoseSide("Panda","Principal Panda",k,"Venom","Boost Venom","".concat((0,g.Jh)(P,18,2)),e=>{e.stopPropagation(),(0,n.rc)(s,t.vault,"principal_panda")},e=>{e.stopPropagation(),(0,n.rc)(s,t.vault,"boost_venom")})]})}function BVaultCardComming(e){let{symbol:t}=e,[s,n]=(t||"").split("-");return(0,a.jsxs)("div",{className:(0,g.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[419px]",{}),children:[(0,a.jsxs)("div",{className:(0,g.cn)(J,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[t&&(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(O.rw,{symbol1:s,symbol2:n,size:28}):(0,a.jsx)(O.cL,{symbol:t,size:44})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t}),(0,a.jsx)("div",{className:" text-sm font-medium",children:t.includes("-")?"LP Token":""})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,a.jsx)("div",{className:(0,g.cn)(J,"col-span-2"),children:(0,a.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Coming Soon..."})})]})}var Q=s(19757),X=s(36602),ee=s(83960),et=s(61766),es=s(58714),ea=s(96670);function PulseTokenItem(){return(0,a.jsxs)("div",{className:"animate-pulse flex px-4 py-2 items-center gap-4 rounded-lg",children:[(0,a.jsx)("div",{className:"rounded-full w-10 h-10 bg-slate-400"}),(0,a.jsx)("div",{className:"w-28 h-5 rounded-lg bg-slate-400"}),(0,a.jsx)("div",{className:"ml-auto w-12 h-5 rounded-lg bg-slate-400"})]})}var en=s(2987);let el=[{symbol:"HONEY",name:"HONEY Token",address:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",decimals:18},{symbol:"USDC",name:"USD Coin",address:"0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c",decimals:18},{symbol:"WBERA",name:"BERA Token",address:"0x7507c1dc16935b82698e4c63f2746a2fcf994df8",decimals:18},{symbol:"iBGT",name:"Infrared BGT",address:"0x46eFC86F0D7455F135CC9df501673739d513E982",decimals:18},{symbol:"USDT",name:"Tether USD",address:"0x05D0dD5135E3eF3aDE32a9eF9Cb06e8D37A6795D",decimals:18},{symbol:"DAI",name:"Decentralized USD",address:"0x806Ef538b228844c73E8E692ADCFa8Eb2fCF729c",decimals:18},{symbol:"WBTC",name:"Wrapped Bitcoin",address:"0x2577D24a26f8FA19c1058a8b0106E2c7303454a4",decimals:18},{symbol:"WETH",name:"Wrapped Ether",address:"0xE28AfD8c634946833e89ee3F122C06d7C537E8A8",decimals:18}],er=[{symbol:"iBGT",name:"Infrared BGT",address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",decimals:18},{symbol:"HONEY",name:"HONEY Token",address:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce",decimals:18},{symbol:"USDC",name:"USDC Token",address:"0x549943e04f40284185054145c6E4e9568C1D3241",decimals:6},{symbol:"WBERA",name:"Wrapped Bera",address:"0x6969696969696969696969696969696969696969",decimals:18}];function TokenSelect(e){let{tokens:t,onSelect:s,hiddenNative:n}=e,l=(0,w.p)(),r=(0,u.o)(e=>e.sliceTokenStore.defTokenList),i=(0,T.useMemo)(()=>{let e=h().isEmpty(t)?h().isEmpty(r)?l==_.On.id?er:el:r:t;return n?e.filter(e=>e.address!==R&&e.address!==Q.K8):e},[t,r,n,l]),[o,c]=(0,T.useState)(""),m=(0,X.ln)(),{address:p}=(0,ea.m)(),[b,f]=(0,T.useState)(["searchTokens",o,i]);(0,L.Z)(()=>f(["searchTokens",o,i]),300,[o,i]);let{data:C,isFetching:v}=(0,x.a)({initialData:i,queryFn:async()=>{if((0,et.U)(o)){let e=i.find(e=>e.address==o);if(e)return[e];let t=(0,d.B)(l),[s,a]=await Promise.all([t.readContract({abi:es.Wo,address:o,functionName:"symbol"}),t.readContract({abi:es.Wo,address:o,functionName:"decimals"})]);return p&&u.w.getState().sliceTokenStore.updateTokensBalance(l,[o],p),[{symbol:s,address:o,decimals:a}]}return o?i.filter(e=>{let t=o.toLowerCase(),s=!!e.symbol.toLowerCase().match(t),a=!!e.name&&!!e.name.toLowerCase().match(t);return s||a}):i},queryKey:b}),j=C||i;return(0,x.a)({queryKey:["updateBalancesForUnknowToken",i],enabled:!!p,queryFn:()=>u.w.getState().sliceTokenStore.updateTokensBalance(l,i.map(e=>e.address),p)}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-5",children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Select a token"}),(0,a.jsx)("input",{className:(0,g.cn)("bg-white dark:bg-transparent","border-slate-400  focus:border-primary","w-full h-14 text-right px-4 font-bold text-base border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"Search by name, symbol or address",value:o,onChange:e=>c(e.target.value)}),(0,a.jsx)("div",{className:"flex flex-col overflow-y-auto h-[18.75rem]",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(PulseTokenItem,{}),(0,a.jsx)(PulseTokenItem,{}),(0,a.jsx)(PulseTokenItem,{})]}):(0,a.jsx)(a.Fragment,{children:j.map(e=>(0,a.jsxs)("div",{className:"flex px-4 py-2 items-center gap-4 rounded-lg cursor-pointer hover:bg-primary/20",onClick:()=>{null==s||s(e)},children:[(0,a.jsx)(O.cL,{className:"rounded-full",size:40,symbol:e.symbol,url:e.url}),(0,a.jsx)("span",{children:e.symbol}),(0,a.jsx)("span",{className:"ml-auto",children:(0,N.d)(m[e.address],3,e.decimals)})]},e.address))})})]})}function BVaultAddReward(e){let{bvc:t}=e,s=(0,X.ln)(),n=(0,m.nr)(t.vault),l=(0,u.o)(e=>e.sliceTokenStore.defTokenList),i=h().isEmpty(l)?el[0]:l[0],[o,c]=(0,T.useState)(i),[x,p]=(0,T.useState)(""),b=s[o.address],f=(0,g.su)(x,o.decimals),C=(0,T.useRef)(null),v=(0,I.p)(),{address:j}=(0,ea.m)(),N=(0,w.p)(),{mutate:k,isPending:B}=(0,y.D)({mutationFn:async()=>{if(S)return;let e=(0,d.B)(N);if(t.isOld){let s=await e.readContract({abi:r.j5,address:t.vault,functionName:"bribeTokens",args:[n.epochCount]});if(console.info("tokens:",s,o.address),!s.find(e=>e.toLowerCase()==o.address.toLowerCase())){let s=await v.data.writeContract({abi:r.j5,address:t.vault,functionName:"addBribeToken",args:[o.address]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let a=await e.readContract({abi:es.Wo,address:o.address,functionName:"allowance",args:[j,t.vault]});if(a<f){let s=await v.data.writeContract({abi:es.Wo,address:o.address,functionName:"approve",args:[t.vault,f-a]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let l=await v.data.writeContract({abi:r.j5,address:t.vault,functionName:"addBribes",args:[o.address,f]});await e.waitForTransactionReceipt({hash:l,confirmations:3})}else{let s=await e.readContract({abi:es.Wo,address:o.address,functionName:"allowance",args:[j,t.vault]});if(s<f){let a=await v.data.writeContract({abi:es.Wo,address:o.address,functionName:"approve",args:[t.vault,f-s]});await e.waitForTransactionReceipt({hash:a,confirmations:3})}let a=await v.data.writeContract({abi:r.j5,address:t.vault,functionName:"addAdhocBribes",args:[o.address,f]});await e.waitForTransactionReceipt({hash:a,confirmations:3})}u.w.getState().sliceTokenStore.updateTokensBalance(N,[o.address],j),p(""),E.A.success("Transaction success")},mutationKey:["addReward"],onError:g.S3}),S=!v.data||!j||0n==f||f>b||B||0n==n.epochCount;return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 card",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Y.W,{decimals:o.decimals,asset:o.symbol,assetURL:o.url,balance:s[o.address],amount:x,setAmount:p}),(0,a.jsx)(en.o,{trigger:(0,a.jsxs)("div",{ref:C,className:"absolute left-0 top-0 flex cursor-pointer justify-end items-center py-4",children:[(0,a.jsx)("span",{className:"invisible pl-12",children:o.symbol}),(0,a.jsx)(ee.tv1,{className:"ml-2"})]}),children:(0,a.jsx)(TokenSelect,{hiddenNative:!0,onSelect:e=>{var t;c(e),null===(t=C.current)||void 0===t||t.click()}})})]}),(0,a.jsx)(H.k,{busy:B,className:"w-full flex justify-center items-center gap-2",disabled:S,onClick:()=>k(),children:"Add"})]})}var ei=s(6868),eo=s(44939),ec=s(87031),ed=s(31889),eu=s(62600),em=s(75847),ex=s(17686),ep=s(45631);let eh=["redeem","principal_panda","boost_venom"];function BVaultPage(e){var t;let{bvc:s,currentTab:l}=e,{address:i}=(0,ea.m)(),o=(0,m.nr)(s.vault),c=(0,w.p)();(0,x.a)({queryKey:["UpdateVaultDetails",c,s,o],queryFn:async()=>0n!=o.epochCount&&(await u.w.getState().sliceBVaultsStore.updateEpoches(c,s),!0)});let p=(0,m.Zd)(s.vault);(0,x.a)({queryKey:["UpdateUserData",s,p,i],queryFn:async()=>0!=p.length&&!!i&&(console.info("epochesOld:",p),await u.w.getState().sliceUserBVaults.updateEpoches(c,s,i,p),!0)});let{data:h}=(0,x.a)({queryKey:["checkIsBriber",c,i,s],queryFn:async()=>{if(!i)return!1;let e=(0,d.B)(c),t=await Promise.all([e.readContract({abi:r.j5,address:s.vault,functionName:"isBriber",args:[i]}),e.readContract({abi:r.j5,address:s.vault,functionName:"owner"}).then(e=>e==i)]);return t.includes(!0)||(0,em.E)(i,"0xFE18Aa1EFa652660F36Ab84F122CD36108f903B6")}}),b=[...o.closed?[{tab:"Redeem",content:(0,a.jsx)("div",{className:"max-w-xl mx-auto pt-8 w-full",children:(0,a.jsx)(BVaultRedeemAll,{bvc:s})})}]:[{tab:"Principal Panda",content:(0,a.jsx)(BVaultP,{bvc:s})}],{tab:"Boost Venom",content:(0,a.jsx)(BVaultB,{bvc:s})}],f=h?[...b,{tab:"Add Reward",content:(0,a.jsx)(BVaultAddReward,{bvc:s})}]:b,C=null===(t=f.find(e=>(0,g.pi)(e.tab)==l))||void 0===t?void 0:t.tab,v=(0,B.useRouter)();return(0,a.jsx)(G.x,{currentTab:C,onTabChange:e=>(0,n.rc)(v,s.vault,e),listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:f})}let eb=[{label:"Active",value:"Active"},{label:"All",value:"All"},{label:"Closed",value:"Closed"}];function Vaults(){var e;let t=(0,w.p)(),s=(0,T.useMemo)(()=>ec.Fw[t].filter(e=>e.onEnv&&e.onEnv.includes(c.Vi)),[t,c.Vi]),n=(0,B.useSearchParams)(),l=n.get("vault"),r=n.get("tab"),i=eh.includes(r)?r:"",o=s.find(e=>e.vault==l),{loading:d}=(0,ed.Ev)(),[m,x]=(0,T.useState)(null!==(e=eb.find(e=>e.value===sessionStorage.getItem("bvualts-filter")))&&void 0!==e?e:eb[0]),wrapSetFilter=e=>{x(e),sessionStorage.setItem("bvualts-filter",e.value)},p=(0,u.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),h=(0,T.useMemo)(()=>d||"All"==m.label?s:"Active"==m.label?s.filter(e=>{var t;return!(null===(t=p[e.vault])||void 0===t?void 0:t.closed)}):s.filter(e=>{var t;return!!(null===(t=p[e.vault])||void 0===t?void 0:t.closed)}),[d,p,m,s]);return(0,a.jsx)(eo.E,{children:(0,a.jsx)("div",{className:"w-full max-w-[1232px] px-4 mx-auto md:pb-8",children:o?(0,a.jsx)(BVaultPage,{bvc:o,currentTab:i}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"page-title",children:"B-Vaults"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-5 w-full items-center justify-between",children:[(0,a.jsx)(ei.K,{className:"w-auto",data:"A Pendle-like Yield Tokenization Protocol Tailored for Proof-of-Liquidity (POL)."}),(0,a.jsx)(ep.ZP,{onChange:e=>e&&wrapSetFilter(e),value:m,classNames:{menu:()=>(0,g.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,g.cn)("cursor-pointer",{"!bg-primary/50":e.isFocused,"!bg-primary":e.isSelected}),control:()=>"bg-white dark:bg-black !border-primary/70 !shadow-none cursor-pointer",singleValue:()=>"dark:text-white"},options:eb})]}),d?(0,a.jsx)("div",{className:"w-full flex items-center justify-center pt-40",children:(0,a.jsx)(ex.fCD,{className:"animate-spin text-4xl opacity-80"})}):(0,a.jsxs)(eu.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[h.map((e,t)=>(0,a.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(t))),0==s.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-USDC"}),(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),1==s.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),2==s.length&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})})]})]})})})}},6868:function(e,t,s){"use strict";s.d(t,{K:function(){return Noti}});var a=s(31113),n=s(26361);s(64103);var l=s(63114);function Noti(e){let{data:t,className:s}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",s),children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(l.pMA,{size:20})}),(0,a.jsx)("div",{className:"text-sm ml-1 ",children:t})]})}},6371:function(e,t,s){"use strict";s.d(t,{C:function(){return Tip}});var a=s(31113),n=s(26361),l=s(52653),r=s(55966);function Tip(e){let{children:t,node:s,className:i,inFlex:o}=e,c=document.getElementById("tooltip-root");return t?(0,a.jsx)(l.zt,{children:(0,a.jsxs)(l.fC,{children:[(0,a.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:s?(0,a.jsx)("div",{className:(0,n.cn)("inline-block cursor-default",i),style:{verticalAlign:"text-bottom"},children:s}):(0,a.jsx)("div",{className:(0,n.cn)(o?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",i),children:(0,a.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,a.jsx)(l.h_,{container:c,children:(0,a.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,a.jsx)(l.Eh,{})]})})]})}):s}},18358:function(e,t,s){"use strict";s.d(t,{Pd:function(){return calcLPPrice},R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},nr:function(){return useBVault},oU:function(){return useBVaultApy},v7:function(){return useBVaultBoost}});var a=s(22139),n=s(59175),l=s(26361),r=s(84944),i=s(83978),o=s.n(i),c=s(64103),d=s(96670),u=s(55349),m=s(44020);function useResetBVaultsData(){let e=(0,n.p)(),{address:t}=(0,d.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{u.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,u.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,u.o)(t=>{let s=t.sliceBVaultsStore.bvaults[e];if(!s||s.epochCount<=0n)return[];let a=o().range(1,parseInt((s.epochCount+1n).toString())).reverse(),n=t.sliceBVaultsStore.epoches;return a.map(t=>n["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),s=(0,u.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=s.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,l.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,s])}function useCalcClaimable(e){let t=useEpochesData(e),s=useBVault(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance>10n&&(e.settled||s.closed));return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t,s.closed])}function useBVaultBoost(e){let t=(0,u.o)(()=>(function(e){let t=u.w.getState(),s=t.sliceBVaultsStore.bvaults[e],n=(null==s?void 0:s.current.vaultYTokenBalance)||0n,l=(null==s?void 0:s.Y)||0n,i=l>0n?n*a.Pq/l:0n,o=(null==s?void 0:s.current.yTokenAmountForSwapYT)||0n,c=(null==s?void 0:s.lockedAssetTotal)||0n,d=o>0n?c*a.Pq/o:0n;return console.info("calcBootst:",(0,r.d)(i),(0,r.d)(d)),i})(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,r.d)(t,0),t]}function useBVaultApy(e){let t=(0,u.o)(()=>(function(e){let t=u.w.getState(),s=t.sliceBVaultsStore.bvaults[e.vault],n=function(e){let t=u.w.getState(),s=t.sliceBVaultsStore.bvaults[e.vault],a=(0,l.ok)(t.sliceBVaultsStore.yTokenSythetic,[e.vault]);return 0n==a&&(a=(0,l.ok)(t.sliceTokenStore.totalSupply,e.pToken)*((null==s?void 0:s.current.duration)||0n)),a}(e),r=0n;return r=e.pTokenV2?s&&s.ptRebaseRate&&s.pTokenTotal?s.ptRebaseRate/a.Pq*a.SH*BigInt(1e10)/s.pTokenTotal/a.Pq:0n:s&&s.current.assetTotalSwapAmount&&n?s.current.assetTotalSwapAmount*a.SH*BigInt(1e10)/n:0n,console.info("apy:",e.vault,r,e.pTokenV2,null==s?void 0:s.ptRebaseRate,null==s?void 0:s.pTokenTotal,n),r})(e),["sliceBVaultsStore.bvaults.".concat(e.vault),"sliceBVaultsStore.yTokenSythetic.".concat(e.vault)]);return[(0,l.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:s}=(0,d.m)(),a=(0,n.p)();return()=>{(0,l.XD)(async()=>{if(null==t||t(),!s)return;await Promise.all([u.w.getState().sliceTokenStore.updateTokensBalance(a,[e.asset,e.pToken],s),u.w.getState().sliceTokenStore.updateTokenTotalSupply(a,[e.asset,e.pToken]),u.w.getState().sliceBVaultsStore.updateBvaults(a,[e]),u.w.getState().sliceBVaultsStore.updateYTokenSythetic(a,[e])]);let n=u.w.getState().sliceBVaultsStore.bvaults[e.vault];await u.w.getState().sliceBVaultsStore.updateEpoches(a,e,n.epochCount>1n?[n.epochCount,n.epochCount-1n]:[n.epochCount]);let l=[];for(let t=parseInt(n.epochCount.toString());t>0;t--){let s=u.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];l.push(s)}console.info("onUserAction:epoches",l),await u.w.getState().sliceUserBVaults.updateEpoches(a,e,s,l)},3,1e3)}}function calcLPPrice(e,t){let s=m.P[t];if(!s)return 0n;let a=u.w.getState().sliceBVaultsStore.bvaults[e];if(!a)return 0n;let n=u.w.getState().sliceTokenStore.prices,r=a.lpBase*(0,l.ok)(n,s.base,0n)+a.lpQuote*(0,l.ok)(n,s.quote);return a.lpLiq>0n?r/a.lpLiq:0n}}},function(e){e.O(0,[7495,4881,7622,5294,3113,4105,3979,7988,1558,3606,2487,4408,8767,9160,2653,727,1259,6499,5011,9847,7093,604,1744],function(){return e(e.s=77179)}),_N_E=e.O()}]);