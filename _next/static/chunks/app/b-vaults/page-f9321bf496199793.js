(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9102],{62600:function(e,a,s){"use strict";s.d(a,{r:function(){return t.Z}});var t=s(62653)},36834:function(e,a,s){"use strict";s.d(a,{k:function(){return t.Z}});var t=s(84243)},77179:function(e,a,s){Promise.resolve().then(s.bind(s,80257))},80257:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Vaults}});var t=s(31113),n=s(59781),l=s(30639),r=s(4283),i=s(66499),c=s(95889),o=s(44020),d=s(22139),m=s(24378),x=s(59175),u=s(26361),p=s(22818),b=s(55349),h=s(18358),f=s(84944),v=s(95499),j=s(64370),g=s(36834),N=s(83978),w=s.n(N),y=s(69708),k=s(64103),T=s(12485),B=s(93650),C=s(14993),S=s(85665),A=s(20265),P=s(47259);let E="0x0000000000000000000000000000000000000000";var F=s(4408),R=s(12687),V=s(91214),I=s(2811),L=s(49041),Y=s(64217),q=s(11292);let bnToNum=e=>w().round(parseFloat((0,q.d)(BigInt(e))),5),logTrans=e=>w().round(Math.log10(90*e+1),5),revertLog=e=>w().round((Math.pow(10,e)-1)/90,5);function BvaultEpochYtPrices(e){let{bvc:a,epochId:s}=e,n=(0,x.p)(),{data:l}=(0,j.a)({queryKey:["bvualt-epoch-yt-prices",n,a.vault,s],queryFn:()=>(0,I.l6)(a.vault,s),initialData:[]}),[r,i]=(0,C.Z)(!0),{options:c}=(0,k.useMemo)(()=>{let e=l.map(e=>[(0,u.G$)(1e3*e.time,u.mv.ALL),r?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>r?revertLog(e).toString():e.toString(),a={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new Y.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:a}},[l,r]);return(0,t.jsxs)("div",{className:"card p-4 mx-auto max-w-4xl w-full min-w-0",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,t.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,t.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,t.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,t.jsx)("span",{className:(0,u.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",r?"bg-primary":"bg-transparent"),onClick:()=>i(),children:"LOG"})}),(0,t.jsx)(L.Z,{option:c,style:{height:240}})]})}var D=s(73216),Z=s(42487),W=s.n(Z),O=s(95702);function GetLP(e){let{address:a}=e,s=o.P[a],n=(0,x.p)();return s?(0,t.jsxs)("div",{className:"text-xs font-medium flex gap-2 justify-end items-center",children:[s.isKodiak?(0,t.jsx)(O.cL,{symbol:"kodiak-logo",size:20}):(0,t.jsx)(O.cL,{symbol:"berahub",size:18}),(0,t.jsxs)(W(),{target:"_blank",className:"underline",href:s.isKodiak?"https://app.kodiak.finance/#/liquidity/pools/".concat(a,"?chain=berachain_mainnet"):(0,D.FN)(n,a),children:["Get LP on ",s.isKodiak?"Kodiak":"Berahub"]})]}):null}var G=s(75496),H=s(16738),z=s(60689),M=s(54825),K=s(6371),U=s(93680),_=s(26537);let $={Bera:U.Z,Bull:_.Z,Panda:l.Z,Venom:r.Z,BeraLine:U.Z,BullLine:_.Z,PandaLine:l.Z,VenomLine:r.Z},J="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,a,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,t.jsx)("div",{className:(0,u.cn)(J,"border-b",{"border-l":n}),children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,t.jsx)(O.cL,{symbol:e,size:14}),e]}),(0,t.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,t.jsx)("span",{className:"",children:(0,f.d)(a)}),(0,t.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,f.d)(s,2))})]})]})})},renderStat=function(e,a,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,t.jsx)("div",{className:(0,u.cn)(J,"border-b pb-10",{"border-l":n}),children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,t.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(O.cL,{symbol:a,size:14}),"string"==typeof s?(0,t.jsx)("span",{children:s}):s]})]})})},BtnWrap=e=>{let{children:a,onClick:s,...n}=e;return e.onClick?(0,t.jsx)(z.k,{...n,onClick:s,children:a}):(0,t.jsx)("div",{...n,onClick:s,children:a})},renderChoseSide=(e,a,s,n,l,r,i,c)=>{let o=$[e],d=$[n];return(0,t.jsxs)("div",{className:(0,u.cn)(J,"col-span-2 gap-4"),children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,t.jsx)(BtnWrap,{className:(0,u.cn)("h-[4.25rem] w-full relative"),onClick:i,children:(0,t.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,t.jsx)(o,{className:"text-4xl",showbg:!0}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:a}),(0,t.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:s})]})]})}),(0,t.jsx)(BtnWrap,{className:(0,u.cn)("h-[4.25rem] w-full relative"),onClick:c,children:(0,t.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,t.jsx)(d,{className:"text-4xl",showbg:!0}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:l}),(0,t.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:r})]})]})})]})]})};var Q=s(70283);function TupleTxt(e){return(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,t.jsx)("div",{className:(0,u.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}function BVaultRedeem(e){let{bvc:a}=e,[s,n]=(0,k.useState)(""),l=(0,u.su)(s),r=(0,h.nr)(a.vault),c=(0,h.Vw)(a.vault)[0],o=(0,b.o)(e=>e.sliceTokenStore.balances[a.pToken]||0n,["sliceTokenStore.balances.".concat(a.pToken)]),d=(0,h.R3)(a),m=r.current.duration>0n?"Waiting Time: ~".concat((0,u.Y)((r.current.duration+r.current.startTime)*1000n-BigInt(w().now()))):"";return(0,t.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-1"),children:[(0,t.jsx)(V.W,{asset:a.pTokenSymbol,assetIcon:"Panda",amount:s,balance:o,setAmount:n}),!r.closed&&(0,t.jsxs)("div",{className:"text-xs font-medium text-center",children:[m," ",(0,t.jsx)(K.C,{children:"Wait to claim after the Epoch ends."})]}),(0,t.jsx)(R.vZ,{className:"mx-auto mt-6",tx:"Request",spender:null==c?void 0:c.redeemPool,approves:{[a.pToken]:l},disabled:c&&l<=0n||l>o,config:{abi:i.gg,address:(null==c?void 0:c.redeemPool)||E,functionName:"redeem",args:[l]},onTxSuccess:()=>{n(""),d()}})]})}function BVaultRedeemAll(e){let{bvc:a}=e,s=(0,b.o)(e=>e.sliceTokenStore.balances[a.pToken]||0n,["sliceTokenStore.balances.".concat(a.pToken)]),n=(0,h.R3)(a),{data:l}=(0,F.p)(),{ids:r,claimable:o}=(0,h.gz)(a.vault),d=(0,x.p)(),{mutate:m,isPending:j}=(0,v.D)({mutationKey:["readeemAll",s,o,r],mutationFn:async()=>{if(!l)throw"Error";let e=(0,p.B)(d);s>10n&&await l.writeContract({abi:i.j5,address:a.vault,functionName:"redeem",args:[s]}).then(a=>e.waitForTransactionReceipt({hash:a,confirmations:c.EI})),o>10n&&await l.writeContract({abi:i.j5,address:a.vault,functionName:"batchClaimRedeemAssets",args:[r]}).then(a=>e.waitForTransactionReceipt({hash:a,confirmations:c.EI})),P.A.success("Transaction success")},onSuccess:n,onError:u.S3}),g=!l||s+o<=100n;return(0,t.jsxs)("div",{className:(0,u.cn)("flex justify-between items-center gap-5 flex-wrap"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-nowrap",children:[(0,t.jsx)(O.cL,{symbol:a.assetSymbol,size:30})," ",a.assetSymbol]}),(0,t.jsxs)("div",{className:"whitespace-nowrap",children:["Balance: ",(0,f.d)(s)]}),(0,t.jsxs)("div",{className:"whitespace-nowrap",children:["Claimable: ",(0,f.d)(o)]}),(0,t.jsx)(z.k,{className:"mx-auto mt-6 flex items-center justify-center gap-2",busy:j,disabled:g,onClick:m,children:"Redeem All"})]})}function BVaultClaim(e){let{bvc:a}=e,s=(0,h.nr)(a.vault),n=(0,h.Vw)(a.vault)[0],r=(null==n?void 0:n.redeemingBalance)||0n,{ids:c,claimable:o}=(0,h.gz)(a.vault),d=(0,h.R3)(a);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-base font-medium items-center gap-5 pt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-black/60 dark:text-white/60 text-sm",children:"Available to Claim"}),(0,t.jsxs)("div",{className:"flex gap-4 items-center whitespace-nowrap mt-2",children:[(0,t.jsx)(O.cL,{symbol:a.yeetLiqSymbol||a.assetSymbol,size:24}),(0,t.jsx)("span",{className:"font-semibold",children:a.yeetLiqSymbol||a.assetSymbol}),(0,t.jsx)("span",{className:"text-black/60 dark:text-white/60 ",children:(0,f.d)(o)})]})]}),(0,t.jsx)(R.vZ,{className:"ml-auto w-1/3",busyShowTxet:!1,tx:"Claim",disabled:o<=0n,config:{abi:i.j5,address:a.vault,functionName:"batchClaimRedeemAssets",args:[c.length>40?c.slice(c.length-40):c]},onTxSuccess:()=>{d()}})]}),(0,t.jsx)("div",{className:"h-[1px] bg-border my-4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-black/60 dark:text-white/60 mb-4",children:"Pending Requests"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.Z,{showbg:!0,className:"text-2xl"}),(0,t.jsx)("span",{className:"font-semibold",children:a.pTokenSymbol}),(0,t.jsx)("span",{className:"text-black/60 dark:text-white/60",children:(0,f.d)(r)}),(0,t.jsxs)("div",{className:"ml-auto text-xs text-black/60 dark:text-white/60 ",children:["Settlement Time : ",(0,t.jsx)("span",{className:"text-black dark:text-white font-semibold pr-2",children:(0,u.G$)((s.current.duration+s.current.startTime)*1000n,u.mv.DATE2)})," ",(0,u.Y)((s.current.duration+s.current.startTime)*1000n-BigInt(w().now()))]})]})]})]})}function BVaultP(e){var a;let{bvc:s}=e,[r,c]=(0,k.useState)(""),d=(0,u.su)(r),m=o.P[s.asset],x=!!m,p=x?"PT":s.pTokenSymbol,v=x?"LP":s.assetSymbol,j=(0,h.nr)(s.vault),g=(0,b.o)(e=>e.sliceTokenStore.balances[s.asset]||0n,["sliceTokenStore.balances.".concat(s.asset)]),[N]=(0,h.oU)(s),{data:w}=(0,F.p)(),T=(0,h.R3)(s),B=(0,y.useSearchParams)(),C=B.get("subtab"),S=(0,y.useRouter)(),A=[{tab:"Buy",content:(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full max-w-xl",children:[(0,t.jsx)(V.W,{asset:s.assetSymbol,amount:r,balance:g,setAmount:c}),(0,t.jsx)(GetLP,{address:s.asset}),(0,t.jsx)("div",{className:"text-xs font-medium text-center",children:"Receive 1 ".concat(p," for every ").concat(v)}),(0,t.jsx)(R.vZ,{className:"mx-auto mt-4",tx:"Buy",disabled:d<=0n||d>g,spender:s.vault,approves:{[s.asset]:d},config:{abi:i.j5,address:s.vault,functionName:"deposit",args:[d]},onTxSuccess:()=>{c(""),T()}})]})},{tab:"Withdraw",content:(0,t.jsx)(BVaultRedeem,{bvc:s})},{tab:"Claim",content:(0,t.jsx)(BVaultClaim,{bvc:s})}],P=null===(a=A.find(e=>e.tab.toLowerCase()==C))||void 0===a?void 0:a.tab;return(0,t.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-5","max-w-4xl mx-auto w-full","max-w-xl"),children:[(0,t.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-5",children:[(0,t.jsx)(l.Z,{className:"text-[3.375rem]",showbg:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-xl text-black font-semibold",children:s.pTokenSymbol}),(0,t.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,t.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,t.jsx)(TupleTxt,{tit:"APY Est.",sub:N}),(0,t.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,t.jsx)(t.Fragment,{children:(0,f.d)(j.pTokenTotal)})})]}),(0,t.jsx)("div",{className:"flex px-2 pb-5",children:(0,t.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==w||w.watchAsset({type:"ERC20",options:{address:s.pToken,symbol:s.pTokenSymbol,decimals:18}}).catch(u.S3)},children:"Add to wallet"})})]}),(0,t.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,t.jsx)(H.x,{currentTab:P,data:A,onTabChange:e=>(0,n.rc)(S,s.vault,"principal_panda",e)})})]})}function BVaultYInfo(e){let{bvc:a}=e,s=a.assetSymbol.includes("-"),n=s?"YT":a.yTokenSymbol,l=s?"LP token":a.assetSymbol,i=(0,h.nr)(a.vault),c=i.current,o=i.current.yTokenAmountForSwapYT>0n?i.lockedAssetTotal*d.Pq/i.current.yTokenAmountForSwapYT:0n,[x]=(0,h.v7)(a.vault),{roi:p,restakingIncomesApy:b,additionalRoi:v}=(0,m.tY)(a);return(0,t.jsxs)("div",{className:"card !p-0 overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,t.jsx)(r.Z,{className:"text-[3.375rem]",showbg:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-xl text-black font-semibold",children:a.yTokenSymbol}),(0,t.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Yield token"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,t.jsx)("div",{className:"flex justify-between items-baseline gap-4 flex-wrap",children:(0,t.jsxs)("div",{className:"text-xs flex gap-2 items-end",children:[(0,t.jsxs)(K.C,{node:(0,t.jsx)("span",{className:"text-2xl font-medium underline underline-offset-2 relative top-0.5",children:(0,u.Jh)(p,18,2)}),children:[(0,t.jsxs)("div",{children:["Berachain Emission: ",(0,u.Jh)(b,18,2)]}),(0,t.jsxs)("div",{children:["Additional airdrops: ",(0,u.Jh)(v,18,2)]}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:"YT Spent: -100%"})]}),"Est.ROI in remaining days"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap justify-between",children:[(0,t.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,t.jsx)(t.Fragment,{children:(0,f.d)(i.current.yTokenAmountForSwapYT)})}),(0,t.jsxs)("span",{className:"text-xs",children:["1",n," = Yield of ",(0,f.d)(o,2)," ",l]})]}),c&&(0,t.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Epoch ".concat(c.epochId.toString())}),(0,t.jsxs)("span",{className:"scale-90",children:["~",(0,u.Y)((c.startTime+c.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,t.jsx)(g.k,{value:(e=>{let a=BigInt(Math.floor(new Date().getTime()/1e3));if(a<e.startTime)return 0;if(a-c.startTime>=c.duration)return 100;let s=(a-c.startTime)*100n/e.duration;return parseInt(s.toString())})(c),className:"mt-2 rounded-full overflow-hidden"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"scale-90",children:(0,u.G$)(1000n*c.startTime,u.mv.ALL2)}),(0,t.jsx)("span",{className:"scale-90",children:(0,u.G$)((c.startTime+c.duration)*1000n,u.mv.ALL2)})]})]})]})]})}function BVaultYTrans(e){let{bvc:a}=e,s=a.assetSymbol.includes("-");s||a.pTokenSymbol;let n=s?"YT":a.yTokenSymbol,l=s?"LP token":a.assetSymbol,[r,c]=(0,k.useState)(""),o=(0,u.su)(r),v=(0,h.nr)(a.vault),g=(0,b.o)(e=>e.sliceTokenStore.balances[a.asset]||0n,["sliceTokenStore.balances.".concat(a.asset)]),N=(0,x.p)(),[w,y]=(0,k.useState)(["calcSwap",a.vault,o,N]);(0,B.Z)(()=>y(["calcSwap",a.vault,o,N]),300,["calcSwap",a.vault,o,N]);let{data:S,isFetching:A}=(0,j.a)({queryKey:w,enabled:o>0n,queryFn:()=>(0,p.B)(N).readContract({abi:i.j5,address:a.vault,functionName:"calcSwap",args:[o]})}),[P,E]=(0,C.Z)(!1),F=v.current.vaultYTokenBalance,I=o>0n?(0,u.ok)(S,"1"):0n,L=F>0n?v.Y*d.Pq/F:0n,Y=L>0n?d.Pq*d.Pq/L:0n,q=P?"1 ".concat(l,"=").concat((0,f.d)(Y)," ").concat(n):"1 ".concat(n,"=").concat((0,f.d)(L)," ").concat(l),D=F>I?(v.Y+o)*d.Pq/(F-I):0n,Z=(0,u.Kl)(I,void 0,!0),W=D>L&&L>0n?(D-L)*BigInt(1e10)/L:0n,O=(0,h.R3)(a),{roi:G,roiChange:H}=(0,m.tY)(a,I,D);return(0,t.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,t.jsx)(V.W,{asset:a.assetSymbol,amount:r,balance:g,setAmount:c}),(0,t.jsx)(GetLP,{address:a.asset}),(0,t.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,t.jsx)(V.W,{asset:a.yTokenSymbol,assetIcon:"Venom",loading:A&&!!r,readonly:!0,disable:!0,checkBalance:!1,amount:Z}),(0,t.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>E()}),(0,t.jsx)("span",{children:"Price: ".concat(q)})]}),(0,t.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,u.Jh)(W,10,2))})]}),I>0n&&(0,t.jsxs)("div",{className:"text-xs font-medium text-center my-auto text-black/80 dark:text-white/80",children:["Implied ROI Change: ",(0,u.Jh)(G,18,2)," ","->"," ",(0,t.jsx)("span",{className:(0,u.cn)({"text-red-400":G-H>=BigInt(1e17)}),children:(0,u.Jh)(H,18,2)})]}),(0,t.jsx)(R.vZ,{className:"mx-auto mt-auto",tx:"Buy",disabled:o<=0n||o>g,config:{abi:i.j5,address:a.vault,functionName:"swap",args:[o]},approves:{[a.asset]:o},spender:a.vault,onTxSuccess:()=>{c(""),O()}})]})}function BribeTit(e){return(0,t.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,t.jsx)(O.cL,{symbol:"GreenDot",size:14}),(0,t.jsx)(K.C,{node:(0,t.jsx)("span",{className:"text-sm font-medium",children:(0,u.lS)(e.name,6,0)}),children:e.name.length>6?e.name:null})]})}function BVaultPoolsOld(e){var a;let{bvc:s}=e,[n,l]=(0,k.useState)(!1),r=(0,h.Vw)(s.vault),c=(0,k.useMemo)(()=>n?r.filter(e=>e.bribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n):r,[r,n]),[o,m]=(0,S.Z)(),x="text-black/60 dark:text-white/60 text-sm",[p,b]=(0,k.useState)(null===(a=c[0])||void 0===a?void 0:a.epochId),v=(0,k.useMemo)(()=>p?c.find(e=>e.epochId==p):c[0],[c,p]),j=(null==v?void 0:v.userBalanceYToken)||0n,g=(null==v?void 0:v.userBalanceYTokenSyntyetic)||0n,onRowClick=e=>{var a;b(null===(a=c[e])||void 0===a?void 0:a.epochId)},N=(null==v?void 0:v.bribes)||[],w=(0,k.useMemo)(()=>{let e=N.find(e=>e.bribeAmount>0n);return e&&0n!=e.bribeTotalAmount?(0,u.Jh)(e.bribeAmount*d.Pq/e.bribeTotalAmount,18):(0,u.Jh)(0n,0n)},[N]),y=(0,h.R3)(s);return(0,t.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,t.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,t.jsxs)("div",{className:(0,u.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:o,children:[(0,t.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,t.jsx)("span",{children:"My Pool Only"}),(0,t.jsx)(M.r,{checked:n,onChange:l})]}),(0,t.jsx)(A.aV,{className:c.length>6?"pr-5":"",width:m.width,height:280,rowHeight:e=>{let{index:a}=e;return a<c.length-1?76:56},overscanRowCount:6,rowCount:c.length,rowRenderer:function(e){let{key:a,style:s,index:n}=e,l=c[n],r="".concat((0,u.G$)(1000n*l.startTime),"-").concat((0,u.G$)((l.startTime+l.duration)*1000n));return(0,t.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,t.jsxs)("div",{className:(0,u.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<c.length-1?"mb-[20px]":""),children:[(0,t.jsxs)("div",{className:"text-sm",children:["Epoch ",c[n].epochId.toString()]}),(0,t.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},a)}})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,t.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,t.jsx)("span",{className:"text-sm",children:"Accumulated Rewards"}),(0,t.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==v?void 0:v.epochId)||1n).toString()]})]}),(0,t.jsx)("div",{className:"mt-2 rounded-lg border border-solid border-border px-4 py-1 h-[8.125rem] overflow-auto",children:(0,t.jsx)(G.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",headerItemClassName:"py-1",rowClassName:"text-center",cellClassName:"py-0",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:N.map(e=>["",(0,t.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,f.d)(e.bribeTotalAmount),(0,f.d)(e.bribeAmount),""])})}),(0,t.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"font-semibold text-xs",children:[(0,t.jsxs)("div",{children:["My yToken: ",(0,t.jsx)("span",{className:(0,u.cn)(x),children:(0,f.d)(j)})]}),(0,t.jsxs)("div",{children:["Time Weighted Points:"," ",(0,t.jsx)("span",{className:(0,u.cn)(x),children:j>0n&&0n==g?"Reward received":(0,f.d)(g)})]})]}),(0,t.jsxs)("div",{className:"text-sm",children:["My Share: ",(0,t.jsx)("span",{className:(0,u.cn)(x,"text-xl"),children:w})]})]}),(0,t.jsx)("span",{className:"text-xs mx-auto",children:"You can harvest at the end of Epoch"}),(0,t.jsx)(R.vZ,{className:"mx-auto mt-4",tx:"Harvest",disabled:!v||!(null==v?void 0:v.settled),config:{abi:i.j5,address:s.vault,functionName:"claimBribes",args:[null==v?void 0:v.epochId]},onTxSuccess:()=>{y()}})]})]})]})}function BVaultPools(e){var a,s;let{bvc:n}=e,[l,r]=(0,k.useState)(!1),c=(0,h.Vw)(n.vault),o=(0,k.useMemo)(()=>l?c.filter(e=>e.sBribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n||e.aBribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n):c,[c,l]),[d,m]=(0,S.Z)(),[x,p]=(0,k.useState)(null===(a=o[0])||void 0===a?void 0:a.epochId),b=(0,k.useMemo)(()=>x?o.find(e=>e.epochId==x):o[0],[o,x]),v=(null==b?void 0:b.userBalanceYToken)||0n,j=(null==b?void 0:b.userBalanceYTokenSyntyetic)||0n,g=(null==b?void 0:b.userClaimableYTokenSyntyetic)||0n,onRowClick=e=>{var a;p(null===(a=o[e])||void 0===a?void 0:a.epochId)};(0,k.useEffect)(()=>{var e,a;c.length&&p((null===(e=o[0])||void 0===e?void 0:e.epochId)||(null===(a=c[0])||void 0===a?void 0:a.epochId))},[c.length]);let N=(null==b?void 0:b.sBribes)||[],w=(null==b?void 0:b.aBribes)||[],{data:y}=(0,Q.x)(),T=null===(s=y["".concat(n.vault)])||void 0===s?void 0:s[parseInt((x||0n).toString())],B=(0,h.R3)(n);return(0,t.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,t.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,t.jsxs)("div",{className:(0,u.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:d,children:[(0,t.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,t.jsx)("span",{children:"My Pool Only"}),(0,t.jsx)(M.r,{checked:l,onChange:r})]}),(0,t.jsx)(A.aV,{className:o.length>6?"pr-5":"",width:m.width,height:280,rowHeight:e=>{let{index:a}=e;return a<o.length-1?76:56},overscanRowCount:6,rowCount:o.length,rowRenderer:function(e){let{key:a,style:s,index:n}=e,l=o[n],r="".concat((0,u.G$)(1000n*l.startTime),"-").concat((0,u.G$)((l.startTime+l.duration)*1000n));return(0,t.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,t.jsxs)("div",{className:(0,u.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<o.length-1?"mb-[20px]":""),children:[(0,t.jsxs)("div",{className:"text-sm",children:["Epoch ",o[n].epochId.toString()]}),(0,t.jsx)("div",{className:"text-xs opacity-60 mt-1",children:r})]})},a)}})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,t.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,t.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,t.jsxs)("span",{className:"text-xs opacity-60",children:["Epoch ",((null==b?void 0:b.epochId)||1n).toString()]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-12 items-end font-semibold",children:[(0,t.jsx)("span",{className:"text-sm",children:"YT Balance"}),(0,t.jsx)("span",{className:"text-sm opacity-60",children:(0,f.d)(v)})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[N.map(e=>(0,t.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,t.jsx)(BribeTit,{name:e.bribeSymbol}),(0,t.jsx)("div",{className:"absolute left-1/2",children:(0,f.d)(e.bribeAmount)})]},e.bribeToken)),(0,t.jsx)("span",{className:"absolute left-0 top-0",children:"Berachain Emission"}),(0,t.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,t.jsx)(R.vZ,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:i.l0,address:null==b?void 0:b.stakingBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,t.jsxs)("div",{className:"flex items-center relative",children:[(0,t.jsxs)("span",{className:"text-sm",children:["YT Points ",(0,t.jsx)(K.C,{children:"YT Points are calculated based on the duration of YT holding and apply to some uncertain rewards, such as airdrops."})]}),(0,t.jsx)("span",{className:" opacity-60 ml-10",children:(0,f.d)(j,void 0,23)}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,t.jsx)("span",{className:"opacity-60",children:"Claimable"}),(0,t.jsx)("span",{children:(0,f.d)(g,void 0,23)})]}),(0,t.jsx)(R.vZ,{className:"w-28 ml-auto",tx:"Claim",disabled:!b,config:{abi:i.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"collectYT"},onTxSuccess:()=>{B()}})]}),w.length>0&&(0,t.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,t.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,t.jsx)(BribeTit,{name:e.bribeSymbol}),(0,t.jsx)("div",{className:"absolute left-1/2",children:(0,f.d)(e.bribeAmount)})]},e.bribeToken)),(0,t.jsx)("span",{className:"absolute left-0 top-0",children:"Additional Incentives"}),(0,t.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,t.jsx)(R.vZ,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:i.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,t.jsxs)("div",{className:"text-center text-sm font-medium flex items-center flex-nowrap justify-center whitespace-nowrap mt-auto gap-1",children:["Additional Airdrops: ",T?(0,t.jsxs)(t.Fragment,{children:[T.amount," ",(0,t.jsx)(O.cL,{symbol:T.token,size:16})," ",T.token," ",(0,t.jsx)(K.C,{children:"Will be distributed based on YT points after Epoch ends"})]}):"TBD"]})]})]})]})]})}function BVaultB(e){let{bvc:a}=e,s=(0,h.nr)(a.vault);return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,t.jsx)(BVaultYInfo,{bvc:a}),(0,t.jsx)(BvaultEpochYtPrices,{bvc:a,epochId:s.epochCount}),(0,t.jsx)(BVaultYTrans,{bvc:a}),a.isOld?(0,t.jsx)(BVaultPoolsOld,{bvc:a}):(0,t.jsx)(BVaultPools,{bvc:a})]})}function BVaultCard(e){let{vc:a}=e,s=(0,y.useRouter)(),[l,r]=a.assetSymbol.split("-"),i=(0,h.nr)(a.vault),c=o.P[a.asset],x=(0,b.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),p=c&&x[c.base]||0n,v=c&&x[c.quote]||0n,j=i.lpBase||0n,g=i.lpQuote||0n,N=j*p/d.Pq,k=g*v/d.Pq,T=N+k;0n===T&&(T=i.lockedAssetTotal);let[B]=(0,h.v7)(a.vault),[C]=(0,h.oU)(a),S="Epoch ".concat(((null==i?void 0:i.epochCount)||0n).toString()),A=0n==i.epochCount?"-- -- --":(0,u.G$)((i.current.startTime+i.current.duration)*1000n,u.mv.DATE2),P=0n==i.epochCount?"":(0,u.Y)((i.current.startTime+i.current.duration)*1000n-BigInt(w().now())),{roi:E}=(0,m.tY)(a);return(0,t.jsxs)("div",{className:(0,u.cn)("card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,t.jsxs)("div",{className:(0,u.cn)(J,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[c?(0,t.jsx)(O.rw,{symbol1:l,symbol2:r,size:28}):(0,t.jsx)(O.cL,{symbol:a.assetSymbol,size:44}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:a.assetSymbol}),(0,t.jsx)("div",{className:" text-sm font-medium",children:a.assetSymbol.includes("-")?"LP Token":""})]}),(0,t.jsxs)("div",{className:"ml-auto",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,t.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,f.d)(T,2)]})]})]}),renderToken(l,j,N),renderToken(r,g,k,!0),renderStat("Settlement Time",i.closed?"status-red":"status-green",i.closed?"Closed":(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,t.jsx)("span",{children:A}),(0,t.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:P})]}),i.epochCount>0n&&(0,t.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:S})]})),renderStat("Reward",a.rewardSymbol||"iBGT",a.rewardSymbol||"iBGT",!0),renderChoseSide("Panda","Principal Panda",C,"Venom","Boost Venom","".concat((0,u.Jh)(E,18,2)),e=>{e.stopPropagation(),(0,n.rc)(s,a.vault,"principal_panda")},e=>{e.stopPropagation(),(0,n.rc)(s,a.vault,"boost_venom")})]})}function BVaultCardComming(e){let{symbol:a}=e,[s,n]=(a||"").split("-");return(0,t.jsxs)("div",{className:(0,u.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[419px]",{}),children:[(0,t.jsxs)("div",{className:(0,u.cn)(J,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[a&&(0,t.jsx)(t.Fragment,{children:n?(0,t.jsx)(O.rw,{symbol1:s,symbol2:n,size:28}):(0,t.jsx)(O.cL,{symbol:a,size:44})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:a}),(0,t.jsx)("div",{className:" text-sm font-medium",children:a.includes("-")?"LP Token":""})]}),(0,t.jsxs)("div",{className:"ml-auto",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,t.jsx)("div",{className:(0,u.cn)(J,"col-span-2"),children:(0,t.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Coming Soon..."})})]})}var X=s(19757),ee=s(36602),ea=s(83960),es=s(61766),et=s(58714),en=s(96670);function PulseTokenItem(){return(0,t.jsxs)("div",{className:"animate-pulse flex px-4 py-2 items-center gap-4 rounded-lg",children:[(0,t.jsx)("div",{className:"rounded-full w-10 h-10 bg-slate-400"}),(0,t.jsx)("div",{className:"w-28 h-5 rounded-lg bg-slate-400"}),(0,t.jsx)("div",{className:"ml-auto w-12 h-5 rounded-lg bg-slate-400"})]})}var el=s(2987);let er=[{symbol:"HONEY",name:"HONEY Token",address:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",decimals:18},{symbol:"USDC",name:"USD Coin",address:"0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c",decimals:18},{symbol:"WBERA",name:"BERA Token",address:"0x7507c1dc16935b82698e4c63f2746a2fcf994df8",decimals:18},{symbol:"iBGT",name:"Infrared BGT",address:"0x46eFC86F0D7455F135CC9df501673739d513E982",decimals:18},{symbol:"USDT",name:"Tether USD",address:"0x05D0dD5135E3eF3aDE32a9eF9Cb06e8D37A6795D",decimals:18},{symbol:"DAI",name:"Decentralized USD",address:"0x806Ef538b228844c73E8E692ADCFa8Eb2fCF729c",decimals:18},{symbol:"WBTC",name:"Wrapped Bitcoin",address:"0x2577D24a26f8FA19c1058a8b0106E2c7303454a4",decimals:18},{symbol:"WETH",name:"Wrapped Ether",address:"0xE28AfD8c634946833e89ee3F122C06d7C537E8A8",decimals:18}],ei=[{symbol:"iBGT",name:"Infrared BGT",address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",decimals:18},{symbol:"HONEY",name:"HONEY Token",address:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce",decimals:18},{symbol:"USDC",name:"USDC Token",address:"0x549943e04f40284185054145c6E4e9568C1D3241",decimals:6},{symbol:"WBERA",name:"Wrapped Bera",address:"0x6969696969696969696969696969696969696969",decimals:18}];function TokenSelect(e){let{tokens:a,onSelect:s,hiddenNative:n}=e,l=(0,x.p)(),r=(0,b.o)(e=>e.sliceTokenStore.defTokenList),i=(0,k.useMemo)(()=>{let e=w().isEmpty(a)?w().isEmpty(r)?l==D.On.id?ei:er:r:a;return n?e.filter(e=>e.address!==E&&e.address!==X.K8):e},[a,r,n,l]),[c,o]=(0,k.useState)(""),d=(0,ee.ln)(),{address:m}=(0,en.m)(),[h,v]=(0,k.useState)(["searchTokens",c,i]);(0,B.Z)(()=>v(["searchTokens",c,i]),300,[c,i]);let{data:g,isFetching:N}=(0,j.a)({initialData:i,queryFn:async()=>{if((0,es.U)(c)){let e=i.find(e=>e.address==c);if(e)return[e];let a=(0,p.B)(l),[s,t]=await Promise.all([a.readContract({abi:et.Wo,address:c,functionName:"symbol"}),a.readContract({abi:et.Wo,address:c,functionName:"decimals"})]);return m&&b.w.getState().sliceTokenStore.updateTokensBalance(l,[c],m),[{symbol:s,address:c,decimals:t}]}return c?i.filter(e=>{let a=c.toLowerCase(),s=!!e.symbol.toLowerCase().match(a),t=!!e.name&&!!e.name.toLowerCase().match(a);return s||t}):i},queryKey:h}),y=g||i;return(0,j.a)({queryKey:["updateBalancesForUnknowToken",i],enabled:!!m,queryFn:()=>b.w.getState().sliceTokenStore.updateTokensBalance(l,i.map(e=>e.address),m)}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 p-5",children:[(0,t.jsx)("div",{className:"page-sub text-center",children:"Select a token"}),(0,t.jsx)("input",{className:(0,u.cn)("bg-white dark:bg-transparent","border-slate-400  focus:border-primary","w-full h-14 text-right px-4 font-bold text-base border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"Search by name, symbol or address",value:c,onChange:e=>o(e.target.value)}),(0,t.jsx)("div",{className:"flex flex-col overflow-y-auto h-[18.75rem]",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(PulseTokenItem,{}),(0,t.jsx)(PulseTokenItem,{}),(0,t.jsx)(PulseTokenItem,{})]}):(0,t.jsx)(t.Fragment,{children:y.map(e=>(0,t.jsxs)("div",{className:"flex px-4 py-2 items-center gap-4 rounded-lg cursor-pointer hover:bg-primary/20",onClick:()=>{null==s||s(e)},children:[(0,t.jsx)(O.cL,{className:"rounded-full",size:40,symbol:e.symbol,url:e.url}),(0,t.jsx)("span",{children:e.symbol}),(0,t.jsx)("span",{className:"ml-auto",children:(0,f.d)(d[e.address],3,e.decimals)})]},e.address))})})]})}function BVaultAddReward(e){let{bvc:a}=e,s=(0,ee.ln)(),n=(0,h.nr)(a.vault),l=(0,b.o)(e=>e.sliceTokenStore.defTokenList),r=w().isEmpty(l)?er[0]:l[0],[c,o]=(0,k.useState)(r),[d,m]=(0,k.useState)(""),f=s[c.address],j=(0,u.su)(d,c.decimals),g=(0,k.useRef)(null),N=(0,F.p)(),{address:y}=(0,en.m)(),T=(0,x.p)(),{mutate:B,isPending:C}=(0,v.D)({mutationFn:async()=>{if(S)return;let e=(0,p.B)(T);if(a.isOld){let s=await e.readContract({abi:i.j5,address:a.vault,functionName:"bribeTokens",args:[n.epochCount]});if(console.info("tokens:",s,c.address),!s.find(e=>e.toLowerCase()==c.address.toLowerCase())){let s=await N.data.writeContract({abi:i.j5,address:a.vault,functionName:"addBribeToken",args:[c.address]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let t=await e.readContract({abi:et.Wo,address:c.address,functionName:"allowance",args:[y,a.vault]});if(t<j){let s=await N.data.writeContract({abi:et.Wo,address:c.address,functionName:"approve",args:[a.vault,j-t]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let l=await N.data.writeContract({abi:i.j5,address:a.vault,functionName:"addBribes",args:[c.address,j]});await e.waitForTransactionReceipt({hash:l,confirmations:3})}else{let s=await e.readContract({abi:et.Wo,address:c.address,functionName:"allowance",args:[y,a.vault]});if(s<j){let t=await N.data.writeContract({abi:et.Wo,address:c.address,functionName:"approve",args:[a.vault,j-s]});await e.waitForTransactionReceipt({hash:t,confirmations:3})}let t=await N.data.writeContract({abi:i.j5,address:a.vault,functionName:"addAdhocBribes",args:[c.address,j]});await e.waitForTransactionReceipt({hash:t,confirmations:3})}b.w.getState().sliceTokenStore.updateTokensBalance(T,[c.address],y),m(""),P.A.success("Transaction success")},mutationKey:["addReward"],onError:u.S3}),S=!N.data||!y||0n==j||j>f||C||0n==n.epochCount;return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 card",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(V.W,{decimals:c.decimals,asset:c.symbol,assetURL:c.url,balance:s[c.address],amount:d,setAmount:m}),(0,t.jsx)(el.o,{trigger:(0,t.jsxs)("div",{ref:g,className:"absolute left-0 top-0 flex cursor-pointer justify-end items-center py-4",children:[(0,t.jsx)("span",{className:"invisible pl-12",children:c.symbol}),(0,t.jsx)(ea.tv1,{className:"ml-2"})]}),children:(0,t.jsx)(TokenSelect,{hiddenNative:!0,onSelect:e=>{var a;o(e),null===(a=g.current)||void 0===a||a.click()}})})]}),(0,t.jsx)(z.k,{busy:C,className:"w-full flex justify-center items-center gap-2",disabled:S,onClick:()=>B(),children:"Add"})]})}var ec=s(6868),eo=s(44939),ed=s(87031),em=s(31889),ex=s(62600),eu=s(75847),ep=s(17686),eb=s(45631);let eh=["redeem","principal_panda","boost_venom"];function BVaultPage(e){var a;let{bvc:s,currentTab:l}=e,{address:r}=(0,en.m)(),c=(0,h.nr)(s.vault),o=(0,x.p)();(0,j.a)({queryKey:["UpdateVaultDetails",o,s,c],queryFn:async()=>0n!=c.epochCount&&(await b.w.getState().sliceBVaultsStore.updateEpoches(o,s),!0)});let d=(0,h.Zd)(s.vault);(0,j.a)({queryKey:["UpdateUserData",s,d,r],queryFn:async()=>0!=d.length&&!!r&&(console.info("epochesOld:",d),await b.w.getState().sliceUserBVaults.updateEpoches(o,s,r,d),!0)});let{data:m}=(0,j.a)({queryKey:["checkIsBriber",o,r,s],queryFn:async()=>{if(!r)return!1;let e=(0,p.B)(o),a=await Promise.all([e.readContract({abi:i.j5,address:s.vault,functionName:"isBriber",args:[r]}),e.readContract({abi:i.j5,address:s.vault,functionName:"owner"}).then(e=>e==r)]);return a.includes(!0)||(0,eu.E)(r,"0xFE18Aa1EFa652660F36Ab84F122CD36108f903B6")}}),f=[...c.closed?[{tab:"Redeem",content:(0,t.jsx)("div",{className:"max-w-xl mx-auto pt-8 w-full",children:(0,t.jsx)(BVaultRedeemAll,{bvc:s})})}]:[{tab:"Principal Panda",content:(0,t.jsx)(BVaultP,{bvc:s})}],{tab:"Boost Venom",content:(0,t.jsx)(BVaultB,{bvc:s})}],v=m?[...f,{tab:"Add Reward",content:(0,t.jsx)(BVaultAddReward,{bvc:s})}]:f,g=null===(a=v.find(e=>(0,u.pi)(e.tab)==l))||void 0===a?void 0:a.tab,N=(0,y.useRouter)();return(0,t.jsx)(H.x,{currentTab:g,onTabChange:e=>(0,n.rc)(N,s.vault,e),listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:v})}let ef=[{label:"Active",value:"Active"},{label:"All",value:"All"},{label:"Closed",value:"Closed"}];function Vaults(){var e;let a=(0,x.p)(),s=(0,k.useMemo)(()=>ed.Fw[a].filter(e=>e.onEnv&&e.onEnv.includes(d.Vi)),[a,d.Vi]),n=(0,y.useSearchParams)(),l=n.get("vault"),r=n.get("tab"),i=eh.includes(r)?r:"",c=s.find(e=>e.vault==l),{loading:o}=(0,em.Ev)(),[m,p]=(0,k.useState)(null!==(e=ef.find(e=>e.value===sessionStorage.getItem("bvualts-filter")))&&void 0!==e?e:ef[0]),wrapSetFilter=e=>{p(e),sessionStorage.setItem("bvualts-filter",e.value)},h=(0,b.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),f=(0,k.useMemo)(()=>o||"All"==m.label?s:"Active"==m.label?s.filter(e=>{var a;return!(null===(a=h[e.vault])||void 0===a?void 0:a.closed)}):s.filter(e=>{var a;return!!(null===(a=h[e.vault])||void 0===a?void 0:a.closed)}),[o,h,m,s]);return(0,t.jsx)(eo.E,{children:(0,t.jsx)("div",{className:"w-full max-w-[1232px] px-4 mx-auto md:pb-8",children:c?(0,t.jsx)(BVaultPage,{bvc:c,currentTab:i}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"page-title",children:"B-Vaults"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-5 w-full items-center justify-between",children:[(0,t.jsx)(ec.K,{className:"w-auto",data:"A Pendle-like Yield Tokenization Protocol Tailored for Proof-of-Liquidity (POL)."}),(0,t.jsx)(eb.ZP,{onChange:e=>e&&wrapSetFilter(e),value:m,classNames:{menu:()=>(0,u.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,u.cn)("cursor-pointer",{"!bg-primary/50":e.isFocused,"!bg-primary":e.isSelected}),control:()=>"bg-white dark:bg-black !border-primary/70 !shadow-none cursor-pointer",singleValue:()=>"dark:text-white"},options:ef})]}),o?(0,t.jsx)("div",{className:"w-full flex items-center justify-center pt-40",children:(0,t.jsx)(ep.fCD,{className:"animate-spin text-4xl opacity-80"})}):(0,t.jsxs)(ex.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[f.map((e,a)=>(0,t.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(a))),0==s.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-USDC"}),(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),1==s.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),2==s.length&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})})]})]})})})}},91214:function(e,a,s){"use strict";s.d(a,{W:function(){return AssetInput}});var t=s(31113),n=s(26361),l=s(84944),r=s(33501),i=s(64103),c=s(45631),o=s(35057),d=s(95702),m=s(12045),x=s(36762),u=s(85665),p=s(83978),b=s.n(p);function AssetInput(e){let{asset:a="ETH",assetIcon:s,assetURL:p,checkBalance:h=!0,balance:f,balanceTit:v="Balance",decimals:j=18,exchange:g,readonly:N,selected:w,onClick:y,amount:k,setAmount:T,price:B,disable:C,hasInput:S=!1,options:A,onChange:P=()=>{},defaultValue:E,balanceClassName:F="",loading:R,disableNegative:V}=e,I=(0,i.useRef)(null),L=h&&void 0!==f&&(0,n.su)("number"==typeof k?k+"":k||"",j)>("bigint"==typeof f?f:0n),Y=(0,m.l)(e=>"dark"==e.theme),[q,{width:D}]=(0,u.Z)();return(0,t.jsxs)("div",{className:"relative w-full",onClick:()=>{y&&!C&&y()},children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[B&&(0,t.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:B}),g&&(0,t.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",g]})]}),(0,t.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",ref:q,children:[(0,t.jsx)(d.cL,{size:24,symbol:s||a,url:p,className:"rounded-full"}),(0,t.jsx)("div",{className:(0,r.Z)("relative",B||g?"-top-[6px]":""),children:S?(0,t.jsx)(c.ZP,{options:A,onChange:P,defaultValue:E,styles:{control:(e,a)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,a)=>({...e,color:Y?"#fff":"#000"}),valueContainer:(e,a)=>({...e,padding:"0px"}),menu:(e,a)=>({...e,margin:0,background:Y?"#444":"#fff"}),option:(e,a)=>({...e,color:Y?"#fff":"#000",background:Y?"transparent":"#fff"}),menuPortal:(e,a)=>({...e,margin:0})}}):(0,t.jsx)("div",{children:a})})]}),(0,t.jsx)("input",{value:R?"":k,onChange:e=>{if(N)return;let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");T(a)},ref:I,type:"number",disabled:C,style:{paddingLeft:"".concat(b().round((D+32)/16,3),"rem")},className:(0,r.Z)(N?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":w,"border-red-400 !border-2 focus:border-red-400":L,"border-slate-400  focus:border-primary":!L&&!w},"w-full h-14 text-right pr-4 font-bold text-lg border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:N}),R&&(0,t.jsx)(x.$,{className:"absolute right-24 top-[1.125rem]"})]}),void 0!=f&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,t.jsxs)("div",{className:F,children:[(0,t.jsxs)("span",{children:[v,": ",(0,l.d)(f,3,j)]}),(0,t.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,o.b)(f,j);T(e),y&&!C&&y()},children:"Max"})]}),(0,t.jsx)("div",{className:"text-sm text-red-400",children:L?"Insufficient account balance":""})]})]})}},16738:function(e,a,s){"use strict";s.d(a,{x:function(){return SimpleTabs}});var t=s(31113),n=s(26361),l=s(98750),r=s(64103);function SimpleTabs(e){let{currentTab:a,className:s,listClassName:i,triggerClassName:c,contentClassName:o,hiddenConetent:d=!1,data:m,onTabChange:x}=e,[u,p]=(0,r.useState)(a||m[0].tab);return(0,r.useEffect)(()=>{m.find(e=>e.tab==u)||p(m[0].tab)},[u,m]),(0,t.jsxs)(l.fC,{value:a||u,className:(0,n.cn)("w-full",s),onValueChange:e=>{p(e),null==x||x(e)},children:[(0,t.jsx)(l.aV,{className:(0,n.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",i),children:m.map(e=>(0,t.jsx)(l.xz,{className:(0,n.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',c),value:e.tab,children:e.tab},e.tab))}),!d&&m.map(e=>(0,t.jsx)(l.VY,{value:e.tab,className:(0,n.cn)("flex flex-col gap-6 outline-none",o),children:e.content},e.tab))]})}},54825:function(e,a,s){"use strict";s.d(a,{r:function(){return Switch}});var t=s(31113),n=s(26361);function Switch(e){return(0,t.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #15D264 0%, #2CBD35 36.26%, #DCF45D 92.54%)":"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)"},className:(0,n.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var a;return null===(a=e.onChange)||void 0===a?void 0:a.call(e,!e.checked)},children:(0,t.jsx)("div",{className:(0,n.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"left-[1em]":"-left-[1px]"),style:{background:e.checked?"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #1BCD59 0%, #B3E854 100%)":"#3B4144"}})})}},24378:function(e,a,s){"use strict";s.d(a,{tY:function(){return useBvaultROI}});var t=s(66499),n=s(22139),l=s(22818),r=s(55349),i=s(18358),c=s(64370),o=s(83978),d=s.n(o),m=s(11292),x=s(35004),u=s(70283),p=s(4848),b=s(26361),h=s(59175);function calcRestakingApy(e,a,s){let t=a>0n?e*s/a:0n;return t>100n*n.Pq?0n:t}function calcAdditionalApy(e,a,s,t,l){let r=a>0n&&s>0n?a+s*t:0n,i=r>0n?e*n.Pq/r:0n,c=n.Pq*t,o=i*c/n.Pq,d=l>0n?o*n.Pq/l:0n;return d}function useBvaultROI(e){var a,s;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,v=(0,i.nr)(e.vault),{data:j,isLoading:g}=(s=e.vault,(0,c.a)({initialData:0n,queryKey:["getReturnsIBGT",s],queryFn:async()=>{let e=await p.ZP.get("/api/bvault/getYieldiBGT/".concat(s)),a=BigInt(e.yield)/BigInt(e.dur);return a}})),{data:N,isLoading:w}=(0,u.x)(),y=v.current.duration+v.current.startTime,k=y>0n?y-BigInt(d().round(d().now()/1e3)):0n,T=v.current.yTokenAmountForSwapYT,B=T>0n?j*n.Pq*k/T:0n,C=(0,r.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,S=(0,r.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,A=(0,i.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,m.d)(C),(0,m.d)(A));let P=v.current.vaultYTokenBalance,E=T+o>0n?j*n.Pq*k/(T+o):0n,F=P>0n?v.Y*n.Pq/P:0n,R=F*A/n.Pq,V=f*A/n.Pq,I=calcRestakingApy(B,R,C),L=o>0n?calcRestakingApy(E,V,C):0n;console.info("restakingapy:",e.assetSymbol,(0,m.d)(I),(0,m.d)(B),(0,m.d)(F),(0,m.d)(R));let Y=null===(a=N["".concat(e.vault)])||void 0===a?void 0:a[parseInt(v.epochCount.toString())],q=Y&&Y.token&&Y.amount?(0,b.ok)(S,u.c[Y.token])*(0,x.f)(Y.amount.toFixed(6))/n.Pq:0n,{data:D,isLoading:Z}=function(e){let a=(0,i.nr)(e),s=(0,h.p)();return(0,c.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",s,e,a.current.adhocBribesPool],enabled:!!e&&!!a.current.adhocBribesPool,queryFn:async()=>{let e=(0,l.B)(s);return e.readContract({abi:t.q3,address:a.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),W=calcAdditionalApy(q,D,T,k,R),O=o>0n?calcAdditionalApy(q,D,T+o,k,V):0n,G=g||w||Z;return{roi:!G&&T>0n&&B>0n?I+W-n.Pq:0n,roiChange:!G&&T>0n&&B>0n?L+O-n.Pq:0n,restakingIncomesApy:I,additionalRoi:W}}},35004:function(e,a,s){"use strict";s.d(a,{f:function(){return parseEther}});var t=s(42087),n=s(33737);function parseEther(e,a="wei"){return(0,n.v)(e,t.ez[a])}}},function(e){e.O(0,[4881,7495,7622,5294,3113,4105,3979,4817,4173,9382,3606,3960,2487,4408,8410,8880,7948,8750,5416,313,6499,9674,9998,7883,7093,604,1744],function(){return e(e.s=77179)}),_N_E=e.O()}]);