(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9102],{90895:function(e,a,t){"use strict";t.d(a,{r:function(){return s.Z}});var s=t(76469)},53604:function(e,a,t){Promise.resolve().then(t.bind(t,27419))},27419:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Vaults}});var s=t(52987),n=t(71784),l=t(91577),i=t(24860),r=t(46881),c=t(61650),o=t(81501),d=t(96555),m=t(79075),x=t(99409),u=t(13854),p=t(62013),b=t(21663),f=t(44100),h=t(29293),v=t(95499),j=t(64370),g=t(12738),N=t(83978),w=t.n(N),y=t(96396),k=t(77317),T=t(12485),B=t(93650),C=t(14993),S=t(85665),A=t(20265),P=t(47259),E=t(82790),R=t(41331),F=t(57834),I=t(39809),V=t(54381),Y=t(49041),L=t(64217),D=t(12771);let bnToNum=e=>w().round(parseFloat((0,D.d)(BigInt(e))),5),logTrans=e=>w().round(Math.log10(90*e+1),5),revertLog=e=>w().round((Math.pow(10,e)-1)/90,5);function BvaultEpochYtPrices(e){let{bvc:a,epochId:t}=e,n=(0,x.pK)(),{data:l}=(0,j.a)({queryKey:["bvualt-epoch-yt-prices",n,a.vault,t],queryFn:()=>(0,V.l6)(n,a.vault,t),initialData:[]}),[i,r]=(0,C.Z)(!0),{options:c}=(0,k.useMemo)(()=>{let e=l.map(e=>[(0,u.G$)(1e3*e.time,u.mv.ALL),i?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>i?revertLog(e).toString():e.toString(),a={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new L.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:a}},[l,i]),[o,{width:d}]=(0,S.Z)();return(0,s.jsxs)("div",{className:"animitem card p-4 mx-auto w-full min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,s.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,s.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,s.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,s.jsx)("span",{className:(0,u.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",i?"bg-primary":"bg-transparent"),onClick:()=>r(),children:"LOG"})}),(0,s.jsx)("div",{className:"w-full h-0",ref:o}),(0,s.jsx)(Y.Z,{option:c,lazyUpdate:!0,className:"w-full",style:{width:d,height:240},opts:{height:240,width:d}})]})}var q=t(53414),Z=t(85049),W=t.n(Z),G=t(47857);function GetLP(e){let{address:a}=e,t=o.P[a],n=(0,x.pK)();return t?(0,s.jsxs)("div",{className:"text-xs font-medium flex gap-2 justify-end items-center",children:[t.isKodiak?(0,s.jsx)(G.cL,{symbol:"kodiak-logo",size:20}):(0,s.jsx)(G.cL,{symbol:"berahub",size:18}),(0,s.jsxs)(W(),{target:"_blank",className:"underline",href:t.isKodiak?"https://app.kodiak.finance/#/liquidity/pools/".concat(a,"?chain=berachain_mainnet"):(0,q.FN)(n,a),children:["Get LP on ",t.isKodiak?"Kodiak":"Berahub"]})]}):null}var O=t(27022),K=t(3861),M=t(45820);function Switch(e){return(0,s.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #15D264 0%, #2CBD35 36.26%, #DCF45D 92.54%)":"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)"},className:(0,u.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var a;return null===(a=e.onChange)||void 0===a?void 0:a.call(e,!e.checked)},children:(0,s.jsx)("div",{className:(0,u.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"left-[1em]":"-left-[1px]"),style:{background:e.checked?"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #1BCD59 0%, #B3E854 100%)":"#3B4144"}})})}var z=t(25282),H=t(69847),U=t(90195);let _={Bera:H.Z,Bull:U.Z,Panda:l.Z,Venom:i.Z,BeraLine:H.Z,BullLine:U.Z,PandaLine:l.Z,VenomLine:i.Z},$="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,u.cn)($,"border-b",{"border-l":n}),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,s.jsx)(G.cL,{symbol:e,size:14}),e]}),(0,s.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,s.jsx)("span",{className:"",children:(0,h.d)(a)}),(0,s.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,h.d)(t,2))})]})]})})},renderStat=function(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,u.cn)($,"border-b pb-10",{"border-l":n}),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,s.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(G.cL,{symbol:a,size:14}),"string"==typeof t?(0,s.jsx)("span",{children:t}):t]})]})})},BtnWrap=e=>{let{children:a,onClick:t,...n}=e;return e.onClick?(0,s.jsx)(M.k6,{...n,onClick:t,children:a}):(0,s.jsx)("div",{...n,onClick:t,children:a})},renderChoseSide=(e,a,t,n,l,i,r,c)=>{let o=_[e],d=_[n];return(0,s.jsxs)("div",{className:(0,u.cn)($,"col-span-2 gap-4"),children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,s.jsx)(BtnWrap,{className:(0,u.cn)("h-[4.25rem] w-full relative"),onClick:r,children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(o,{className:"text-4xl",showbg:!0}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:a}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:t})]})]})}),(0,s.jsx)(BtnWrap,{className:(0,u.cn)("h-[4.25rem] w-full relative"),onClick:c,children:(0,s.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(d,{className:"text-4xl",showbg:!0}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:l}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:i})]})]})})]})]})};var J=t(82799);function TupleTxt(e){return(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,s.jsx)("div",{className:(0,u.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}function BVaultRedeem(e){let{bvc:a}=e,[t,n]=(0,k.useState)(""),l=(0,u.su)(t),i=(0,f.nr)(a.vault),c=(0,f.Vw)(a.vault)[0],o=(0,b.o)(e=>e.sliceTokenStore.balances[a.pToken]||0n,["sliceTokenStore.balances.".concat(a.pToken)]),d=(0,f.R3)(a),m=i.current.duration>0n?"Waiting Time: ~".concat((0,u.Y)((i.current.duration+i.current.startTime)*1000n-BigInt(w().now()))):"";return(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-1"),children:[(0,s.jsx)(I.W,{asset:a.pTokenSymbol,assetIcon:"Panda",amount:t,balance:o,setAmount:n}),!i.closed&&(0,s.jsxs)("div",{className:"text-xs font-medium text-center",children:[m," ",(0,s.jsx)(z.C,{children:"Wait to claim after the Epoch ends."})]}),(0,s.jsx)(F.vZ,{className:"mx-auto mt-6",tx:"Request",spender:null==c?void 0:c.redeemPool,approves:{[a.pToken]:l},disabled:c&&l<=0n||l>o,config:{abi:r.gg,address:(null==c?void 0:c.redeemPool)||E.DR,functionName:"redeem",args:[l]},onTxSuccess:()=>{n(""),d()}})]})}function BVaultRedeemAll(e){let{bvc:a}=e,t=(0,b.o)(e=>e.sliceTokenStore.balances[a.pToken]||0n,["sliceTokenStore.balances.".concat(a.pToken)]),n=(0,f.R3)(a),{data:l}=(0,R.p)(),{ids:i,claimable:o}=(0,f.gz)(a.vault),d=(0,x.pK)(),{mutate:m,isPending:j}=(0,v.D)({mutationKey:["readeemAll",t,o,i],mutationFn:async()=>{if(!l)throw"Error";let e=(0,p.B)(d);t>10n&&await l.writeContract({abi:r.j5,address:a.vault,functionName:"redeem",args:[t]}).then(a=>e.waitForTransactionReceipt({hash:a,confirmations:c.E})),o>10n&&await l.writeContract({abi:r.j5,address:a.vault,functionName:"batchClaimRedeemAssets",args:[i]}).then(a=>e.waitForTransactionReceipt({hash:a,confirmations:c.E})),P.A.success("Transaction success")},onSuccess:n,onError:u.S3}),g=!l||t+o<=100n;return(0,s.jsxs)("div",{className:(0,u.cn)("flex justify-between items-center gap-5 flex-wrap"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-nowrap",children:[(0,s.jsx)(G.cL,{symbol:a.assetSymbol,size:30})," ",a.assetSymbol]}),(0,s.jsxs)("div",{className:"whitespace-nowrap",children:["Balance: ",(0,h.d)(t)]}),(0,s.jsxs)("div",{className:"whitespace-nowrap",children:["Claimable: ",(0,h.d)(o)]}),(0,s.jsx)(M.k6,{className:"mx-auto mt-6 flex items-center justify-center gap-2",busy:j,disabled:g,onClick:m,children:"Redeem All"})]})}function BVaultClaim(e){let{bvc:a}=e,t=(0,f.nr)(a.vault),n=(0,f.Vw)(a.vault)[0],i=(null==n?void 0:n.redeemingBalance)||0n,{ids:c,claimable:o}=(0,f.gz)(a.vault),d=(0,f.R3)(a);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-base font-medium items-center gap-5 pt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-black/60 dark:text-white/60 text-sm",children:"Available to Claim"}),(0,s.jsxs)("div",{className:"flex gap-4 items-center whitespace-nowrap mt-2",children:[(0,s.jsx)(G.cL,{symbol:a.yeetLiqSymbol||a.assetSymbol,size:24}),(0,s.jsx)("span",{className:"font-semibold",children:a.yeetLiqSymbol||a.assetSymbol}),(0,s.jsx)("span",{className:"text-black/60 dark:text-white/60 ",children:(0,h.d)(o)})]})]}),(0,s.jsx)(F.vZ,{className:"ml-auto w-1/3",busyShowTxet:!1,tx:"Claim",disabled:o<=0n,config:{abi:r.j5,address:a.vault,functionName:"batchClaimRedeemAssets",args:[c.length>40?c.slice(c.length-40):c]},onTxSuccess:()=>{d()}})]}),(0,s.jsx)("div",{className:"h-[1px] bg-border my-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-black/60 dark:text-white/60 mb-4",children:"Pending Requests"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.Z,{showbg:!0,className:"text-2xl"}),(0,s.jsx)("span",{className:"font-semibold",children:a.pTokenSymbol}),(0,s.jsx)("span",{className:"text-black/60 dark:text-white/60",children:(0,h.d)(i)}),(0,s.jsxs)("div",{className:"ml-auto text-xs text-black/60 dark:text-white/60 ",children:["Settlement Time : ",(0,s.jsx)("span",{className:"text-black dark:text-white font-semibold pr-2",children:(0,u.G$)((t.current.duration+t.current.startTime)*1000n,u.mv.DATE2)})," ",(0,u.Y)((t.current.duration+t.current.startTime)*1000n-BigInt(w().now()))]})]})]})]})}function BVaultP(e){var a;let{bvc:t}=e,[i,c]=(0,k.useState)(""),d=(0,u.su)(i),m=o.P[t.asset],x=!!m,p=x?"PT":t.pTokenSymbol,v=x?"LP":t.assetSymbol,j=(0,f.nr)(t.vault),g=(0,b.o)(e=>e.sliceTokenStore.balances[t.asset]||0n,["sliceTokenStore.balances.".concat(t.asset)]),[N]=(0,f.oU)(t),{data:w}=(0,R.p)(),T=(0,f.R3)(t),B=(0,y.useSearchParams)(),C=B.get("subtab"),S=(0,y.useRouter)(),A=[{tab:"Buy",content:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full max-w-xl",children:[(0,s.jsx)(I.W,{asset:t.assetSymbol,amount:i,balance:g,setAmount:c}),(0,s.jsx)(GetLP,{address:t.asset}),(0,s.jsx)("div",{className:"text-xs font-medium text-center",children:"Receive 1 ".concat(p," for every ").concat(v)}),(0,s.jsx)(F.vZ,{className:"mx-auto mt-4",tx:"Buy",disabled:d<=0n||d>g,spender:t.vault,approves:{[t.asset]:d},config:{abi:r.j5,address:t.vault,functionName:"deposit",args:[d]},onTxSuccess:()=>{c(""),T()}})]})},{tab:"Withdraw",content:(0,s.jsx)(BVaultRedeem,{bvc:t})},{tab:"Claim",content:(0,s.jsx)(BVaultClaim,{bvc:t})}],P=null===(a=A.find(e=>e.tab.toLowerCase()==C))||void 0===a?void 0:a.tab;return(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-5","max-w-4xl mx-auto w-full","max-w-xl"),children:[(0,s.jsxs)("div",{className:"animitem card !p-0 overflow-hidden w-full",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-5",children:[(0,s.jsx)(l.Z,{className:"text-[3.375rem]",showbg:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black font-semibold",children:t.pTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,s.jsx)(TupleTxt,{tit:"APY Est.",sub:N}),(0,s.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,s.jsx)(s.Fragment,{children:(0,h.d)(j.pTokenTotal)})})]}),(0,s.jsx)("div",{className:"flex px-2 pb-5",children:(0,s.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==w||w.watchAsset({type:"ERC20",options:{address:t.pToken,symbol:t.pTokenSymbol,decimals:18}}).catch(u.S3)},children:"Add to wallet"})})]}),(0,s.jsx)("div",{className:"md:col-span-2 animitem card !p-4",children:(0,s.jsx)(K.x,{currentTab:P,data:A,onTabChange:e=>(0,n.rc)(S,t.vault,"principal_panda",e)})})]})}function BVaultYInfo(e){let{bvc:a}=e,t=a.assetSymbol.includes("-"),n=t?"YT":a.yTokenSymbol,l=t?"LP token":a.assetSymbol,r=(0,f.nr)(a.vault),c=r.current,o=r.current.yTokenAmountForSwapYT>0n?r.lockedAssetTotal*d.Pq/r.current.yTokenAmountForSwapYT:0n,[x]=(0,f.v7)(a.vault),{roi:p,restakingIncomesApy:b,additionalRoi:v}=(0,m.tY)(a);return(0,s.jsxs)("div",{className:"animitem card !p-0 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,s.jsx)(i.Z,{className:"text-[3.375rem]",showbg:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black font-semibold",children:a.yTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Yield token"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,s.jsx)("div",{className:"flex justify-between items-baseline gap-4 flex-wrap",children:(0,s.jsxs)("div",{className:"text-xs flex gap-2 items-end",children:[(0,s.jsxs)(z.C,{node:(0,s.jsx)("span",{className:"text-2xl font-medium underline underline-offset-2 relative top-0.5",children:(0,u.Jh)(p,18,2)}),children:[(0,s.jsxs)("div",{children:["Berachain Emission: ",(0,u.Jh)(b,18,2)]}),(0,s.jsxs)("div",{children:["Additional airdrops: ",(0,u.Jh)(v,18,2)]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{children:"YT Spent: -100%"})]}),"Est.ROI in remaining days"]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap justify-between",children:[(0,s.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,s.jsx)(s.Fragment,{children:(0,h.d)(r.current.yTokenAmountForSwapYT)})}),(0,s.jsxs)("span",{className:"text-xs",children:["1",n," = Yield of ",(0,h.d)(o,2)," ",l]})]}),c&&(0,s.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:"Epoch ".concat(c.epochId.toString())}),(0,s.jsxs)("span",{className:"scale-90",children:["~",(0,u.Y)((c.startTime+c.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,s.jsx)(g.Z,{value:(e=>{let a=BigInt(Math.floor(new Date().getTime()/1e3));if(a<e.startTime)return 0;if(a-c.startTime>=c.duration)return 100;let t=(a-c.startTime)*100n/e.duration;return parseInt(t.toString())})(c),className:"mt-2 rounded-full overflow-hidden"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"scale-90",children:(0,u.G$)(1000n*c.startTime,u.mv.ALL2)}),(0,s.jsx)("span",{className:"scale-90",children:(0,u.G$)((c.startTime+c.duration)*1000n,u.mv.ALL2)})]})]})]})]})}function BVaultYTrans(e){let{bvc:a}=e,t=a.assetSymbol.includes("-");t||a.pTokenSymbol;let n=t?"YT":a.yTokenSymbol,l=t?"LP token":a.assetSymbol,[i,c]=(0,k.useState)(""),o=(0,u.su)(i),v=(0,f.nr)(a.vault),g=(0,b.o)(e=>e.sliceTokenStore.balances[a.asset]||0n,["sliceTokenStore.balances.".concat(a.asset)]),N=(0,x.pK)(),[w,y]=(0,k.useState)(["calcSwap",a.vault,o,N]);(0,B.Z)(()=>y(["calcSwap",a.vault,o,N]),300,["calcSwap",a.vault,o,N]);let{data:S,isFetching:A}=(0,j.a)({queryKey:w,enabled:o>0n,queryFn:()=>(0,p.B)(N).readContract({abi:r.j5,address:a.vault,functionName:"calcSwap",args:[o]})}),[P,E]=(0,C.Z)(!1),R=v.current.vaultYTokenBalance,V=o>0n?(0,u.ok)(S,"1"):0n,Y=R>0n?v.Y*d.Pq/R:0n,L=Y>0n?d.Pq*d.Pq/Y:0n,D=P?"1 ".concat(l,"=").concat((0,h.d)(L)," ").concat(n):"1 ".concat(n,"=").concat((0,h.d)(Y)," ").concat(l),q=R>V?(v.Y+o)*d.Pq/(R-V):0n,Z=(0,u.Kl)(V,void 0,!0),W=q>Y&&Y>0n?(q-Y)*BigInt(1e10)/Y:0n,G=(0,f.R3)(a),{roi:O,roiChange:K}=(0,m.tY)(a,V,q);return(0,s.jsxs)("div",{className:"animitem card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,s.jsx)(I.W,{asset:a.assetSymbol,amount:i,balance:g,setAmount:c}),(0,s.jsx)(GetLP,{address:a.asset}),(0,s.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,s.jsx)(I.W,{asset:a.yTokenSymbol,assetIcon:"Venom",loading:A&&!!i,readonly:!0,disable:!0,checkBalance:!1,amount:Z}),(0,s.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>E()}),(0,s.jsx)("span",{children:"Price: ".concat(D)})]}),(0,s.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,u.Jh)(W,10,2))})]}),V>0n&&(0,s.jsxs)("div",{className:"text-xs font-medium text-center my-auto text-black/80 dark:text-white/80",children:["Implied ROI Change: ",(0,u.Jh)(O,18,2)," ","->"," ",(0,s.jsx)("span",{className:(0,u.cn)({"text-red-400":O-K>=BigInt(1e17)}),children:(0,u.Jh)(K,18,2)})]}),(0,s.jsx)(F.vZ,{className:"mx-auto mt-auto",tx:"Buy",disabled:o<=0n||o>g,config:{abi:r.j5,address:a.vault,functionName:"swap",args:[o]},approves:{[a.asset]:o},spender:a.vault,onTxSuccess:()=>{c(""),G()}})]})}function BribeTit(e){return(0,s.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,s.jsx)(G.cL,{symbol:"GreenDot",size:14}),(0,s.jsx)(z.C,{node:(0,s.jsx)("span",{className:"text-sm font-medium",children:(0,u.lS)(e.name,6,0)}),children:e.name.length>6?e.name:null})]})}function BVaultPoolsOld(e){var a;let{bvc:t}=e,[n,l]=(0,k.useState)(!1),i=(0,f.Vw)(t.vault),c=(0,k.useMemo)(()=>n?i.filter(e=>e.bribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n):i,[i,n]),[o,m]=(0,S.Z)(),x="text-black/60 dark:text-white/60 text-sm",[p,b]=(0,k.useState)(null===(a=c[0])||void 0===a?void 0:a.epochId),v=(0,k.useMemo)(()=>p?c.find(e=>e.epochId==p):c[0],[c,p]),j=(null==v?void 0:v.userBalanceYToken)||0n,g=(null==v?void 0:v.userBalanceYTokenSyntyetic)||0n,onRowClick=e=>{var a;b(null===(a=c[e])||void 0===a?void 0:a.epochId)},N=(null==v?void 0:v.bribes)||[],w=(0,k.useMemo)(()=>{let e=N.find(e=>e.bribeAmount>0n);return e&&0n!=e.bribeTotalAmount?(0,u.Jh)(e.bribeAmount*d.Pq/e.bribeTotalAmount,18):(0,u.Jh)(0n,0n)},[N]),y=(0,f.R3)(t);return(0,s.jsxs)("div",{className:"md:h-[24.25rem] animitem card !p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:o,children:[(0,s.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,s.jsx)("span",{children:"My Pool Only"}),(0,s.jsx)(Switch,{checked:n,onChange:l})]}),(0,s.jsx)(A.aV,{className:c.length>6?"pr-5":"",width:m.width,height:280,rowHeight:e=>{let{index:a}=e;return a<c.length-1?76:56},overscanRowCount:6,rowCount:c.length,rowRenderer:function(e){let{key:a,style:t,index:n}=e,l=c[n],i="".concat((0,u.G$)(1000n*l.startTime),"-").concat((0,u.G$)((l.startTime+l.duration)*1000n));return(0,s.jsx)("div",{style:t,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,s.jsxs)("div",{className:(0,u.cn)("h-[56px] animitem card !rounded-lg !px-5 !py-2 font-semibold",n<c.length-1?"mb-[20px]":""),children:[(0,s.jsxs)("div",{className:"text-sm",children:["Epoch ",c[n].epochId.toString()]}),(0,s.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:i})]})},a)}})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-sm",children:"Accumulated Rewards"}),(0,s.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==v?void 0:v.epochId)||1n).toString()]})]}),(0,s.jsx)("div",{className:"mt-2 rounded-lg border border-solid border-border px-4 py-1 h-[8.125rem] overflow-auto",children:(0,s.jsx)(O.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",headerItemClassName:"py-1",rowClassName:"text-center",cellClassName:"py-0",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:N.map(e=>["",(0,s.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,h.d)(e.bribeTotalAmount),(0,h.d)(e.bribeAmount),""])})}),(0,s.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"font-semibold text-xs",children:[(0,s.jsxs)("div",{children:["My yToken: ",(0,s.jsx)("span",{className:(0,u.cn)(x),children:(0,h.d)(j)})]}),(0,s.jsxs)("div",{children:["Time Weighted Points:"," ",(0,s.jsx)("span",{className:(0,u.cn)(x),children:j>0n&&0n==g?"Reward received":(0,h.d)(g)})]})]}),(0,s.jsxs)("div",{className:"text-sm",children:["My Share: ",(0,s.jsx)("span",{className:(0,u.cn)(x,"text-xl"),children:w})]})]}),(0,s.jsx)("span",{className:"text-xs mx-auto",children:"You can harvest at the end of Epoch"}),(0,s.jsx)(F.vZ,{className:"mx-auto mt-4",tx:"Harvest",disabled:!v||!(null==v?void 0:v.settled),config:{abi:r.j5,address:t.vault,functionName:"claimBribes",args:[null==v?void 0:v.epochId]},onTxSuccess:()=>{y()}})]})]})]})}function BVaultPools(e){var a,t;let{bvc:n}=e,[l,i]=(0,k.useState)(!1),c=(0,f.Vw)(n.vault),o=(0,k.useMemo)(()=>l?c.filter(e=>e.sBribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n||e.aBribes.reduce((e,a)=>e+a.bribeAmount,0n)>0n):c,[c,l]),[d,m]=(0,S.Z)(),[x,p]=(0,k.useState)(null===(a=o[0])||void 0===a?void 0:a.epochId),b=(0,k.useMemo)(()=>x?o.find(e=>e.epochId==x):o[0],[o,x]),v=(null==b?void 0:b.userBalanceYToken)||0n,j=(null==b?void 0:b.userBalanceYTokenSyntyetic)||0n,g=(null==b?void 0:b.userClaimableYTokenSyntyetic)||0n,onRowClick=e=>{var a;p(null===(a=o[e])||void 0===a?void 0:a.epochId)};(0,k.useEffect)(()=>{var e,a;c.length&&p((null===(e=o[0])||void 0===e?void 0:e.epochId)||(null===(a=c[0])||void 0===a?void 0:a.epochId))},[c.length]);let N=(null==b?void 0:b.sBribes)||[],w=(null==b?void 0:b.aBribes)||[],{data:y}=(0,J.x)(),T=null===(t=y["".concat(n.vault)])||void 0===t?void 0:t[parseInt((x||0n).toString())],B=(0,f.R3)(n);return(0,s.jsxs)("div",{className:"md:h-[24.25rem] animitem card !p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[11.5625rem]",ref:d,children:[(0,s.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,s.jsx)("span",{children:"My Pool Only"}),(0,s.jsx)(Switch,{checked:l,onChange:i})]}),(0,s.jsx)(A.aV,{className:o.length>6?"pr-5":"",width:m.width,height:280,rowHeight:e=>{let{index:a}=e;return a<o.length-1?76:56},overscanRowCount:6,rowCount:o.length,rowRenderer:function(e){let{key:a,style:t,index:n}=e,l=o[n],i="".concat((0,u.G$)(1000n*l.startTime),"-").concat((0,u.G$)((l.startTime+l.duration)*1000n));return(0,s.jsx)("div",{style:t,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,s.jsxs)("div",{className:(0,u.cn)("h-[56px] animitem card !rounded-lg !px-4 !py-2 font-semibold",n<o.length-1?"mb-[20px]":""),children:[(0,s.jsxs)("div",{className:"text-sm",children:["Epoch ",o[n].epochId.toString()]}),(0,s.jsx)("div",{className:"text-xs opacity-60 mt-1",children:i})]})},a)}})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,s.jsxs)("span",{className:"text-xs opacity-60",children:["Epoch ",((null==b?void 0:b.epochId)||1n).toString()]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-7 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-sm",children:"YT Balance"}),(0,s.jsx)("span",{className:"text-sm opacity-60",children:(0,h.d)(v)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[N.map(e=>(0,s.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,s.jsx)(BribeTit,{name:e.bribeSymbol}),(0,s.jsx)("div",{className:"absolute left-1/2",children:(0,h.d)(e.bribeAmount)})]},e.bribeToken)),(0,s.jsx)("span",{className:"absolute left-0 top-0",children:"Berachain Emission"}),(0,s.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,s.jsx)(F.vZ,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:r.l0,address:null==b?void 0:b.stakingBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,s.jsxs)("div",{className:"flex items-center relative",children:[(0,s.jsxs)("span",{className:"text-sm",children:["YT Points ",(0,s.jsx)(z.C,{children:"YT Points are calculated based on the duration of YT holding and apply to some uncertain rewards, such as airdrops."})]}),(0,s.jsx)("span",{className:" opacity-60 ml-5",children:(0,h.d)(j,void 0,23)}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,s.jsx)("span",{className:"opacity-60",children:"Claimable"}),(0,s.jsx)("span",{children:(0,h.d)(g,void 0,23)})]}),(0,s.jsx)(F.vZ,{className:"w-28 ml-auto",tx:"Claim",disabled:!b,config:{abi:r.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"collectYT"},onTxSuccess:()=>{B()}})]}),w.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,s.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,s.jsx)(BribeTit,{name:e.bribeSymbol}),(0,s.jsx)("div",{className:"absolute left-1/2",children:(0,h.d)(e.bribeAmount)})]},e.bribeToken)),(0,s.jsx)("span",{className:"absolute left-0 top-0",children:"Additional Incentives"}),(0,s.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,s.jsx)(F.vZ,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:r.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"getBribes"},onTxSuccess:()=>{B()}})]}),(0,s.jsxs)("div",{className:"text-center text-sm font-medium flex items-center flex-nowrap justify-center whitespace-nowrap mt-auto gap-1",children:["Additional Airdrops: ",T?(0,s.jsxs)(s.Fragment,{children:[T.amount," ",(0,s.jsx)(G.cL,{symbol:T.token,size:16})," ",T.token," ",(0,s.jsx)(z.C,{children:"Will be distributed based on YT points after Epoch ends"})]}):"TBD"]})]})]})]})]})}function BVaultB(e){let{bvc:a}=e,t=(0,f.nr)(a.vault);return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,s.jsx)(BVaultYInfo,{bvc:a}),(0,s.jsx)(BvaultEpochYtPrices,{bvc:a,epochId:t.epochCount}),(0,s.jsx)(BVaultYTrans,{bvc:a}),a.isOld?(0,s.jsx)(BVaultPoolsOld,{bvc:a}):(0,s.jsx)(BVaultPools,{bvc:a})]})}function BVaultCard(e){let{vc:a}=e,t=(0,y.useRouter)(),[l,i]=a.assetSymbol.split("-"),r=(0,f.nr)(a.vault),c=o.P[a.asset],x=(0,b.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),p=c&&x[c.base]||0n,v=c&&x[c.quote]||0n,j=r.lpBase||0n,g=r.lpQuote||0n,N=j*p/d.Pq,k=g*v/d.Pq,T=N+k;0n===T&&(T=r.lockedAssetTotal);let[B]=(0,f.v7)(a.vault),[C]=(0,f.oU)(a),S="Epoch ".concat(((null==r?void 0:r.epochCount)||0n).toString()),A=0n==r.epochCount?"-- -- --":(0,u.G$)((r.current.startTime+r.current.duration)*1000n,u.mv.DATE2),P=0n==r.epochCount?"":(0,u.Y)((r.current.startTime+r.current.duration)*1000n-BigInt(w().now())),{roi:E}=(0,m.tY)(a);return(0,s.jsxs)("div",{className:(0,u.cn)("animitem card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,s.jsxs)("div",{className:(0,u.cn)($,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[c?(0,s.jsx)(G.rw,{symbol1:l,symbol2:i,size:28}):(0,s.jsx)(G.cL,{symbol:a.assetSymbol,size:44}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:a.assetSymbol}),(0,s.jsx)("div",{className:" text-sm font-medium",children:a.assetSymbol.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,h.d)(T,2)]})]})]}),renderToken(l,j,N),renderToken(i,g,k,!0),renderStat("Settlement Time",r.closed?"status-red":"status-green",r.closed?"Closed":(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,s.jsx)("span",{children:A}),(0,s.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:P})]}),r.epochCount>0n&&(0,s.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:S})]})),renderStat("Reward",a.rewardSymbol||"iBGT",a.rewardSymbol||"iBGT",!0),renderChoseSide("Panda","Principal Panda",C,"Venom","Boost Venom","".concat((0,u.Jh)(E,18,2)),e=>{e.stopPropagation(),(0,n.rc)(t,a.vault,"principal_panda")},e=>{e.stopPropagation(),(0,n.rc)(t,a.vault,"boost_venom")})]})}function BVaultCardComming(e){let{symbol:a}=e,[t,n]=(a||"").split("-");return(0,s.jsxs)("div",{className:(0,u.cn)("animitem card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[419px]",{}),children:[(0,s.jsxs)("div",{className:(0,u.cn)($,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[a&&(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(G.rw,{symbol1:t,symbol2:n,size:28}):(0,s.jsx)(G.cL,{symbol:a,size:44})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:a}),(0,s.jsx)("div",{className:" text-sm font-medium",children:a.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,s.jsx)("div",{className:(0,u.cn)($,"col-span-2"),children:(0,s.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Coming Soon..."})})]})}function useBalances(){return(0,b.o)(e=>(0,u.Yb)(e.sliceTokenStore.balances,0n),["sliceTokenStore.balances"])}var Q=t(83960),X=t(45207),ee=t(85058),ea=t(42302);function PulseTokenItem(){return(0,s.jsxs)("div",{className:"animate-pulse flex px-4 py-2 items-center gap-4 rounded-lg",children:[(0,s.jsx)("div",{className:"rounded-full w-10 h-10 bg-slate-400"}),(0,s.jsx)("div",{className:"w-28 h-5 rounded-lg bg-slate-400"}),(0,s.jsx)("div",{className:"ml-auto w-12 h-5 rounded-lg bg-slate-400"})]})}var et=t(16804),es=t(7347);let en=[{symbol:"HONEY",name:"HONEY Token",address:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",decimals:18},{symbol:"USDC",name:"USD Coin",address:"0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c",decimals:18},{symbol:"WBERA",name:"BERA Token",address:"0x7507c1dc16935b82698e4c63f2746a2fcf994df8",decimals:18},{symbol:"iBGT",name:"Infrared BGT",address:"0x46eFC86F0D7455F135CC9df501673739d513E982",decimals:18},{symbol:"USDT",name:"Tether USD",address:"0x05D0dD5135E3eF3aDE32a9eF9Cb06e8D37A6795D",decimals:18},{symbol:"DAI",name:"Decentralized USD",address:"0x806Ef538b228844c73E8E692ADCFa8Eb2fCF729c",decimals:18},{symbol:"WBTC",name:"Wrapped Bitcoin",address:"0x2577D24a26f8FA19c1058a8b0106E2c7303454a4",decimals:18},{symbol:"WETH",name:"Wrapped Ether",address:"0xE28AfD8c634946833e89ee3F122C06d7C537E8A8",decimals:18}],el=[{symbol:"iBGT",name:"Infrared BGT",address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",decimals:18},{symbol:"HONEY",name:"HONEY Token",address:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce",decimals:18},{symbol:"USDC",name:"USDC Token",address:"0x549943e04f40284185054145c6E4e9568C1D3241",decimals:6},{symbol:"WBERA",name:"Wrapped Bera",address:"0x6969696969696969696969696969696969696969",decimals:18}];function TokenSelect(e){let{tokens:a,onSelect:t,hiddenNative:n}=e,l=(0,x.pK)(),i=(0,b.o)(e=>e.sliceTokenStore.defTokenList),r=(0,k.useMemo)(()=>{let e=w().isEmpty(a)?w().isEmpty(i)?l==q.On.id?el:en:i:a;return n?e.filter(e=>!(0,es.Mg)(e.address)):e},[a,i,n,l]),[c,o]=(0,k.useState)(""),d=useBalances(),{address:m}=(0,ea.m)(),[f,v]=(0,k.useState)(["searchTokens",c,r]);(0,B.Z)(()=>v(["searchTokens",c,r]),300,[c,r]);let{data:g,isFetching:N}=(0,j.a)({initialData:r,queryFn:async()=>{if((0,X.U)(c)){let e=r.find(e=>e.address==c);if(e)return[e];let a=(0,p.B)(l),[t,s]=await Promise.all([a.readContract({abi:ee.Wo,address:c,functionName:"symbol"}),a.readContract({abi:ee.Wo,address:c,functionName:"decimals"})]);return m&&b.w.getState().sliceTokenStore.updateTokensBalance(l,[c],m),[{symbol:t,address:c,decimals:s}]}return c?r.filter(e=>{let a=c.toLowerCase(),t=!!e.symbol.toLowerCase().match(a),s=!!e.name&&!!e.name.toLowerCase().match(a);return t||s}):r},queryKey:f}),y=g||r;return(0,j.a)({queryKey:["updateBalancesForUnknowToken",r],enabled:!!m,queryFn:()=>b.w.getState().sliceTokenStore.updateTokensBalance(l,r.map(e=>e.address),m)}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-5",children:[(0,s.jsx)("div",{className:"page-sub text-center",children:"Select a token"}),(0,s.jsx)("input",{className:(0,u.cn)("bg-white dark:bg-transparent","border-slate-400  focus:border-primary","w-full h-14 text-right px-4 font-bold text-base border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"Search by name, symbol or address",value:c,onChange:e=>o(e.target.value)}),(0,s.jsx)("div",{className:"flex flex-col overflow-y-auto h-[18.75rem]",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(PulseTokenItem,{}),(0,s.jsx)(PulseTokenItem,{}),(0,s.jsx)(PulseTokenItem,{})]}):(0,s.jsx)(s.Fragment,{children:y.map(e=>(0,s.jsxs)("div",{className:"flex px-4 py-2 items-center gap-4 rounded-lg cursor-pointer hover:bg-primary/20",onClick:()=>{null==t||t(e)},children:[(0,s.jsx)(G.cL,{className:"rounded-full",size:40,symbol:e.symbol,url:e.url}),(0,s.jsx)("span",{children:e.symbol}),(0,s.jsx)("span",{className:"ml-auto",children:(0,h.d)(d[e.address],3,e.decimals)})]},e.address))})})]})}function BVaultAddReward(e){let{bvc:a}=e,t=useBalances(),n=(0,f.nr)(a.vault),l=(0,b.o)(e=>e.sliceTokenStore.defTokenList),i=w().isEmpty(l)?en[0]:l[0],[c,o]=(0,k.useState)(i),[d,m]=(0,k.useState)(""),h=t[c.address],j=(0,u.su)(d,c.decimals),g=(0,k.useRef)(null),N=(0,R.p)(),{address:y}=(0,ea.m)(),T=(0,x.pK)(),{mutate:B,isPending:C}=(0,v.D)({mutationFn:async()=>{if(S)return;let e=(0,p.B)(T);if(a.isOld){let t=await e.readContract({abi:r.j5,address:a.vault,functionName:"bribeTokens",args:[n.epochCount]});if(console.info("tokens:",t,c.address),!t.find(e=>e.toLowerCase()==c.address.toLowerCase())){let t=await N.data.writeContract({abi:r.j5,address:a.vault,functionName:"addBribeToken",args:[c.address]});await e.waitForTransactionReceipt({hash:t,confirmations:3})}let s=await e.readContract({abi:ee.Wo,address:c.address,functionName:"allowance",args:[y,a.vault]});if(s<j){let t=await N.data.writeContract({abi:ee.Wo,address:c.address,functionName:"approve",args:[a.vault,j-s]});await e.waitForTransactionReceipt({hash:t,confirmations:3})}let l=await N.data.writeContract({abi:r.j5,address:a.vault,functionName:"addBribes",args:[c.address,j]});await e.waitForTransactionReceipt({hash:l,confirmations:3})}else{let t=await e.readContract({abi:ee.Wo,address:c.address,functionName:"allowance",args:[y,a.vault]});if(t<j){let s=await N.data.writeContract({abi:ee.Wo,address:c.address,functionName:"approve",args:[a.vault,j-t]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let s=await N.data.writeContract({abi:r.j5,address:a.vault,functionName:"addAdhocBribes",args:[c.address,j]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}b.w.getState().sliceTokenStore.updateTokensBalance(T,[c.address],y),m(""),P.A.success("Transaction success")},mutationKey:["addReward"],onError:u.S3}),S=!N.data||!y||0n==j||j>h||C||0n==n.epochCount;return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 animitem card",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.W,{decimals:c.decimals,asset:c.symbol,assetURL:c.url,balance:t[c.address],amount:d,setAmount:m}),(0,s.jsx)(et.o,{trigger:(0,s.jsxs)("div",{ref:g,className:"absolute left-0 top-0 flex cursor-pointer justify-end items-center py-4",children:[(0,s.jsx)("span",{className:"invisible pl-12",children:c.symbol}),(0,s.jsx)(Q.tv1,{className:"ml-2"})]}),children:(0,s.jsx)(TokenSelect,{hiddenNative:!0,onSelect:e=>{var a;o(e),null===(a=g.current)||void 0===a||a.click()}})})]}),(0,s.jsx)(M.k6,{busy:C,className:"w-full flex justify-center items-center gap-2",disabled:S,onClick:()=>B(),children:"Add"})]})}var ei=t(82121),er=t(26694),ec=t(58400),eo=t(422),ed=t(90895),em=t(97995),ex=t(5807),eu=t(45631);let ep=["redeem","principal_panda","boost_venom"];function BVaultPage(e){var a;let{bvc:t,currentTab:l}=e,{address:i}=(0,ea.m)(),c=(0,f.nr)(t.vault),o=(0,x.pK)();(0,j.a)({queryKey:["UpdateVaultDetails",o,t,c],queryFn:async()=>0n!=c.epochCount&&(await b.w.getState().sliceBVaultsStore.updateEpoches(o,t),!0)});let d=(0,f.Zd)(t.vault);(0,j.a)({queryKey:["UpdateUserData",t,d,i],queryFn:async()=>0!=d.length&&!!i&&(console.info("epochesOld:",d),await b.w.getState().sliceUserBVaults.updateEpoches(o,t,i,d),!0)});let{data:m}=(0,j.a)({queryKey:["checkIsBriber",o,i,t],queryFn:async()=>{if(!i)return!1;let e=(0,p.B)(o),a=await Promise.all([e.readContract({abi:r.j5,address:t.vault,functionName:"isBriber",args:[i]}),e.readContract({abi:r.j5,address:t.vault,functionName:"owner"}).then(e=>e==i)]);return a.includes(!0)||(0,em.E)(i,"0xFE18Aa1EFa652660F36Ab84F122CD36108f903B6")}}),h=[...c.closed?[{tab:"Redeem",content:(0,s.jsx)("div",{className:"max-w-xl mx-auto pt-8 w-full",children:(0,s.jsx)(BVaultRedeemAll,{bvc:t})})}]:[{tab:"Principal Panda",content:(0,s.jsx)(BVaultP,{bvc:t})}],{tab:"Boost Venom",content:(0,s.jsx)(BVaultB,{bvc:t})}],v=m?[...h,{tab:"Add Reward",content:(0,s.jsx)(BVaultAddReward,{bvc:t})}]:h,g=null===(a=v.find(e=>(0,u.pi)(e.tab)==l))||void 0===a?void 0:a.tab,N=(0,y.useRouter)();return(0,s.jsx)(K.x,{currentTab:g,onTabChange:e=>(0,n.rc)(N,t.vault,e),listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:v})}let eb=[{label:"Active",value:"Active"},{label:"All",value:"All"},{label:"Closed",value:"Closed"}];function Vaults(){var e;let a=(0,x.pK)(),t=(0,k.useMemo)(()=>ec.Fw[a].filter(e=>e.onEnv&&e.onEnv.includes(d.Vi)),[a,d.Vi]),n=(0,y.useSearchParams)(),l=n.get("vault"),i=n.get("tab"),r=ep.includes(i)?i:"",c=t.find(e=>e.vault==l),{loading:o}=(0,eo.E)(),[m,p]=(0,k.useState)(null!==(e=eb.find(e=>e.value===sessionStorage.getItem("bvualts-filter")))&&void 0!==e?e:eb[0]),wrapSetFilter=e=>{p(e),sessionStorage.setItem("bvualts-filter",e.value)},f=(0,b.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),h=(0,k.useMemo)(()=>o||"All"==m.label?t:"Active"==m.label?t.filter(e=>{var a;return!(null===(a=f[e.vault])||void 0===a?void 0:a.closed)}):t.filter(e=>{var a;return!!(null===(a=f[e.vault])||void 0===a?void 0:a.closed)}),[o,f,m,t]);return(0,s.jsx)(er.E,{children:(0,s.jsx)("div",{className:"w-full max-w-[1232px] px-4 mx-auto md:pb-8",children:c?(0,s.jsx)(BVaultPage,{bvc:c,currentTab:r}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"page-title",children:"B-Vaults"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-5 w-full items-center justify-between",children:[(0,s.jsx)(ei.K,{className:"w-auto",data:"A Pendle-like Yield Tokenization Protocol Tailored for Proof-of-Liquidity (POL)."}),(0,s.jsx)(eu.ZP,{onChange:e=>e&&wrapSetFilter(e),value:m,classNames:{menu:()=>(0,u.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,u.cn)("cursor-pointer",{"!bg-primary/50":e.isFocused,"!bg-primary":e.isSelected}),control:()=>"bg-white dark:bg-black !border-primary/70 !shadow-none cursor-pointer",singleValue:()=>"dark:text-white"},options:eb})]}),o?(0,s.jsx)("div",{className:"w-full flex items-center justify-center pt-40",children:(0,s.jsx)(ex.fCD,{className:"animate-spin text-4xl opacity-80"})}):(0,s.jsxs)(ed.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[h.map((e,a)=>(0,s.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(a))),0==t.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-USDC"}),(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),1==t.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WBERA"}),(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]}),2==t.length&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})})]})]})})})}},39809:function(e,a,t){"use strict";t.d(a,{W:function(){return AssetInput}});var s=t(52987),n=t(13854),l=t(29293),i=t(33501),r=t(77317),c=t(45631),o=t(35164),d=t(47857),m=t(78525),x=t(77087),u=t(85665),p=t(83978),b=t.n(p);function AssetInput(e){let{asset:a="ETH",assetIcon:t,assetURL:f,checkBalance:h=!0,balance:v,balanceTit:j="Balance",decimals:g=18,exchange:N,readonly:w,selected:y,onClick:k,amount:T,setAmount:B,price:C,disable:S,hasInput:A=!1,options:P,onChange:E=()=>{},defaultValue:R,balanceClassName:F="",loading:I,error:V,step:Y=.01,integer:L}=e,D=(0,r.useRef)(null),q=h&&void 0!==v&&(0,n.su)("number"==typeof T?T+"":T||"",g)>("bigint"==typeof v?v:0n),Z=(0,m.l)(e=>"dark"==e.theme),W=q||!!V,[G,{width:O}]=(0,u.Z)();return(0,s.jsxs)("div",{className:"relative w-full",onClick:()=>{k&&!S&&k()},children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[C&&(0,s.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:C}),N&&(0,s.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",N]})]}),(0,s.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",ref:G,children:[(0,s.jsx)(d.cL,{size:24,symbol:t||a,url:f,className:"rounded-full"}),(0,s.jsx)("div",{className:(0,i.Z)("relative",C||N?"-top-[6px]":""),children:A?(0,s.jsx)(c.ZP,{options:P,onChange:E,defaultValue:R,styles:{control:(e,a)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,a)=>({...e,color:Z?"#fff":"#000"}),valueContainer:(e,a)=>({...e,padding:"0px"}),menu:(e,a)=>({...e,margin:0,background:Z?"#444":"#fff"}),option:(e,a)=>({...e,color:Z?"#fff":"#000",background:Z?"transparent":"#fff"}),menuPortal:(e,a)=>({...e,margin:0})}}):(0,s.jsx)("div",{children:a})})]}),(0,s.jsx)("input",{value:I?"":T,onChange:e=>{if(w)return;let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");L&&a.replaceAll(".",""),B(a)},ref:D,type:"number",disabled:S,style:{paddingLeft:"".concat(b().round((O+32)/16,3),"rem")},className:(0,i.Z)(w?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":y,"border-red-400 !border-2 focus:border-red-400":W,"border-slate-400  focus:border-primary":!W&&!y},"w-full h-14 text-right pr-4 font-bold text-lg border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:Y,title:"",readOnly:w}),I&&(0,s.jsx)(x.$,{className:"absolute right-24 top-[1.125rem]"})]}),void 0!=v&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,s.jsxs)("div",{className:F,children:[(0,s.jsxs)("span",{children:[j,": ",(0,l.d)(v,3,g)]}),!S&&(0,s.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,o.b)(v,g);L&&(e=(0,p.floor)((0,p.toNumber)(e)).toString()),B(e),k&&!S&&k()},children:"Max"})]}),W&&(0,s.jsx)("div",{className:"text-sm text-red-400",children:V||"Insufficient account balance"})]})]})}},82121:function(e,a,t){"use strict";t.d(a,{C:function(){return Badge},K:function(){return Noti}});var s=t(52987),n=t(13854),l=t(63114);function Noti(e){let{data:a,className:t}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",t),children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.pMA,{size:20})}),(0,s.jsx)("div",{className:"text-sm ml-1 ",children:a})]})}function Badge(e){let{className:a,text:t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("text-xs px-1.5 text-center py-[1px] rounded-full bg-red-500 text-slate-50",a),children:t})}},3861:function(e,a,t){"use strict";t.d(a,{x:function(){return SimpleTabs}});var s=t(52987),n=t(13854),l=t(98750),i=t(77317);function SimpleTabs(e){let{currentTab:a,className:t,listClassName:r,triggerClassName:c,contentClassName:o,hiddenConetent:d=!1,data:m,onTabChange:x}=e,[u,p]=(0,i.useState)(a||m[0].tab);return(0,i.useEffect)(()=>{m.find(e=>e.tab==u)||p(m[0].tab)},[u,m]),(0,s.jsxs)(l.fC,{value:a||u,className:(0,n.cn)("w-full",t),onValueChange:e=>{p(e),null==x||x(e)},children:[(0,s.jsx)(l.aV,{className:(0,n.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",r),children:m.map((e,a)=>(0,s.jsx)(l.xz,{className:(0,n.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',"function"==typeof c?c(a):c),value:e.tab,children:e.tab},e.tab))}),!d&&m.map(e=>(0,s.jsx)(l.VY,{value:e.tab,className:(0,n.cn)("flex flex-col gap-6 outline-none",o),children:e.content},e.tab))]})}},25282:function(e,a,t){"use strict";t.d(a,{C:function(){return Tip}});var s=t(52987),n=t(13854),l=t(43099),i=t(55966);function Tip(e){let{children:a,node:t,className:r,contentClassName:c,inFlex:o}=e,d=document.getElementById("tooltip-root");return a?(0,s.jsx)(l.zt,{children:(0,s.jsxs)(l.fC,{children:[(0,s.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:t?(0,s.jsx)("div",{className:(0,n.cn)("inline-block cursor-default",r),style:{verticalAlign:"text-bottom"},children:t}):(0,s.jsx)("div",{className:(0,n.cn)(o?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",r),children:(0,s.jsx)(i.apP,{className:"inline-block stroke-slate-500"})})}),(0,s.jsx)(l.h_,{container:d,children:(0,s.jsxs)(l.VY,{className:(0,n.cn)("max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",c),children:[a,(0,s.jsx)(l.Eh,{})]})})]})}):t}},61650:function(e,a,t){"use strict";t.d(a,{E:function(){return l},f:function(){return i}});var s=t(64090),n=t(53414);let l=3,i=[{chain:s.F.id,vault:"0xb8aa29c0688c53f4dd875b1d0702de69bf52df7d",asset:"0x0993a80ee5bb32b73f61c71662f53c599ee4f829",market:"0x8bb5b52183f2a3d578b452e09b3ed8f8ae859f9e",protocol:"0xcdf86f49303fd5350ece1f1a27b9d6083851ae04",onEnv:["test","prod"],MockT:"0x6f00ca3db3ee2b72d8ddd434ae0e31571fd70f03",MockaVTOracle:"0x1e349be7cacbd558bf39ba38763359f541ed07ca",MockNodeDelegator:"0x48fdfe0ebc720262d4157ff9ea81d0d92d544c6d",MockRewardDistribuitor:"0x82d6a9b59c8aa157dca8ef1a15f36406198da3d5",lpTYT:"0x123",vtActive:!0,ytEnable:!0,lpYields:!0,icon:"ReppoNft",tit:"Reppo Network LNT Vault",info:"Reppo are building plug & play style infrastructure for AI Agents, Developers & Physical AI to permissionlessly discover, negotiate, commit, and settle on community-governed capital, specialized datasets, and infrastructure through an intent-centric architecture."},{chain:n.Cn.id,vault:"0xda732f0f05e8e4448d8358a142b289f528f81824",asset:"0xfce521166366566a49344a0dd529028d5fda5cd3",market:"0xb1d4d60ebd2bae3904a4070ac4661ed9b84c47e8",protocol:"0x47c79e20ffd41ca55ced7e31aa5767a7440ff0cf",onEnv:["test","prod"],MockaVTOracle:"0x8fb28f6d7834dc0127e39be7c9db11383e126d2b",MockNodeDelegator:"0xc7329fbb367f709b57f3945eb6ac18cebd711c7c",MockRewardDistribuitor:"0x1063bbc8c6a81f0f84af6b6c84f6a7635b008893",lpTYT:"0x123",vtActive:!0,ytEnable:!0,lpYields:!0,icon:"ZeroG",tit:"0G AI Alignment Node",info:"0G (Zero Gravity) is the first decentralized AI L1 chain that orchestrates hardware resources (storage, compute) and software assets (data, models) to handle AI workloads at scale. It bridges the gap between Web2 AI capabilities and Web3 decentralization."}]},79075:function(e,a,t){"use strict";t.d(a,{tY:function(){return useBvaultROI}});var s=t(46881),n=t(96555),l=t(62013),i=t(21663),r=t(44100),c=t(64370),o=t(83978),d=t.n(o),m=t(12771),x=t(43955),u=t(82799),p=t(78784),b=t(99409),f=t(13854);function calcRestakingApy(e,a,t){let s=a>0n?e*t/a:0n;return s>100n*n.Pq?0n:s}function calcAdditionalApy(e,a,t,s,l){let i=a>0n&&t>0n?a+t*s:0n,r=i>0n?e*n.Pq/i:0n,c=n.Pq*s,o=r*c/n.Pq,d=l>0n?o*n.Pq/l:0n;return d}function useBvaultROI(e){var a;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,h=(0,r.nr)(e.vault),{data:v,isLoading:j}=function(e){let a=(0,b.pK)();return(0,c.a)({initialData:0n,queryKey:["getReturnsIBGT",e,a],queryFn:async()=>{let t=await p.ZP.get(a,"/api/bvault/getYieldiBGT/".concat(e)),s=BigInt(t.yield)/BigInt(t.dur);return s}})}(e.vault),{data:g,isLoading:N}=(0,u.x)(),w=h.current.duration+h.current.startTime,y=w>0n?w-BigInt(d().round(d().now()/1e3)):0n,k=h.current.yTokenAmountForSwapYT,T=k>0n?v*n.Pq*y/k:0n,B=(0,i.o)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,C=(0,i.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,S=(0,r.Pd)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,m.d)(B),(0,m.d)(S));let A=h.current.vaultYTokenBalance,P=k+t>0n?v*n.Pq*y/(k+t):0n,E=A>0n?h.Y*n.Pq/A:0n,R=E*S/n.Pq,F=o*S/n.Pq,I=calcRestakingApy(T,R,B),V=t>0n?calcRestakingApy(P,F,B):0n;console.info("restakingapy:",e.assetSymbol,(0,m.d)(I),(0,m.d)(T),(0,m.d)(E),(0,m.d)(R));let Y=null===(a=g["".concat(e.vault)])||void 0===a?void 0:a[parseInt(h.epochCount.toString())],L=Y&&Y.token&&Y.amount?(0,f.ok)(C,u.c[Y.token])*(0,x.f)(Y.amount.toFixed(6))/n.Pq:0n,{data:D,isLoading:q}=function(e){let a=(0,r.nr)(e),t=(0,b.pK)();return(0,c.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",t,e,a.current.adhocBribesPool],enabled:!!e&&!!a.current.adhocBribesPool,queryFn:async()=>{let e=(0,l.B)(t);return e.readContract({abi:s.q3,address:a.current.adhocBribesPool,functionName:"totalSupply"})}})}(e.vault),Z=calcAdditionalApy(L,D,k,y,R),W=t>0n?calcAdditionalApy(L,D,k+t,y,F):0n,G=j||N||q;return{roi:!G&&k>0n&&T>0n?I+Z-n.Pq:0n,roiChange:!G&&k>0n&&T>0n?V+W-n.Pq:0n,restakingIncomesApy:I,additionalRoi:Z}}}},function(e){e.O(0,[4881,7495,7622,5294,3113,3979,4105,8913,2870,1900,8468,5049,2111,9676,1331,3099,1445,5459,6661,2516,7738,3747,9987,7001,4195,6338,1744],function(){return e(e.s=53604)}),_N_E=e.O()}]);