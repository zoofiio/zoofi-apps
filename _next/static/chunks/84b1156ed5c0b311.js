(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,763894,e=>{"use strict";var t=e.i(472064),r=e.i(751755);let s={[r.berachain.id]:"0x4737c3BAB13a1Ad94ede8B46Bc6C22fb8bBE9c81"},a={[r.berachain.id]:"0x7D3Cec2f46279229277802D30702e4E7FB19bAC0"},n={[r.berachain.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},o={[r.berachain.id]:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce"},i={[r.berachain.id]:"0x6E603014ACE3Ae06F34Ffe259106Af77c056d913"},u=[{chain:r.berachain.id,vault:"0xf579c039c52ab795F0C4E358d3b462bE883cDd9F",asset:"0x9659dc8c1565E0bd82627267e3b4eEd1a377ebE6",pToken:"0xF0d0CEAE071b3aDfaad4Aa1722c9E9A94fb7Dd04",pTokenV2:!0,assetSymbol:"WETH-WBERA",pTokenSymbol:"pWETHWBERA",yTokenSymbol:"yWETHWBERA",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]},{chain:r.berachain.id,vault:"0x94822b9BA715E9e3079ed12489Dc7A016694FC67",asset:"0xdd70a5ef7d8cfe5c5134b5f9874b09fb5ce812b4",pToken:"0x0DA715b18AaF66c7c044D4F315D479f6036728Ea",pTokenV2:!0,assetSymbol:"WBERA-WETH",pTokenSymbol:"pWBERAWETH",yTokenSymbol:"yWBERAWETH",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]},{chain:r.berachain.id,vault:"0xE6d15592F337f54E8BD47e56BbB22aF12F0D4083",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0xc2C5EaDF0f48702bEEDD2e2a35517e1fC4dBF7A7",pTokenV2:!0,assetSymbol:"HONEY-USDC",pTokenSymbol:"pUSDCeHONEY",yTokenSymbol:"yUSDCeHONEY",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]},{chain:r.berachain.id,vault:"0x702B707c2F8dd26F4F1e51cF425035d355A02767",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0xA58f5A2487abaBc5c5A23E3e3796E6615d12FCaf",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]},{chain:r.berachain.id,vault:"0x6686bDfF3ad20AE45E811c2451DfeE8AA0f338C0",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0x83f933af46458102cf54Eabe441DBB659a1B2eA5",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:s[r.berachain.id],protocolSettingsAddress:a[r.berachain.id],bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]},{chain:r.berachain.id,vault:"0x33C42E171cFD7Ec85D3dB34D7f6d3D8121f64E63",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0x70B851f6877D16D6D5aD546B17d06281b8aBDd4b",assetSymbol:"HONEY-USDC",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",rewardSymbol:"iBGT",protocolAddress:"0xc0fA386aE92f18A783476d09121291A1972C30Dc",protocolSettingsAddress:"0x8c6E434Bb1C51728BdCc250255c1F654471d85eB",bQueryAddres:i[r.berachain.id],onEnv:["test","prod"]}],l=u.filter(e=>(e.onEnv||[]).includes(t.ENV));e.s(["BVAULTS_CONFIG",0,u,"BvaultsByEnv",0,l,"CrocQueryAddress",0,n,"HONEY_Address",0,o])},675307,994737,97144,546194,427301,e=>{"use strict";var t=e.i(96932),r=e.i(731724);e.i(621440);var s=e.i(131406);e.s(["abiBeraLP",()=>s.default],994737);var s=s,a=e.i(403939);e.s(["abiBeraVault",()=>a.default],97144);var a=a,n=e.i(879020);e.s(["abiBQuery",()=>n.default],546194);var n=n,o=e.i(875219),i=e.i(809948),u=e.i(751755),l=e.i(472064),c=e.i(647163);function d(e,t){let r={},s=Object.keys(e);for(let a=0;a<s.length;a++){let n=s[a],o=e[n];r[n]=t(o,n,e)}return r}var f=e.i(59084);function p(e){return e}var b=e.i(216020),h=e.i(823331);function y(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function S(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function B(e,t,r,s){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,s){if(null==t)return!0;if(Array.isArray(t))return g(e,t,r,s);if(t instanceof Map){var a,n,o,i,u=e,l=t,c=r,d=s;if(0===l.size)return!0;if(!(u instanceof Map))return!1;for(let[e,t]of l.entries())if(!1===c(u.get(e),t,e,u,l,d))return!1;return!0}if(t instanceof Set){return a=e,n=t,o=r,i=s,0===n.size||a instanceof Set&&g([...a],[...n],o,i)}let f=Object.keys(t);if(null==e)return 0===f.length;if(0===f.length)return!0;if(s&&s.has(t))return s.get(t)===e;s&&s.set(t,e);try{for(let a=0;a<f.length;a++){let n=f[a];if(!y(e)&&!(n in e)||void 0===t[n]&&void 0!==e[n]||null===t[n]&&null!==e[n]||!r(e[n],t[n],n,e,t,s))return!1}return!0}finally{s&&s.delete(t)}}(e,t,r,s);case"function":if(Object.keys(t).length>0)return B(e,{...t},r,s);return S(e,t);default:if(null===e||"object"!=typeof e&&"function"!=typeof e)return S(e,t);if("string"==typeof t)return""===t;return!0}}function g(e,t,r,s){if(0===t.length)return!0;if(!Array.isArray(e))return!1;let a=new Set;for(let n=0;n<t.length;n++){let o=t[n],i=!1;for(let u=0;u<e.length;u++){if(a.has(u))continue;let l=e[u],c=!1;if(r(l,o,n,e,t,s)&&(c=!0),c){a.add(u),i=!0;break}}if(!i)return!1}return!0}function m(e,t){var r;return"function"!=typeof(r=()=>void 0)?m(e,t):B(e,t,function e(t,s,a,n,o,i){let u=r(t,s,a,n,o,i);return void 0!==u?!!u:B(t,s,e,i)},new Map)}var A=e.i(572767);function E(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let v="[object String]",C="[object Number]",T="[object Boolean]",D="[object Arguments]";var k=e.i(233882);function O(e,t,r,s=new Map,a){let n=a?.(e,t,r,s);if(null!=n)return n;if(y(e))return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){let t=Array(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=O(e[n],n,r,s,a);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[n,o]of(s.set(e,t),e))t.set(n,O(o,n,r,s,a));return t}if(e instanceof Set){let t=new Set;for(let n of(s.set(e,t),e))t.add(O(n,void 0,r,s,a));return t}if(void 0!==A.Buffer&&A.Buffer.isBuffer(e))return e.subarray();if((0,k.isTypedArray)(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=O(e[n],n,r,s,a);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return s.set(e,t),w(t,e,r,s,a),t}if("undefined"!=typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return s.set(e,t),w(t,e,r,s,a),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return s.set(e,t),w(t,e,r,s,a),t}if(e instanceof Error){let t=new e.constructor;return s.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,w(t,e,r,s,a),t}if("object"==typeof e&&function(e){switch(E(e)){case D:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case T:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case C:case"[object Object]":case"[object RegExp]":case"[object Set]":case v:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return s.set(e,t),w(t,e,r,s,a),t}return e}function w(e,t,r=e,s,a){let n=[...Object.keys(t),...Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))];for(let o=0;o<n.length;o++){let i=n[o],u=Object.getOwnPropertyDescriptor(e,i);(null==u||u.writable)&&(e[i]=O(t[i],i,r,s,a))}}var F=e.i(151920),x=e.i(460057);let V=/^(?:0|[1-9]\d*)$/;function N(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===E(e)}e.s(["isArguments",()=>N],427301);var j=e.i(942337),P=e.i(567353),R=e.i(40143),I=e.i(463605),U=e.i(142276),L=e.i(388654);e.i(520194),e.i(763894);var M=e.i(979353),n=n;let Q=function(e,t={}){return(r,s)=>d(e,(e,a)=>e(e=>r({[a]:{...s()[a],...e}}),()=>s()[a],t[a]))}({sliceBVaultsStore:(e,t,r={})=>{let y=async(e,t)=>{let r=t.asset,[[n,o],u]=await Promise.all([e.readContract({abi:a.default,address:"0x4Be03f781C497A489E3cB0287833452cA9B9E80B",functionName:"getPoolTokens",args:[i.LP_TOKENS[r].poolId]}),e.readContract({abi:s.default,address:r,functionName:i.LP_TOKENS[r].isStable?"getActualSupply":"totalSupply"})]),l=n.findIndex(e=>e==i.LP_TOKENS[r].base),c=n.findIndex(e=>e==i.LP_TOKENS[r].quote);return{lp:r,vault:t.vault,baseBalance:o[l],quoteBalance:o[c],totalSupply:u}},S=async(e,t)=>{let r=t.asset,s=(0,I.parseAbi)(["function getUnderlyingBalances() external view returns(uint256,uint256)"]),[[a,n],o]=await Promise.all([e.readContract({abi:s,address:r,functionName:"getUnderlyingBalances"}),e.readContract({abi:R.erc20Abi,address:r,functionName:"totalSupply"})]);return{lp:r,vault:t.vault,baseBalance:a,quoteBalance:n,totalSupply:o}},B=async(r,s)=>{let a=(0,L.getPC)(r),[o,d,f]=await Promise.all([Promise.all(s.map(e=>a.readContract({abi:n.default,address:e.bQueryAddres,functionName:"queryBVault",args:[e.vault]}).then(t=>({vault:e.vault,item:t})))),u.berachain.id==r?Promise.all(s.map(e=>i.LP_TOKENS[e.asset]?.poolId?y(a,e):i.LP_TOKENS[e.asset]?.isKodiak?S(a,e):Promise.resolve(null))):Promise.resolve(null),Promise.all(s.map(e=>e.pTokenV2?a.readContract({abi:[(0,U.parseAbiItem)("function rebaseRate() view returns (uint256)")],address:e.pToken,functionName:"rebaseRate"}):0n))]),B=(function(e,t=p){if(!e)return[];if(t=function(e){var t,r;if(null==e)return p;switch(typeof e){case"function":return e;case"object":if(Array.isArray(e)&&2===e.length)return function(e,t){var r,s,a;switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=(0,F.toKey)(e)}return s=r=t,a=(e,t,s,a)=>{let n;if(null!=n)return n;if("object"==typeof r)switch(Object.prototype.toString.call(r)){case C:case v:case T:{let e=new r.constructor(r?.valueOf());return w(e,r),e}case D:{let e={};return w(e,r),e.length=r.length,e[Symbol.iterator]=r[Symbol.iterator],e}default:return}},t=O(s,void 0,s,new Map,a),function(r){let s=(0,h.get)(r,e);if(void 0===s){let t;var a=e;if(0===(t=Array.isArray(a)?a:"string"==typeof a&&(0,x.isDeepKey)(a)&&r?.[a]==null?(0,j.toPath)(a):[a]).length)return!1;let s=r;for(let e=0;e<t.length;e++){let r=t[e];if((null==s||!Object.hasOwn(s,r))&&!((Array.isArray(s)||N(s))&&function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return V.test(e)}}(r)&&r<s.length))return!1;s=s[r]}return!0}return void 0===t?void 0===s:m(s,t)}}(e[0],e[1]);return t=O(r=t=e,void 0,r,new Map,void 0),e=>m(e,t);case"string":case"symbol":case"number":return function(t){return(0,h.get)(t,e)}}}(t),!Array.isArray(e)){let r=[],s=Object.keys(e),a=(0,b.isArrayLike)(e)?e.length:s.length;for(let n=0;n<a;n++){let a=s[n],o=e[a];t(o,a,e)&&r.push(o)}return r}let r=[],s=e.length;for(let a=0;a<s;a++){let s=e[a];t(s,a,e)&&r.push(s)}return r})(o,e=>null!=e).reduce((e,t,r)=>({...e,[t.vault]:{...t.item,ptRebaseRate:f[r]}}),{});if(await Promise.all(s.filter(e=>B[e.vault]?.closed).map(e=>a.readContract({abi:R.erc20Abi,functionName:"balanceOf",address:e.asset,args:[e.vault]}).then(t=>{B[e.vault].lockedAssetTotal=t}))),d){for(let e of d)if(e){let t=B[e.vault];t.lpLiq=t.lockedAssetTotal;let r=t.lpLiq*l.DECIMAL/e.totalSupply;t.lpBase=(0,c.toDecimal18)(e.baseBalance*r/l.DECIMAL,i.LP_TOKENS[e.lp].baseDecimal),t.lpQuote=(0,c.toDecimal18)(e.quoteBalance*r/l.DECIMAL,i.LP_TOKENS[e.lp].quoteDecimal)}}return e({bvaults:{...t().bvaults,...B}}),B},g=async(r,s,a)=>{let o=a||(0,f.range)(1,parseInt(((t().bvaults[s.vault]?.epochCount||0n)+1n).toString())).map(e=>BigInt(e));if(0==o.length)return{};let i=(0,L.getPC)(r),u=(await Promise.all(o.map(e=>i.readContract({abi:n.default,address:s.bQueryAddres,functionName:"queryBVaultEpoch",args:[s.vault,e]})))).reduce((e,t)=>({...e,[`${s.vault}_${t.epochId.toString()}`]:t}),{});return e({epoches:{...t().epoches,...u}}),u},A=async(r,s)=>{let a=s?.map(e=>e.vault)||(0,P.keys)(t().bvaults),n=d(await (0,o.getBvaultsPtSynthetic)(r,a),e=>BigInt(e));return e({yTokenSythetic:{...t().yTokenSythetic,...n}}),n};return{bvaults:{},epoches:{},yTokenSythetic:{},...r,updateBvaults:B,updateEpoches:g,updateYTokenSythetic:A}},sliceTokenStore:(e,t,r={})=>{let s=async(r,s)=>{let a=function(e,t){let r={};for(let s=0;s<e.length;s++){let a=e[s],n=t(a);Object.hasOwn(r,n)||(r[n]=[]),r[n].push(a)}return r}(s,e=>i.LP_TOKENS[e]?"lp":"token").lp||[];if(0!==a.length&&(console.info("mlps;",s,a),r===u.berachain.id)){let r=await (0,o.getTokensPriceByPyth)();e({prices:{...t().prices,...r}})}return{}},a=async t=>{let r={[u.berachain.id]:"https://hub.berachain.com/internal-env/defaultTokenList.json"}[t];if(!r)return[];let s=await fetch(r).then(e=>e.json()).then(e=>e.tokens.filter(e=>e.chainId===t).map(e=>({symbol:e.symbol,address:e.address,decimals:e.decimals,name:e.name,url:(e.logoURI||"").replace("https://https://","https://")}))).catch(e=>[]);return localStorage.setItem("catchedDefTokenList_"+t,JSON.stringify(s)),e({defTokenList:s}),s},n=async(r,s,a)=>{let n=d(await (0,o.getNftTokensIdsByUser)(r,s,a),e=>e.map(e=>BigInt(e)));return e({nftBalance:{...t().nftBalance,...n}}),{}};return{totalSupply:{},updateTokenTotalSupply:async(r,s)=>{if(0==s.length)return{};let a=(0,L.getPC)(r),n=(await Promise.all(s.map(e=>(0,M.isNativeToken)(e)?Promise.resolve(0n):a.readContract({abi:R.erc20Abi,address:e,functionName:"totalSupply"})))).reduce((e,t,r)=>({...e,[s[r]]:t}),{});return e({totalSupply:{...t().totalSupply,...n}}),n},balances:{},updateTokensBalance:async(r,s,a)=>{if(0==s.length)return{};let n=(0,L.getPC)(r),o=(await Promise.all(s.map(e=>(0,M.isNativeToken)(e)?n.getBalance({address:a}):n.readContract({abi:R.erc20Abi,address:e,functionName:"balanceOf",args:[a]})))).reduce((e,t,r)=>({...e,[s[r]]:t}),{});return e({balances:{...t().balances,...o}}),o},prices:{"0x549943e04f40284185054145c6E4e9568C1D3241":l.DECIMAL,"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce":l.DECIMAL,"0x688e72142674041f8f6Af4c808a4045cA1D6aC82":l.DECIMAL},updateTokenPrices:s,defTokenList:(e=>{try{return JSON.parse(localStorage.getItem("catchedDefTokenList_"+e)||"[]")}catch(e){return[]}})(u.berachain.id),updateDefTokenList:a,nftBalance:{},updateNftBalance:n,...r}},sliceUserBVaults:(e,t,r)=>{let s=async(r,s,a,o)=>{let i=o.filter(e=>e.epochId>0n);if(0==i.length)return{};let u=(0,L.getPC)(r),l=await Promise.all(i.map(e=>u.readContract({abi:n.default,address:s.bQueryAddres,functionName:"queryBVaultEpochUser",args:[s.vault,e.epochId,a]})));return e({epoches:{...t().epoches,[s.vault]:l}}),l};return{epoches:{},...r,updateEpoches:s,reset:()=>e({epoches:{}})}}},{}),q=(0,r.create)(Q);function Y(e,r=[""]){let s=q();return(0,t.useMemo)(()=>e(s),r.map(e=>e?(0,h.get)(s,e):s))}e.s(["useBoundStore",0,q,"useStore",()=>Y],675307)},59500,e=>{"use strict";var t=e.i(472064),r=e.i(567543),s=e.i(647163),a=e.i(211051),n=e.i(96932),o=e.i(717560),i=e.i(675307),u=e.i(809948),l=e.i(59084);function c(e){return(0,i.useStore)(t=>t.sliceBVaultsStore.bvaults[e]||(0,s.proxyGetDef)({current:(0,s.proxyGetDef)({},0n)},0n),[`sliceBVaultsStore.bvaults.${e}`])}function d(e){return(0,i.useStore)(t=>{let r=t.sliceBVaultsStore.bvaults[e];if(!r||r.epochCount<=0n)return[];let s=(0,l.range)(1,parseInt((r.epochCount+1n).toString())).reverse(),a=t.sliceBVaultsStore.epoches;return s.map(t=>a[`${e}_${t}`]).filter(e=>null!=e)},[`sliceBVaultsStore.bvaults.${e}`,"sliceBVaultsStore.epoches"])}function f(e){let t=d(e),r=(0,i.useStore)(t=>t.sliceUserBVaults.epoches[e]||[],[`sliceUserBVaults.epoches.${e}`]);return(0,n.useMemo)(()=>{let e=r.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,s.proxyGetDef)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,r])}function p(e){let t=f(e),r=c(e);return(0,n.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance>10n&&(e.settled||r.closed));return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t,r.closed])}function b(e){let r=(0,i.useStore)(()=>{let r,s,n,o,u,l,c;return r=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e],s=r?.current.vaultYTokenBalance||0n,o=(n=r?.Y||0n)>0n?s*t.DECIMAL/n:0n,u=r?.current.yTokenAmountForSwapYT||0n,l=r?.lockedAssetTotal||0n,c=u>0n?l*t.DECIMAL/u:0n,console.info("calcBootst:",(0,a.displayBalance)(o),(0,a.displayBalance)(c)),o},[`sliceBVaultsStore.bvaults.${e}`]);return[(0,a.displayBalance)(r,0),r]}function h(e){let r,a,n,o=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault],u=(a=(r=i.useBoundStore.getState()).sliceBVaultsStore.bvaults[e.vault],0n==(n=(0,s.getBigint)(r.sliceBVaultsStore.yTokenSythetic,[e.vault]))&&(n=(0,s.getBigint)(r.sliceTokenStore.totalSupply,e.pToken)*(a?.current.duration||0n)),n),l=0n;return l=e.pTokenV2?o&&o.ptRebaseRate&&o.pTokenTotal?o.ptRebaseRate/t.DECIMAL*t.YEAR_SECONDS*BigInt(1e10)/o.pTokenTotal/t.DECIMAL:0n:o&&o.current.assetTotalSwapAmount&&u?o.current.assetTotalSwapAmount*t.YEAR_SECONDS*BigInt(1e10)/u:0n,console.info("apy:",e.vault,l,e.pTokenV2,o?.ptRebaseRate,o?.pTokenTotal,u),l}function y(e){let t=(0,i.useStore)(()=>h(e),[`sliceBVaultsStore.bvaults.${e.vault}`,`sliceBVaultsStore.yTokenSythetic.${e.vault}`]);return[(0,s.fmtPercent)(t,10),t]}function S(e,t){let{address:a}=(0,o.useAccount)(),n=(0,r.useCurrentChainId)();return()=>{(0,s.retry)(async()=>{if(t?.(),!a)return;await Promise.all([i.useBoundStore.getState().sliceTokenStore.updateTokensBalance(n,[e.asset,e.pToken],a),i.useBoundStore.getState().sliceTokenStore.updateTokenTotalSupply(n,[e.asset,e.pToken]),i.useBoundStore.getState().sliceBVaultsStore.updateBvaults(n,[e]),i.useBoundStore.getState().sliceBVaultsStore.updateYTokenSythetic(n,[e])]);let r=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault];await i.useBoundStore.getState().sliceBVaultsStore.updateEpoches(n,e,r.epochCount>1n?[r.epochCount,r.epochCount-1n]:[r.epochCount]);let s=[];for(let t=parseInt(r.epochCount.toString());t>0;t--){let r=i.useBoundStore.getState().sliceBVaultsStore.epoches[`${e.vault}_${t}`];s.push(r)}console.info("onUserAction:epoches",s),await i.useBoundStore.getState().sliceUserBVaults.updateEpoches(n,e,a,s)},3,1e3)}}function B(e,t){let r=u.LP_TOKENS[t];if(!r)return 0n;let a=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e];if(!a)return 0n;let n=i.useBoundStore.getState().sliceTokenStore.prices,o=a.lpBase*(0,s.getBigint)(n,r.base,0n)+a.lpQuote*(0,s.getBigint)(n,r.quote);return a.lpLiq>0n?o/a.lpLiq:0n}e.s(["calcBVaultPTApy",()=>h,"calcLPPrice",()=>B,"useBVault",()=>c,"useBVaultApy",()=>y,"useBVaultBoost",()=>b,"useBVaultEpoches",()=>d,"useCalcClaimable",()=>p,"useEpochesData",()=>f,"useUpBVaultForUserAction",()=>S])},278746,e=>{"use strict";var t=e.i(962220),r=e.i(31368);function s(){return(0,t.useQuery)({initialData:{},gcTime:36e5,queryKey:["getAdditionalConfig"],queryFn:async()=>r.default.get("https://raw.githubusercontent.com/zoofiio/configs/refs/heads/main/additional.json").then(e=>e.data)})}e.s(["AdditionalSupportTokens",0,{BERA:"0x6969696969696969696969696969696969696969",HONEY:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce",USDC:"0x549943e04f40284185054145c6E4e9568C1D3241",BYUSD:"0x688e72142674041f8f6Af4c808a4045cA1D6aC82",WETH:"0x2F6F07CDcf3588944Bf4C42aC74ff24bF56e7590",iBGT:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"},"useGetAdditionalConfig",()=>s])},886738,e=>{"use strict";var t=e.i(96932);e.i(494561);var r=e.i(207207),s=e.i(544220),a=e.i(111218),n=e.i(483892);function o(e,t){let r=new Set(t);return e.filter(e=>!r.has(e))}var i=class extends a.Subscribable{#e;#t;#r;#s;#a;#n;#o;#i;#u=[];constructor(e,t,r){super(),this.#e=e,this.#s=r,this.#r=[],this.#a=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#a.forEach(e=>{e.subscribe(t=>{this.#l(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#a.forEach(e=>{e.destroy()})}setQueries(e,t){this.#r=e,this.#s=t,r.notifyManager.batch(()=>{let e=this.#a,t=this.#c(this.#r);this.#u=t,t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));let r=t.map(e=>e.observer),s=r.map(e=>e.getCurrentResult()),a=e.length!==r.length,i=r.some((t,r)=>t!==e[r]),u=a||i,l=!!u||s.some((e,t)=>{let r=this.#t[t];return!r||!(0,n.shallowEqualObjects)(e,r)});(u||l)&&(u&&(this.#a=r),this.#t=s,this.hasListeners()&&(u&&(o(e,r).forEach(e=>{e.destroy()}),o(r,e).forEach(e=>{e.subscribe(t=>{this.#l(e,t)})})),this.#d()))})}getCurrentResult(){return this.#t}getQueries(){return this.#a.map(e=>e.getCurrentQuery())}getObservers(){return this.#a}getOptimisticResult(e,t){let r=this.#c(e),s=r.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[s,e=>this.#f(e??s,t),()=>this.#p(s,r)]}#p(e,t){return t.map((r,s)=>{let a=e[s];return r.defaultedQueryOptions.notifyOnChangeProps?a:r.observer.trackResult(a,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}#f(e,t){return t?(this.#n&&this.#t===this.#i&&t===this.#o||(this.#o=t,this.#i=this.#t,this.#n=(0,n.replaceEqualDeep)(this.#n,t(e))),this.#n):e}#c(e){let t=new Map(this.#a.map(e=>[e.options.queryHash,e])),r=[];return e.forEach(e=>{let a=this.#e.defaultQueryOptions(e),n=t.get(a.queryHash);n?r.push({defaultedQueryOptions:a,observer:n}):r.push({defaultedQueryOptions:a,observer:new s.QueryObserver(this.#e,a)})}),r}#l(e,t){let r=this.#a.indexOf(e);if(-1!==r){var s;let e;this.#t=(s=this.#t,(e=s.slice(0))[r]=t,e),this.#d()}}#d(){if(this.hasListeners()){let e=this.#n,t=this.#p(this.#t,this.#u);e!==this.#f(t,this.#s?.combine)&&r.notifyManager.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}}},u=e.i(122610),l=e.i(561760),c=e.i(829756),d=e.i(796833),f=e.i(343511);function p({queries:e,...a},o){let p=(0,u.useQueryClient)(o),b=(0,l.useIsRestoring)(),h=(0,c.useQueryErrorResetBoundary)(),y=t.useMemo(()=>e.map(e=>{let t=p.defaultQueryOptions(e);return t._optimisticResults=b?"isRestoring":"optimistic",t}),[e,p,b]);y.forEach(e=>{(0,f.ensureSuspenseTimers)(e),(0,d.ensurePreventErrorBoundaryRetry)(e,h)}),(0,d.useClearResetErrorBoundary)(h);let[S]=t.useState(()=>new i(p,y,a)),[B,g,m]=S.getOptimisticResult(y,a.combine),A=!b&&!1!==a.subscribed;t.useSyncExternalStore(t.useCallback(e=>A?S.subscribe(r.notifyManager.batchCalls(e)):n.noop,[S,A]),()=>S.getCurrentResult(),()=>S.getCurrentResult()),t.useEffect(()=>{S.setQueries(y,a)},[y,a,S]);let E=B.some((e,t)=>(0,f.shouldSuspend)(y[t],e))?B.flatMap((e,t)=>{let r=y[t];if(r){let t=new s.QueryObserver(p,r);if((0,f.shouldSuspend)(r,e))return(0,f.fetchOptimistic)(r,t,h);(0,f.willFetch)(e,b)&&(0,f.fetchOptimistic)(r,t,h)}return[]}):[];if(E.length>0)throw Promise.all(E);let v=B.find((e,t)=>{let r=y[t];return r&&(0,d.getHasError)({result:e,errorResetBoundary:h,throwOnError:r.throwOnError,query:p.getQueryCache().get(r.queryHash),suspense:r.suspense})});if(v?.error)throw v.error;return g(m())}e.s(["useQueries",()=>p],886738)},149271,e=>{"use strict";var t=e.i(763894),r=e.i(472064),s=e.i(675307);e.i(886738);var a=e.i(962220),n=e.i(567353),o=e.i(96932);e.i(40143),e.i(463605),e.i(142276);var i=e.i(717560),u=e.i(567543),l=e.i(278746);function c(){let e=(0,u.useCurrentChainId)(),r=t.BvaultsByEnv,{isLoading:n}=(0,a.useQuery)({queryKey:["UpdateBVaults",r],queryFn:async()=>(await Promise.all([s.useBoundStore.getState().sliceBVaultsStore.updateBvaults(e,r),s.useBoundStore.getState().sliceBVaultsStore.updateYTokenSythetic(e,r)]),!0)}),{address:c}=(0,i.useAccount)(),d=(0,o.useMemo)(()=>r.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[r]),{isLoading:f}=(0,a.useQuery)({queryKey:["UpdateBvautlsTokens",d],queryFn:async()=>(await Promise.all([s.useBoundStore.getState().sliceTokenStore.updateTokenTotalSupply(e,d),s.useBoundStore.getState().sliceTokenStore.updateTokenPrices(e,d)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),{isLoading:p}=(0,a.useQuery)({queryKey:["UpdateUserBvautlsTokens",d,c],queryFn:async()=>!!c&&(await s.useBoundStore.getState().sliceTokenStore.updateTokensBalance(e,d,c),!0)}),{isLoading:b}=(0,l.useGetAdditionalConfig)();return{loading:n||f||p||b}}function d(){let{address:e}=(0,i.useAccount)(),l=(0,u.useCurrentChainId)(),c=(0,o.useMemo)(()=>t.BVAULTS_CONFIG.filter(e=>(e.onEnv||[]).includes(r.ENV)),[l,r.ENV]),d=(0,s.useStore)(e=>(0,n.keys)(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,a.useQuery)({queryKey:["UpdateAllUserBvaults",c,l,e,d],queryFn:async()=>{if(!e)return!1;let t=s.useBoundStore.getState().sliceBVaultsStore.bvaults;for(let e of c)if(!t[e.vault])return!1;return await Promise.all(c.map(e=>s.useBoundStore.getState().sliceBVaultsStore.updateEpoches(l,e))),await Promise.all(c.map(t=>s.useBoundStore.getState().sliceUserBVaults.updateEpoches(l,t,e,(e=>{let t=s.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault],r=[];for(let a=parseInt(t.epochCount.toString());a>0;a--){let t=s.useBoundStore.getState().sliceBVaultsStore.epoches[`${e.vault}_${a}`];r.push(t)}return r})(t)))),!0}})}e.i(388654),e.i(621440),e.i(994737),e.i(97144),e.i(546194),e.i(647163),e.i(809948),e.s(["useLoadBVaults",()=>c,"useLoadUserBVaults",()=>d])}]);