(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,833957,e=>{"use strict";var t=e.i(29743),s=e.i(647163);function n({children:e,className:n,...a}){return(0,t.jsx)("div",{className:(0,s.cn)("h-max pt-23 pb-6 w-full max-w-320",n),...a,children:e})}e.s(["PageWrap",()=>n])},59084,e=>{"use strict";function t(e,s,n=1){if(null==s&&(s=e,e=0),!Number.isInteger(n)||0===n)throw Error("The step value must be a non-zero integer.");let a=Math.max(Math.ceil((s-e)/n),0),i=Array(a);for(let t=0;t<a;t++)i[t]=e+t*n;return i}e.s(["range",()=>t])},211051,e=>{"use strict";var t=e.i(570963);e.s(["displayBalance",0,(e,s=3,n=18)=>{if(!e)return"0";let a="bigint"==typeof e?e:BigInt(e),i=Number((0,t.formatUnits)(a,n)),r=Number((.1**s).toFixed(s));return i>0&&i<r?"<"+r:i<0&&i>-r?"â‰ˆ0":i.toLocaleString("en-US",{maximumFractionDigits:s})}])},599457,95377,416301,e=>{"use strict";var t=e.i(29743),s=e.i(647163);function n(e,t,s=0){if(Object.is(t=Number(t),-0)&&(t="-0"),s=Math.min(Number.parseInt(s,10),292)){let[n,a=0]=t.toString().split("e"),i=Math[e](Number(`${n}e${Number(a)+s}`));Object.is(i,-0)&&(i="-0");let[r,l=0]=i.toString().split("e");return Number(`${r}e${Number(l)-s}`)}return Math[e](Number(t))}function a(e,t=0){return n("floor",e,t)}function i(){return(0,t.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,t.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}e.s(["decimalAdjust",()=>n],95377),e.s(["floor",()=>a],416301),e.s(["default",0,({header:e,data:n,span:r={},empty:l=(0,t.jsx)(i,{}),className:o,headerClassName:c,headerItemClassName:u,tbodyClassName:d="",rowClassName:m,rowStyle:p,cellClassName:x,onClickRow:h,onRowMouseHover:f})=>{let g=e.reduce((e,t,s)=>e+(r[s]??1),0),b=g>0?100/g:0;return(0,t.jsxs)("table",{className:(0,s.cn)("relative w-full bg-transparent text-sm",o),children:[(0,t.jsx)("thead",{className:"",children:(0,t.jsx)("tr",{className:(0,s.cn)("text-left whitespace-nowrap font-normal border-b border-board opacity-60 pt-5 pb-6",c),children:e.map((e,n)=>(0,t.jsx)("th",{style:{width:`${a(b*(r[n]??1),2)}%`},scope:"col",className:(0,s.cn)(0==r[n]?"p-0 w-0":"p-3 font-normal text-sm","function"==typeof u?u(n):u),children:e},n))})}),(0,t.jsxs)("tbody",{className:(0,s.cn)(d),children:[n.map((n,a)=>(0,t.jsx)("tr",{onClick:()=>h&&h(a),onMouseEnter:()=>f&&f(a),onMouseLeave:()=>f&&f(-1),style:"function"==typeof p?p(a):p,className:(0,s.cn)("whitespace-nowrap",h?"cursor-pointer":"","function"==typeof m?m(a):m),children:n.map((n,i)=>i>=e.length?(0,t.jsx)(t.Fragment,{children:n}):(0,t.jsx)("td",{className:(0,s.cn)(0==r[i]?"p-0 w-max":"px-3 py-2 text-sm w-max",{"flex items-center gap-2":0==i},"function"==typeof x?x(a,i):x),children:n},i))},a)),0===n.length&&l]})]})}],599457)},480790,e=>{"use strict";var t=e.i(234162),s=e.i(529334);function n(e,a="wei"){return(0,s.parseUnits)(e,t.etherUnits[a])}e.s(["parseEther",()=>n])},348009,e=>{"use strict";e.i(621440);var t=e.i(979496),s=e.i(472064),n=e.i(388654),a=e.i(675307),i=e.i(59500),r=e.i(962220),l=e.i(147245),o=e.i(480790),c=e.i(278746),u=e.i(404427),d=e.i(567543),m=e.i(647163),p=e.i(4433),x=e.i(280924);function h(e,t,n){let a=t>0n?e*n/t:0n;return a>100n*s.DECIMAL?0n:a}function f(e,t,n,a,i){let r=t>0n&&n>0n?t+n*a:0n,l=(r>0n?e*s.DECIMAL/r:0n)*(s.DECIMAL*a)/s.DECIMAL;return i>0n?l*s.DECIMAL/i:0n}function g(e,b=0n,y=0n){var B,v;let j,C,A,N=(0,i.useBVault)(e.vault),{data:I,isLoading:S}=(B=e.vault,j=(0,d.useCurrentChainId)(),(0,r.useQuery)({initialData:0n,queryKey:["getReturnsIBGT",B,j],queryFn:async()=>{let e=await u.default.get(j,`/api/bvault/getYieldiBGT/${B}`);return BigInt(e.yield)/BigInt(e.dur)}})),{data:E,isLoading:L}=(0,c.useGetAdditionalConfig)(),w=N.current.duration+N.current.startTime,T=w>0n?w-BigInt((0,p.round)((0,x.now)()/1e3)):0n,M=N.current.yTokenAmountForSwapYT,D=M>0n?I*s.DECIMAL*T/M:0n,k=(0,a.useStore)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,P=(0,a.useStore)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,F=(0,i.calcLPPrice)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,l.formatEther)(k),(0,l.formatEther)(F));let V=N.current.vaultYTokenBalance,$=M+b>0n?I*s.DECIMAL*T/(M+b):0n,q=V>0n?N.Y*s.DECIMAL/V:0n,O=q*F/s.DECIMAL,U=y*F/s.DECIMAL,z=h(D,O,k),K=b>0n?h($,U,k):0n;console.info("restakingapy:",e.assetSymbol,(0,l.formatEther)(z),(0,l.formatEther)(D),(0,l.formatEther)(q),(0,l.formatEther)(O));let Q=E[`${e.vault}`]?.[parseInt(N.epochCount.toString())],R=Q&&Q.token&&Q.amount?(0,m.getBigint)(P,c.AdditionalSupportTokens[Q.token])*(0,o.parseEther)(Q.amount.toFixed(6))/s.DECIMAL:0n,{data:Y,isLoading:G}=(v=e.vault,C=(0,i.useBVault)(v),A=(0,d.useCurrentChainId)(),(0,r.useQuery)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",A,v,C.current.adhocBribesPool],enabled:!!v&&!!C.current.adhocBribesPool,queryFn:async()=>(0,n.getPC)(A).readContract({abi:t.abiAdhocBribesPool,address:C.current.adhocBribesPool,functionName:"totalSupply"})})),W=f(R,Y,M,T,O),_=b>0n?f(R,Y,M+b,T,U):0n,H=S||L||G;return{roi:!H&&M>0n&&D>0n?z+W-s.DECIMAL:0n,roiChange:!H&&M>0n&&D>0n?K+_-s.DECIMAL:0n,restakingIncomesApy:z,additionalRoi:W}}e.s(["useBvaultROI",()=>g],348009)},22525,e=>{"use strict";var t=e.i(29743),s=e.i(147763),n=e.i(833957),a=e.i(599457),i=e.i(763894),r=e.i(809948),l=e.i(472064),o=e.i(149271),c=e.i(567543),u=e.i(675307),d=e.i(647163),m=e.i(59500),p=e.i(211051),x=e.i(348009),h=e.i(96932);let f=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,t.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function g({title:e,sub:s,tHeader:n,tData:i,tableProps:r}){return(0,t.jsxs)("div",{className:"animitem card whitespace-nowrap",children:["string"==typeof e?(0,t.jsx)("div",{className:"text-2xl leading-none font-semibold",children:e}):e,"string"==typeof s?(0,t.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:s}):s,(0,t.jsx)("div",{className:"my-4 h-px bg-border/60 dark:bg-border"}),(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsx)(a.default,{headerClassName:"border-b-0",header:n,data:i,...r||{}})})]})}function b(){let e,n,a,o,d=((0,c.useCurrentChainId)(),e=i.BVAULTS_CONFIG.filter(e=>(e.onEnv||[]).includes(l.ENV)),n=(0,u.useStore)(e=>e.sliceBVaultsStore.bvaults),a=(0,u.useStore)(e=>e.sliceTokenStore.prices),{tvl:(o=[].concat(e.map(e=>{let t=r.LP_TOKENS[e.asset],s=n[e.vault],i=t&&s&&s.lpLiq&&s.lpBase&&s.lpQuote&&a[t.base]&&a[t.quote]?(a[t.base]*s.lpBase+a[t.quote]*s.lpQuote)/s.lpLiq:a[e.asset]||l.DECIMAL,o=s?.lpLiq||s?.lockedAssetTotal||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:i,amount:o,usdAmount:i*o/l.DECIMAL}}).reduce((e,t)=>{let s=e.find(e=>e.symbol==t.symbol);return s?(s.amount+=t.amount,s.usdAmount+=t.usdAmount,e):[...e,t]},[]))).reduce((e,t)=>e+t.usdAmount,0n),tvlItems:o}),m=(0,h.useMemo)(()=>d.tvlItems.map(e=>[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(s.CoinIcon,{symbol:e.symbol,size:20}),(0,t.jsx)("span",{children:e.symbol})]},"icon"),`$${(0,p.displayBalance)(e.price)}`,(0,p.displayBalance)(e.amount),`$${(0,p.displayBalance)(e.usdAmount)}`]),[d.tvlItems]);return(0,t.jsx)(g,{title:"Total Value Locked",sub:`$${(0,p.displayBalance)(d.tvl)}`,tHeader:["Asset","NAV","Amount","Total"],tData:m})}function y({vc:e}){let{roi:s}=(0,x.useBvaultROI)(e);return(0,t.jsx)(t.Fragment,{children:(0,d.fmtPercent)(s,18,2)})}function B(){let e=i.BvaultsByEnv,n=(0,u.useStore)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),a=(0,u.useStore)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),o=(0,h.useMemo)(()=>{let i=e.map(e=>{let t=(0,d.getBigint)(n,[e.vault,"lockedAssetTotal"]),s=t*(0,d.getBigint)(a,[e.asset])/l.DECIMAL,i=r.LP_TOKENS[e.asset];if(i){let t=(0,d.getBigint)(n,[e.vault,"lpBase"]),r=(0,d.getBigint)(n,[e.vault,"lpQuote"]);s=(t*(0,d.getBigint)(a,[i.base])+r*(0,d.getBigint)(a,[i.quote]))/l.DECIMAL}let[o,c]=i?e.assetSymbol.split("-"):["",""],u=Math.max(22+5*(0,p.displayBalance)(t).length,5*(0,p.displayBalance)(s).length+5);return{bvc:e,totalDeposit:t,totalDepositUsd:s,totalLeftWidth:u,lp:i,baseSymbol:o,quoteSymbol:c}}),o=i.reduce((e,t)=>Math.max(e,t.totalLeftWidth),0)+48;return i.map(({bvc:e,totalDeposit:a,totalDepositUsd:i,lp:r,baseSymbol:l,quoteSymbol:c})=>[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(s.CoinIcon,{symbol:e.assetSymbol,size:20}),(0,t.jsx)("span",{children:e.assetSymbol})]},"icon"),(0,t.jsxs)("div",{className:"flex gap-6 items-start",children:[(0,t.jsxs)("div",{style:{width:o},children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s.CoinIcon,{symbol:e.assetSymbol,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)(a)})]},"icon"),(0,t.jsxs)("div",{className:"opacity-60",children:["~",(0,p.displayBalance)(i)]})]}),r&&(0,t.jsxs)("div",{style:{width:o},children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(s.CoinIcon,{symbol:l,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)((0,d.getBigint)(n,[e.vault,"lpBase"]))})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(s.CoinIcon,{symbol:c,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)((0,d.getBigint)(n,[e.vault,"lpQuote"]))})]})]})]},"total"),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[f,(0,t.jsxs)("span",{children:["Epoch ",(0,d.getBigint)(n,[e.vault,"epochCount"]).toString()]})]},"status"),(0,d.fmtPercent)((0,m.calcBVaultPTApy)(e),10),(0,t.jsx)(y,{vc:e},"roi")])},[e,n,a]);return(0,t.jsx)(g,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT ROI"],tData:o,tableProps:{span:{1:2},cellClassName:(e,t)=>0==t?"h-14":""}})}function v(){return(0,o.useLoadBVaults)(),(0,t.jsx)(n.PageWrap,{children:(0,t.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,t.jsx)(b,{}),(0,t.jsx)(B,{})]})})}e.s(["default",()=>v],22525)}]);