"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9833],{95702:function(e,t,a){a.d(t,{cL:function(){return CoinIcon}});var n=a(31113),s=a(26758),o=a(26361);let r={BERA:"BERA.svg",balance:"balance.png",berachain:"berachain.svg",berahub:"berahub.svg",bg_home:"bg_home.svg",blackLine:"blackLine.svg",Bull:"Bull.svg",coin:"coin.png",discord:"discord.png",discount:"discount.png",ETH:"ETH.svg",ethfi:"ethfi.png",ETHx:"ETHx.svg",galxe:"galxe.png",gift:"gift.png",gold:"gold.png",greenCycle:"greenCycle.png",GreenDot:"GreenDot.svg","HONEY-USDC":"HONEY-USDC.svg","USDC-HONEY":"HONEY-USDC.svg","HONEY-WBERA":"HONEY-WBERA.webp","HONEY-WBTC":"HONEY-WBTC.svg","HONEY-WETH":"HONEY-WETH.svg",HONEY:"HONEY.svg",iBGT:"iBGT.webp",iRED:"iRED.svg","logo-alt":"logo-alt.svg",Panda:"Panda.svg",piRED:"piRED.svg","status-green":"status-green.svg","status-red":"status-red.svg",twitter:"twitter.png",USDC:"USDC.svg",USDCx:"USDCx.svg",USDT:"USDT.svg",Venom:"Venom.svg",WBERA:"WBERA.svg",WBTC:"WBTC.svg",WBTCx:"WBTCx.svg",weeth:"weeth.png",weETH:"weETH.svg",weETHx:"weETHx.svg",WETH:"WETH.svg",xBERA:"xBERA.svg",xiBGT:"xiBGT.svg",yiRED:"yiRED.svg",ZUSD:"ZUSD.svg",BYUSD:"BYUSD.webp",Fire:"Fire.png",Lnfi:"lnfi.png",Reppo:"reppo.png",Enreach:"enreach.svg",Aethir:"Aethir.svg",Nodeops:"Nodeops.svg",ReppoNft:"ReppoNft.png"};function CoinIconImpl(e){let{symbol:t,size:a=48,url:d,style:l,...c}=e,i=r[t],u="".concat(s.G,"/").concat(i);return i||d?(0,n.jsx)("img",{...c,style:{width:a,height:a,...l||{}},className:(0,o.cn)(c.className),width:a,height:a,src:i?u:d,alt:t}):(0,n.jsxs)("svg",{...c,width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("text",{className:"fill-primary/60",width:"20",x:"12",y:"12",textAnchor:"middle",fontSize:12,dominantBaseline:"middle",children:t.slice(0,2)}),(0,n.jsx)("circle",{className:"stroke-primary/60",cx:"12",cy:"12",r:"11.5",strokeWidth:1})]})}let d=["logo-alt","status-green","status-red"];function DoubleCoinIcon(e){let{symbol1:t,symbol2:a,size:s=48,url1:r,url2:d,className:l}=e;return(0,n.jsxs)("div",{className:(0,o.cn)("flex items-center",l),children:[(0,n.jsx)(CoinIconImpl,{symbol:t,size:s,url:r}),(0,n.jsx)(CoinIconImpl,{symbol:a,size:s,url:d,style:{marginLeft:"-30%"}})]})}function CoinIcon(e){let{symbol:t,size:a=48,url:s,...o}=e;if(t.includes("-")&&!d.includes(t)){let[e,s]=t.split("-");return(0,n.jsx)(DoubleCoinIcon,{...o,symbol1:e,symbol2:s,size:a})}return(0,n.jsx)(CoinIconImpl,{...o,symbol:t,size:a,url:s})}},68535:function(e,t,a){let n;a.d(t,{gf:function(){return getBeraTokensPrices},_c:function(){return getBvaultsPtSynthetic},Ly:function(){return getIBGTPrice},cb:function(){return getLntVaultEpochYtPrices},mq:function(){return getLntVaultNftStatByUser},Sr:function(){return getLntVaultsDeposited},ZK:function(){return getNftTokensIdsByUser},bY:function(){return getNftsByAlchemy}});var s=a(73216),o=a(22139),r=a(44769),d=a(83606);let instance=()=>{let e=s.Af.find(e=>e.id==(0,s.BV)()),t=!o.Sz&&(null==e?void 0:e.testnet)?"https://beta-api.".concat(r.Kh.value):"https://api.".concat(r.Kh.value);return n&&n.defaults.baseURL===t||(n=d.Z.create({baseURL:t,timeout:1e4,headers:{"Content-Type":"application/json"}})),n};var l={get:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";n.headers={...n.headers||{},Authorization:e}}let s=await instance().get(e,{...n,params:a});if(console.info("res:",null==s?void 0:s.data),(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.code)!==200)throw s.data;return s.data.data},post:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";n.headers={...n.headers||{},Authorization:e}}let s=await instance().post(e,a,n);if((null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.code)!==200)throw s.data;return s.data.data}},c=a(26361),i=a(83978),u=a.n(i);let getLntVaultEpochYtPrices=(e,t)=>l.get("/api/lntvault/getEpochYTPrices/".concat(e,"/").concat(t)),getBvaultsPtSynthetic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l.post("/api/bvault/batchGetEpochPtSynthetic",{bvaults:e})},getLntVaultsDeposited=e=>l.post("/api/lntvault/batchNfts",{vaults:e}),getLntVaultNftStatByUser=(e,t)=>l.get("/api/lntvault/".concat(e,"/").concat(t,"/nftstat")),getNftTokensIdsByUser=(e,t)=>l.post("/api/nft/".concat(t,"/tokenIds"),{tokens:e}),getBeraTokensPrices=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["0x6969696969696969696969696969696969696969","0x0000000000000000000000000000000000000000","0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce","0x656b95E550C07a9ffe548bd4085c72418Ceb1dba","0x549943e04f40284185054145c6E4e9568C1D3241","0x779Ded0c9e1022225f8E0630b35a9b54bE713736","0x688e72142674041f8f6Af4c808a4045cA1D6aC82","0x0555E30da8f98308EdB960aa94C0Db47230d2B9c","0x2F6F07CDcf3588944Bf4C42aC74ff24bF56e7590","0x9b6761bf2397Bb5a6624a856cC84A3A14Dcd3fe5","0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"];return d.Z.post("https://chgbtcc9ffu7rbdw2kmu4urwy.stellate.sh/",{operationName:"GetTokenCurrentPrices",variables:{chains:["BERACHAIN"],addressIn:e},query:"query GetTokenCurrentPrices($chains: [GqlChain!]!, $addressIn: [String!]!) {\n  tokenGetCurrentPrices(chains: $chains, addressIn: $addressIn) {\n    address\n    chain\n    price\n    updatedAt\n    updatedBy\n    __typename\n  }\n}"}).then(t=>{let a=t.data.data.tokenGetCurrentPrices,n={};for(let e of a)n[e.address]=e;let s={};for(let t of e){let e=n[t.toLowerCase()];e&&(s[t]=(0,c.su)(e.price.toFixed(6)))}return s})},getIBGTPrice=()=>d.Z.post("https://api.zoofi.io/api/third/ibgt").then(e=>{var t;return null===(t=u().concat(e.data.underlying_tokens,e.data.reward_tokens))||void 0===t?void 0:t.find(e=>"iBGT"===e.symbol)}).then(e=>e?(0,c.su)(e.price.toFixed(6)):o.Pq),getNftsByAlchemy=async(e,t)=>{let a;let n=[];for(;;){let{pageKey:s,nfts:o}=await function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return d.Z.get("https://base-mainnet.g.alchemy.com/nft/v3/7UXJgo01vxWHLJDk09Y0qZct8Y3zMDbX/getNFTsForOwner?owner=".concat(t,"&contractAddresses[]=").concat(e,"&pageSize=").concat(n),{params:a?{pageKey:a}:{}}).then(e=>({pageKey:e.data.pageKey,nfts:e.data.ownedNfts.map(e=>e.tokenId)}))}();if(n=n.concat(o),!s)break}return n}},87031:function(e,t,a){a.d(t,{Fw:function(){return c},TE:function(){return d},_C:function(){return r}});var n=a(73216);let s={[n.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[n.On.id]:"0x4737c3BAB13a1Ad94ede8B46Bc6C22fb8bBE9c81"},o={[n.BG.id]:"0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",[n.On.id]:"0x7D3Cec2f46279229277802D30702e4E7FB19bAC0"},r={[n.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[n.On.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},d={[n.BG.id]:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",[n.On.id]:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce"},l={[n.BG.id]:"0xDf1126d3627b7f5D2a44d978A7180AcbD3c34aB6",[n.On.id]:"0x6E603014ACE3Ae06F34Ffe259106Af77c056d913"},c={[n.BG.id]:[{vault:"0x9700FEa232560E4048DD924623491926282125bE",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x575287Cd8CB9A49e0EE00Bf0C71Eac337Ab8FeBa",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:l[n.BG.id],isOld:!0,onEnv:["beta"]},{vault:"0x5C88005534FB5C5B01445eC5bC944ebA0818554f",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x19f4cE524268a01bfAFf8B433110d8304b096be0",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:l[n.BG.id],isOld:!0,onEnv:["beta"]},{vault:"0x9Ef9cE44c82111e967904059edf12701e17e6C03",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x0C2553919748093b0760EA825C85dc5a72142932",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:l[n.BG.id],isOld:!0,onEnv:["beta","test"]},{vault:"0x77412b08bB3a8c38F7D0DC7D1158C5E7bfE03Eea",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x02FEDe9cf47c3D8aCE52613C2a45bC588D4e0516",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0xCC5AeD7b81dc45f02329Cc2Bf2c64B873D0be752",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x05425F978a87DC80827f6c4a104FCbc6E9021ecc",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0x12f5F1f53B419d1E5F3084E649001Ff091683ADc",asset:"0x0001513F4a1f86da0f02e647609E9E2c630B3a14",assetSymbol:"WBERA-YEET",pToken:"0x256938Bf1A340e6F80eAA35798b08a122783BEDF",pTokenSymbol:"pWBERA-YEET",yTokenSymbol:"yWBERA-YEET",rewardSymbol:"WBERA-YEET",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]},{vault:"0x6A2A4d8Fe425dC783e67b90d88922c5890BfA78c",asset:"0x0001513F4a1f86da0f02e647609E9E2c630B3a14",assetSymbol:"WBERA-YEET",pToken:"0x890FDA8E5ce053D34aaA64B23d250f9AF04979e4",pTokenSymbol:"pWBERA-YEET",yTokenSymbol:"yWBERA-YEET",yeetLiqSymbol:"LIQ-TRI-YEET",rewardSymbol:"LIQ-TRI-YEET",protocolAddress:s[n.BG.id],protocolSettingsAddress:o[n.BG.id],bQueryAddres:"0xEE723BD0bC2449678d37177B7D93cc69D1af4B6F",onEnv:["beta"]}],[n.On.id]:[{vault:"0x94822b9BA715E9e3079ed12489Dc7A016694FC67",asset:"0xdd70a5ef7d8cfe5c5134b5f9874b09fb5ce812b4",pToken:"0x0DA715b18AaF66c7c044D4F315D479f6036728Ea",pTokenV2:!0,assetSymbol:"WBERA-WETH",pTokenSymbol:"pWBERAWETH",yTokenSymbol:"yWBERAWETH",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:l[n.On.id],onEnv:["beta","prod"]},{vault:"0xE6d15592F337f54E8BD47e56BbB22aF12F0D4083",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0xc2C5EaDF0f48702bEEDD2e2a35517e1fC4dBF7A7",pTokenV2:!0,assetSymbol:"HONEY-USDC",pTokenSymbol:"pUSDCeHONEY",yTokenSymbol:"yUSDCeHONEY",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:l[n.On.id],onEnv:["beta","prod"]},{vault:"0x702B707c2F8dd26F4F1e51cF425035d355A02767",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0xA58f5A2487abaBc5c5A23E3e3796E6615d12FCaf",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:l[n.On.id],onEnv:["beta","test","prod"]},{vault:"0x6686bDfF3ad20AE45E811c2451DfeE8AA0f338C0",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0x83f933af46458102cf54Eabe441DBB659a1B2eA5",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:s[n.On.id],protocolSettingsAddress:o[n.On.id],bQueryAddres:l[n.On.id],onEnv:["beta","test","prod"]},{vault:"0x33C42E171cFD7Ec85D3dB34D7f6d3D8121f64E63",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0x70B851f6877D16D6D5aD546B17d06281b8aBDd4b",assetSymbol:"HONEY-USDC",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",rewardSymbol:"iBGT",protocolAddress:"0xc0fA386aE92f18A783476d09121291A1972C30Dc",protocolSettingsAddress:"0x8c6E434Bb1C51728BdCc250255c1F654471d85eB",bQueryAddres:l[n.On.id],onEnv:["beta","test","prod"]}]}},26758:function(e,t,a){a.d(t,{G:function(){return s}});var n=a(28070);let s=n.env.NEXT_PUBLIC_BASE_PATH||""},55349:function(e,t,a){a.d(t,{w:function(){return y},o:function(){return useStore}});var n=a(83978),s=a.n(n),o=a(64103),r=a(93108),d=a(66499),l=a(68535),c=a(45236),i=a(58714),u=a(78403),p=a(73216),f=a(44020),B=a(22139),b=a(26361),E=a(62531),g=a(87031),m=a(19757);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(a,n)=>s().mapValues(e,(e,s)=>e(e=>a({[s]:{...n()[s],...e}}),()=>n()[s],t[s]))}({sliceBVaultsStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},getBvaultLpData=async(e,t)=>{let a=t.asset,[[n,s],o]=await Promise.all([e.readContract({abi:d.hd,address:"0x4Be03f781C497A489E3cB0287833452cA9B9E80B",functionName:"getPoolTokens",args:[f.P[a].poolId]}),e.readContract({abi:d.IB,address:a,functionName:f.P[a].isStable?"getActualSupply":"totalSupply"})]),r=n.findIndex(e=>e==f.P[a].base),l=n.findIndex(e=>e==f.P[a].quote);return{lp:a,vault:t.vault,baseBalance:s[r],quoteBalance:s[l],totalSupply:o}},updateBvaults=async a=>{let n=s().now();console.info("timeStart:updateBvaults",n);let o=(0,u.B)(),[r,l,E]=await Promise.all([Promise.all(a.map(e=>o.readContract({abi:e.isOld?d.VH:d.Pe,address:e.bQueryAddres,functionName:"queryBVault",args:[e.vault]}).then(t=>({vault:e.vault,item:t})))),p.On.id==(0,p.BV)()?Promise.all(a.map(e=>{var t;return(null===(t=f.P[e.asset])||void 0===t?void 0:t.poolId)?getBvaultLpData(o,e):Promise.resolve(null)})):Promise.resolve(null),Promise.all(a.map(e=>e.pTokenV2?o.readContract({abi:[(0,c.s)("function rebaseRate() view returns (uint256)")],address:e.pToken,functionName:"rebaseRate"}):0n))]);console.info("timeEND:updateBvaults",s().now()-n);let g=s().filter(r,e=>null!=e).reduce((e,t,a)=>({...e,[t.vault]:{...t.item,ptRebaseRate:E[a]}}),{});if(await Promise.all(a.filter(e=>{var t;return null===(t=g[e.vault])||void 0===t?void 0:t.closed}).map(e=>o.readContract({abi:i.Wo,functionName:"balanceOf",address:e.asset,args:[e.vault]}).then(t=>{g[e.vault].lockedAssetTotal=t}))),l){for(let e of l)if(e){let t=g[e.vault];t.lpLiq=t.lockedAssetTotal;let a=t.lpLiq*B.Pq/e.totalSupply;t.lpBase=(0,b.UA)(e.baseBalance*a/B.Pq,f.P[e.lp].baseDecimal),t.lpQuote=(0,b.UA)(e.quoteBalance*a/B.Pq,f.P[e.lp].quoteDecimal)}}return e({bvaults:{...t().bvaults,...g}}),g},updateEpoches=async(a,n)=>{var o;let r=n||s().range(1,parseInt((((null===(o=t().bvaults[a.vault])||void 0===o?void 0:o.epochCount)||0n)+1n).toString())).map(e=>BigInt(e));if(0==r.length)return{};let l=(0,u.B)(),c=await Promise.all(r.map(e=>l.readContract({abi:a.isOld?d.VH:d.Pe,address:a.bQueryAddres,functionName:"queryBVaultEpoch",args:[a.vault,e]}))),i=c.reduce((e,t)=>({...e,["".concat(a.vault,"_").concat(t.epochId.toString())]:t}),{});return e({epoches:{...t().epoches,...i}}),i},updateYTokenSythetic=async a=>{let n=(null==a?void 0:a.map(e=>e.vault))||s().keys(t().bvaults),o=await (0,l._c)(n),r=s().mapValues(o,e=>BigInt(e));return e({yTokenSythetic:{...t().yTokenSythetic,...r}}),r};return{bvaults:{},epoches:{},yTokenSythetic:{},...a,updateBvaults,updateEpoches,updateYTokenSythetic}},sliceLVaultsStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},updateLVaults=async a=>{let n=(0,u.B)();if(0==a.length)return{};let s=await Promise.all(a.map(e=>Promise.all([n.readContract({abi:d.Wn,address:e.vaultQuery,functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}),n.readContract({abi:d.WW,address:e.vault,functionName:"assetBalance"}),n.readContract({abi:d.WW,address:e.vault,functionName:"usdTotalSupply"}),n.readContract({abi:d.WW,address:e.vault,functionName:"vaultMode"}),n.readContract({abi:d.WW,address:e.vault,functionName:"paramValue",args:[(0,E.$G)("Y",{size:32})]}),e.ptyPoolBelowAddress?n.readContract({abi:d.aT,address:e.ptyPoolBelowAddress,functionName:"totalStakingBalance"}):Promise.resolve(0n),e.ptyPoolAboveAddress?n.readContract({abi:d.aT,address:e.ptyPoolAboveAddress,functionName:"totalStakingBalance"}):Promise.resolve(0n),e.ptyPoolBelowAddress?n.getBalance({address:e.ptyPoolBelowAddress}):Promise.resolve(0n),n.readContract({abi:d.nq,address:e.assetTokenFeed,functionName:"latestPrice"}),n.readContract({abi:d.WW,address:e.vault,functionName:"paramValue",args:[(0,E.$G)("CircuitBreakPeriod",{size:32})]})]).then(t=>{let[a,n,s,o,r,d,l,c,i,u]=t,p=BigInt(Math.floor(new Date().getTime()/1e3)),f=e.isStable?a.M_USDCx>0n&&a.aar<a.AARS:2==o&&(a.aar>=a.AARC||p-a.AARBelowCircuitBreakerLineTime>u);return{...{...a,isStable:!!e.isStable},assetBalance:n,usbTotalSupply:s,vaultMode:e.isStable?a.aar<a.AARS&&a.M_USDC>0n?2:1:o,Y:r,buyPoolTotalStaking:d,sellPoolTotalStaking:l,buyPoolBalance:c,latestPrice:i*B.Pq/B.pn,CircuitBreakPeriod:u,discountEnable:f}}))),o=s.reduce((e,t,n)=>({...e,[a[n].vault]:t}),{});return e({lvaults:{...t().lvaults,...o}}),o},updateUserLVault=async(a,n)=>{let s=(0,u.B)();if(a.isStable)return;let[o,r,l,c,i,p,f]=await Promise.all([s.readContract({abi:d.aT,address:a.ptyPoolBelowAddress,functionName:"userStakingBalance",args:[n]}),s.readContract({abi:d.aT,address:a.ptyPoolBelowAddress,functionName:"earnedMatchedToken",args:[n]}),s.readContract({abi:d.aT,address:a.ptyPoolBelowAddress,functionName:"earnedStakingYields",args:[n]}).catch(()=>0n),s.readContract({abi:d.aT,address:a.ptyPoolBelowAddress,functionName:"earnedMatchingYields",args:[n]}),s.readContract({abi:d.aT,address:a.ptyPoolAboveAddress,functionName:"userStakingBalance",args:[n]}),s.readContract({abi:d.aT,address:a.ptyPoolAboveAddress,functionName:"earnedMatchedToken",args:[n]}),s.readContract({abi:d.aT,address:a.ptyPoolAboveAddress,functionName:"earnedMatchingYields",args:[n]})]),B={buyPool_userStakingBalance:o,buyPool_earnedMatchedToken:r,buyPool_earnedStakingYields:l,buyPool_earnedMatchingYields:c,sellPool_userStakingBalance:i,sellPool_earnedMatchedToken:p,sellPool_earnedMatchingYields:f};return e({user:{...t().user,[a.vault]:B}}),B};return{lvaults:{},user:{},...a,updateLVaults,updateUserLVault}},sliceLntVaultsStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},updateLntVaults=async a=>{let n=(0,u.B)(),o=await Promise.all(a.map(e=>n.readContract({abi:d.Q3,address:e.queryAddres,functionName:"queryVault",args:[e.vault]}).then(t=>({vault:e.vault,item:t})))),r=await (0,l.Sr)(a.map(e=>e.vault)),c=s().filter(o,e=>null!=e).reduce((e,t)=>({...e,[t.vault]:{...t.item,nftCount:BigInt(r[t.vault]||0)}}),{});return e({vaults:{...t().vaults,...c}}),c},updateEpoches=async(a,n)=>{var o;let r=n||s().range(1,parseInt((((null===(o=t().vaults[a.vault])||void 0===o?void 0:o.epochCount)||0n)+1n).toString())).map(e=>BigInt(e));if(0==r.length)return{};let l=(0,u.B)(),c=await Promise.all(r.map(e=>l.readContract({abi:d.Q3,address:a.queryAddres,functionName:"queryVaultEpoch",args:[a.vault,e]}))),i=c.reduce((e,t)=>({...e,["".concat(a.vault,"_").concat(t.epochId.toString())]:t}),{});return e({epoches:{...t().epoches,...i}}),i},updateUserEpoches=async(a,n)=>{var o;let r=(0,u.B)(),l=s().range(1,parseInt((((null===(o=t().vaults[a.vault])||void 0===o?void 0:o.epochCount)||0n)+1n).toString())).map(e=>BigInt(e));if(l.length>0){let s=await Promise.all(l.map(e=>r.readContract({abi:d.Q3,address:a.queryAddres,functionName:"queryVaultEpochUser",args:[a.vault,e,n]})));return e({userEpoches:{...t().userEpoches,[a.vault]:s}}),s}return[]},updateUserNftStat=async(a,n)=>{let s=await (0,l.mq)(a.vault,n),o=(0,u.B)();if(s.length>0){let n=(await Promise.all(s.map(e=>{let{tokenId:t,stat:n,tx:s}=e;return o.readContract({abi:d.qU,address:a.vault,functionName:"Redeemed"==n?"nftRedeemInfo":"nftDepositInfo",args:[BigInt(t)]}).then(e=>{let t="Redeemed"==n?e.redeemTime:e.depositTime,a=e.claimableTime;return{stat:n,tx:s,nftTokenId:e.nftTokenId,startTime:t,claimableTime:a,claimed:e.claimed}}).catch(e=>null)}))).filter(Boolean);return e({userNftStat:{...t().userNftStat,[a.vault]:n}}),n}return{}};return{vaults:{},epoches:{},userEpoches:{},userNftStat:{},...a,updateLntVaults,updateEpoches,updateUserEpoches,updateUserNftStat}},sliceTokenStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},updateTokenTotalSupply=async a=>{if(0==a.length)return{};let n=(0,u.B)(),s=await Promise.all(a.map(e=>e==m.K8?Promise.resolve(0n):n.readContract({abi:i.Wo,address:e,functionName:"totalSupply"}))),o=s.reduce((e,t,n)=>({...e,[a[n]]:t}),{});return e({totalSupply:{...t().totalSupply,...o}}),o},updateTokensBalance=async(a,n)=>{if(0==a.length)return{};let s=(0,u.B)(),o=await Promise.all(a.map(e=>e==m.K8?s.getBalance({address:n}):s.readContract({abi:i.Wo,address:e,functionName:"balanceOf",args:[n]}))),r=o.reduce((e,t,n)=>({...e,[a[n]]:t}),{});return e({balances:{...t().balances,...r}}),r},updateLPTokensStatForTest=async a=>{let n=(0,u.B)(),s=await Promise.all(a.map(e=>Promise.all([n.readContract({abi:d.Mi,address:g._C[(0,p.BV)()],functionName:"queryPrice",args:[f.P[e].base,f.P[e].quote,BigInt(f.P[e].poolType)]}),n.readContract({abi:d.Mi,address:g._C[(0,p.BV)()],functionName:"queryLiquidity",args:[f.P[e].base,f.P[e].quote,BigInt(f.P[e].poolType)]})]))),o={[g.TE[(0,p.BV)()]]:B.Pq};a.forEach((e,t)=>{let a=f.P[e].base,n=f.P[e].quote,r=s[t][0],d="0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c"==n?10n**6n:1n;o[e]=r/d**2n,o[n]=(r*10n**9n/(0x10000000000000000n*d))**2n*o[a]/B.Pq}),console.info("lpPrics:",o),e({prices:{...t().prices,...o}})},updateTokenPrices=async a=>{let n=s().groupBy(a,e=>f.P[e]?"lp":"token"),o=n.lp||[];if(0!==o.length){console.info("mlps;",a,o);let n=(0,p.I$)();if(n.id===p.BG.id)await updateLPTokensStatForTest(o);else if(n.id===p.On.id){let a=await (0,l.gf)(),n=await (0,l.Ly)();e({prices:{...t().prices,...a,"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b":n}})}}return{}},updateDefTokenList=async()=>{let t={[p.On.id]:"https://hub.berachain.com/internal-env/defaultTokenList.json",[p.BG.id]:"https://raw.githubusercontent.com/berachain/default-lists/main/src/tokens/bartio/defaultTokenList.json"},a=t[(0,p.BV)()];if(!a)return[];let n=await fetch(a).then(e=>e.json()).then(e=>e.tokens.filter(e=>e.chainId===(0,p.BV)()).map(e=>({symbol:e.symbol,address:e.address,decimals:e.decimals,name:e.name,url:(e.logoURI||"").replace("https://https://","https://")}))).catch(e=>[]);return localStorage.setItem("catchedDefTokenList_"+(0,p.BV)(),JSON.stringify(n)),e({defTokenList:n}),n},updateNftBalance=async(a,n)=>{let o=await (0,l.ZK)(a,n),r=s().mapValues(o,e=>e.map(e=>BigInt(e)));return e({nftBalance:{...t().nftBalance,...r}}),{}};return{totalSupply:{},updateTokenTotalSupply,balances:{},updateTokensBalance,prices:{"0x549943e04f40284185054145c6E4e9568C1D3241":B.Pq,"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce":B.Pq,"0x688e72142674041f8f6Af4c808a4045cA1D6aC82":B.Pq},updateTokenPrices,defTokenList:(()=>{try{return JSON.parse(localStorage.getItem("catchedDefTokenList_"+(0,p.BV)())||"[]")}catch(e){return[]}})(),updateDefTokenList,nftBalance:{},updateNftBalance,...a}},sliceUserBVaults:(e,t,a)=>{let updateEpoches=async(a,n,s)=>{let o=s.filter(e=>e.epochId>0n);if(0==o.length)return{};let r=(0,u.B)(),l=await Promise.all(o.map(e=>r.readContract({abi:a.isOld?d.VH:d.Pe,address:a.bQueryAddres,functionName:"queryBVaultEpochUser",args:[a.vault,e.epochId,n]})));return e({epoches:{...t().epoches,[a.vault]:l}}),l};return{epoches:{},...a,updateEpoches,reset:()=>e({epoches:{}})}}},{}),y=(0,r.Ue)(v);function useStore(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],a=y();return(0,o.useMemo)(()=>e(a),t.map(e=>e?s().get(a,e):a))}}}]);