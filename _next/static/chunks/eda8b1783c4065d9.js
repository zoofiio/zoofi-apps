(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,829256,301953,267550,e=>{"use strict";var t=e.i(322285),a=e.i(388654),s=e.i(280924),n=e.i(925282),i=e.i(995979),r=e.i(40143),l=e.i(262521),o=e.i(463605),c=e.i(22245),d=e.i(995451),u=e.i(565374),m=e.i(347064),x=e.i(751755);let p=(0,o.parseAbi)(["function execute(bytes calldata commands, bytes[] calldata inputs) public payable","function execute(bytes calldata commands, bytes[] calldata inputs, uint256 deadline) public payable"]),f=(0,o.parseAbi)(["function approve(address token,address spender,uint160 amount,uint48 expiration)"]);(0,o.parseAbi)(["function modifyLiquidities(bytes calldata data,uint256 deadline) public payable"]),(0,c.parseAbiParameters)(["PoolKey","struct PoolKey { address currency0; address currency1 ;uint24 fee; int24 tickSpacing; address hooks;}"]),(0,c.parseAbiParameters)(["ModifyLiquidityParams","struct ModifyLiquidityParams { int24 tickLower; int24 tickUpper;int256 liquidityDelta;bytes32 salt;}"]);let h=(0,o.parseAbi)(["function modifyLiquidity(PoolKey memory key, ModifyLiquidityParams memory params, bytes calldata hookData) external returns (int256 callerDelta, int256 feesAccrued)","struct PoolKey { address currency0; address currency1 ;uint24 fee; int24 tickSpacing; address hooks;}","struct ModifyLiquidityParams { int24 tickLower; int24 tickUpper;int256 liquidityDelta;bytes32 salt;}"]);(0,o.parseAbi)(["function getSlot0(bytes32 poolId) external view returns(uint160 sqrtPriceX96, int24 tick, uint24 protocolFee, uint24 lpFee)","function getLiquidity(bytes32 poolId) external view returns (uint128 liquidity)"]);let g={1:{unirouter:"0x66a9893cc07d91d95644aedd05d03f95e1dba8af",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0x000000000004444c5dc75cB358380D2e3dE08A90"},0xaa36a7:{unirouter:"0x3a9d48ab9751398bbfa63ad67599bb04e4bdf98b",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0xE03A1074c86CFeDd5C142C4F04F1a1536e203543"},16601:{unirouter:"0xfa2ba0a2743ea9d60caf373482ea3a4200230dcc",permit2:"0x45B4798F3d93f3754ea2f28ea3b6449e31E53043",poolmanager:"0x5cd9e7907522016160a8ce6ad58dc8a80909e79f"},[x.arbitrum.id]:{unirouter:"0xa51afafe0263b40edaef0df8781ea9aa03e381a3",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0x360e68faccca8ca495c1b759fd9eee466db9fb32"},[x.zeroGmainnet.id]:{unirouter:"0x550b031acbc56b309a8ef28914959115f6a97202",permit2:"0xA3eD53b6548cED609E6E7100c13D5bF129Acec57",poolmanager:"0x8d50571796c86fd7018b5711a10a498eeaf5761f"},[m.bscTestnet.id]:{unirouter:"0xa8a655b94d30ea4dfa8b68f26e426d720d9d7b81",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0xa2ad9ce2e8f9b0107df65fa0211d237cbab0497a"},[x.bsc.id]:{unirouter:"0x1906c1d672b88cd1b9ac7593301ca990f94eae07",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0x28e2ea090877bf75740558f6bfb36a5ffee9e9df"},[x.base.id]:{unirouter:"0x6ff5693b99212da76ad316178a184ab56d299b43",permit2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",poolmanager:"0x498581ff718922c3f8e6a244956af099b2652b2b"},[x.story.id]:{unirouter:"0x8d50571796c86fd7018b5711a10a498eeaf5761f",permit2:"0x000000000022d473030f116ddee9f6b43ac78ba3",poolmanager:"0x170e0c91ffa71dc3c16d43f754b3aece688470c8"},[x.sei.id]:{unirouter:"0x8d50571796c86fd7018b5711a10a498eeaf5761f",permit2:"0x000000000022d473030f116ddee9f6b43ac78ba3",poolmanager:"0x170e0c91ffa71dc3c16d43f754b3aece688470c8"}};async function b({user:e,chainId:r,poolkey:o,is0To1:d=!0,amountIn:m,amountOutMin:x=0n,deadline:h=600,approveName:b,executeName:y}){let v=g[r],j=(0,i.encodePacked)(["uint8"],[16]),N=(0,i.encodePacked)(["uint8","uint8","uint8"],[6,12,15]),k=d?o.currency0:o.currency1,T=d?o.currency1:o.currency0,w=Math.round((0,s.now)()/1e3+h),B=["0x","0x","0x"];o.hooks||(o.hooks=u.zeroAddress),B[0]=(0,n.encodeAbiParameters)((0,c.parseAbiParameters)(["ExactInputSingleParams","struct ExactInputSingleParams { PoolKey poolKey;bool zeroForOne;uint128 amountIn;uint128 amountOutMinimum;bytes hookData;}","struct PoolKey { address currency0; address currency1 ;uint24 fee; int24 tickSpacing; address hooks;}"]),[{poolKey:o,zeroForOne:d,amountIn:m,amountOutMinimum:x,hookData:"0x"}]),B[1]=(0,n.encodeAbiParameters)([{type:"address"},{type:"uint256"}],[k,m]),B[2]=(0,n.encodeAbiParameters)([{type:"address"},{type:"uint256"}],[T,x]);let A=["0x"];return(A[0]=(0,n.encodeAbiParameters)([{type:"bytes"},{type:"bytes[]"}],[N,B]),(0,l.isAddressEqual)(k,u.zeroAddress))?[{abi:p,functionName:"execute",address:v.unirouter,args:[j,A,BigInt(w)],value:m,name:y}]:[...await (0,t.withTokenApprove)({approves:[{token:k,spender:v.permit2,amount:m,name:b}],pc:(0,a.getPC)(r),user:e,tx:{abi:f,address:v.permit2,functionName:"approve",args:[k,v.unirouter,m,w],name:b}}),{abi:p,functionName:"execute",address:v.unirouter,args:[j,A,BigInt(w)],name:y}]}function y({chainId:e,lp:t,poolkey:a,liquidity:n,amount0Max:i,amount1Max:l,tickLower:o=-1e5,tickUpper:c=1e5,hookData:m=(0,d.toHex)(0),deadline:x=600}){let p=g[e],b=Math.round((0,s.now)()/1e3+x),y={...a,hooks:a.hooks??u.zeroAddress},v={tickLower:o,tickUpper:c,liquidityDelta:n,salt:`${t}000000000000000000000000`};return 0n==n?[]:n>0n?[{abi:r.erc20Abi,address:y.currency0,functionName:"approve",args:[p.permit2,i]},{abi:r.erc20Abi,address:y.currency1,functionName:"approve",args:[p.permit2,l]},{abi:f,address:p.permit2,functionName:"approve",args:[y.currency0,p.poolmanager,i,b]},{abi:f,address:p.permit2,functionName:"approve",args:[y.currency1,p.poolmanager,l,b]},{abi:h,functionName:"modifyLiquidity",address:p.poolmanager,args:[y,v,m]}]:[{abi:r.erc20Abi,address:t,functionName:"approve",args:[p.permit2,-n]},{abi:f,address:p.permit2,functionName:"approve",args:[y.currency0,p.poolmanager,-n,b]},{abi:h,functionName:"modifyLiquidity",address:p.poolmanager,args:[y,v,m]}]}function v(e,t,{signal:a,edges:s}={}){let n,i=null,r=null!=s&&s.includes("leading"),l=null==s||s.includes("trailing"),o=()=>{null!==i&&(e.apply(n,i),n=void 0,i=null)},c=null,d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,l&&o(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,i=null},m=function(...e){if(a?.aborted)return;n=this,i=e;let t=null==c;d(),r&&t&&o()};return m.schedule=d,m.cancel=u,m.flush=()=>{o()},a?.addEventListener("abort",u,{once:!0}),m}function j(e){let t;if(e&&0!==e.length){for(let a=0;a<e.length;a++){let s=e[a];!(null==s||Number.isNaN(s))&&"symbol"!=typeof s&&(void 0===t||s<t)&&(t=s)}return t}}e.s(["encodeModifyLP",()=>y,"encodeSingleSwap",()=>b],829256),e.s(["debounce",()=>v],301953),e.s(["min",()=>j],267550)},173192,e=>{"use strict";var t=e.i(29743);function a({node:e,disableAnim:a}){return(0,t.jsxs)("svg",{className:"mx-auto bg-no-repeat bg-contain bg-center bg-[url(/bg_lnt_icon2.svg)] dark:bg-[url(/bg_lnt_icon.svg)]",width:"100%",viewBox:"0 0 368 284",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[!a&&(0,t.jsx)("circle",{cx:"184",cy:"228",r:"183","transform-origin":"center 228",transform:"scale(1 .3)",stroke:"url(#paint0_linear_57_1167)",strokeWidth:"2",strokeDasharray:"4 10",strokeDashoffset:"0",children:(0,t.jsx)("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-140",dur:"1.5s",repeatCount:"indefinite"})}),e?(0,t.jsxs)("g",{children:[(0,t.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"0 0;0 -5;0 15;0 0",dur:"2s",repeatCount:"indefinite"}),(0,t.jsx)("foreignObject",{x:"184",y:"45",width:"80",height:"80",transform:"translate(-40,-40)",children:e})]}):(0,t.jsxs)("g",{children:[(0,t.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"0 0;0 -5;0 15;0 0",dur:"2s",repeatCount:"indefinite"}),(0,t.jsx)("foreignObject",{x:"184",y:"45",width:"96",height:"110",transform:"translate(-48,-40)",children:(0,t.jsx)("img",{className:"w-full h-full",src:"/lnt_icon.svg"})})]}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_57_1167",x1:"184",y1:"113",x2:"184",y2:"283",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#006A1F",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#1ECA53"})]})})]})}function s({node:e,disableAnim:a=!1}){return(0,t.jsxs)("svg",{className:"bg-no-repeat bg-contain bg-center bg-[url(/bg_lvt_icon2.svg)] dark:bg-[url(/bg_lvt_icon.svg)]",width:"100%",viewBox:"0 0 366 349",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[!a&&(0,t.jsx)("circle",{cx:"182",cy:"293",r:"182","transform-origin":"center 293",transform:"scale(1 .3)",stroke:"url(#paint_0_linear_57_1168)",strokeWidth:"2",strokeDasharray:"4 10",strokeDashoffset:"0",children:(0,t.jsx)("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-140",dur:"1.5s",repeatCount:"indefinite"})}),e?(0,t.jsxs)("g",{children:[(0,t.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"0 0;0 20;0 0",dur:"2s",repeatCount:"indefinite"}),(0,t.jsx)("foreignObject",{x:"184",y:"100",width:"80",height:"80",transform:"translate(-40,-40)",children:e})]}):(0,t.jsxs)("g",{children:[(0,t.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"0 0;0 -20;0 0",dur:"2s",repeatCount:"indefinite"}),(0,t.jsx)("foreignObject",{x:"184",y:"100",width:"144",height:"130",transform:"translate(-72,-20)",children:(0,t.jsx)("img",{className:"w-full h-full",src:"/lvt_icon.svg"})})]}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint_0_linear_57_1168",x1:"184",y1:"179",x2:"184",y2:"349",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#8C6F00",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#FDD849"})]})})]})}e.s(["LntNodeSvg",()=>a,"LvtNodeSvg",()=>s])},151879,449814,964118,116638,784865,e=>{"use strict";var t=e.i(29743),a=e.i(4433),s=e.i(30951);function n({fees:e,def:n="-"}){let i="string"==typeof e,r=i?0:e.reduce((e,t)=>e+t.value,0);return(0,t.jsxs)("div",{className:"flex gap-2 text-xs font-medium leading-none",children:["Fees:",!i&&e.length>0?(0,t.jsx)(s.Tip,{className:"underline underline-offset-2",contentClassName:"whitespace-pre-wrap",node:`$${(0,a.round)(r,3)}`,children:e.map(e=>`${e.name}: ${(0,a.round)(e.value,3)}`).join("\n\r")}):(0,t.jsx)("div",{children:i&&e||n})]})}e.s(["Fees",()=>n],151879);var i=e.i(950759),r=e.i(979353),l=e.i(302121),o=e.i(185442),c=e.i(949964),d=e.i(647163),u=e.i(388654),m=e.i(211051),x=e.i(280924),p=e.i(330926),f=e.i(96932),h=e.i(570963),g=e.i(995451),b=e.i(717560),y=e.i(322285),v=e.i(490247),j=e.i(839561),N=e.i(392861),k=e.i(62870);function T({token:e}){return(0,t.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,t.jsx)(v.TokenIcon,{token:e,size:40,showNet:!0}),e.symbol]})}function w({className:e,tokens:a,checkBalance:s=!0,balance:n=!0,balanceTit:i="Balance",readonly:r,selected:l,onClick:c,amount:u,setAmount:x,disable:p,balanceClassName:g="",loading:b,error:y="",otherInfo:v,onTokenChange:w}){let B=(0,f.useMemo)(()=>a.map(e=>({key:e.address,show:(0,t.jsx)(T,{token:e}),data:e})),[JSON.stringify(a)]),[A,L]=(0,f.useState)(B[0].data);(0,f.useEffect)(()=>{B.some(e=>e.data==A)||(console.info("tokenChange:"),L(B[0].data),w?.(B[0].data))},[A,B]);let S=!1!==n&&!p,C=s&&!p,V=(0,o.useBalance)(S&&"bigint"!=typeof n?A:void 0),D="bigint"==typeof n?n:V.data,P=(0,f.useRef)(null),F=C&&(0,d.parseEthers)(`${u??"0"}`,A.decimals)>D,E=!!y||F;return 0==B.length?null:(0,t.jsxs)("div",{className:(0,d.cn)("relative w-full flex flex-col p-4 gap-4 font-sec border border-transparent bg-card dark:bg-main rounded-xl m-shadow-around",{" border-green-700":l," border-red-400 has-focus:shadow-red-400/40":E," has-focus:border-primary has-focus:shadow-primary/40":!E&&!l},e),onClick:e=>{P.current?.focus(),c&&!p&&c()},children:[E&&(0,t.jsx)("div",{className:"flex w-full justify-center absolute left-0 bottom-0",children:(0,t.jsx)("div",{className:"text-sm text-white bg-red-400 rounded-t right-0 bottom-0 px-1 ",children:y||"Insufficient account balance"})}),(0,t.jsxs)("div",{className:"flex items-center w-full h-10 relative gap-3",children:[b&&(0,t.jsx)(N.Spinner,{className:"absolute right-24 top-4.5"}),(0,t.jsx)("div",{className:"flex items-center gap-2 w-fit left-4",children:a.length>1?(0,t.jsx)(k.SimpleSelect,{className:"border-none",options:B,onChange:e=>{console.info("tokenChange:",e),L(e.data),w?.(e.data)}}):(0,t.jsx)(T,{token:A})}),(0,t.jsx)("input",{value:b?"":u,onChange:e=>{r||x((e.target.value||"").replaceAll("-","").replaceAll("+",""))},ref:P,type:"number",disabled:p,className:(0,d.cn)("bg-transparent min-w-0 basis-0 flex-1 h-full font-semibold text-right text-2xl outline-none! border-none!",{"cursor-not-allowed ":r}),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:r})]}),(S||!(0,j.isNil)(v))&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-fg/60 text-sm",children:[S&&(0,t.jsxs)("div",{className:g,children:[(0,t.jsxs)("span",{children:[i,": ",(0,m.displayBalance)(D,void 0,A.decimals)]}),!p&&(0,t.jsx)("button",{className:"ml-2 text-primary",onClick:()=>{x((0,h.formatUnits)(D,A.decimals)),c&&!p&&c()},children:"Max"})]}),v]})]})}function B({vc:e}){let n=e.buybackPool??e.vault,{address:j}=(0,b.useAccount)(),N=(0,l.useLntVault)(e),k=(0,r.getTokenBy)(N.data.T,e.chain,{symbol:"T"}),T=(0,r.getTokenBy)(N.data.VT,e.chain,{symbol:"VT"}),B=(0,o.useBalance)(T),[A,L]=(0,f.useState)(),S=(0,d.parseEthers)(A||"0",T.decimals),C=(0,c.useFet)({key:`BuybackDatas:${e.vault}`,fetfn:async()=>{let t=(0,u.getPC)(e.chain),a=await t.readContract({abi:i.abiLntBuyback,address:n,functionName:"stakingTokenPotCount"});return(0,d.promiseAll)({pots:t.readContract({abi:i.abiLntBuyback,address:n,functionName:"stakingTokenPotsRange",args:[0n,a]}),buybackDustAmountVT:t.readContract({abi:i.abiLntBuyback,address:n,functionName:"buybackDustAmountVT"}),minStakeAmountVT:t.readContract({abi:i.abiLntBuyback,address:n,functionName:"minStakeAmountVT"}),VestingRate:t.readContract({abi:i.abiLntVault,address:e.vault,functionName:"paramValue",args:[(0,g.toHex)("VestingRate",{size:32})]})})}}),V=C.data?.pots??[],D=(0,d.aarToNumber)(C.data?.VestingRate??0n,18),P=`Conversion ratio : 1 ${T.symbol} = ${(0,a.round)(1-D,2)} ${k.symbol}`,F=function(e){if(e.reppo){let e=new Date((0,x.now)()+864e5);if(e.setHours(8,0,0,0),!(e.getTime()>17959968e5))return{value:"4,135",time:e.getTime()}}}(e),E=C.data?.minStakeAmountVT??0n,I=(0,c.useFet)({key:V.length?`pendingSale:${e.vault}`:"",initResult:0n,fetfn:async()=>(0,u.getPC)(e.chain).readContract({abi:i.abiLntBuyback,address:n,functionName:"totalStakingAmountVT",args:[V[V.length-1]]})}),q=(0,c.useFet)({key:V.length&&j?`BuybackUserPending:${e.vault}:${j}`:"",initResult:0n,fetfn:async()=>(0,u.getPC)(e.chain).readContract({abi:i.abiLntBuyback,address:n,functionName:"userStakingAmountVT",args:[V[V.length-1],j]})}),$=(0,c.useFet)({key:V.length&&j?`BuybackUserSetteld:${e.vault}:${j}`:"",initResult:0n,fetfn:async()=>{let t=(0,u.getPC)(e.chain);return(await Promise.all(V.map(e=>t.readContract({abi:i.abiLntBuyback,address:n,functionName:"boughtAmountT",args:[e,j]})))).reduce((e,t)=>e+t,0n)}}),M=async({pc:e,wc:t})=>{if(S<E)throw Error("Stake amount too small");if(S>B.data)throw Error("Balance too low");return(0,y.withTokenApprove)({pc:e,user:t.account.address,approves:[{spender:n,token:T.address,amount:S}],tx:{abi:i.abiLntBuyback,address:n,functionName:"stake",args:[S]}})},R=async({pc:e,wc:t})=>{if(S>q.data)throw Error("Input amount too large");return[{abi:i.abiLntBuyback,address:n,functionName:"withdraw",args:[V[V.length-1],S]}]},_=async({pc:e,wc:t})=>(await Promise.all(V.map(t=>e.readContract({abi:i.abiLntBuyback,address:n,functionName:"boughtAmountT",args:[t,j]})))).map((e,t)=>({bought:e,pot:V[t]})).filter(e=>e.bought>100n).map(e=>({abi:i.abiLntBuyback,address:n,functionName:"claimBoughtT",args:[e.pot]}));return(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full text-sm font-sec",children:[(0,t.jsxs)("div",{className:"overflow-hidden animitem text-sm font-semibold flex items-center justify-between gap-4 py-2 px-4 rounded-xl border border-board bg-size-[100%_100%] bg-[url(/bg_buyback.png)] not-dark:bg-[url(/bg_buyback2.png)] bg-no-repeat",children:[(0,t.jsx)("span",{className:"max-w-55 text-base",children:"You can gradually convert VT to T here."}),(0,t.jsx)(p.default,{href:"https://docs.zoofi.io/lnt-vault/product-design/how-does-lnt-work/vt-value-anchoring",target:"_blank",className:"hover:text-primary not-dark:opacity-60 font-normal",children:"Read more>"})]}),(0,t.jsxs)("div",{className:"animitem flex flex-wrap justify-between items-center gap-3 whitespace-nowrap",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center p-2 border border-board rounded-lg flex-1 basis-0",children:[(0,t.jsx)("div",{className:"text-fg/60 mr-auto",children:"Next batch"}),(0,t.jsx)(v.TokenIcon,{size:14,token:T}),(0,t.jsxs)("div",{className:"font-medium",children:[F?.value??"-",F&&(0,t.jsxs)("span",{className:"opacity-60 text-xs",children:["(~",(0,d.fmtDuration)(F.time-(0,x.now)()),")"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 items-center p-2 border border-board rounded-lg flex-1 basis-0",children:[(0,t.jsx)("div",{className:"text-fg/60",children:"Total Request"}),(0,t.jsx)("div",{className:"font-medium ml-auto",children:(0,m.displayBalance)(I.data,void 0,T.decimals)}),(0,t.jsx)(s.Tip,{children:"If the amount of VT in the pool exceeds the rewards for the current batch, participating users will receive settlement on a pro-rata basis. The remaining VT will continue to wait for the next batch of redemption until fully converted."})]})]}),(0,t.jsx)(w,{className:"animitem",tokens:[T],amount:A,setAmount:L,checkBalance:!1,otherInfo:(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,t.jsxs)("span",{children:["Pending : ",(0,m.displayBalance)(q.data,void 0,T.decimals)]}),(0,t.jsx)("button",{className:"text-primary ml-2",onClick:()=>L((0,h.formatUnits)(q.data,T.decimals)),children:"Max"})]})}),(0,t.jsxs)("div",{className:"animitem text-center",children:[P," ",(0,t.jsx)(s.Tip,{children:"The conversion ratio here is not 1:1 (including protocol service fee). Users can choose to accept it or wait until maturity for a 1:1 redemption(no service fee)"})]}),(0,t.jsxs)("div",{className:"animitem gap-4 grid grid-cols-2",children:[(0,t.jsx)(y.Txs,{tx:"Request",disabled:S<=0n,txs:M}),(0,t.jsx)(y.Txs,{tx:"Withdraw",disabled:S<=0n,txs:R})]}),(0,t.jsxs)("div",{className:"animitem flex items-center gap-5",children:[(0,t.jsxs)("div",{className:"flex justify-between px-3 py-2 rounded-xl items-center flex-1 border border-board h-12",children:[(0,t.jsx)("span",{className:"text-fg/60",children:"Settled"}),(0,m.displayBalance)($.data,void 0,k.decimals)]}),(0,t.jsx)(y.Txs,{tx:"Claim",className:"w-fit",disabled:0n==$.data,txs:_})]})]})}e.s(["TokenInput",()=>w],449814),e.s(["LntVaultBuyback",()=>B],964118);var A=e.i(472064),L=e.i(567353),S=e.i(858316),C=e.i(921621),V=e.i(40143),D=e.i(262521),P=e.i(480790),F=e.i(186680),E=e.i(989846),I=e.i(928348);function q(e){return(0,c.useFet)({key:e.reppo?`ReppoLntVaultNFTs:${e.vault}`:"",initResult:[],fetfn:async()=>{let[t,a]=await (0,u.getPC)(e.chain).readContract({abi:i.abiReppoLntVault,address:e.vault,functionName:"NFTs"});return t.map((e,t)=>({NFT:e,aVT:a[t]}))}})}function $({vc:e,onSuccess:a}){let s=(0,l.useLntVault)(e),[n,u]=(0,f.useState)(e.reppo.standard),[x,p]=(0,S.useSetState)({}),h=(0,L.keys)(x).filter(e=>x[e]).map(e=>BigInt(e)),g=e.chain,b=e.vault,v=q(e),j=v.data.find(t=>(0,D.isAddressEqual)(t.NFT,e.reppo.standard))?.aVT??0n,N=v.data.find(t=>(0,D.isAddressEqual)(t.NFT,e.reppo.preminum))?.aVT??0n,k=n==e.reppo.standard?j:N,T=(0,o.useErc721Balance)(g,e.reppo.standard,e.nftBalanceBy),B=(0,o.useErc721Balance)(g,e.reppo.preminum,e.nftBalanceBy),F=(0,l.useLntVaultVTC)(e),$=(k-k*(0,P.parseEther)(F.toFixed(6))/A.DECIMAL)*BigInt(h.length),M=n==e.reppo.standard?T:B,R=(0,r.getTokenBy)(s.data.VT,g,{symbol:"VT"}),_=()=>{p((0,L.keys)(x).reduce((e,t)=>({...e,[t]:!1}),{}))},Y=async({pc:t,wc:a})=>{let s=[];return await t.readContract({abi:V.erc721Abi,address:n,functionName:"isApprovedForAll",args:[a.account.address,b]})||(await Promise.all(h.map(e=>t.readContract({abi:V.erc721Abi,address:n,functionName:"getApproved",args:[e]})))).forEach((t,a)=>{(0,D.isAddressEqual)(t,e.vault)||s.push({abi:V.erc721Abi,address:n,functionName:"approve",args:[b,h[a]],name:`Approve #${h[a].toString()}`})}),[...s,{name:"Deposit",abi:i.abiReppoLntVault,address:b,functionName:"deposit",enabled:h.length>0,args:[n,h]}]};return(0,t.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5 font-sec",children:[(0,t.jsxs)("div",{className:"w-full text-start font-medium flex items-center justify-between font-def",children:["Licenses ID",(0,t.jsxs)("div",{className:"flex ml-auto items-center gap-5 mr-10",children:[(0,t.jsx)("div",{className:(0,d.cn)("cursor-pointer underline-offset-4",{underline:n===e.reppo.standard}),onClick:()=>{n!==e.reppo.standard&&(_(),u(e.reppo.standard))},children:"Standard"}),(0,t.jsx)("div",{className:(0,d.cn)("cursor-pointer underline-offset-4",{underline:n===e.reppo.preminum}),onClick:()=>{n!==e.reppo.preminum&&(_(),u(e.reppo.preminum))},children:"Premium"})]})]}),(0,t.jsx)("div",{className:"w-lg h-72 overflow-y-auto",children:(0,t.jsx)("div",{className:"w-full gap-2 grid grid-cols-4 ",children:M.data.map(e=>(0,t.jsxs)("div",{className:(0,d.cn)("flex gap-1 items-center cursor-pointer",{"text-primary":x[e.toString()]}),onClick:()=>{x[e.toString()]?p({[e.toString()]:!1}):h.length>=30?C.toast.error("Up to 30"):p({[e.toString()]:!0})},children:[(0,t.jsx)("div",{className:(0,d.cn)("w-3 h-3 border border-black/20 bg-[#EBEBEB] rounded-full",{"bg-primary":x[e.toString()]})}),"#",e.toString()]},e.toString()))})}),(0,t.jsx)(I.BBtn,{className:"max-w-sm",onClick:()=>{if(h.length>=30)C.toast.error("Up to 30");else{let e={};M.data.filter(e=>!x[e.toString()]).slice(0,30-h.length).forEach(t=>{e[t]=!0}),console.info("onClickAll:",e,x,h),p(e)}},children:"Select All"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)("div",{className:"w-full",children:"Receive"}),(0,t.jsx)(w,{tokens:[R],loading:!1,disable:!0,amount:(0,d.fmtBn)($,R.decimals)})]}),(0,t.jsxs)("div",{className:"text-xs opacity-60 text-center flex justify-between gap-5 w-full",children:[(0,t.jsx)("div",{className:"text-left",children:`1 License = ${(0,m.displayBalance)(k,void 0,R.decimals)} ${R.symbol}`}),(0,t.jsx)("div",{children:`Operation Fees : ${(0,d.formatPercent)(F,2,!1)}`})]}),(0,t.jsx)(E.ConfigChainsProvider,{chains:g,children:(0,t.jsx)(y.Txs,{tx:"Deposit",onTxSuccess:()=>{let e={};h.forEach(t=>{e[t.toString()]=!1}),p(e),(0,c.reFet)(M.key,s.key),a()},disabled:0==h.length,txs:Y})})]})}function M({vc:e}){let a=(0,f.useRef)(null),s=(0,l.useLntVault)(e),n=(0,r.getTokenBy)(s.data.VT,e.chain,{symbol:"VT"}),i=q(e),o=i.data.find(t=>(0,D.isAddressEqual)(t.NFT,e.reppo.standard))?.aVT??0n,c=i.data.find(t=>(0,D.isAddressEqual)(t.NFT,e.reppo.preminum))?.aVT??0n;return(0,t.jsxs)("div",{className:"flex flex-col h-full justify-between shrink-0 gap-6 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm justify-between whitespace-nowrap",children:[(0,t.jsx)("span",{className:"font-def text-lg",children:"Total Deposited"}),(0,t.jsx)("span",{className:"opacity-50 ml-1",children:"Licenses"})]}),(0,t.jsx)("div",{className:"font-def text-xl font-bold text-center",children:(0,m.displayBalance)(s.data.activeDepositCount,0,0)}),(0,t.jsxs)("div",{className:"flex flex-col gap-5 justify-between lg:px-8 my-auto font-sec",children:[(0,t.jsx)(F.SimpleDialog,{triggerRef:a,trigger:(0,t.jsx)(I.BBtn,{className:"shrink-0",children:"Deposit"}),children:(0,t.jsx)($,{vc:e,onSuccess:()=>a.current?.click()})}),(0,t.jsx)("div",{className:"mt-4 text-sm opacity-60 text-center",children:`1 Standard = ${(0,m.displayBalance)(o,void 0,n.decimals)} ${n.symbol}`}),(0,t.jsx)("div",{className:"text-sm opacity-60 text-center",children:`1 Premium = ${(0,m.displayBalance)(c,void 0,n.decimals)} ${n.symbol}`})]})]})}function R({vc:e,onSuccess:a}){let s=(0,l.useLntVault)(e),n=e.chain,o=e.vault,c=(0,r.getTokenBy)(s.data.VT??s.data.VT,n,{symbol:"VT"}),u=(0,r.getTokenBy)(e.asset,n,{symbol:"vIP"}),[x,p]=(0,f.useState)(""),h=(0,d.parseEthers)(x,u.decimals),g=h*s.data.aVT/A.DECIMAL;return(0,t.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5",children:[(0,t.jsx)("div",{children:"Deposit"}),(0,t.jsx)(w,{tokens:[u],amount:x,setAmount:p}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)("div",{className:"w-full",children:"Receive"}),(0,t.jsx)(w,{tokens:[c],loading:!1,disable:!0,amount:(0,d.fmtBn)(g,c.decimals)})]}),(0,t.jsxs)("div",{className:"text-sm opacity-60 text-center flex justify-between gap-5 w-full",children:[(0,t.jsx)("div",{className:"text-left",children:`1 vIP(Verio IP) = ${(0,m.displayBalance)(s.data?.aVT??0n,void 0,c.decimals)} ${c.symbol}`}),(0,t.jsx)("div",{})]}),(0,t.jsx)(y.Txs,{tx:"Deposit",onTxSuccess:()=>{p(""),a()},txs:({wc:t,pc:a})=>(0,y.withTokenApprove)({user:t.account.address,pc:a,approves:[{token:e.asset,spender:o,amount:h}],tx:{name:"Deposit",abi:i.abiLntVault,address:o,functionName:"deposit",args:[h]}})})]})}function _({vc:e}){let a=(0,f.useRef)(null),s=(0,l.useLntVault)(e),n=(0,r.getTokenBy)(e.asset,e.chain,{symbol:"vIP"});return(0,t.jsxs)("div",{className:"flex flex-col items-center h-full justify-between shrink-0 gap-5 w-full",children:[(0,t.jsx)("span",{className:"font-def text-lg font-medium",children:"Total Locked"}),(0,t.jsxs)("div",{className:"font-bold font-def text-xl",children:[" ",(0,m.displayBalance)(s.data?.activeDepositCount,void 0,n.decimals)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)(v.TokenIcon,{token:{chain:e.chain,symbol:"IP"},size:20}),"IP"]}),(0,t.jsx)("div",{className:"flex flex-col gap-5 justify-between lg:px-8 my-auto w-full",children:(0,t.jsx)(F.SimpleDialog,{triggerRef:a,trigger:(0,t.jsx)(I.BBtn,{className:"shrink-0",children:"Deposit"}),children:(0,t.jsx)(R,{vc:e,onSuccess:()=>a.current?.click()})})})]})}e.s(["LntVaultDepositReppo",()=>M],116638),e.s(["LVTDepositWithdrawVerio",()=>_],784865)},480038,e=>{"use strict";var t=e.i(29743),a=e.i(647163);function s({children:e,className:s,...n}){return(0,t.jsx)("div",{style:{boxShadow:"0px 0px 40px 0px #32D65233 inset,0px 0px 10px 0px #4CE54F66",background:`
        linear-gradient(180deg,var(--bg-main,#00000033),var(--bg-main,#66666633)) padding-box,
        linear-gradient(180deg, #4EEB7E, #006D21) border-box`,border:"1px solid transparent"},className:(0,a.cn)("rounded-[20px]",s),...n,children:e})}function n({children:e,className:s,...n}){return(0,t.jsx)("div",{style:{boxShadow:"0px 0px 40px 0px #FDD84933 inset,0px 0px 10px 0px #FDD84966",background:`
        linear-gradient(180deg,var(--bg-main,#00000033),var(--bg-main,#66666633)) padding-box,
        linear-gradient(180deg, #FDD849, #FDA103) border-box`,border:"1px solid transparent"},className:(0,a.cn)("rounded-[20px]",s),...n,children:e})}e.s(["LgBoardBloom",()=>s,"LgBoardBloom2",()=>n])},889886,e=>{"use strict";var t=e.i(29743),a=e.i(309384),s=e.i(950759),n=e.i(313905),i=e.i(979353),r=e.i(829256),l=e.i(472064),o=e.i(475745),c=e.i(567543),d=e.i(302121),u=e.i(185442),m=e.i(949964),x=e.i(647163),p=e.i(388654),f=e.i(211051),h=e.i(962220),g=e.i(301953),b=e.i(4433),y=e.i(416301),v=e.i(567353),j=e.i(267550),N=e.i(737098),k=e.i(330926),T=e.i(589569),w=e.i(96932),B=e.i(789066),A=e.i(858316),L=e.i(58619),S=e.i(921621),C=e.i(40143),V=e.i(262521),D=e.i(995451),P=e.i(717560),F=e.i(781628),E=e.i(173192),I=e.i(322285),q=e.i(151879),$=e.i(147763),M=e.i(490247),R=e.i(964118),_=e.i(116638),Y=e.i(784865),H=e.i(37310),O=e.i(186680),W=e.i(804907),z=e.i(989846),U=e.i(449814),K=e.i(928348),G=e.i(480038),Q=e.i(839561);function Z(e){return"number"==typeof e||e instanceof Number}var X=e.i(95377);function J(e,t=0){return(0,X.decimalAdjust)("round",e,t)}var ee=e.i(719817);function et({className:e,btnClassName:a,subClassName:s,addClassName:n,numClassName:i,value:r=0,step:l=1,min:o,max:c,integer:d=!0,decimals:u=2,title:m,onChange:p}){let f=e=>{let t=J(e,d?0:u);return Z(o)&&t<o&&(t=o),Z(c)&&t>c&&(t=c),t},h=e=>{p?.(f(e))},g=f(r);return(0,t.jsxs)("div",{className:(0,x.cn)("flex gap-5 items-center select-none p-4 bg-main rounded-xl",e),children:[(0,t.jsx)("span",{className:"mr-auto",children:m}),(0,t.jsx)("div",{className:(0,x.cn)("shrink-0 text-2xl rounded-full bg-primary/80 cursor-pointer ",{"cursor-not-allowed bg-fg/10":!(0,Q.isNil)(o)&&g<=o},a,s),onClick:()=>h((g??0)-l),children:(0,t.jsx)(ee.IoIosRemove,{})}),(0,t.jsx)("input",{className:(0,x.cn)("w-8 px-2 text-center min-w-4 font-bold text-lg outline-hidden ","shrink-0",i),type:"number",value:g,onChange:e=>{let t=((e,t=0)=>{try{return(0,N.toNumber)(e)}catch(e){return t}})(e.target.value),a=d?J(t):t;p?.(a),h(a)}}),(0,t.jsx)("div",{className:(0,x.cn)("shrink-0 text-2xl rounded-full bg-primary/80 cursor-pointer",{"cursor-not-allowed bg-fg/10":!(0,Q.isNil)(c)&&g>=c},a,n),onClick:()=>h((g??0)+l),children:(0,t.jsx)(ee.IoIosAdd,{})}),Z(c)&&(0,t.jsx)("div",{className:"shrink-0 text-xs font-medium cursor-pointer text-primary",onClick:()=>h(c),children:"Max"})]})}var ea=e.i(287336);function es({vc:e,onSuccess:a}){let r=(0,d.useLntVault)(e),c=r.data?.aVT??0n,[g,b]=(0,A.useSetState)({}),y=(0,v.keys)(g).filter(e=>g[e]).map(e=>BigInt(e)),j=e.chain,N=e.vault,k=(0,u.useErc721Balance)(j,e.asset,e.nftBalanceBy),T=(0,i.getTokenBy)(r.data.VT,j,{symbol:"VT"}),w=(0,i.getTokenBy)(r.data.YT,j,{symbol:"YT"}),{data:L}=(0,h.useQuery)({...(0,o.useCalcKey)(["calcLntDeposit",j,y]),initialData:0n,queryFn:async()=>0==y.length?0n:(0,p.getPC)(j).readContract({abi:s.abiQueryLNT,code:n.codeQueryLNT,functionName:"calcDeposit",args:[N,y]})}),D=async({pc:t,wc:a})=>{let n=[];return await t.readContract({abi:C.erc721Abi,address:e.asset,functionName:"isApprovedForAll",args:[a.account.address,N]})||(await Promise.all(y.map(a=>t.readContract({abi:C.erc721Abi,address:e.asset,functionName:"getApproved",args:[a]})))).forEach((t,a)=>{(0,V.isAddressEqual)(t,e.vault)||n.push({abi:C.erc721Abi,address:e.asset,functionName:"approve",args:[N,y[a]],name:`Approve #${y[a].toString()}`})}),[...n,{name:"Deposit",abi:s.abiLntVault,address:N,functionName:e.isAethir?"batchDeposit":"deposit",enabled:y.length>0,args:[y]}]};return(0,t.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5 pt-8 font-sec w-full",children:[(0,t.jsx)("div",{className:"w-full text-start font-def",children:"Licenses ID"}),(0,t.jsx)("div",{className:"w-full h-72 overflow-y-auto text-sm",children:(0,t.jsx)("div",{className:"w-full gap-2 grid grid-cols-[repeat(auto-fill,minmax(110px,1fr))]",children:k.data.map(e=>(0,t.jsxs)("div",{className:(0,x.cn)("flex rounded-xl bg-main border px-4 py-3 border-transparent gap-1 items-center justify-between cursor-pointer",{"border-primary":g[e.toString()]}),onClick:()=>{g[e.toString()]?b({[e.toString()]:!1}):y.length>=30?S.toast.error("Up to 30"):b({[e.toString()]:!0})},children:["#",e.toString(),(0,t.jsx)(B.FaCheck,{className:g[e.toString()]?"text-primary":"text-fg/20"})]},e.toString()))})}),(0,t.jsx)(K.BBtn,{className:"max-w-sm",onClick:()=>{if(y.length>=30)S.toast.error("Up to 30");else{let e={};k.data.filter(e=>!g[e.toString()]).slice(0,30-y.length).forEach(t=>{e[t]=!0}),console.info("onClickAll:",e,g,y),b(e)}},children:"Select All"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)("div",{className:"w-full",children:"Receive"}),(0,t.jsx)(U.TokenInput,{tokens:[T],loading:!1,disable:!0,amount:(0,x.fmtBn)(L,T.decimals)}),e.ytEnable&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full text-center",children:"And"}),(0,t.jsx)(U.TokenInput,{tokens:[w],loading:!1,disable:!0,amount:(0,x.fmtBn)(l.DECIMAL*BigInt(y.length),w.decimals)})]})]}),(0,t.jsxs)("div",{className:"text-sm opacity-60 text-center flex justify-between gap-5 w-full",children:[(0,t.jsx)("div",{className:"text-left",children:e.isZeroG?(0,t.jsxs)(t.Fragment,{children:["Get ",(0,f.displayBalance)(c,void 0,T.decimals)," ",T.symbol,(0,t.jsx)("br",{}),"The remaining portion will be distributed within 3 days."]}):`1 License = ${(0,f.displayBalance)(r.data?.aVT??0n,void 0,T.decimals)} ${T.symbol}`}),(0,t.jsx)("div",{children:"0%"!=e.depositFees?`Operation Fees : ${e.depositFees??"5%"}`:""})]}),(0,t.jsx)(z.ConfigChainsProvider,{chains:j,children:(0,t.jsx)(I.Txs,{tx:"Deposit",onTxSuccess:()=>{let e={};y.forEach(t=>{e[t.toString()]=!1}),b(e),(0,m.reFet)(k.key,r.key),a()},disabled:0==y.length,txs:D})})]})}function en({vc:e,onSuccess:a}){let n=(0,d.useLntVault)(e),r=e.chain,l=e.vault,o=(0,i.getTokenBy)(n.data.VT,r,{symbol:"VT"}),c=(0,i.getTokenBy)(n.data.YT,r,{symbol:"YT"}),m=(0,u.useBalance)(e.ytEnable?c:void 0),p=(0,u.useBalance)(o),h=(0,y.floor)((0,N.toNumber)((0,x.fmtBn)(m.data,c.decimals))),g=n.data?.aVT??0n,b=(0,N.toNumber)((g>0n?p.data/g:0n).toString()),v=(0,N.toNumber)((n.data?.activeDepositCount??0n).toString()),[k,T]=(0,w.useState)(0),B=e.ytEnable?(0,j.min)([h,b,v]):(0,j.min)([b,v]),A=(n.data?.aVT??0n)*BigInt(k),L=(0,d.useLntVaultWithdrawState)(e);return(0,t.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5 pt-8 font-sec",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)("div",{className:" w-full",children:"Input:"}),e.ytEnable&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.TokenInput,{tokens:[c],disable:!0,amount:k.toString()}),(0,t.jsx)("div",{className:"w-full",children:"Pair With"})]}),(0,t.jsx)(U.TokenInput,{tokens:[o],disable:!0,amount:(0,x.fmtBn)(A,o.decimals)}),(0,t.jsx)("div",{className:"mt-4 text-sm opacity-60",children:`1 License = ${(0,f.displayBalance)(n.data?.aVT??0n,void 0,o.decimals)} ${o.symbol}`}),!L.inWindow&&L.nWindow&&(0,t.jsxs)("div",{className:"text-sm opacity-60 text-center",children:["The next withdraw window is from ",(0,x.fmtDate)(1000n*L.nWindow.startTime)," to ",(0,x.fmtDate)((L.nWindow.startTime+L.nWindow.duration)*1000n),"."]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)("div",{className:"w-full",children:"Receive:"}),(0,t.jsx)(et,{title:"Licenses",min:0,max:B,value:k,onChange:T})]}),(0,t.jsx)(z.ConfigChainsProvider,{chains:r,children:(0,t.jsx)(I.Txs,{tx:"Withdraw",className:"mt-6",onTxSuccess:()=>{a()},disabled:k<=0||B<=0||k>B||A<0n||A>p.data||!L.inWindow,txs:[{abi:s.abiLntVault,address:l,functionName:e.isAethir?"batchRedeem":"redeem",args:[BigInt(k)]}]})})]})}function ei({vc:e}){let s=(0,T.useRouter)(),n=(0,d.useLntVault)(e),r=(0,d.useLntVaultLogs)(e),l="flex gap-1 font-medium text-xs shrink-0 justify-between md:justify-center md:flex-col md:text-sm",o="opacity-60 font-sec font-normal text-xs",u=(0,d.useVTTotalSupply)(e),m=(0,i.getTokenBy)(n.data?.T,e.chain,{symbol:"T"}),{remainStr:p,endTimeStr:h}=(0,d.useLntVaultTimes)(e),g=(0,c.useCurrentChain)(),b=(0,d.calcVtApy)(e,n.data,r.data);return(0,t.jsx)("div",{className:(0,x.cn)("animitem card overflow-hidden flex p-4 items-center justify-between cursor-pointer overflow-x-auto","md:p-6"),onClick:()=>(0,a.toLntVault)(s,e.vault),children:(0,t.jsxs)("div",{className:"w-full min-w-max gap-4 grid md:grid-cols-[1.8fr_1.3fr_1fr_1fr_1.2fr_.5fr_.5fr]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 shrink-0 border-r border-board",children:[(0,t.jsx)($.CoinIcon,{symbol:e.projectIcon,size:40}),(0,t.jsx)("span",{className:"text-sm font-medium font-sec",children:e.tit}),(0,t.jsx)(K.BBtn2,{className:"h-6 w-6 p-0 aspect-square text-xs ml-auto md:hidden",children:(0,t.jsx)(B.FaAngleRight,{})}),(0,t.jsx)(H.Badge,{text:"Testnet",className:(0,x.cn)("opacity-0 absolute left-0 top-0",{"opacity-100":g.testnet||e.test})})]}),(0,t.jsx)("div",{className:l,children:e.isLVT?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:o,children:"Total Locked"}),(0,t.jsx)("div",{children:(0,f.displayBalance)(u??0n,void 0,m?.decimals)})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:o,children:"Total Deposited"}),(0,t.jsx)("div",{children:(0,f.displayBalance)(n.data?.activeDepositCount??0n,0,0)})]})}),(0,t.jsxs)("div",{className:l,children:[(0,t.jsx)("div",{className:o,children:"VT Supply"}),(0,t.jsx)("div",{children:(0,f.displayBalance)(u)})]}),(0,t.jsxs)("div",{className:(0,x.cn)(l,"items-center"),children:[(0,t.jsx)("div",{className:o,children:"VT Apy"}),(0,t.jsx)("div",{children:(0,x.formatPercent)(b,2,!1)})]}),(0,t.jsxs)("div",{className:(0,x.cn)(l,"items-center"),children:[(0,t.jsx)("div",{className:o,children:"Due Date"}),n?(0,t.jsxs)("div",{className:"relative whitespace-nowrap",children:[h,(0,t.jsx)("span",{className:"opacity-60 font-light text-xs absolute top-full right-0 font-sec md:right-[unset] md:left-1/2 md:-translate-x-1/2 ",children:p})]}):"-"]}),(0,t.jsxs)("div",{className:(0,x.cn)(l,"items-center"),children:[(0,t.jsx)("div",{className:o,children:"State"}),(0,t.jsx)("div",{children:n?n.data?.closed?"Closed":"Active":"-"})]}),(0,t.jsx)("div",{className:(0,x.cn)(l,"items-center hidden md:flex border-l border-board"),children:(0,t.jsx)(K.BBtn2,{className:"h-6 w-6 p-0 aspect-square text-xs",children:(0,t.jsx)(B.FaAngleRight,{})})})]})})}function er({vc:e}){let a=(0,w.useRef)(null),s=(0,w.useRef)(null),n=(0,d.useLntVault)(e),r=(0,i.getTokenBy)(n.data.VT,e.chain,{symbol:"VT"}),l=n.data?.aVT??0n;return(0,t.jsxs)("div",{className:"flex flex-col h-full justify-between shrink-0 gap-6 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm justify-between gap-5 whitespace-nowrap",children:[(0,t.jsx)("span",{className:"font-def text-lg font-medium",children:"Total Deposited"}),(0,t.jsx)("span",{className:"opacity-50 ml-1",children:"Licenses"})]}),(0,t.jsx)("div",{className:"font-def text-xl font-bold text-center",children:(0,f.displayBalance)(n.data.activeDepositCount,0,0)}),(0,t.jsxs)("div",{className:"flex flex-col gap-5 justify-between lg:px-8 my-auto",children:[(0,t.jsx)(O.SimpleDialog,{triggerRef:a,trigger:(0,t.jsx)(K.BBtn,{className:"shrink-0",children:"Deposit"}),children:(0,t.jsx)(es,{vc:e,onSuccess:()=>a.current?.click()})}),!e.disWithdrawNFT&&(0,t.jsx)(O.SimpleDialog,{triggerRef:s,trigger:(0,t.jsx)(K.BBtn,{className:"shrink-0",children:"Withdraw"}),children:(0,t.jsx)(en,{vc:e,onSuccess:()=>s.current?.click()})}),(0,t.jsx)("div",{className:"mt-4 text-sm opacity-60 text-center",children:e.isZeroG?"1 License = 854.7 v0G(Max)":`1 License = ${(0,f.displayBalance)(l,void 0,r.decimals)} ${r.symbol}`}),e.isZeroG&&(0,t.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,t.jsx)("div",{className:"text-sm opacity-60 text-center",children:"Claimable: - v0G"}),(0,t.jsx)(I.Txs,{tx:"Claim",txs:[]})]})]})]})}function el({vc:e}){let{progress:a,remainStr:s}=(0,d.useLntVaultTimes)(e),n=(0,d.useLntVault)(e),r=(0,i.getTokenBy)(n.data.T,e.chain,{symbol:"T"}),l=(0,d.useVTTotalSupply)(e);return(0,t.jsxs)("div",{className:"animitem card flex gap-2.5 p-2.5 flex-wrap justify-center",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center md:flex-row p-2.5 pr-5 rounded-[10px] gap-5 bg-main flex-1",children:[e.isLVT?(0,t.jsx)(G.LgBoardBloom2,{className:"w-55 aspect-square flex justify-center items-center shrink-0",children:(0,t.jsx)(E.LvtNodeSvg,{disableAnim:!0,node:(0,t.jsx)($.CoinIcon,{size:"100%",symbol:e.projectIcon,className:"rounded-full border-2 border-amber-300"})})}):(0,t.jsx)(G.LgBoardBloom,{className:"w-55 aspect-square flex justify-center items-center shrink-0",children:(0,t.jsx)(E.LntNodeSvg,{disableAnim:!0,node:(0,t.jsx)($.CoinIcon,{size:"100%",symbol:e.projectIcon,className:"rounded-full border-2 border-green-300"})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 min-w-80",children:[(0,t.jsx)("div",{className:"leading-10 text-xl font-medium",children:e.tit}),(0,t.jsx)("div",{className:"opacity-60 text-sm leading-normal whitespace-pre-wrap font-sec",children:e.info}),(0,t.jsx)("div",{className:"h-px bg-board"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-2",children:["Duration ",(0,t.jsx)("span",{className:"text-xs font-sec opacity-60",children:s})]}),(0,t.jsx)(ea.ProgressBar,{progress:a})]})]})]}),(0,t.jsxs)("div",{className:"p-5 gap-5 rounded-[10px] bg-main font-sec w-full md:w-fit min-w-75",children:[(e.isFil||e.isSei)&&(0,t.jsxs)("div",{className:"flex flex-col h-full items-center justify-between shrink-0 gap-2 w-full my-auto px-5 md:gap-10",children:[(0,t.jsx)("span",{className:"font-def text-lg font-medium",children:"Total Locked"}),(0,t.jsxs)("div",{className:"font-bold font-def text-xl",children:[" ",(0,f.displayBalance)(l,void 0,r.decimals)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)(M.TokenIcon,{token:r,size:20}),r.symbol]})]}),e.isVerio&&(0,t.jsx)(Y.LVTDepositWithdrawVerio,{vc:e}),e.reppo&&(0,t.jsx)(_.LntVaultDepositReppo,{vc:e}),!e.isLVT&&!e.reppo&&(0,t.jsx)(er,{vc:e})]})]})}function eo({vc:e,type:a}){let n=(0,d.useLntVault)(e),c=(0,d.useLntVaultLogs)(e),[f,g]=(0,w.useState)(e.isIdle?"1":""),y=(0,x.parseEthers)(f),[v,j]=(0,L.useToggle)(!0),N=(0,i.getTokenBy)(n.data.T,e.chain,{symbol:"T"}),k=(0,i.getTokenBy)(n.data.VT,e.chain,{symbol:"VT"}),T=(0,i.getTokenBy)(n.data.YT,e.chain,{symbol:"YT"}),B="vt"==a?k:T,A=v?B:N,S=v?N:B,C=(0,u.useBalance)(A),D=(0,u.useBalance)(S),[P,F]=(0,w.useMemo)(()=>(0,x.uniSortTokens)([n.data.T,n.data.VT]),[n.data]),E=(0,d.useLntHookPoolkey)(e),$=(0,V.isAddressEqual)(A.address,P),{data:M,isFetching:R}=(0,h.useQuery)({...(0,o.useCalcKey)([`calcKey:swapVTYT:${a}`,f,$,e.chain,E.data,v]),initialData:0n,queryFn:async()=>{if("yt"==a)return 0n;let t=(0,p.getPC)(e.chain);return n.data&&!(y<=0n)&&E.data?(console.info("vd:",n.data),t.readContract({abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:v?"getAmountOutVTforT":"getAmountOutTforVT",args:[y]})):0n}}),_="-";c.data&&c.data.Feerate>l.DECIMAL&&(_=`${(0,x.fmtPercent)(c.data.Feerate-l.DECIMAL,18,3)}`);let Y="-",H="-",O=0,W=0;if("vt"==a){let t=(0,d.calcTPriceVT)(e,n.data,c.data);if(t>0){let a=(0,d.calcTPriceVT)(e,n.data,c.data,v?-M:y,v?y:-M);Y=v?`1 ${k.symbol} = ${(0,b.round)(1/t,2)} ${N.symbol}`:`1 ${N.symbol} = ${(0,b.round)(t,2)} ${k.symbol}`,t>0&&(H=(0,x.formatPercent)(Math.abs(a-t)/t)),console.info("SwapVT:",t,a,O=(0,d.calcVtApy)(e,n.data,c.data),W=(0,d.calcVtApy)(e,n.data,c.data,v?-M:y,v?y:-M))}}let z="vt"!=a||y<=0n||y>C.data||M<=0n||!E.data;return(0,t.jsxs)("div",{className:"flex flex-col gap-1 font-sec",children:[(0,t.jsx)(U.TokenInput,{tokens:[A],disable:e.isIdle,amount:f,setAmount:g}),(0,t.jsx)(K.Swap,{onClick:()=>j()}),(0,t.jsx)(U.TokenInput,{tokens:[S],disable:!0,checkBalance:!1,loading:R,amount:(0,x.fmtBn)(M,S.decimals),otherInfo:(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs gap-2 flex-wrap w-full text-fg",children:[(0,t.jsxs)("div",{children:["Price: ",Y]}),(0,t.jsxs)("div",{children:["Price Impact: ",H]})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs opacity-60 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"whitespace-nowrap",children:["Implied APY Change: ",(0,x.formatPercent)(O)," â†’ ",(0,x.formatPercent)(W)]}),(0,t.jsx)(q.Fees,{fees:_})]}),(0,t.jsx)(I.Txs,{className:"w-full mx-auto mt-4",tx:e.isIdle?"Coming Soon":"Swap",disabled:z||e.isIdle,txs:({wc:t})=>(0,r.encodeSingleSwap)({user:t.account.address,approveName:`Approve ${A.symbol}`,executeName:`Swap ${A.symbol} for ${S.symbol}`,chainId:e.chain,poolkey:E.data,amountIn:y,is0To1:$}),onTxSuccess:()=>{g(""),(0,m.reFet)(n.key,C.key,D.key)}})]})}function ec({vc:e,type:a}){let{address:n}=(0,P.useAccount)(),l=(0,d.useLntVault)(e),o=(0,d.useLntHookPoolkey)(e),c=(0,i.getTokenBy)(l.data.T,e.chain,{symbol:"T"}),f=(0,i.getTokenBy)(l.data.VT,e.chain,{symbol:"VT"}),b=(0,i.getTokenBy)(l.data.YT,e.chain,{symbol:"YT"}),[y,v]=(0,w.useState)(""),j=(0,x.parseEthers)(y),[N,k]=(0,w.useState)(""),T=(0,x.parseEthers)(N),B="vt"==a?f:b,A="vt"==a?(0,i.getTokenBy)(e.vtSwapHook,e.chain,{symbol:"lpTVT"}):(0,i.getTokenBy)(e.lpTYT,e.chain,{symbol:"lpTYT"}),[L,S]=(0,w.useMemo)(()=>(0,x.uniSortTokens)([l.data.T,"vt"==a?l.data.VT:l.data.YT]),[a,l.data]),F=(0,V.isAddressEqual)(L,c.address),E=(0,u.useBalance)(c),q=(0,u.useBalance)(B),[$,M]=(0,w.useState)(["calcLPAdd"]),R=(0,w.useMemo)(()=>(0,g.debounce)((e,t)=>{console.info("setCalcKey:",e,t,F),M([e,t,"calcLPAdd",F])},300),[F]),{data:[_,Y,H],isFetching:O}=(0,h.useQuery)({queryKey:$,staleTime:0,initialData:[0n,0n,0n],throwOnError:(e,t)=>(console.error(e),!1),queryFn:async({queryKey:t})=>{let n=[0n,0n,0n];if(t.length<=1)return n;let i=(0,p.getPC)(e.chain),r=t[0],l=t[1];if(console.info("calcLPAdd1:",r,l),"vt"!=a)return n;{let[t,a,o]=await Promise.all([i.readContract({abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"reserve0"}),i.readContract({abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"reserve1"}),i.readContract({abi:C.erc20Abi,address:e.vtSwapHook,functionName:"totalSupply"})]);console.info("liq0,liq1:",(0,x.fmtBn)(t),(0,x.fmtBn)(a)),n=0n==t||0n==a?[l,l,l]:r?[l*o/t,l,l*a/t]:[l*o/a,l*t/a,l]}return console.info("calcLPAdd2:",r,F,l,n),F?(v((0,x.fmtBn)(n[1],c.decimals)),k((0,x.fmtBn)(n[2],f.decimals))):(v((0,x.fmtBn)(n[2],c.decimals)),k((0,x.fmtBn)(n[1],f.decimals))),n}}),W="vt"!==a||j<=0n||j>E.data||T<=0n||T>q.data,z=O&&j>0n,K=async()=>"yt"==a?(0,r.encodeModifyLP)({chainId:e.chain,lp:e.vtSwapHook,poolkey:o.data,liquidity:_,amount0Max:Y,amount1Max:H}):(0,I.withTokenApprove)({approves:[{spender:e.vtSwapHook,token:c.address,amount:j},{spender:e.vtSwapHook,token:B.address,amount:T}],user:n,pc:(0,p.getPC)(e.chain),tx:{name:"Add Liquidity",abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"addLiquidity",args:[{amount0Desired:F?j:T,amount1Desired:F?T:j,amount0Min:0n,amount1Min:0n,deadline:(0,x.genDeadline)(),tickLower:-1e5,tickUpper:1e5,userInputSalt:(0,D.toHex)(0,{size:32})}]}});return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(U.TokenInput,{tokens:[c],amount:y,error:"",setAmount:e=>{R(F,(0,x.parseEthers)(e,c.decimals)),v(e)}}),(0,t.jsx)(U.TokenInput,{tokens:[B],amount:N,error:"",setAmount:e=>{R(!F,(0,x.parseEthers)(e,B.decimals)),k(e)}}),(0,t.jsx)("div",{children:"Receive"}),(0,t.jsx)(U.TokenInput,{tokens:[A],loading:z,disable:!0,amount:(0,x.fmtBn)(_,A.decimals)}),(0,t.jsx)(I.Txs,{className:"mx-auto mt-4",tx:"Add",disabled:W,txs:K,onTxSuccess:()=>{v(""),k(""),R(!1,0n),(0,m.reFet)(l.key,E.key,E.key)}})]})}function ed({vc:e,type:a}){let n=(0,d.useLntVault)(e),c=(0,d.useLntHookPoolkey)(e),[f,g]=(0,w.useState)(""),b=(0,x.parseEthers)(f),y=(0,i.getTokenBy)(n.data.T,e.chain,{symbol:"T"}),v=(0,i.getTokenBy)(n.data.VT,e.chain,{symbol:"VT"}),j=(0,i.getTokenBy)(n.data.YT,e.chain,{symbol:"YT"}),N="vt"==a?(0,i.getTokenBy)(e.vtSwapHook,e.chain,{symbol:"lpTVT"}):(0,i.getTokenBy)(e.lpTYT,e.chain,{symbol:"lpTYT"}),k="vt"==a?v:j,[T,B]=(0,w.useMemo)(()=>(0,x.uniSortTokens)([n.data.T,"vt"==a?n.data.VT:n.data.YT]),[a,n.data]),A=(0,V.isAddressEqual)(T,y.address),L=(0,u.useBalance)(N),S=(0,u.useTotalSupply)(N),{data:[P,F],isFetching:E}=(0,h.useQuery)({...(0,o.useCalcKey)(["calcLpRemove",e.vault,b,A]),initialData:[0n,0n],queryFn:async()=>{if(b<=0n)return[0n,0n];let t=(0,p.getPC)(e.chain);if("yt"==a)return[0n,0n];let[n,i,r]=await Promise.all([t.readContract({abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"reserve0"}),t.readContract({abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"reserve1"}),t.readContract({abi:C.erc20Abi,address:e.vtSwapHook,functionName:"totalSupply"})]);return 0n==n||0n==i?[0n,0n]:A?[b*n/r,b*i/r]:[b*i/r,b*n/r]}}),q="vt"!=a||b<=0n||b>L.data,$=S.data>0n?L.data*l.DECIMAL/S.data:0n,M=`Pool share: ${(0,x.fmtPercent)($,N.decimals,2)}`;return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(U.TokenInput,{tokens:[N],amount:f,setAmount:g,error:"",otherInfo:M}),(0,t.jsx)("div",{children:"Receive"}),(0,t.jsx)(U.TokenInput,{tokens:[y],loading:E&&b>0n,disable:!0,amount:(0,x.fmtBn)(P,y.decimals)}),(0,t.jsx)(U.TokenInput,{tokens:[k],loading:E&&b>0n,disable:!0,amount:(0,x.fmtBn)(F,k.decimals)}),(0,t.jsx)(I.Txs,{className:"mx-auto mt-4",tx:"Remove",disabled:q,txs:()=>"yt"==a?(0,r.encodeModifyLP)({chainId:e.chain,poolkey:c.data,lp:e.vtSwapHook,liquidity:-b}):[{name:"Remove Liquidity",abi:s.abiLntVTSwapHook,address:e.vtSwapHook,functionName:"removeLiquidity",args:[{liquidity:b,amount0Min:0n,amount1Min:0n,deadline:(0,x.genDeadline)(),tickLower:-1e5,tickUpper:1e5,userInputSalt:(0,D.toHex)(0,{size:32})}]}],onTxSuccess:()=>{g(""),(0,m.reFet)(n.key,L.key)}})]})}function eu({vc:e}){let a=(0,d.useLntVault)(e),s=(0,d.useLntVaultLogs)(e),n=(0,d.calcVtApy)(e,a.data,s.data),r=(0,i.getTokenBy)(a.data.VT,e.chain,{symbol:"VT"}),l=(0,i.getTokenBy)(a.data.T,e.chain,{symbol:"T"}),{data:o}=(0,F.useWalletClient)(),c=(0,d.useVTTotalSupply)(e);return(0,T.useRouter)(),(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,t.jsxs)("div",{className:"animitem card p-0! overflow-hidden w-full font-sec",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-4 relative",children:[(0,t.jsx)(M.TokenIcon,{size:48,token:r}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-lg font-def leading-6 text-black font-semibold",children:r.symbol}),(0,t.jsxs)("div",{className:"text-xs leading-none text-black/60 font-medium font-sec",children:["1 ",r.symbol," is equal to 1 ",l.symbol," at maturity"]})]})]}),(0,t.jsxs)("div",{className:"flex whitespace-nowrap flex-wrap items-baseline justify-between px-2.5 pt-2 gap-2.5 font-sec",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-2.5 items-baseline",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-60",children:"APY Est."}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:(0,x.formatPercent)(n)})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2.5 items-baseline",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-60",children:"Total Supply"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:(0,f.displayBalance)(c,void 0,r.decimals)})]})]}),(0,t.jsx)("div",{className:"flex px-2 pb-4",children:(0,t.jsx)("button",{className:"btn-link ml-auto text-primary text-xs underline-offset-2 font-sec",onClick:()=>{o?.watchAsset({type:"ERC20",options:r}).catch(x.handleError)},children:"Add to wallet"})})]}),e.vtActive?(0,t.jsx)(W.SimpleTabs,{className:"animitem",listClassName:"p-0 gap-3 mb-4",triggerClassName:'text-base font-sec leading-none rounded-[10px] px-4 py-2 bg-card data-[state="active"]:bg-primary/20',data:[{tab:"Swap",content:(0,t.jsx)(eo,{vc:e,type:"vt"})},{tab:"Add Liquidity",content:(0,t.jsx)(ec,{vc:e,type:"vt"})},{tab:"Remove Liquidity",content:(0,t.jsx)(ed,{vc:e,type:"vt"})}]}):(0,t.jsx)("div",{className:"animitem w-full py-[150px] text-center text-base font-semibold",children:"Swap Coming Soon"})]})}function em({vc:e}){let{data:a}=(0,F.useWalletClient)(),s=(0,d.useLntVault)(e),n=(0,i.getTokenBy)(s.data.YT,e.chain,{symbol:"YT"}),r=(0,i.getTokenBy)(s.data.T,e.chain,{symbol:"T"});return(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,t.jsxs)("div",{className:"animitem card p-0! overflow-hidden w-full",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,t.jsx)(M.TokenIcon,{size:48,token:n}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-xl leading-6 text-black font-semibold",children:n.symbol}),(0,t.jsxs)("div",{className:"text-xs leading-none text-black/60 font-medium",children:["1 ",n.symbol," is equal to 1 ",r.symbol," at maturity"]})]})]}),(0,t.jsxs)("div",{className:"flex whitespace-nowrap items-baseline justify-between px-2.5 pt-2 gap-2.5",children:[(0,t.jsx)("div",{className:"text-lg font-medium",children:(0,x.formatPercent)(1)}),(0,t.jsx)("div",{className:"text-xs font-semibold opacity-60",children:"Fixed APY"}),(0,t.jsx)("div",{className:"text-xs font-semibold opacity-60 ml-auto",children:"Circulation amount"}),(0,t.jsx)("div",{className:"text-lg font-medium",children:(0,f.displayBalance)(0n)})]}),(0,t.jsx)("div",{className:"flex px-2 pb-4",children:(0,t.jsx)("button",{className:"btn-link ml-auto text-primary text-xs underline-offset-2",onClick:()=>{a?.watchAsset({type:"ERC20",options:n}).catch(x.handleError)},children:"Add to wallet"})})]}),(0,t.jsx)("div",{className:"animitem card p-4!",children:(0,t.jsx)(W.SimpleTabs,{listClassName:"p-0 gap-6 mb-4",triggerClassName:"text-base leading-none",data:[{tab:"Swap",content:(0,t.jsx)(eo,{vc:e,type:"yt"})},{tab:"Add Liquidity",content:(0,t.jsx)(ec,{vc:e,type:"yt"})},{tab:"Remove Liquidity",content:(0,t.jsx)(ed,{vc:e,type:"yt"})}]})})]})}function ex({vc:e,tab:s}){let n=(0,T.useRouter)(),r=(0,d.useLntVault)(e);(0,i.getTokenBy)(r.data.VT,e.chain,{symbol:"VT"});let l=[{tab:"Vesting Token",content:(0,t.jsx)(eu,{vc:e})},...e.ytEnable?[{tab:"Yield Token",content:(0,t.jsx)(em,{vc:e})}]:[],...e.buyback?[{tab:"Put Option",content:(0,t.jsx)(R.LntVaultBuyback,{vc:e})}]:[]],o=l.find(e=>(0,x.tabToSearchParams)(e.tab)===s)?.tab;return(0,t.jsx)("div",{className:"animitem card not-dark:bg-main md:min-h-177",children:(0,t.jsx)(W.SimpleTabs,{currentTab:o,onTabChange:t=>(0,a.toLntVault)(n,e.vault,t),listClassName:"p-0 gap-4 mb-4 w-full",triggerClassName:e=>'text-lg leading-none data-[state="active"]:underline underline-offset-8',data:l})})}function ep({vc:e}){return(0,t.jsxs)("div",{className:"font-sec flex justify-end items-center gap-5 text-xs lg:gap-10 lg:text-sm ",children:[(0,t.jsxs)(k.default,{href:"https://youtu.be/mK2ZBujbuR4",target:"_blank",className:"flex items-center gap-2 underline underline-offset-2",children:[(0,t.jsx)(B.FaYoutube,{className:"text-[1.5em] text-red-500"}),"Tutorial"]}),(0,t.jsxs)(k.default,{href:"https://opensea.io/collection/aethir-checker-license",target:"_blank",className:"flex items-center gap-2 underline underline-offset-2",children:[(0,t.jsx)($.CoinIcon,{symbol:"Opensea",size:"1.5em",className:"object-contain"}),"Buy Node on Opensea"]})]})}var ef=e.i(875219),eh=e.i(751755),eg=e.i(599457),eb=e.i(392861);function ey({className:e,itemClassname:a,currentPage:s=1,pages:n=0,onPageChange:i}){if(n<2)return null;let r=[];for(let e=0;e<n;e++)e>=1&&e<=s-1-2-1&&s>=6||e>=s-1+2+1&&e<=n-2&&s<=n-1-2-2?"..."!==r[r.length-1]&&r.push("..."):r.push(e+1);return(0,t.jsx)("div",{className:(0,x.cn)("flex items-center justify-center gap-1",e),children:r.map((e,n)=>(0,t.jsx)("div",{className:(0,x.cn)("text-sm w-9 h-9 flex items-center justify-center rounded-lg bg-primary/10",{"bg-primary text-white":e==s},{"hover:bg-primary/30":e!=s&&"number"==typeof e},{"cursor-pointer":"number"==typeof e},a),onClick:()=>{s!==e&&"number"==typeof e&&i?.(e)},children:e},"pageitem_"+n))})}function ev({vc:e}){let a=(0,w.useRef)(0),s=function(e,t=20){let[a,s]=(0,w.useState)(1);return(0,w.useMemo)(()=>({pages:Math.ceil(e/t),currentPage:a,onPageChange:e=>s(e)}),[a,e,t])}(a.current,20),n=(0,m.useFet)({key:`LntVaultActivity:${e.vault}:${s.currentPage}`,initResult:{items:[],total:0},fetfn:async()=>(0,ef.getLntVaultActivityPage)(e.chain,e.vault,s.currentPage,20).then(e=>(a.current=e.total,e))});return(0,t.jsxs)("div",{className:"flex flex-col gap-4 card",children:[(0,t.jsx)("div",{className:"animitem font-medium text-lg leading-none",children:"Activity"}),(0,t.jsxs)("div",{className:"animitem card bg-main overflow-x-auto font-sec",children:[(0,m.isLoading)(n)&&(0,t.jsx)("div",{className:"flex justify-center items-center pt-10 w-full h-[765px]",children:(0,t.jsx)(eb.Spinner,{})}),(0,m.isSuccess)(n)&&(0,t.jsx)(eg.default,{header:["License ID","Activity","From/To","Time"],data:n.data.items.map(a=>[`#${a.tokenId}`,(0,t.jsx)("div",{className:"Deposit"==a.type?"text-green-500":"text-red-500",children:"Deposit"==a.type?a.type:"Withdraw"},"action"),`${(0,x.shortStr)(a.user)}`,(0,t.jsx)(k.default,{target:"_blank",href:`${(0,eh.getChain)(e.chain).blockExplorers?.default.url}/tx/${a.tx}`,className:"underline underline-offset-2",children:(0,x.fmtDate)(new Date(a.block_time).getTime(),x.FMT.ALL)},"time")])}),(0,t.jsx)(ey,{...s})]})]})}e.i(711581);var ej=e.i(392978),eN=e.i(280924),ek=e.i(570963),eT=e.i(62870),ew=e.i(729188);let eB=(e,t=18)=>(0,b.round)(parseFloat((0,ek.formatUnits)(BigInt(e),t)),5);function eA({tit:e,types:a,vc:s,data:n,yFormater:i}){let[r,l]=(0,w.useState)(a[0]),[o,c]=(0,L.useToggle)(!0),{options:d}=(0,w.useMemo)(()=>({options:{textStyle:{fontFamily:"Parkinsans"},title:{show:!1},animation:!0,animationDuration:200,tooltip:{trigger:"axis",backgroundColor:"#4B4F52",borderWidth:0,textStyle:{color:"#fff"},valueFormatter:i},grid:{left:0,top:0,right:0,bottom:0,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1},axisLabel:{color:"#999"}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>(e.max-e.min)*.1+e.max,min:e=>e.min-(e.max-e.min)*.1,axisLabel:{formatter:i,showMinLabel:!1,showMaxLabel:!1,color:"#999"}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:r,type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new ej.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(30, 202, 83, 0.26)"},{offset:1,color:"rgba(30, 202, 83, 0.07)"}])},data:n}]}}),[o,r,n]);return(0,t.jsxs)("div",{className:"card not-dark:bg-main w-full flex-1 p-2.5 flex flex-col justify-between gap-2 items-center",children:[(0,t.jsxs)("div",{className:"flex w-full justify-between gap-2 items-center",children:[(0,t.jsxs)("span",{className:"text-base font-medium",children:[e," Chart"]}),a.length>1&&(0,t.jsx)(eT.SimpleSelect,{className:"text-sm",options:a,onChange:e=>l(e)})]}),(0,t.jsx)(ew.default,{option:d,className:"w-full",style:{height:240}})]})}function eL({vc:e}){let a=Math.round((0,eN.now)()/1e3),s=Math.round(a-7776e3),n=(0,m.useFet)({key:`LntVaultVTChartData:${e.vault}`,initResult:[],fetfn:async()=>(0,ef.getLntVaultVTPriceApy)(e.chain,e.vault,s,a)}),i=n.data.map(e=>[(0,x.fmtDate)(1e3*e.time,x.FMT.ALL3),(eB(e.apy)+1)**2-1]),r=n.data.map(e=>[(0,x.fmtDate)(1e3*e.time,x.FMT.ALL3),eB(e.price)]);return(0,t.jsxs)("div",{className:"animitem max-w-4xl w-full min-w-0 flex flex-col gap-5 shrink-0",children:[(0,t.jsx)(eA,{tit:"APY",types:e.ytEnable?["YT APY","VT APY"]:["VT APY"],vc:e,data:i,yFormater:e=>(0,x.formatPercent)(e,2,!1)}),(0,t.jsx)(eA,{tit:"Price",types:e.ytEnable?["YT Price","VT Price"]:["VT Price"],vc:e,data:r})]})}var eS=e.i(553071);let eC=["Deposit","Withdraw"];function eV({vc:e}){let a=(0,i.getTokenBy)(e.marginAccount.input,e.chain,{symbol:"MT"}),[n,r]=(0,w.useState)(eC[0]),[l,o]=(0,w.useState)(""),c=(0,x.parseEthers)(l,a.decimals),{address:d}=(0,P.useAccount)(),m=(0,u.useBalance)(a),{data:f}=(0,h.useQuery)({queryKey:["queryMarginAccountStatked",d],enabled:!!d,staleTime:6e4,refetchOnMount:"always",queryFn:async()=>(0,p.getPC)(e.chain).readContract({abi:s.abi0GMarginAccount,address:e.marginAccount.margin,functionName:"userStakeAmount",args:[d]})}),{data:g}=(0,h.useQuery)({queryKey:["queryMarginAccountWithdrawTime"],staleTime:36e5,refetchOnMount:"always",queryFn:async()=>(0,p.getPC)(e.chain).readContract({abi:s.abi0GMarginAccount,address:e.marginAccount.margin,functionName:"unstakeStartTime"})}),b=f??0n;return(0,t.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5 font-sec",children:[(0,t.jsx)("div",{className:"flex items-center gap-5 mr-auto",children:eC.map(e=>(0,t.jsx)("div",{className:(0,x.cn)("cursor-pointer underline-offset-4",{underline:n===e}),onClick:()=>{n!==e&&(o(""),r(e))},children:e},e))}),(0,t.jsx)(U.TokenInput,{tokens:[a],amount:l,setAmount:o,balance:"Deposit"==n?void 0:b,balanceTit:"Deposit"==n?void 0:"Deposited"}),"Deposit"==n&&(0,t.jsxs)("div",{className:"text-xs text-fg/60 text-center w-full",children:["Deposit a margin deposit to ensure redemption at maturity. Please note that once deposited, ",(0,t.jsx)("strong",{className:"text-fg",children:"withdrawal is only possible after two months."})]}),"Withdraw"==n&&(0,t.jsxs)("div",{className:"text-xs text-fg/60 text-center w-full",children:["Withdrawal availability date ",(0,t.jsx)("strong",{className:"text-fg",children:(0,Q.isNil)(g)?"-":(0,x.fmtDate)(1000n*g,x.FMT.ALL3)})]}),(0,t.jsx)(I.Txs,{tx:n,disabled:c<=0n||"Deposit"==n&&c>m.data||"Withdraw"==n&&c>b||(0,x.nowUnix)()<(g??9999999999999999n),txs:[{abi:s.abi0GMarginAccount,address:e.marginAccount.margin,functionName:"stake",value:c}]})]})}function eD({vc:e}){return(0,t.jsxs)("div",{className:"font-sec flex justify-end items-center gap-5 text-xs lg:gap-10 lg:text-sm ",children:[e.marginAccount&&(0,t.jsx)(O.SimpleDialog,{trigger:(0,t.jsx)(K.BBtn,{className:"whitespace-nowrap text-xs h-8",children:"Margin Account"}),children:(0,t.jsx)(eV,{vc:e})}),(0,t.jsx)(I.Txs,{tx:"Approve for ALL",className:"whitespace-nowrap text-xs h-8",txs:[{abi:C.erc721Abi,address:e.asset,functionName:"setApprovalForAll",args:[e.vault,!0]}]})]})}var eP=e.i(833957),eF=e.i(775750);function eE({vc:e,tab:a}){let s=(0,d.useLntVault)(e),n=(0,T.useRouter)();return(0,t.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,m.isError)(s)&&"Opps! Network Error!",(0,m.isLoading)(s)&&(0,t.jsx)(eb.Spinner,{className:"mt-10 mx-auto text-black dark:text-white"}),(0,m.isSuccess)(s)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap w-full justify-between gap-5 items-center",children:[(0,t.jsxs)(K.BBtn2,{className:"w-fit gap-0.5 text-xs whitespace-nowrap",onClick:()=>n.push(e.isLVT?"/lvt":"/lnt"),children:[(0,t.jsx)(B.FaAngleLeft,{})," ",e.isLVT?"LVT-Vault":"LNT-Vault"]}),e.reppo&&(0,t.jsxs)(K.BBtn2,{className:"w-fit gap-0.5 text-xs",onClick:()=>n.push("/lnt/pre-deposit"),children:[" ","Pre Deposit"]}),e.isAethir&&(0,t.jsx)(ep,{vc:e}),e.isZeroG&&(0,t.jsx)(eD,{vc:e})]}),(0,t.jsx)(el,{vc:e}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_1fr] gap-4",children:[(0,t.jsx)(eL,{vc:e}),(0,t.jsx)(ex,{vc:e,tab:a})]}),(0,t.jsx)(eS.LntMyPositions,{vc:e}),e.isAethir&&(0,t.jsx)(ev,{vc:e})]})]})}let eI="LNT (Liquid Node Token) Vault is a decentralized protocol designed to facilitate the issuance and management of node-based assets through Non-Fungible Tokens (NFTs) and derivative financial instruments.",eq="LVT (Liquid Vesting Token) Vault is a smart new way to make locked-up tokens in crypto projects tradeable right away, without breaking the rules or the project's long-term plans.";function e$({type:e="lnt"}){let a=eF.LNTVAULTS_CONFIG.filter(t=>{let a=!t.onEnv||t.onEnv.includes(l.ENV),s=(t.isLVT?"lvt":"lnt")==e;return a&&s}),s=(0,T.useSearchParams)(),n=s.get("vault"),i=s.get("tab"),r=a.find(e=>e.vault==n);return(0,t.jsx)(eP.PageWrap,{style:{backgroundPositionX:"center"},className:(0,x.cn)({"bg-[url(/bg_lnt.svg)] bg-cover bg-no-repeat":!r}),children:(0,t.jsx)("div",{className:(0,x.cn)("w-full px-4 relative"),children:r?(0,t.jsx)(z.ConfigChainsProvider,{chains:r.chain,children:(0,t.jsx)(eE,{vc:r,tab:i})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"page-title",children:[e.toUpperCase(),"-Vaults"]}),(0,t.jsxs)("div",{className:"font-sec mx-auto mt-4 text-center text-fg/60 flex flex-col gap-5 px-4 md:max-w-250 md:px-10 md:block",children:["lnt"==e?eI:eq,(0,t.jsx)(k.default,{href:`https://docs.zoofi.io/${e}-vault/background`,target:"_blank",className:"text-fg underline underline-offset-2 ml-5",children:"Learn More>"})]}),(0,t.jsx)("div",{className:"flex flex-col gap-5 mt-4 md:mt-8",children:a.map((e,a)=>(0,t.jsx)(z.ConfigChainsProvider,{chains:e.chain,children:(0,t.jsx)(ei,{vc:e})},`group_vault_item_${a}`))})]})})})}e.s(["default",()=>e$,"lntDesc",0,eI,"lvtDesc",0,eq],889886)}]);