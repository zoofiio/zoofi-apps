(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2773],{79391:function(){},6859:function(e,t,n){"use strict";n.d(t,{C:function(){return Providers}});var l=n(31113),a=n(64103),s=n(73216),r=n(3178),i=n(88058),o=n(95657),c=n(79756),u=n(56980),d=n(97370),p=n(57148),m=n(72009),h=n(1589),x=n(29744),g=n(24103),f=n(71822),v=n(8887),S=n(45066),b=n(11522),I=n(45248),k=n(99946),w=n(12045),j=n(19757),B=n(22139),T=n(59175),C=n(25233),y=n(87958),N=n(41340),P=n(55349),V=n(33737),M=n(93108);let A=(0,M.Ue)(e=>({update:e}));var D=n(26361),Z=n(64370),R=n(18358);let Y=(0,D.Yb)({vaultMode:0,discountEnable:!1},0n);(0,D.Yb)({},0n);let E=(0,a.createContext)({prices:(0,D.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=e=>{let{children:t}=e;(0,R.d6)();let n=(0,T.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,C.m)({chainId:e});a.useMemo(()=>(t&&(s.ON.provider=function(e){var t,n;let{chain:l,transport:a}=e,s={chainId:l.id,name:l.name,ensAddress:null===(n=l.contracts)||void 0===n?void 0:null===(t=n.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===a.type?new y.H(a.transports.map(e=>{let{value:t}=e;return new N.r(null==t?void 0:t.url,s)})):new N.r(a.url,s)}(t)),s.ON.provider),[t])}();let r=function(e){let t=(0,T.p)(),n=(0,a.useRef)({});return(0,a.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}(()=>(0,D.Yb)({[j.O1[n]]:B.Pq},0n));!function(e){var t;let n=(0,P.o)(e=>e.sliceLVaultsStore.lvaults),l=(0,P.o)(e=>e.sliceTokenStore.totalSupply),a=(0,T.p)();null===(t=j.iK[a])||void 0===t||t.forEach(t=>{let s=n[t.vault]||Y,r=s.assetBalance,i=s.latestPrice,o=s.usbTotalSupply,c=l[t.xTokenAddress]||0n,u=c>0n&&r>0n&&i>0n&&o>0n&&r*i>o*B.Pq?(r*i-o*B.Pq)/c:0n;e[t.xTokenAddress]=u,e[t.assetTokenAddress]=i,c>0n&&r>0n&&i>0n&&o>0n&&r*i<o*B.Pq&&(e[j.O1[a]]=r*i/o)})}(r);let i=function(){var e;let t=(0,T.p)(),n=(0,P.o)(e=>e.sliceLVaultsStore.lvaults),l=0,a=0n,s=0n;return null===(e=j.iK[t])||void 0===e||e.forEach(e=>{let t=n[e.vault]||Y;t.isStable?(a+=t.M_USB_USDC*t.Y*t.aar/10n**t.AARDecimals,s+=t.M_USB_USDC,t.M_USB_USDC>0n&&t.Y>0n&&l++):(a+=t.M_USB_ETH*t.Y,s+=t.M_USB_ETH,t.M_USB_ETH>0n&&t.Y>0n&&l++)}),{apr:s>0n?a/s:0n,aprDecimals:10}}();return!function(e){let t=(0,T.p)(),n=j.iK[t]||[],l=(0,P.o)(e=>e.sliceLVaultsStore.lvaults,["sliceLVaultsStore.lvaults"]);(0,a.useEffect)(()=>{console.info("updatePtypoolApy"),null==n||n.forEach(n=>{let a=l[n.vault];if(n.ptyPoolAboveAddress&&a&&a.sellPoolTotalStaking&&A.getState().update({[n.ptyPoolAboveAddress]:{staking:(0,V.v)("0.025",10),matching:0n}}),n.ptyPoolBelowAddress&&a&&a.buyPoolTotalStaking&&!a.isStable){let l=a&&a.sellPoolTotalStaking*e[j.O1[t]],s=l>0n&&a.settingsDecimals>0n?a.M_ETHx*a.Y*e[n.xTokenAddress]*B.Pq/2n/l/a.settingsDecimals**10n:0n;A.getState().update({[n.ptyPoolBelowAddress]:{staking:s*10n**10n/B.Pq,matching:0n}})}})},[n,l,e,t])}(r),(0,Z.a)({queryKey:["updateDefTokenList",n],staleTime:36e5,queryFn:async()=>(await P.w.getState().sliceTokenStore.updateDefTokenList(n),!0)}),(0,l.jsx)(E.Provider,{value:{prices:r,usbApr:i},children:t})};var H=n(85895),z=n(8912),U=n(7915),W=n(32417),L=n(83037),G=n(26276),_=n(9793),q=n(60463);BigInt.prototype.toJSON=function(){return this.toString()};let Q=new H.f({uri:"https://api.studio.thegraph.com/query/45897/wand/version/latest",cache:new z.h}),F=new W.S({defaultOptions:{queries:{retry:3}}});function Providers(e){let{children:t,supportChains:n=[q.R]}=e,[j,B]=a.useState();a.useEffect(()=>{let e=(0,v.o)({storage:{getItem:e=>window.localStorage.getItem(e),removeItem:e=>window.localStorage.removeItem(e),setItem:(e,t)=>{"wagmi.cache"!==e&&localStorage.setItem(e,t)}}}),t=(0,r.a3)([{groupName:"Recommended",wallets:[c.U,u.P,d.D,p.b,m.c,h.X,x.J,g.b,f.D]}],{appName:"ZooFi",projectId:"abf1f323cd9ff9f6a27167188d993168"});B((0,S._)({connectors:t,storage:e,chains:n,client:e=>{let{chain:t}=e;return(0,G.e)({chain:t,transport:(0,_.d)(void 0,{batch:s.Xp}),batch:{multicall:s.y1}})}}))},[]);let T=(0,w.l)(e=>e.theme);return j?(0,l.jsx)(U.e,{client:Q,children:(0,l.jsx)(b.F,{config:j,children:(0,l.jsx)(L.aH,{client:F,children:(0,l.jsx)(k.QueryParamProvider,{adapter:I.Z,children:(0,l.jsx)(r.pj,{locale:"en-US",modalSize:"compact",theme:"dark"===T?(0,i.$)({accentColor:"green"}):(0,o.W)(),children:(0,l.jsx)(FetcherProvider,{children:t})})})})})}):null}},30067:function(e,t,n){"use strict";n.d(t,{h4:function(){return Header}});var l=n(31113),a=n(73216),s=n(22139);n(66499),n(87031);var r=n(26758);n(95889),n(19757);var i=n(44769),o=n(59175);n(15506);var c=n(3168),u=n(3178),d=n(33501),p=n(41690),m=n.n(p),h=n(42487),x=n.n(h),g=n(69708),f=n(64103),v=n(36847),S=n(44726),b=n(51186),I=n(96670),k=n(57728),w=n(60689);function ConnectBtn(){let e=(0,S.Z)(1024),{isConnected:t}=(0,I.m)(),n=(0,u.We)();return t?(0,l.jsx)(u.NL,{chainStatus:e.width>600?"full":"icon",showBalance:!1}):(0,l.jsx)(w.k,{className:"mt-0 w-fit",onClick:()=>{var e;return null===(e=n.openConnectModal)||void 0===e?void 0:e.call(n)},children:(0,l.jsx)("span",{className:"font-medium text-sm whitespace-nowrap",children:"Connect Wallet"})})}var j=n(95702),B=n(12045),T=n(6371);let C={[a.BG.id]:"".concat(r.G,"/berachain.svg"),[a.On.id]:"".concat(r.G,"/berachain.svg"),[a.ue.id]:"".concat(r.G,"/BaseNetwork.png"),[b.F.id]:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSIyOCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzI1MjkyRSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQgMjhhMTQgMTQgMCAxIDAgMC0yOCAxNCAxNCAwIDAgMCAwIDI4WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0idXJsKCNhKSIgZmlsbC1vcGFjaXR5PSIuMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQgMjhhMTQgMTQgMCAxIDAgMC0yOCAxNCAxNCAwIDAgMCAwIDI4WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0idXJsKCNiKSIgZD0iTTguMTkgMTQuNzcgMTQgMTguMjFsNS44LTMuNDQtNS44IDguMTktNS44MS04LjE5WiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Im0xNCAxNi45My01LjgxLTMuNDRMMTQgNC4zNGw1LjgxIDkuMTVMMTQgMTYuOTNaIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMCIgeDI9IjE0IiB5MT0iMCIgeTI9IjI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIxNCIgeDI9IjE0IiB5MT0iMTQuNzciIHkyPSIyMi45NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjkiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4K"},isActiveLink=(e,t)=>{var n;return e===t.href||e.split("/").length>t.href.split("/").length&&e.startsWith(t.href)||(null!==(n=t.hrefs)&&void 0!==n?n:[]).includes(e)};function Header(e){let{links:t}=e,n=(0,g.usePathname)(),{width:r}=(0,S.Z)(window.innerWidth,window.innerHeight),p=(0,o.p)(),{openChainModal:h}=(0,u.iC)(),{chain:b,address:w}=(0,I.m)(),{chains:y}=(0,k.Z)(),N=a.Af.find(e=>e.id===p),P=!b||-1==a.Af.findIndex(e=>e.id==b.id)||y.length<=1,V=(0,f.useMemo)(()=>[{name:"doc",url:(0,s.xb)(),icon:v.K99},{name:"Twitter",url:s.v,icon:v.J6q},{name:"Discord",url:s.Hj,icon:v.HpO}],[i.Kh.value]);return(0,l.jsx)("div",{className:"h-[72px] fixed w-full flex bg-slate-50/30 backdrop-blur-lg dark:text-slate-50 dark:bg-slate-900/30 z-30",children:(0,l.jsxs)("header",{className:"h-[72px] w-full max-w-[1300px] inset-0 mx-auto flex items-center justify-between px-4   z-30 ml-[calc(100vw - 100%)] ",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(x(),{href:"/",className:"font-semibold flex pr-1 items-center text-base leading-7",children:(0,l.jsx)(j.cL,{symbol:"logo-alt",size:90})}),(0,l.jsxs)(c.fC,{children:[(0,l.jsxs)(c.xz,{className:(0,d.Z)("flex text-slate-500 dark:text-slate-50 font-medium items-center capitalize text-sm whitespace-nowrap",{hidden:!(r<1024)}),children:[n.split("/")[1],(0,l.jsx)(v.YRR,{})]}),(0,l.jsx)(c.Uv,{children:(0,l.jsx)(c.VY,{className:"z-50 bg-white p-1 border border-slate-200 shadow-lg rounded-md dark:bg-gray-800 dark:border-gray-700",children:t.map(e=>{let{href:t,label:n,icon:a,disable:s}=e;return(0,l.jsx)(c.ck,{children:s?(0,l.jsx)(T.C,{node:(0,l.jsxs)(x(),{className:"flex items-center text-slate-500 text-sm font-medium gap-1 px-3 py-2 rounded-sm hover:bg-slate-50 dark:text-slate-50 dark:hover:bg-gray-700/30",href:"javascript:void(0);",children:[(0,l.jsx)(a,{}),n]}),children:"Coming Soon"}):(0,l.jsxs)(x(),{className:"flex items-center text-slate-500 text-sm font-medium gap-1 px-3 py-2 rounded-sm hover:bg-slate-50 dark:text-slate-50 dark:hover:bg-gray-700/30",href:t,children:[(0,l.jsx)(a,{}),n]})},n)})})})]})]}),(0,l.jsx)("div",{className:"hidden lg:flex flex-1 px-5 items-center gap-10",children:t.map(e=>{let{href:t,label:a,icon:s,disable:r}=e,i=isActiveLink(n,e);return r?(0,l.jsx)(T.C,{node:(0,l.jsxs)(x(),{className:"text-sm font-medium flex gap-1 items-center transition-all active:translate-y-1 text-slate-700 dark:text-slate-50 opacity-50",href:"javascript:void(0);",children:[(0,l.jsx)(s,{}),a]}),children:"Coming Soon"},a):(0,l.jsxs)(x(),{className:(0,d.Z)("text-sm font-medium flex gap-1 items-center transition-all active:translate-y-1",i?"text-slate-700 dark:text-slate-50":"text-slate-500 dark:text-slate-50/50"),href:i?"javascript:void(0);":t,children:[(0,l.jsx)(s,{}),a]},t)})}),(0,l.jsxs)("div",{className:"flex items-center gap-1 md:gap-4",children:[(0,l.jsx)(B.h,{}),(0,l.jsx)("div",{className:"hidden lg:flex items-center gap-3",children:V.map(e=>{let{url:t,icon:n,name:a}=e;return(0,l.jsx)(x(),{href:t,className:"text-slate-300 hover:text-primary",children:(0,l.jsx)(n,{})},a)})}),P&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-50 font-medium rounded-full cursor-pointer",onClick:()=>h&&h(),children:[(0,l.jsx)(m(),{width:24,height:24,src:C[p],alt:""}),(0,l.jsx)("div",{className:"hidden sm:block",children:N.name})]}),(0,l.jsx)(ConnectBtn,{})]})]})})}},6371:function(e,t,n){"use strict";n.d(t,{C:function(){return Tip}});var l=n(31113),a=n(26361),s=n(52653),r=n(55966);function Tip(e){let{children:t,node:n,className:i,inFlex:o}=e,c=document.getElementById("tooltip-root");return t?(0,l.jsx)(s.zt,{children:(0,l.jsxs)(s.fC,{children:[(0,l.jsx)(s.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:n?(0,l.jsx)("div",{className:(0,a.cn)("inline-block cursor-default",i),style:{verticalAlign:"text-bottom"},children:n}):(0,l.jsx)("div",{className:(0,a.cn)(o?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",i),children:(0,l.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,l.jsx)(s.h_,{container:c,children:(0,l.jsxs)(s.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,l.jsx)(s.Eh,{})]})})]})}):n}},15506:function(e,t,n){"use strict";n.d(t,{D2:function(){return useWandContractRead}}),n(78403);var l=n(83978),a=n.n(l);n(64103);var s=n(30308),r=n(93108);let i=(0,r.Ue)(e=>({time:a().now(),update:()=>{e({time:a().now()})}}));function useWandContractRead(e){let{time:t}=i();return(0,s.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},18358:function(e,t,n){"use strict";n.d(t,{Pd:function(){return calcLPPrice},R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},nr:function(){return useBVault},oU:function(){return useBVaultApy},v7:function(){return useBVaultBoost}});var l=n(22139),a=n(59175),s=n(26361),r=n(84944),i=n(83978),o=n.n(i),c=n(64103),u=n(96670),d=n(55349),p=n(44020);function useResetBVaultsData(){let e=(0,a.p)(),{address:t}=(0,u.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{d.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,d.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,s.Yb)({current:(0,s.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,d.o)(t=>{let n=t.sliceBVaultsStore.bvaults[e];if(!n||n.epochCount<=0n)return[];let l=o().range(1,parseInt((n.epochCount+1n).toString())).reverse(),a=t.sliceBVaultsStore.epoches;return l.map(t=>a["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),n=(0,d.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=n.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,s.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,n])}function useCalcClaimable(e){let t=useEpochesData(e),n=useBVault(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance>10n&&(e.settled||n.closed));return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t,n.closed])}function useBVaultBoost(e){let t=(0,d.o)(()=>(function(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e],a=(null==n?void 0:n.current.vaultYTokenBalance)||0n,s=(null==n?void 0:n.Y)||0n,i=s>0n?a*l.Pq/s:0n,o=(null==n?void 0:n.current.yTokenAmountForSwapYT)||0n,c=(null==n?void 0:n.lockedAssetTotal)||0n,u=o>0n?c*l.Pq/o:0n;return console.info("calcBootst:",(0,r.d)(i),(0,r.d)(u)),i})(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,r.d)(t,0),t]}function useBVaultApy(e){let t=(0,d.o)(()=>(function(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e.vault],a=function(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e.vault],l=(0,s.ok)(t.sliceBVaultsStore.yTokenSythetic,[e.vault]);return 0n==l&&(l=(0,s.ok)(t.sliceTokenStore.totalSupply,e.pToken)*((null==n?void 0:n.current.duration)||0n)),l}(e),r=0n;return r=e.pTokenV2?n&&n.ptRebaseRate&&n.pTokenTotal?n.ptRebaseRate/l.Pq*l.SH*BigInt(1e10)/n.pTokenTotal/l.Pq:0n:n&&n.current.assetTotalSwapAmount&&a?n.current.assetTotalSwapAmount*l.SH*BigInt(1e10)/a:0n,console.info("apy:",e.vault,r,e.pTokenV2,null==n?void 0:n.ptRebaseRate,null==n?void 0:n.pTokenTotal,a),r})(e),["sliceBVaultsStore.bvaults.".concat(e.vault),"sliceBVaultsStore.yTokenSythetic.".concat(e.vault)]);return[(0,s.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:n}=(0,u.m)(),l=(0,a.p)();return()=>{(0,s.XD)(async()=>{if(null==t||t(),!n)return;await Promise.all([d.w.getState().sliceTokenStore.updateTokensBalance(l,[e.asset,e.pToken],n),d.w.getState().sliceTokenStore.updateTokenTotalSupply(l,[e.asset,e.pToken]),d.w.getState().sliceBVaultsStore.updateBvaults(l,[e]),d.w.getState().sliceBVaultsStore.updateYTokenSythetic(l,[e])]);let a=d.w.getState().sliceBVaultsStore.bvaults[e.vault];await d.w.getState().sliceBVaultsStore.updateEpoches(l,e,a.epochCount>1n?[a.epochCount,a.epochCount-1n]:[a.epochCount]);let s=[];for(let t=parseInt(a.epochCount.toString());t>0;t--){let n=d.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];s.push(n)}console.info("onUserAction:epoches",s),await d.w.getState().sliceUserBVaults.updateEpoches(l,e,n,s)},3,1e3)}}function calcLPPrice(e,t){let n=p.P[t];if(!n)return 0n;let l=d.w.getState().sliceBVaultsStore.bvaults[e];if(!l)return 0n;let a=d.w.getState().sliceTokenStore.prices,r=l.lpBase*(0,s.ok)(a,n.base,0n)+l.lpQuote*(0,s.ok)(a,n.quote);return l.lpLiq>0n?r/l.lpLiq:0n}}}]);