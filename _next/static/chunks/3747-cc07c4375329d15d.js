"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3747],{57834:function(e,t,n){n.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx},$M:function(){return Txs},Rb:function(){return withTokenApprove}});var a=n(52987),c=n(13854),r=n(62013),s=n(83978),o=n.n(s),i=n(77317),l=n(47259),u=n(85058),d=n(42302),f=n(41331),p=n(99409),h=n(7347);let m={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:a}=(0,d.m)(),s=(0,p.pK)(),{data:o}=(0,f.p)(),[b,w]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>Object.keys(e).filter(e=>!(0,h.Mg)(e)),[e]),[y,x]=(0,i.useState)(t&&m[t]||{}),updateAllownce=(e,n)=>{t&&(m[t]={...m[t]||{},[e]:n},x(t=>({...t,[e]:n})))};(0,i.useEffect)(()=>{a&&t&&s&&v.forEach(e=>{(0,r.B)(s).readContract({abi:u.Wo,address:e,functionName:"allowance",args:[a,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,s,a]);let[g,E]=(0,i.useState)(!1),A=(0,i.useMemo)(()=>v.filter(t=>(0,c.ok)(e,t)>0n&&(0,c.ok)(e,t)>(0,c.ok)(y,t)),[e,v,y]),approve=async()=>{if(0!=A.length&&t&&a)try{E(!0),w(!1);for(let c=0;c<A.length;c++){let i=A[c],d=!1===n?e[i]:n,f=await (null==o?void 0:o.writeContract({abi:u.Wo,address:i,functionName:"approve",args:[t,d]}));f&&await (0,r.B)(s).waitForTransactionReceipt({hash:f});let p=await (0,r.B)(s).readContract({abi:u.Wo,address:i,functionName:"allowance",args:[a,t]});p<e[i]&&l.A.error("Insufficient amount of approve"),updateAllownce(i,p)}l.A.success("Approve success"),E(!1),w(!0)}catch(e){l.A.error((0,c.az)(e)),E(!1),w(!1)}};return{approve,loading:g,shouldApprove:A.length>0,isSuccess:b}},b={},useNftApproves=(e,t)=>{let{address:n}=(0,d.m)(),a=(0,p.pK)(),{data:s}=(0,f.p)(),[h,m]=(0,i.useState)(!1),w=o().keys(e),[v,y]=(0,i.useState)(t&&b[t]||{}),updateAllownce=(e,n)=>{t&&(b[t]={...b[t]||{},[e]:n},y(t=>({...t,[e]:n})))};(0,i.useEffect)(()=>{n&&t&&a&&w.forEach(e=>{(0,r.B)(a).readContract({abi:u.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==v[e]&&updateAllownce(e,t)).catch(console.error)})},[w,a,n]);let[x,g]=(0,i.useState)(!1),E=(0,i.useMemo)(()=>w.filter(e=>!v[e]),[e,w,v]),approve=async()=>{if(0!=E.length&&t)try{g(!0),m(!1);for(let e=0;e<E.length;e++){let n=E[e],c=await (null==s?void 0:s.writeContract({abi:u.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));c&&await (0,r.B)(a).waitForTransactionReceipt({hash:c}),updateAllownce(n,!0)}l.A.success("Approve success"),g(!1),m(!0)}catch(e){l.A.error((0,c.az)(e)),g(!1),m(!1)}};return{approve,loading:x,shouldApprove:E.length>0,isSuccess:h}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:a}=t||{},[s,o]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),{data:h}=(0,f.p)(),m=(0,p.pK)(),b=!h||!h.account||s||!e||h.chain.id!==m,write=async()=>{if(!b){o(!0),d(!1);try{let c="function"==typeof e?await e():e,s=(0,r.B)(m),o={account:h.account,...c};if(!(null==t?void 0:t.skipSimulate)){let e=await s.simulateContract(o);o=e.request}let i=await h.writeContract(o),u=await s.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==u.status)throw"Transaction reverted";d(!0),a&&a(u),n&&l.A.success("Transaction success")}catch(e){n&&l.A.error((0,c.az)(e))}o(!1)}};return{write,isDisabled:b,isLoading:s,isSuccess:u}}var w=n(88501),v=n(34113),y=n(82790),x=n(95499),g=n(68654),E=n(45820);function SwitchNet(e){let{className:t}=e,n=(0,g.o)(),c=(0,p.pK)();return(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4 whitespace-nowrap w-fit min-w-[200px]",t),onClick:()=>n.switchChainAsync({chainId:c}).catch(console.error),busy:n.isPending,disabled:n.isPending,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:c=!0,approves:r,spender:s,requestAmount:o,config:l,toast:u=!0,skipSimulate:d=!1,disabled:f,confirmations:h,onTxSuccess:m,onApproveSuccess:b}=e,{write:v,isDisabled:y,isLoading:x}=useWrapContractWrite(l,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:h}),g=f||y||x||!1===l.enabled,{approve:A,shouldApprove:k,loading:C,isSuccess:N}=useApproves(r||{},s,o),S=(0,i.useRef)();S.current=b,(0,i.useEffect)(()=>{S.current&&N&&S.current()},[N]);let T=(0,p.tx)();return T?(0,a.jsx)(SwitchNet,{className:t}):k?(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4",t),onClick:A,busy:C,disabled:f||!A||C,children:"Approve"}):(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4",t),onClick:()=>v(),busy:x,busyShowContent:c,disabled:g,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:c=!0,approves:r,spender:s,requestAmount:o,config:l,toast:u=!0,skipSimulate:d=!1,disabled:f,confirmations:h,onTxSuccess:m,onApproveSuccess:b}=e,{write:v,isDisabled:y,isLoading:x}=useWrapContractWrite(l,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:h}),g=f||y||x||!1===l.enabled,{approve:A,shouldApprove:k,loading:C,isSuccess:N}=useNftApproves(null!=r?r:{},s),S=(0,i.useRef)();S.current=b,(0,i.useEffect)(()=>{S.current&&N&&S.current()},[N]);let T=(0,p.tx)();return T?(0,a.jsx)(SwitchNet,{className:t}):k?(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4",t),onClick:A,busy:C,disabled:f||!A||C,children:"Approve"}):(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4",t),onClick:()=>v(),busy:x,busyShowContent:c,disabled:g,children:n})}function Txs(e){let{className:t,tx:n,txs:s,disabled:o,busyShowTxet:i=!0,toast:u=!0,onTxSuccess:d}=e,{data:h}=(0,f.p)(),m=(0,p.tx)(),b=(0,p.pK)(),{mutate:y,isPending:g}=(0,x.D)({mutationFn:async()=>{if(!h)return;let e=await (0,c.IE)(s).then(e=>Promise.all(e.map(c.IE)));console.info("calls:",h.account.address,e);try{let{id:t}=await h.sendCalls({account:h.account.address,calls:e.map(e=>({data:(0,v.R)({abi:e.abi,functionName:e.functionName,args:e.args}),to:e.address}))});for(;;){let e=await h.waitForCallsStatus({id:t});if("pending"!=e.status){if("success"==e.status)u&&l.A.success("Transactions Success"),null==d||d();else throw Error("Transactions ".concat(e.status," ").concat(JSON.stringify(e)));break}}}catch(n){let t=(0,c.az)(n);if(t&&(t.includes("wallet_sendCalls")||t.includes("EIP-7702 not supported"))){let t=(0,r.B)(b);for(let n of e){let e=await h.writeContract(n),a=await t.waitForTransactionReceipt({hash:e,confirmations:1});if("success"!==a.status)throw Error("Transactions Reverted")}u&&l.A.success("Transactions Success"),null==d||d()}}},onError:u?c.S3:()=>{}}),A=o||g||"function"!=typeof s&&0==s.length||!h;return m?(0,a.jsx)(SwitchNet,{}):(0,a.jsx)(E.k6,{className:(0,w.m)("flex items-center justify-center gap-4",t),onClick:()=>y(),busy:g,busyShowContent:i,disabled:A,children:n})}async function withTokenApprove(e){let{approves:t,pc:n,user:a,tx:c}=e,r=0n,s=await Promise.all(t.map(async e=>{if(y.DR===e.token)return r+=e.amount,null;let t=await n.readContract({abi:u.Wo,address:e.token,functionName:"allowance",args:[a,e.spender]});return t>=e.amount?null:{abi:u.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount-t]}})).then(e=>e.filter(e=>null!==e));return[...s,{...c,...r>0n?{value:r}:{}}]}},26694:function(e,t,n){n.d(t,{E:function(){return PageWrap}});var a=n(52987),c=n(13854);n(77317);var r=n(78525);function PageWrap(e){let{children:t,className:n}=e;return(0,r.l)(e=>e.theme),(0,a.jsx)("div",{className:(0,c.cn)("h-auto pt-[30px] pb-6",n),children:t})}},77087:function(e,t,n){n.d(t,{$:function(){return Spinner}});var a=n(52987),c=n(13854);let Spinner=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{fill:"none",className:(0,c.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},45820:function(e,t,n){n.d(t,{HY:function(){return Swap},k6:function(){return BBtn}});var a=n(52987),c=n(13854),r=n(83978),s=n.n(r),o=n(77317),i=n(77087),l=n(63114);function BBtn(e){let{borderWidth:t=1,children:n,busy:r,busyShowContent:l=!0,className:u,hiddenBorder:d,...f}=e,p=(0,o.useRef)(null),[h,m]=(0,o.useState)("0_0"),b="unset",w="unset";if(p.current&&!d){let e=p.current,n=e.clientWidth,a=e.clientHeight,c=parseInt(getComputedStyle(e).borderRadius.replace("px","")),r="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(c," ").concat(t,"L").concat(n-c," ").concat(t),o="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(n-t," ").concat(c,"L").concat(n-t," ").concat(a-c),i="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(n-c," ").concat(a-t,"L").concat(c," ").concat(a-t," "),l="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(t," ").concat(a-c,"L").concat(t," ").concat(c),u="M ".concat(t," ").concat(c," ").concat(r," ").concat(o," ").concat(i," ").concat(l),d="M 0 0 L 0 ".concat(a," L ").concat(n," ").concat(a," L ").concat(n," 0 L 0 0 ").concat(u," Z");b="path('".concat(d,"')");let f=2*n,tranP=e=>s().round(e/2,2);w="radial-gradient(122.5% ".concat(s().round(122.5/(n/a),2),"% at ").concat(s().round((52.9*n+50*f-50*n)/f,2),"% ").concat(s().round((16.25*a+50*f-50*a)/f,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,o.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;m("".concat((null===(e=p.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=p.current)||void 0===t?void 0:t.clientWidth)||0))});return p.current&&e.observe(p.current),()=>{p.current&&e.unobserve(p.current)}},[p.current]),(0,a.jsxs)("button",{...f,ref:p,className:(0,c.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,a.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:p.current?"visible":"hidden",clipPath:b},children:(0,a.jsx)("div",{className:(0,c.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:w}})}),r&&(0,a.jsx)(i.$,{}),(l||!r)&&n]})}function Swap(e){let{className:t,style:n,...r}=e;return(0,a.jsx)("div",{...r,style:{transform:"rotateX(180deg) rotateZ(90deg)",...n||{}},className:(0,c.cn)("flex w-8 h-8 justify-center items-center self-center text-sm cursor-pointer border border-slate-500 text-slate-500 rounded-full hover:text-primary hover:border-primary",t),children:(0,a.jsx)(l.t4O,{})})}},7347:function(e,t,n){n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var a=n(82790),c=n(97995),r=n(13631),s=n(64090),o=n(53414);let i=[{address:a.DR,symbol:"ETH",decimals:18,chain:[r.R.id,s.F.id],isNative:!0},{address:a.DR,symbol:"0G",decimals:18,chain:[o.Cn.id],isNative:!0},{address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,chain:[r.R.id,s.F.id],isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:[s.F.id]},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:[s.F.id]},{address:"0xe01C85599300f9ED5DE2d7D4FE3Dc2Dc4c5c3877",symbol:"0G",decimals:18,chain:[o.Cn.id]},{address:"0x78A8D4014000dF30b49eB0c29822B6C7C79D68cA",symbol:"v0G",decimals:18,chain:[o.Cn.id]},{address:"0x937F60B54dA360b31D60372d2e19FE55Cb8eee53",symbol:"y0G",decimals:18,chain:[o.Cn.id]},{address:"0x8D44BF9d72039C22dB4e8d7aB50d27038002fAC8",symbol:"lp0G",decimals:18,chain:[o.Cn.id]}],l=i.reduce((e,t)=>t.chain.reduce((e,n)=>({...e,["".concat(n,"_").concat(t.address.toLowerCase())]:t}),e),{});function getTokenBy(e,t,n){if(!e||!t)return;let a=l["".concat(t,"_").concat(e.toLowerCase())];if(!a){let{symbol:a="Token",decimals:c=18,isNative:r}=null!=n?n:{};return{address:e,chain:[t],symbol:a,decimals:c,isNative:r}}return a}function isNativeToken(e){return(0,c.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==a.DR}}}]);