"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4211],{12687:function(e,t,n){n.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx}});var c=n(31113),a=n(26361),r=n(22818),o=n(83978),s=n.n(o),i=n(64103),l=n(47259),u=n(58714),d=n(96670),p=n(4408),f=n(59175),h=n(90168);let v={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:c}=(0,d.m)(),o=(0,f.p)(),{data:s}=(0,p.p)(),[b,m]=(0,i.useState)(!1),w=(0,i.useMemo)(()=>Object.keys(e).filter(e=>!(0,h.Mg)(e)),[e]),[g,x]=(0,i.useState)(t&&v[t]||{}),updateAllownce=(e,n)=>{t&&(v[t]={...v[t]||{},[e]:n},x(t=>({...t,[e]:n})))};(0,i.useEffect)(()=>{c&&t&&o&&w.forEach(e=>{(0,r.B)(o).readContract({abi:u.Wo,address:e,functionName:"allowance",args:[c,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[w,o,c]);let[A,E]=(0,i.useState)(!1),k=(0,i.useMemo)(()=>w.filter(t=>(0,a.ok)(e,t)>0n&&(0,a.ok)(e,t)>(0,a.ok)(g,t)),[e,w,g]),approve=async()=>{if(0!=k.length&&t&&c)try{E(!0),m(!1);for(let a=0;a<k.length;a++){let i=k[a],d=!1===n?e[i]:n,p=await (null==s?void 0:s.writeContract({abi:u.Wo,address:i,functionName:"approve",args:[t,d]}));p&&await (0,r.B)(o).waitForTransactionReceipt({hash:p});let f=await (0,r.B)(o).readContract({abi:u.Wo,address:i,functionName:"allowance",args:[c,t]});f<e[i]&&l.A.error("Insufficient amount of approve"),updateAllownce(i,f)}l.A.success("Approve success"),E(!1),m(!0)}catch(e){l.A.error((0,a.az)(e)),E(!1),m(!1)}};return{approve,loading:A,shouldApprove:k.length>0,isSuccess:b}},b={},useNftApproves=(e,t)=>{let{address:n}=(0,d.m)(),c=(0,f.p)(),{data:o}=(0,p.p)(),[h,v]=(0,i.useState)(!1),m=s().keys(e),[w,g]=(0,i.useState)(t&&b[t]||{}),updateAllownce=(e,n)=>{t&&(b[t]={...b[t]||{},[e]:n},g(t=>({...t,[e]:n})))};(0,i.useEffect)(()=>{n&&t&&c&&m.forEach(e=>{(0,r.B)(c).readContract({abi:u.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==w[e]&&updateAllownce(e,t)).catch(console.error)})},[m,c,n]);let[x,A]=(0,i.useState)(!1),E=(0,i.useMemo)(()=>m.filter(e=>!w[e]),[e,m,w]),approve=async()=>{if(0!=E.length&&t)try{A(!0),v(!1);for(let e=0;e<E.length;e++){let n=E[e],a=await (null==o?void 0:o.writeContract({abi:u.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));a&&await (0,r.B)(c).waitForTransactionReceipt({hash:a}),updateAllownce(n,!0)}l.A.success("Approve success"),A(!1),v(!0)}catch(e){l.A.error((0,a.az)(e)),A(!1),v(!1)}};return{approve,loading:x,shouldApprove:E.length>0,isSuccess:h}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:c}=t||{},[o,s]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),{data:h}=(0,p.p)(),v=(0,f.p)(),b=!h||!h.account||o||!e||h.chain.id!==v,write=async()=>{if(!b){s(!0),d(!1);try{let a="function"==typeof e?await e():e,o=(0,r.B)(v),s={account:h.account,...a};if(!(null==t?void 0:t.skipSimulate)){let e=await o.simulateContract(s);s=e.request}let i=await h.writeContract(s),u=await o.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==u.status)throw"Transaction reverted";d(!0),c&&c(u),n&&l.A.success("Transaction success")}catch(e){n&&l.A.error((0,a.az)(e))}s(!1)}};return{write,isDisabled:b,isLoading:o,isSuccess:u}}var m=n(88501),w=n(60689),g=n(60986);function SwitchChain(e){let{className:t}=e,{switchChain:n,isPending:a}=(0,g.o)(),r=(0,f.p)();return(0,c.jsx)(w.k6,{className:(0,m.m)("flex items-center justify-center gap-4 whitespace-nowrap",t),onClick:()=>n({chainId:r}),busy:a,disabled:a,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:r,spender:o,requestAmount:s,config:l,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:h,onTxSuccess:v,onApproveSuccess:b}=e,{write:g,isDisabled:x,isLoading:A}=useWrapContractWrite(l,{onSuccess:e=>v&&v(e),autoToast:u,skipSimulate:d,confirmations:h}),E=p||x||A||!1===l.enabled,{approve:k,shouldApprove:y,loading:N,isSuccess:C}=useApproves(r||{},o,s),j=(0,i.useRef)();j.current=b,(0,i.useEffect)(()=>{j.current&&C&&j.current()},[C]);let S=(0,f.t)();return S?(0,c.jsx)(SwitchChain,{className:t}):y?(0,c.jsx)(w.k6,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:k,busy:N,disabled:p||!k||N||S,children:"Approve"}):(0,c.jsx)(w.k6,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:A,busyShowContent:a,disabled:E,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:r,spender:o,requestAmount:s,config:l,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:h,onTxSuccess:v,onApproveSuccess:b}=e,{write:g,isDisabled:x,isLoading:A}=useWrapContractWrite(l,{onSuccess:e=>v&&v(e),autoToast:u,skipSimulate:d,confirmations:h}),E=p||x||A||!1===l.enabled,{approve:k,shouldApprove:y,loading:N,isSuccess:C}=useNftApproves(null!=r?r:{},o),j=(0,i.useRef)();j.current=b,(0,i.useEffect)(()=>{j.current&&C&&j.current()},[C]);let S=(0,f.t)();return S?(0,c.jsx)(SwitchChain,{className:t}):y?(0,c.jsx)(w.k6,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:k,busy:N,disabled:p||!k||N||S,children:"Approve"}):(0,c.jsx)(w.k6,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:A,busyShowContent:a,disabled:E,children:n})}},44939:function(e,t,n){n.d(t,{E:function(){return PageWrap}});var c=n(31113),a=n(26361);n(64103);var r=n(12045);function PageWrap(e){let{children:t,className:n}=e;return(0,r.l)(e=>e.theme),(0,c.jsx)("div",{className:(0,a.cn)("h-auto pt-[30px] pb-6",n),children:t})}},36762:function(e,t,n){n.d(t,{$:function(){return Spinner}});var c=n(31113),a=n(26361);let Spinner=e=>{let{className:t}=e;return(0,c.jsxs)("svg",{fill:"none",className:(0,a.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,n){n.d(t,{JK:function(){return SwapDown},k6:function(){return BBtn}});var c=n(31113),a=n(26361),r=n(83978),o=n.n(r),s=n(64103),i=n(36762),l=n(72703);function BBtn(e){let{borderWidth:t=1,children:n,busy:r,busyShowContent:l=!0,className:u,hiddenBorder:d,...p}=e,f=(0,s.useRef)(null),[h,v]=(0,s.useState)("0_0"),b="unset",m="unset";if(f.current&&!d){let e=f.current,n=e.clientWidth,c=e.clientHeight,a=parseInt(getComputedStyle(e).borderRadius.replace("px","")),r="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(a," ").concat(t,"L").concat(n-a," ").concat(t),s="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-t," ").concat(a,"L").concat(n-t," ").concat(c-a),i="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-a," ").concat(c-t,"L").concat(a," ").concat(c-t," "),l="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(t," ").concat(c-a,"L").concat(t," ").concat(a),u="M ".concat(t," ").concat(a," ").concat(r," ").concat(s," ").concat(i," ").concat(l),d="M 0 0 L 0 ".concat(c," L ").concat(n," ").concat(c," L ").concat(n," 0 L 0 0 ").concat(u," Z");b="path('".concat(d,"')");let p=2*n,tranP=e=>o().round(e/2,2);m="radial-gradient(122.5% ".concat(o().round(122.5/(n/c),2),"% at ").concat(o().round((52.9*n+50*p-50*n)/p,2),"% ").concat(o().round((16.25*c+50*p-50*c)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,s.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;v("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,c.jsxs)("button",{...p,ref:f,className:(0,a.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,c.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:b},children:(0,c.jsx)("div",{className:(0,a.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:m}})}),r&&(0,c.jsx)(i.$,{}),(l||!r)&&n]})}function SwapDown(e){let{className:t,style:n,...r}=e;return(0,c.jsx)("div",{...r,style:{...n||{}},className:(0,a.cn)("flex w-8 h-8 justify-center items-center self-center text-sm cursor-pointer border border-slate-500 text-slate-500 rounded-full",t),children:(0,c.jsx)(l.OId,{})})}},90168:function(e,t,n){n.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var c=n(67541),a=n(75847),r=n(60463),o=n(51186);let s=[{address:c.DR,symbol:"ETH",decimals:18,chain:[r.R.id,o.F.id],isNative:!0},{address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,chain:[r.R.id,o.F.id],isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:[o.F.id]},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:[o.F.id]}],i=s.reduce((e,t)=>t.chain.reduce((e,n)=>({...e,["".concat(n,"_").concat(t.address.toLowerCase())]:t}),e),{});function getTokenBy(e,t,n){if(!e||!t)return;let c=i["".concat(t,"_").concat(e.toLowerCase())];if(!c){let{symbol:c="Token",decimals:a=18,isNative:r}=null!=n?n:{};return{address:e,chain:[t],symbol:c,decimals:a,isNative:r}}return c}function isNativeToken(e){return(0,a.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==c.DR}}}]);