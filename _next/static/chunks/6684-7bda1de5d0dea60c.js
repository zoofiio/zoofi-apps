"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6684],{12687:function(e,t,n){n.d(t,{v:function(){return ApproveAndTx},L:function(){return NftApproveAndTx}});var a=n(31113),c=n(19757),r=n(26361),o=n(22818),s=n(83978),i=n.n(s),l=n(64103),u=n(47259),d=n(58714),p=n(96670),f=n(4408),h=n(59175);let b={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:a}=(0,p.m)(),s=(0,h.p)(),{data:i}=(0,f.p)(),[v,m]=(0,l.useState)(!1),x=(0,l.useMemo)(()=>Object.keys(e).filter(e=>e!==c.K8),[e]),[w,g]=(0,l.useState)(t&&b[t]||{}),updateAllownce=(e,n)=>{t&&(b[t]={...b[t]||{},[e]:n},g(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{a&&t&&s&&x.forEach(e=>{(0,o.B)(s).readContract({abi:d.Wo,address:e,functionName:"allowance",args:[a,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[x,s,a]);let[A,k]=(0,l.useState)(!1),y=(0,l.useMemo)(()=>x.filter(t=>(0,r.ok)(e,t)>0n&&(0,r.ok)(e,t)>(0,r.ok)(w,t)),[e,x,w]),approve=async()=>{if(0!=y.length&&t)try{k(!0),m(!1);for(let a=0;a<y.length;a++){let c=y[a],r=!1===n?e[c]:n,l=await (null==i?void 0:i.writeContract({abi:d.Wo,address:c,functionName:"approve",args:[t,r]}));l&&await (0,o.B)(s).waitForTransactionReceipt({hash:l}),updateAllownce(c,r)}u.A.success("Approve success"),k(!1),m(!0)}catch(e){u.A.error((0,r.az)(e)),k(!1),m(!1)}};return{approve,loading:A,shouldApprove:y.length>0,isSuccess:v}},v={},useNftApproves=(e,t)=>{let{address:n}=(0,p.m)(),a=(0,h.p)(),{data:c}=(0,f.p)(),[s,b]=(0,l.useState)(!1),m=i().keys(e),[x,w]=(0,l.useState)(t&&v[t]||{}),updateAllownce=(e,n)=>{t&&(v[t]={...v[t]||{},[e]:n},w(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{n&&t&&a&&m.forEach(e=>{(0,o.B)(a).readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==x[e]&&updateAllownce(e,t)).catch(console.error)})},[m,a,n]);let[g,A]=(0,l.useState)(!1),k=(0,l.useMemo)(()=>m.filter(e=>!x[e]),[e,m,x]),approve=async()=>{if(0!=k.length&&t)try{A(!0),b(!1);for(let e=0;e<k.length;e++){let n=k[e],r=await (null==c?void 0:c.writeContract({abi:d.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));r&&await (0,o.B)(a).waitForTransactionReceipt({hash:r}),updateAllownce(n,!0)}u.A.success("Approve success"),A(!1),b(!0)}catch(e){u.A.error((0,r.az)(e)),A(!1),b(!1)}};return{approve,loading:g,shouldApprove:k.length>0,isSuccess:s}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:a}=t||{},[c,s]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),{data:p}=(0,f.p)(),b=(0,h.p)(),v=!p||!p.account||c||!e||p.chain.id!==b,write=async()=>{if(!v){s(!0),d(!1);try{let c="function"==typeof e?await e():e,r=(0,o.B)(b),s={account:p.account,...c};if(!(null==t?void 0:t.skipSimulate)){let e=await r.simulateContract(s);s=e.request}let i=await p.writeContract(s),l=await r.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==l.status)throw"Transaction reverted";d(!0),a&&a(l),n&&u.A.success("Transaction success")}catch(e){n&&u.A.error((0,r.az)(e))}s(!1)}};return{write,isDisabled:v,isLoading:c,isSuccess:i}}var m=n(88501),x=n(60689);function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:c=!0,approves:r,spender:o,requestAmount:s,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:b,onApproveSuccess:v}=e,{write:w,isDisabled:g,isLoading:A}=useWrapContractWrite(i,{onSuccess:e=>b&&b(e),autoToast:u,skipSimulate:d,confirmations:f}),k=p||g||A||!1===i.enabled,{approve:y,shouldApprove:N,loading:C,isSuccess:j}=useApproves(r||{},o,s),S=(0,l.useRef)();S.current=v,(0,l.useEffect)(()=>{S.current&&j&&S.current()},[j]);let W=(0,h.t)();return N?(0,a.jsx)(x.k,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:y,busy:C,disabled:p||!y||C||W,children:"Approve"}):(0,a.jsx)(x.k,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:A,busyShowContent:c,disabled:k,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:c=!0,approves:r,spender:o,requestAmount:s,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:b,onApproveSuccess:v}=e,{write:w,isDisabled:g,isLoading:A}=useWrapContractWrite(i,{onSuccess:e=>b&&b(e),autoToast:u,skipSimulate:d,confirmations:f}),k=p||g||A||!1===i.enabled,{approve:y,shouldApprove:N,loading:C,isSuccess:j}=useNftApproves(null!=r?r:{},o),S=(0,l.useRef)();S.current=v,(0,l.useEffect)(()=>{S.current&&j&&S.current()},[j]);let W=(0,h.t)();return N?(0,a.jsx)(x.k,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:y,busy:C,disabled:p||!y||C||W,children:"Approve"}):(0,a.jsx)(x.k,{className:(0,m.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:A,busyShowContent:c,disabled:k,children:n})}},44939:function(e,t,n){n.d(t,{E:function(){return PageWrap}});var a=n(31113),c=n(26361);n(64103);var r=n(12045);function PageWrap(e){let{children:t,className:n}=e;return(0,r.l)(e=>e.theme),(0,a.jsx)("div",{className:(0,c.cn)("h-auto pt-[30px] pb-6",n),children:t})}},16738:function(e,t,n){n.d(t,{x:function(){return SimpleTabs}});var a=n(31113),c=n(26361),r=n(98750),o=n(64103);function SimpleTabs(e){let{currentTab:t,className:n,listClassName:s,triggerClassName:i,contentClassName:l,hiddenConetent:u=!1,data:d,onTabChange:p}=e,[f,h]=(0,o.useState)(t||d[0].tab);return(0,o.useEffect)(()=>{d.find(e=>e.tab==f)||h(d[0].tab)},[f,d]),(0,a.jsxs)(r.fC,{value:t||f,className:(0,c.cn)("w-full",n),onValueChange:e=>{h(e),null==p||p(e)},children:[(0,a.jsx)(r.aV,{className:(0,c.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",s),children:d.map(e=>(0,a.jsx)(r.xz,{className:(0,c.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',i),value:e.tab,children:e.tab},e.tab))}),!u&&d.map(e=>(0,a.jsx)(r.VY,{value:e.tab,className:(0,c.cn)("flex flex-col gap-6 outline-none",l),children:e.content},e.tab))]})}},36762:function(e,t,n){n.d(t,{$:function(){return Spinner}});var a=n(31113),c=n(26361);let Spinner=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{fill:"none",className:(0,c.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,n){n.d(t,{k:function(){return BBtn}});var a=n(31113),c=n(26361),r=n(83978),o=n.n(r),s=n(64103),i=n(36762);function BBtn(e){let{borderWidth:t=1,children:n,busy:r,busyShowContent:l=!0,className:u,hiddenBorder:d,...p}=e,f=(0,s.useRef)(null),[h,b]=(0,s.useState)("0_0"),v="unset",m="unset";if(f.current&&!d){let e=f.current,n=e.clientWidth,a=e.clientHeight,c=parseInt(getComputedStyle(e).borderRadius.replace("px","")),r="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(c," ").concat(t,"L").concat(n-c," ").concat(t),s="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(n-t," ").concat(c,"L").concat(n-t," ").concat(a-c),i="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(n-c," ").concat(a-t,"L").concat(c," ").concat(a-t," "),l="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(t," ").concat(a-c,"L").concat(t," ").concat(c),u="M ".concat(t," ").concat(c," ").concat(r," ").concat(s," ").concat(i," ").concat(l),d="M 0 0 L 0 ".concat(a," L ").concat(n," ").concat(a," L ").concat(n," 0 L 0 0 ").concat(u," Z");v="path('".concat(d,"')");let p=2*n,tranP=e=>o().round(e/2,2);m="radial-gradient(122.5% ".concat(o().round(122.5/(n/a),2),"% at ").concat(o().round((52.9*n+50*p-50*n)/p,2),"% ").concat(o().round((16.25*a+50*p-50*a)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,s.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;b("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,a.jsxs)("button",{...p,ref:f,className:(0,c.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,a.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:v},children:(0,a.jsx)("div",{className:(0,c.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:m}})}),r&&(0,a.jsx)(i.$,{}),(l||!r)&&n]})}}}]);