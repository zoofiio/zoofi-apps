"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6154],{12687:function(e,t,n){n.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx}});var r=n(31113),a=n(19757),c=n(26361),s=n(22818),o=n(83978),i=n.n(o),l=n(64103),u=n(47259),d=n(58714),p=n(96670),f=n(4408),h=n(59175);let m={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:r}=(0,p.m)(),o=(0,h.p)(),{data:i}=(0,f.p)(),[b,x]=(0,l.useState)(!1),v=(0,l.useMemo)(()=>Object.keys(e).filter(e=>e!==a.K8),[e]),[g,y]=(0,l.useState)(t&&m[t]||{}),updateAllownce=(e,n)=>{t&&(m[t]={...m[t]||{},[e]:n},y(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{r&&t&&o&&v.forEach(e=>{(0,s.B)(o).readContract({abi:d.Wo,address:e,functionName:"allowance",args:[r,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,o,r]);let[w,A]=(0,l.useState)(!1),j=(0,l.useMemo)(()=>v.filter(t=>(0,c.ok)(e,t)>0n&&(0,c.ok)(e,t)>(0,c.ok)(g,t)),[e,v,g]),approve=async()=>{if(0!=j.length&&t&&r)try{A(!0),x(!1);for(let a=0;a<j.length;a++){let c=j[a],l=!1===n?e[c]:n,p=await (null==i?void 0:i.writeContract({abi:d.Wo,address:c,functionName:"approve",args:[t,l]}));p&&await (0,s.B)(o).waitForTransactionReceipt({hash:p});let f=await (0,s.B)(o).readContract({abi:d.Wo,address:c,functionName:"allowance",args:[r,t]});f<e[c]&&u.A.error("Insufficient amount of approve"),updateAllownce(c,f)}u.A.success("Approve success"),A(!1),x(!0)}catch(e){u.A.error((0,c.az)(e)),A(!1),x(!1)}};return{approve,loading:w,shouldApprove:j.length>0,isSuccess:b}},b={},useNftApproves=(e,t)=>{let{address:n}=(0,p.m)(),r=(0,h.p)(),{data:a}=(0,f.p)(),[o,m]=(0,l.useState)(!1),x=i().keys(e),[v,g]=(0,l.useState)(t&&b[t]||{}),updateAllownce=(e,n)=>{t&&(b[t]={...b[t]||{},[e]:n},g(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{n&&t&&r&&x.forEach(e=>{(0,s.B)(r).readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==v[e]&&updateAllownce(e,t)).catch(console.error)})},[x,r,n]);let[y,w]=(0,l.useState)(!1),A=(0,l.useMemo)(()=>x.filter(e=>!v[e]),[e,x,v]),approve=async()=>{if(0!=A.length&&t)try{w(!0),m(!1);for(let e=0;e<A.length;e++){let n=A[e],c=await (null==a?void 0:a.writeContract({abi:d.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));c&&await (0,s.B)(r).waitForTransactionReceipt({hash:c}),updateAllownce(n,!0)}u.A.success("Approve success"),w(!1),m(!0)}catch(e){u.A.error((0,c.az)(e)),w(!1),m(!1)}};return{approve,loading:y,shouldApprove:A.length>0,isSuccess:o}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:r}=t||{},[a,o]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),{data:p}=(0,f.p)(),m=(0,h.p)(),b=!p||!p.account||a||!e||p.chain.id!==m,write=async()=>{if(!b){o(!0),d(!1);try{let a="function"==typeof e?await e():e,c=(0,s.B)(m),o={account:p.account,...a};if(!(null==t?void 0:t.skipSimulate)){let e=await c.simulateContract(o);o=e.request}let i=await p.writeContract(o),l=await c.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==l.status)throw"Transaction reverted";d(!0),r&&r(l),n&&u.A.success("Transaction success")}catch(e){n&&u.A.error((0,c.az)(e))}o(!1)}};return{write,isDisabled:b,isLoading:a,isSuccess:i}}var x=n(88501),v=n(60689),g=n(60986);function SwitchChain(e){let{className:t}=e,{switchChain:n,isPending:a}=(0,g.o)(),c=(0,h.p)();return(0,r.jsx)(v.k,{className:(0,x.m)("flex items-center justify-center gap-4 whitespace-nowrap",t),onClick:()=>n({chainId:c}),busy:a,disabled:a,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:c,spender:s,requestAmount:o,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:b}=e,{write:g,isDisabled:y,isLoading:w}=useWrapContractWrite(i,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:f}),A=p||y||w||!1===i.enabled,{approve:j,shouldApprove:k,loading:N,isSuccess:C}=useApproves(c||{},s,o),S=(0,l.useRef)();S.current=b,(0,l.useEffect)(()=>{S.current&&C&&S.current()},[C]);let W=(0,h.t)();return W?(0,r.jsx)(SwitchChain,{className:t}):k?(0,r.jsx)(v.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:j,busy:N,disabled:p||!j||N||W,children:"Approve"}):(0,r.jsx)(v.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:w,busyShowContent:a,disabled:A,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:c,spender:s,requestAmount:o,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:b}=e,{write:g,isDisabled:y,isLoading:w}=useWrapContractWrite(i,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:f}),A=p||y||w||!1===i.enabled,{approve:j,shouldApprove:k,loading:N,isSuccess:C}=useNftApproves(null!=c?c:{},s),S=(0,l.useRef)();S.current=b,(0,l.useEffect)(()=>{S.current&&C&&S.current()},[C]);let W=(0,h.t)();return W?(0,r.jsx)(SwitchChain,{className:t}):k?(0,r.jsx)(v.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:j,busy:N,disabled:p||!j||N||W,children:"Approve"}):(0,r.jsx)(v.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:w,busyShowContent:a,disabled:A,children:n})}},88702:function(e,t,n){n.d(t,{Ak:function(){return Expandable},At:function(){return v},UT:function(){return GeneralAction},pk:function(){return g},us:function(){return ContractAll}});var r=n(31113),a=n(26361),c=n(64103),s=n(23125),o=n(83960),i=n(58409),l=n(62531),u=n(12687),d=n(95499),p=n(60689),f=n(88501),h=n(22818),m=n(65741),b=n.n(m),x=n(59175);let v={menu:()=>(0,a.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,a.cn)({"!bg-primary/30":e.isFocused,"!bg-primary/60":e.isSelected}),control:()=>"bg-white dark:bg-black !min-h-[58px] !border-primary/30 !shadow-none",singleValue:()=>"dark:text-white"},g="bg-white dark:bg-transparent border-primary/70 w-full h-14 text-right pr-4 font-bold text-sm border focus:border-2  rounded-md outline-none ",defConvertArg=(e,t,n)=>"uint8"==n.type?parseInt((e||"").replaceAll(" ","")):n.type.startsWith("uint")?BigInt((e||"").replaceAll(" ","")):"bytes32"==n.type?(0,l.$G)(e,{size:32}):"bool"==n.type?"true"==e:e,convertArgs=(e,t,n)=>{try{return e.map((e,r)=>{let a=t[r];return n?n(e,r,a):defConvertArg(e,r,a)})}catch(e){return}};function Expandable(e){let{children:t,tit:n,disable:a}=e,[i,l]=(0,c.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col w-full bg-white dark:bg-transparent rounded-lg overflow-hidden border border-solid border-primary/40",children:[(0,r.jsxs)("div",{className:"px-5 py-2 min-h-[58px] flex justify-between items-center text-sm",children:[(0,r.jsx)("div",{className:"font-medium text-base",children:n}),a?t:(0,r.jsxs)("div",{className:"px-2 py-1 rounded-full border border-solid border-primary flex items-center text-xs text-primary cursor-pointer ",onClick:()=>l(!i),children:[(0,r.jsx)("span",{className:"mr-[5px]",children:i?"Close":"Expand"}),i?(0,r.jsx)(o.iRh,{}):(0,r.jsx)(o.tv1,{})]})]}),(0,r.jsx)(s.Collapse,{isOpened:i,theme:{content:"bg-gray-200 dark:bg-transparent p-4 flex flex-col gap-2"},children:t})]})}function GeneralAction(e){var t,n;let{abi:s,address:o,functionName:l,tit:m,infos:v,convertArg:y,txProps:w,onArgs:A,argsDef:j}=e,k=s.find(e=>"function"==e.type&&e.name==l),N=(null==k?void 0:null===(t=k.inputs)||void 0===t?void 0:t.length)||0,[{args:C},S]=(0,i.Z)({args:"function"!=typeof j&&(null==j?void 0:j.length)==N&&N>0?j:Array(N).fill("")});(0,c.useEffect)(()=>{A&&A(C)},[C]);let W=(0,c.useRef)(0);(0,c.useEffect)(()=>{W.current++;let e=W.current;Promise.resolve(j).then(e=>"function"==typeof e?e():e||[]).then(t=>e==W.current&&S({args:C.map((e,n)=>e||t[n]||"")}))},[j]);let E=(0,x.p)(),{data:B,mutate:R,isPending:T}=(0,d.D)({mutationFn:async()=>await (0,h.B)(E).readContract({abi:s,address:o,functionName:l,...C.length?{args:convertArgs(C,k.inputs,y)}:{}}),onError:a.S3}),L="object"==typeof B?JSON.stringify(B,void 0,2):b()(B);if(!k)return;let M=k.stateMutability.includes("payable"),_=(!k.inputs||0==k.inputs.length)&&M,z=M?convertArgs(C,k.inputs,y):void 0;return(0,r.jsxs)(Expandable,{tit:m||l,disable:_,children:[null===(n=k.inputs)||void 0===n?void 0:n.map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"opacity-60 absolute top-1/2 left-2 -translate-y-1/2 text-xs",children:[e.name,"(",e.type,")"]}),(0,r.jsx)("input",{type:"text",value:C[t],onChange:e=>S({args:C.map((n,r)=>t==r?e.target.value:n)}),className:(0,a.cn)(g)})]},"input_".concat(t))),v,L,M?(0,r.jsx)(u.vZ,{...w||{},tx:"Write",config:{abi:s,address:o,functionName:l,...C.length?{args:z}:{}},disabled:(null==w?void 0:w.disabled)||!!C.length&&!z,className:(0,a.cn)("!mt-0 flex items-center justify-center gap-4",_?"max-w-[100px]":"w-full")}):(0,r.jsx)(p.k,{className:(0,f.m)("flex items-center justify-center gap-4",(0,a.cn)("!mt-0 flex items-center justify-center gap-4",_?"max-w-[100px]":"w-full")),onClick:()=>R(),busy:T,busyShowContent:!0,disabled:!1,children:"Read"})]})}function ContractAll(e){let{abi:t,address:n}=e,[a,s]=(0,c.useMemo)(()=>{let e=[],n=[];for(let r of t)if("function"==r.type){let t=r.stateMutability.includes("payable");t?n.push(r):e.push(r)}return[e,n]},[t]);return(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"font-bold text-2xl",children:"Read"}),a.map((e,t)=>(0,r.jsx)(GeneralAction,{abi:[e],address:n,functionName:e.name},"read_".concat(t)))]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"font-bold text-2xl",children:"Write"}),s.map((e,t)=>(0,r.jsx)(GeneralAction,{abi:[e],address:n,functionName:e.name},"write_".concat(t)))]})]})}},44939:function(e,t,n){n.d(t,{E:function(){return PageWrap}});var r=n(31113),a=n(26361);n(64103);var c=n(12045);function PageWrap(e){let{children:t,className:n}=e;return(0,c.l)(e=>e.theme),(0,r.jsx)("div",{className:(0,a.cn)("h-auto pt-[30px] pb-6",n),children:t})}},36762:function(e,t,n){n.d(t,{$:function(){return Spinner}});var r=n(31113),a=n(26361);let Spinner=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{fill:"none",className:(0,a.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,n){n.d(t,{k:function(){return BBtn}});var r=n(31113),a=n(26361),c=n(83978),s=n.n(c),o=n(64103),i=n(36762);function BBtn(e){let{borderWidth:t=1,children:n,busy:c,busyShowContent:l=!0,className:u,hiddenBorder:d,...p}=e,f=(0,o.useRef)(null),[h,m]=(0,o.useState)("0_0"),b="unset",x="unset";if(f.current&&!d){let e=f.current,n=e.clientWidth,r=e.clientHeight,a=parseInt(getComputedStyle(e).borderRadius.replace("px","")),c="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(a," ").concat(t,"L").concat(n-a," ").concat(t),o="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-t," ").concat(a,"L").concat(n-t," ").concat(r-a),i="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-a," ").concat(r-t,"L").concat(a," ").concat(r-t," "),l="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(t," ").concat(r-a,"L").concat(t," ").concat(a),u="M ".concat(t," ").concat(a," ").concat(c," ").concat(o," ").concat(i," ").concat(l),d="M 0 0 L 0 ".concat(r," L ").concat(n," ").concat(r," L ").concat(n," 0 L 0 0 ").concat(u," Z");b="path('".concat(d,"')");let p=2*n,tranP=e=>s().round(e/2,2);x="radial-gradient(122.5% ".concat(s().round(122.5/(n/r),2),"% at ").concat(s().round((52.9*n+50*p-50*n)/p,2),"% ").concat(s().round((16.25*r+50*p-50*r)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,o.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;m("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,r.jsxs)("button",{...p,ref:f,className:(0,a.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,r.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:b},children:(0,r.jsx)("div",{className:(0,a.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:x}})}),c&&(0,r.jsx)(i.$,{}),(l||!c)&&n]})}}}]);