(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,494800,749581,520905,681348,223506,431110,568349,383511,512518,349531,175464,311135,976037,747384,659486,519175,e=>{"use strict";let t,r;function n(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(n=r.getItem(e))?n:null;return i instanceof Promise?i.then(a):a(i)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},i=(e,t)=>(r,i,o)=>{let s,f={storage:n(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},u=!1,l=new Set,c=new Set,d=f.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),r(...e)},i,o);let p=()=>{let e=f.partialize({...i()});return d.setItem(f.name,{state:e,version:f.version})},m=o.setState;o.setState=(e,t)=>{m(e,t),p()};let y=e((...e)=>{r(...e),p()},i,o);o.getInitialState=()=>y;let b=()=>{var e,t;if(!d)return;u=!1,l.forEach(e=>{var t;return e(null!=(t=i())?t:y)});let n=(null==(t=f.onRehydrateStorage)?void 0:t.call(f,null!=(e=i())?e:y))||void 0;return a(d.getItem.bind(d))(f.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===f.version)return[!1,e.state];else{if(f.migrate){let t=f.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[n,a]=e;if(r(s=f.merge(a,null!=(t=i())?t:y),!0),n)return p()}).then(()=>{null==n||n(s,void 0),s=i(),u=!0,c.forEach(e=>e(s))}).catch(e=>{null==n||n(void 0,e)})};return o.persist={setOptions:e=>{f={...f,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>b(),hasHydrated:()=>u,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},f.skipHydration||b(),s||y};e.s(["createJSONStorage",()=>n,"persist",()=>i],494800);let o=e=>{let t,r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:n,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(n,a,i);return i},s=e=>e?o(e):o;e.s(["createStore",()=>s],749581);var f,u,l,c,d,p,m,y,b,g,h,_,v={},w=[],x=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,E=Array.isArray;function B(e,t){for(var r in t)e[r]=t[r];return e}function P(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function O(e,t,r){var n,a,i,o={};for(i in t)"key"==i?n=t[i]:"ref"==i?a=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?l.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===o[i]&&(o[i]=e.defaultProps[i]);return S(e,o,n,a,null)}function S(e,t,r,n,a){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++d:a,__i:-1,__u:0};return null==a&&null!=c.vnode&&c.vnode(i),i}function A(e){return e.children}function I(e,t){this.props=e,this.context=t}function G(e,t){if(null==t)return e.__?G(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?G(e):null}function D(e){(!e.__d&&(e.__d=!0)&&p.push(e)&&!U.__r++||m!==c.debounceRendering)&&((m=c.debounceRendering)||y)(U)}function U(){var e,t,r,n,a,i,o,s;for(p.sort(b);e=p.shift();)e.__d&&(t=p.length,n=void 0,i=(a=(r=e).__v).__e,o=[],s=[],r.__P&&((n=B({},a)).__v=a.__v+1,c.vnode&&c.vnode(n),k(r.__P,n,a,r.__n,r.__P.namespaceURI,32&a.__u?[i]:null,o,null==i?G(a):i,!!(32&a.__u),s),n.__v=a.__v,n.__.__k[n.__i]=n,L(o,n,s),n.__e!=i&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),p.length>t&&p.sort(b));U.__r=0}function C(e,t,r,n,a,i,o,s,f,u,l){var d,p,m,y,b,g=n&&n.__k||w,h=t.length;for(r.__d=f,function(e,t,r){var n,a,i,o,s,f=t.length,u=r.length,l=u,d=0;for(e.__k=[],n=0;n<f;n++)null!=(a=t[n])&&"boolean"!=typeof a&&"function"!=typeof a?(o=n+d,(a=e.__k[n]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?S(null,a,null,null,null):E(a)?S(A,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?S(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,i=null,-1!==(s=a.__i=function(e,t,r,n){var a=e.key,i=e.type,o=r-1,s=r+1,f=t[r];if(null===f||f&&a==f.key&&i===f.type&&0==(131072&f.__u))return r;if(n>+(null!=f&&0==(131072&f.__u)))for(;o>=0||s<t.length;){if(o>=0){if((f=t[o])&&0==(131072&f.__u)&&a==f.key&&i===f.type)return o;o--}if(s<t.length){if((f=t[s])&&0==(131072&f.__u)&&a==f.key&&i===f.type)return s;s++}}return -1}(a,r,o,l))&&(l--,(i=r[s])&&(i.__u|=131072)),null==i||null===i.__v?(-1==s&&d--,"function"!=typeof a.type&&(a.__u|=65536)):s!==o&&(s==o-1?d--:s==o+1?d++:(s>o?d--:d++,a.__u|=65536))):a=e.__k[n]=null;if(l)for(n=0;n<u;n++)null!=(i=r[n])&&0==(131072&i.__u)&&(i.__e==e.__d&&(e.__d=G(i)),function e(t,r,n){var a,i;if(c.unmount&&c.unmount(t),(a=t.ref)&&(a.current&&a.current!==t.__e||N(a,null,r)),null!=(a=t.__c)){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(e){c.__e(e,r)}a.base=a.__P=null}if(a=t.__k)for(i=0;i<a.length;i++)a[i]&&e(a[i],r,n||"function"!=typeof t.type);n||P(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(i,i))}(r,t,g),f=r.__d,d=0;d<h;d++)null!=(m=r.__k[d])&&(p=-1===m.__i?v:g[m.__i]||v,m.__i=d,k(e,m,p,a,i,o,s,f,u,l),y=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&N(p.ref,null,m),l.push(m.ref,m.__c||y,m)),null==b&&null!=y&&(b=y),65536&m.__u||p.__k===m.__k?f=function e(t,r,n){var a,i;if("function"==typeof t.type){for(a=t.__k,i=0;a&&i<a.length;i++)a[i]&&(a[i].__=t,r=e(a[i],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=G(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType)return r}(m,f,e):"function"==typeof m.type&&void 0!==m.__d?f=m.__d:y&&(f=y.nextSibling),m.__d=void 0,m.__u&=-196609);r.__d=f,r.__e=b}function T(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||x.test(t)?r:r+"px"}function R(e,t,r,n,a){var i;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||T(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||T(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=g,e.addEventListener(t,i?_:h,i)):e.removeEventListener(t,i?_:h,i);else{if("http://www.w3.org/2000/svg"==a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function F(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=g++;else if(t.t<r.u)return;return r(c.event?c.event(t):t)}}}function k(e,t,r,n,a,i,o,s,f,u){var d,p,m,y,b,g,h,_,w,x,O,S,D,U,T,F,k=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(f=!!(32&r.__u),i=[s=t.__e=r.__e]),(d=c.__b)&&d(t);e:if("function"==typeof k)try{if(_=t.props,w="prototype"in k&&k.prototype.render,x=(d=k.contextType)&&n[d.__c],O=d?x?x.props.value:d.__:n,r.__c?h=(p=t.__c=r.__c).__=p.__E:(w?t.__c=p=new k(_,O):(t.__c=p=new I(_,O),p.constructor=k,p.render=j),x&&x.sub(p),p.props=_,p.state||(p.state={}),p.context=O,p.__n=n,m=p.__d=!0,p.__h=[],p._sb=[]),w&&null==p.__s&&(p.__s=p.state),w&&null!=k.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=B({},p.__s)),B(p.__s,k.getDerivedStateFromProps(_,p.__s))),y=p.props,b=p.state,p.__v=t,m)w&&null==k.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),w&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(w&&null==k.getDerivedStateFromProps&&_!==y&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(_,O),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(_,p.__s,O)||t.__v===r.__v)){for(t.__v!==r.__v&&(p.props=_,p.state=p.__s,p.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&o.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(_,p.__s,O),w&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(y,b,g)})}if(p.context=O,p.props=_,p.__P=e,p.__e=!1,D=c.__r,U=0,w){for(p.state=p.__s,p.__d=!1,D&&D(t),d=p.render(p.props,p.state,p.context),T=0;T<p._sb.length;T++)p.__h.push(p._sb[T]);p._sb=[]}else do p.__d=!1,D&&D(t),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++U<25)p.state=p.__s,null!=p.getChildContext&&(n=B(B({},n),p.getChildContext())),w&&!m&&null!=p.getSnapshotBeforeUpdate&&(g=p.getSnapshotBeforeUpdate(y,b)),C(e,E(F=null!=d&&d.type===A&&null==d.key?d.props.children:d)?F:[F],t,r,n,a,i,o,s,f,u),p.base=t.__e,t.__u&=-161,p.__h.length&&o.push(p),h&&(p.__E=p.__=null)}catch(e){if(t.__v=null,f||null!=i){for(t.__u|=f?160:32;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;c.__e(e,t,r)}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,a,i,o,s,f){var u,d,p,m,y,b,g,h=r.props,_=t.props,w=t.type;if("svg"===w?a="http://www.w3.org/2000/svg":"math"===w?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=i){for(u=0;u<i.length;u++)if((y=i[u])&&"setAttribute"in y==!!w&&(w?y.localName===w:3===y.nodeType)){e=y,i[u]=null;break}}if(null==e){if(null===w)return document.createTextNode(_);e=document.createElementNS(a,w,_.is&&_),s&&(c.__m&&c.__m(t,i),s=!1),i=null}if(null===w)h===_||s&&e.data===_||(e.data=_);else{if(i=i&&l.call(e.childNodes),h=r.props||v,!s&&null!=i)for(h={},u=0;u<e.attributes.length;u++)h[(y=e.attributes[u]).name]=y.value;for(u in h)if(y=h[u],"children"==u);else if("dangerouslySetInnerHTML"==u)p=y;else if(!(u in _)){if("value"==u&&"defaultValue"in _||"checked"==u&&"defaultChecked"in _)continue;R(e,u,null,y,a)}for(u in _)y=_[u],"children"==u?m=y:"dangerouslySetInnerHTML"==u?d=y:"value"==u?b=y:"checked"==u?g=y:s&&"function"!=typeof y||h[u]===y||R(e,u,y,h[u],a);if(d)s||p&&(d.__html===p.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(p&&(e.innerHTML=""),C(e,E(m)?m:[m],t,r,n,"foreignObject"===w?"http://www.w3.org/1999/xhtml":a,i,o,i?i[0]:r.__k&&G(r,0),s,f),null!=i)for(u=i.length;u--;)P(i[u]);s||(u="value","progress"===w&&null==b?e.removeAttribute("value"):void 0===b||b===e[u]&&("progress"!==w||b)&&("option"!==w||b===h[u])||R(e,u,b,h[u],a),u="checked",void 0!==g&&g!==e[u]&&R(e,u,g,h[u],a))}return e}(r.__e,t,r,n,a,i,o,f,u);(d=c.diffed)&&d(t)}function L(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)N(r[n],r[++n],r[++n]);c.__c&&c.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){c.__e(e,t.__v)}})}function N(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){c.__e(e,r)}}function j(e,t,r){return this.constructor(e,r)}function H(e,t,r){var n,a,i,o;c.__&&c.__(e,t),a=(n="function"==typeof r)?null:r&&r.__k||t.__k,i=[],o=[],k(t,e=(!n&&r||t).__k=O(A,null,[e]),a||v,v,t.namespaceURI,!n&&r?[r]:a?null:t.firstChild?l.call(t.childNodes):null,i,!n&&r?r:a?a.__e:t.firstChild,n,o),L(i,e,o)}l=w.slice,c={__e:function(e,t,r,n){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&null!=i.getDerivedStateFromError&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,n||{}),o=a.__d),o)return a.__E=a}catch(t){e=t}throw e}},d=0,I.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=B({},this.state),"function"==typeof e&&(e=e(B({},r),this.props)),e&&B(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),D(this))},I.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),D(this))},I.prototype.render=A,p=[],y="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b=function(e,t){return e.__v.__b-t.__v.__b},U.__r=0,g=0,h=F(!1),_=F(!0),e.s(["Fragment",()=>A,"createElement",()=>O,"h",()=>O,"options",()=>c,"render",()=>H],520905);var V,$,z,M,q=0,K=[],Z=c,W=Z.__b,Y=Z.__r,X=Z.diffed,J=Z.__c,Q=Z.unmount,ee=Z.__;function et(e,t){Z.__h&&Z.__h($,e,q||t),q=0;var r=$.__H||($.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function er(e){return q=1,function(e,t,r){var n=et(V++,2);if(n.t=e,!n.__c&&(n.__=[el(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],r=n.t(t,e);t!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=$,!$.u)){var a=function(e,t,r){if(!n.__c.__H)return!0;var a=n.__c.__H.__.filter(function(e){return!!e.__c});if(a.every(function(e){return!e.__N}))return!i||i.call(this,e,t,r);var o=!1;return a.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),!(!o&&n.__c.props===e)&&(!i||i.call(this,e,t,r))};$.u=!0;var i=$.shouldComponentUpdate,o=$.componentWillUpdate;$.componentWillUpdate=function(e,t,r){if(this.__e){var n=i;i=void 0,a(e,t,r),i=n}o&&o.call(this,e,t,r)},$.shouldComponentUpdate=a}return n.__N||n.__}(el,e)}function en(e,t){var r=et(V++,3);!Z.__s&&eu(r.__H,t)&&(r.__=e,r.i=t,$.__H.__h.push(r))}function ea(e,t){var r=et(V++,7);return eu(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function ei(){for(var e;e=K.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(es),e.__H.__h.forEach(ef),e.__H.__h=[]}catch(t){e.__H.__h=[],Z.__e(t,e.__v)}}Z.__b=function(e){$=null,W&&W(e)},Z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ee&&ee(e,t)},Z.__r=function(e){Y&&Y(e),V=0;var t=($=e.__c).__H;t&&(z===$?(t.__h=[],$.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(es),t.__h.forEach(ef),t.__h=[],V=0)),z=$},Z.diffed=function(e){X&&X(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==K.push(t)&&M===Z.requestAnimationFrame||((M=Z.requestAnimationFrame)||function(e){var t,r=function(){clearTimeout(n),eo&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);eo&&(t=requestAnimationFrame(r))})(ei)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),z=$=null},Z.__c=function(e,t){t.some(function(e){try{e.__h.forEach(es),e.__h=e.__h.filter(function(e){return!e.__||ef(e)})}catch(r){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Z.__e(r,e.__v)}}),J&&J(e,t)},Z.unmount=function(e){Q&&Q(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(e){try{es(e)}catch(e){t=e}}),r.__H=void 0,t&&Z.__e(t,r.__v))};var eo="function"==typeof requestAnimationFrame;function es(e){var t=$,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),$=t}function ef(e){var t=$;e.__c=e.__(),$=t}function eu(e,t){return!e||e.length!==t.length||t.some(function(t,r){return t!==e[r]})}function el(e,t){return"function"==typeof t?t(e):t}e.s(["useEffect",()=>en,"useMemo",()=>ea,"useState",()=>er],681348);var ec=e.i(398468),ed=e.i(101900),ep=e.i(510010),em=e.i(552462),ey=e.i(318040),eb=e.i(307867),eg=e.i(812012),eh=e.i(781370),e_=e.i(569963),ev=eg;class ew extends ev.BaseError{constructor({cause:e}){super("Smart Account is not deployed.",{cause:e,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(ew,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class ex extends ev.BaseError{constructor({cause:e,data:t,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}Object.defineProperty(ex,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521}),Object.defineProperty(ex,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class eE extends ev.BaseError{constructor({cause:e}){super("Failed to send funds to beneficiary.",{cause:e,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(eE,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class eB extends ev.BaseError{constructor({cause:e}){super("Gas value overflowed.",{cause:e,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(eB,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class eP extends ev.BaseError{constructor({cause:e}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:e,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(eP,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class eO extends ev.BaseError{constructor({cause:e,factory:t,factoryData:r,initCode:n}){super("Failed to simulate deployment for Smart Account.",{cause:e,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)","- Smart Account deployment execution reverted with an error\n",t&&`factory: ${t}`,r&&`factoryData: ${r}`,n&&`initCode: ${n}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(eO,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class eS extends ev.BaseError{constructor({cause:e,factory:t,factoryData:r,initCode:n}){super("Smart Account initialization implementation did not create an account.",{cause:e,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid","- Smart Account initialization implementation is incorrect\n",t&&`factory: ${t}`,r&&`factoryData: ${r}`,n&&`initCode: ${n}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(eS,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class eA extends ev.BaseError{constructor({cause:e,factory:t,factoryData:r,initCode:n,sender:a}){super("Smart Account initialization implementation does not return the expected sender.",{cause:e,metaMessages:["This could arise when:","Smart Account initialization implementation does not return a sender address\n",t&&`factory: ${t}`,r&&`factoryData: ${r}`,n&&`initCode: ${n}`,a&&`sender: ${a}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(eA,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class eI extends ev.BaseError{constructor({cause:e}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:e,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(eI,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class eG extends ev.BaseError{constructor({cause:e}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:e,name:"InternalCallOnlyError"})}}Object.defineProperty(eG,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class eD extends ev.BaseError{constructor({cause:e}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:e,name:"InvalidAggregatorError"})}}Object.defineProperty(eD,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class eU extends ev.BaseError{constructor({cause:e,nonce:t}){super("Invalid Smart Account nonce used for User Operation.",{cause:e,metaMessages:[t&&`nonce: ${t}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(eU,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class eC extends ev.BaseError{constructor({cause:e}){super("Bundler has not set a beneficiary address.",{cause:e,name:"InvalidBeneficiaryError"})}}Object.defineProperty(eC,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class eT extends ev.BaseError{constructor({cause:e}){super("Invalid fields set on User Operation.",{cause:e,name:"InvalidFieldsError"})}}Object.defineProperty(eT,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class eR extends ev.BaseError{constructor({cause:e,paymasterAndData:t}){super("Paymaster properties provided are invalid.",{cause:e,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",t&&`paymasterAndData: ${t}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(eR,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class eF extends ev.BaseError{constructor({cause:e}){super("Paymaster deposit for the User Operation is too low.",{cause:e,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(eF,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508}),Object.defineProperty(eF,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class ek extends ev.BaseError{constructor({cause:e}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:e,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(ek,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class eL extends ev.BaseError{constructor({cause:e}){super("The Paymaster contract has not been deployed.",{cause:e,name:"PaymasterNotDeployedError"})}}Object.defineProperty(eL,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class eN extends ev.BaseError{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterRateLimitError"})}}Object.defineProperty(eN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class ej extends ev.BaseError{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(ej,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class eH extends ev.BaseError{constructor({cause:e}){super("Paymaster `postOp` function reverted.",{cause:e,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(eH,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class eV extends ev.BaseError{constructor({cause:e,factory:t,factoryData:r,initCode:n}){super("Smart Account has already been deployed.",{cause:e,metaMessages:["Remove the following properties and try again:",t&&"`factory`",r&&"`factoryData`",n&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(eV,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class e$ extends ev.BaseError{constructor({cause:e}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:e,name:"SignatureCheckFailedError"})}}Object.defineProperty(e$,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class ez extends ev.BaseError{constructor({cause:e}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:e,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(ez,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class eM extends ev.BaseError{constructor({cause:e}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:e,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(eM,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class eq extends ev.BaseError{constructor({cause:e}){super("User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(eq,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class eK extends ev.BaseError{constructor({cause:e}){super("Paymaster for User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(eK,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class eZ extends ev.BaseError{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(eZ,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class eW extends ev.BaseError{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(eW,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class eY extends ev.BaseError{constructor({cause:e}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:e,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(eY,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class eX extends ev.BaseError{constructor({cause:e}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:e,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(eX,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class eJ extends ev.BaseError{constructor({cause:e}){super("User Operation rejected with op code validation error.",{cause:e,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(eJ,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class eQ extends ev.BaseError{constructor({cause:e}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:e,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(eQ,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class e0 extends ev.BaseError{constructor({cause:e}){super(`An error occurred while executing user operation: ${e?.shortMessage}`,{cause:e,name:"UnknownBundlerError"})}}class e1 extends ev.BaseError{constructor({cause:e}){super("User Operation verification gas limit exceeded.",{cause:e,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(e1,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class e2 extends ev.BaseError{constructor({cause:e}){super("User Operation verification gas limit is too low.",{cause:e,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(e2,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var e6=eg,e5=e.i(484),e3=e.i(764750);class e8 extends e6.BaseError{constructor(e,{callData:t,callGasLimit:r,docsPath:n,factory:a,factoryData:i,initCode:o,maxFeePerGas:s,maxPriorityFeePerGas:f,nonce:u,paymaster:l,paymasterAndData:c,paymasterData:d,paymasterPostOpGasLimit:p,paymasterVerificationGasLimit:m,preVerificationGas:y,sender:b,signature:g,verificationGasLimit:h}){super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",(0,e5.prettyPrint)({callData:t,callGasLimit:r,factory:a,factoryData:i,initCode:o,maxFeePerGas:void 0!==s&&`${(0,e3.formatGwei)(s)} gwei`,maxPriorityFeePerGas:void 0!==f&&`${(0,e3.formatGwei)(f)} gwei`,nonce:u,paymaster:l,paymasterAndData:c,paymasterData:d,paymasterPostOpGasLimit:p,paymasterVerificationGasLimit:m,preVerificationGas:y,sender:b,signature:g,verificationGasLimit:h})].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class e4 extends e6.BaseError{constructor({hash:e}){super(`User Operation receipt with hash "${e}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class e9 extends e6.BaseError{constructor({hash:e}){super(`User Operation with hash "${e}" could not be found.`,{name:"UserOperationNotFoundError"})}}class e7 extends e6.BaseError{constructor({hash:e}){super(`Timed out while waiting for User Operation with hash "${e}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}let te=[ex,eT,eF,eN,ej,e$,eM,eQ,eY,eX,eJ];function tt(e,{calls:t,docsPath:r,...n}){return new e8((()=>{let r=function(e,t){let r=(e.details||"").toLowerCase();if(ew.message.test(r))return new ew({cause:e});if(eE.message.test(r))return new eE({cause:e});if(eB.message.test(r))return new eB({cause:e});if(eP.message.test(r))return new eP({cause:e});if(eO.message.test(r))return new eO({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(eS.message.test(r))return new eS({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(eA.message.test(r))return new eA({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(eI.message.test(r))return new eI({cause:e});if(eG.message.test(r))return new eG({cause:e});if(eU.message.test(r))return new eU({cause:e,nonce:t.nonce});if(eD.message.test(r))return new eD({cause:e});if(eC.message.test(r))return new eC({cause:e});if(eR.message.test(r))return new eR({cause:e});if(eF.message.test(r))return new eF({cause:e});if(ek.message.test(r))return new ek({cause:e});if(eL.message.test(r))return new eL({cause:e});if(eH.message.test(r))return new eH({cause:e});if(ez.message.test(r))return new ez({cause:e});if(eV.message.test(r))return new eV({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(eq.message.test(r))return new eq({cause:e});if(eK.message.test(r))return new eK({cause:e});if(eW.message.test(r))return new eW({cause:e});if(eZ.message.test(r))return new eZ({cause:e});if(e1.message.test(r))return new e1({cause:e});if(e2.message.test(r))return new e2({cause:e});let n=e.walk(e=>te.some(t=>t.code===e.code));if(n){if(n.code===ex.code)return new ex({cause:e,data:n.data,message:n.details});if(n.code===eT.code)return new eT({cause:e});if(n.code===eF.code)return new eF({cause:e});if(n.code===eN.code)return new eN({cause:e});if(n.code===ej.code)return new ej({cause:e});if(n.code===e$.code)return new e$({cause:e});if(n.code===eM.code)return new eM({cause:e});if(n.code===eQ.code)return new eQ({cause:e});if(n.code===eY.code)return new eY({cause:e});if(n.code===eX.code)return new eX({cause:e});if(n.code===eJ.code)return new eJ({cause:e})}return new e0({cause:e})}(e,n);if(t&&r instanceof ex){let e,n=(r.walk(t=>{if("string"==typeof t.data||"string"==typeof t.data?.revertData||!(t instanceof eg.BaseError)&&"string"==typeof t.message){let r=(t.data?.revertData||t.data||t.message).match?.(/(0x[A-Za-z0-9]*)/);if(r)return e=r[1],!0}return!1}),e),a=t?.filter(e=>e.abi);if(n&&a.length>0)return function(e){let{calls:t,revertData:r}=e,{abi:n,functionName:a,args:i,to:o}=(()=>{let e=t?.filter(e=>!!e.abi);if(1===e.length)return e[0];let n=e.filter(e=>{try{return!!(0,e_.decodeErrorResult)({abi:e.abi,data:r})}catch{return!1}});return 1===n.length?n[0]:{abi:[],functionName:e.reduce((e,t)=>`${e?`${e} | `:""}${t.functionName}`,""),args:void 0,to:void 0}})(),s="0x"===r?new eh.ContractFunctionZeroDataError({functionName:a}):new eh.ContractFunctionRevertedError({abi:n,data:r,functionName:a});return new eh.ContractFunctionExecutionError(s,{abi:n,args:i,contractAddress:o,functionName:a})}({calls:a,revertData:n})}return r})(),{docsPath:r,...n})}var tr=e.i(995451),tn=e.i(255725);function ta(e){var t;let r={};return void 0!==e.callData&&(r.callData=e.callData),void 0!==e.callGasLimit&&(r.callGasLimit=(0,tr.numberToHex)(e.callGasLimit)),void 0!==e.factory&&(r.factory=e.factory),void 0!==e.factoryData&&(r.factoryData=e.factoryData),void 0!==e.initCode&&(r.initCode=e.initCode),void 0!==e.maxFeePerGas&&(r.maxFeePerGas=(0,tr.numberToHex)(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=(0,tr.numberToHex)(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(r.nonce=(0,tr.numberToHex)(e.nonce)),void 0!==e.paymaster&&(r.paymaster=e.paymaster),void 0!==e.paymasterAndData&&(r.paymasterAndData=e.paymasterAndData||"0x"),void 0!==e.paymasterData&&(r.paymasterData=e.paymasterData),void 0!==e.paymasterPostOpGasLimit&&(r.paymasterPostOpGasLimit=(0,tr.numberToHex)(e.paymasterPostOpGasLimit)),void 0!==e.paymasterVerificationGasLimit&&(r.paymasterVerificationGasLimit=(0,tr.numberToHex)(e.paymasterVerificationGasLimit)),void 0!==e.preVerificationGas&&(r.preVerificationGas=(0,tr.numberToHex)(e.preVerificationGas)),void 0!==e.sender&&(r.sender=e.sender),void 0!==e.signature&&(r.signature=e.signature),void 0!==e.verificationGasLimit&&(r.verificationGasLimit=(0,tr.numberToHex)(e.verificationGasLimit)),void 0!==e.authorization&&(r.eip7702Auth={address:(t=e.authorization).address,chainId:(0,tr.numberToHex)(t.chainId),nonce:(0,tr.numberToHex)(t.nonce),r:t.r?(0,tr.numberToHex)(BigInt(t.r),{size:32}):(0,tn.pad)("0x",{size:32}),s:t.s?(0,tr.numberToHex)(BigInt(t.s),{size:32}):(0,tn.pad)("0x",{size:32}),yParity:t.yParity?(0,tr.numberToHex)(t.yParity,{size:1}):(0,tn.pad)("0x",{size:32})}),r}var ti=e.i(169097),to=e.i(370358),ts=e.i(283490),tf=e.i(581627),tu=e.i(623647);async function tl(e,t){let{chainId:r,entryPointAddress:n,context:a,...i}=t,o=ta(i),{paymasterPostOpGasLimit:s,paymasterVerificationGasLimit:f,...u}=await e.request({method:"pm_getPaymasterData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},n,(0,tr.numberToHex)(r),a]});return{...u,...s&&{paymasterPostOpGasLimit:(0,tu.hexToBigInt)(s)},...f&&{paymasterVerificationGasLimit:(0,tu.hexToBigInt)(f)}}}async function tc(e,t){let{chainId:r,entryPointAddress:n,context:a,...i}=t,o=ta(i),{paymasterPostOpGasLimit:s,paymasterVerificationGasLimit:f,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},n,(0,tr.numberToHex)(r),a]});return{...u,...s&&{paymasterPostOpGasLimit:(0,tu.hexToBigInt)(s)},...f&&{paymasterVerificationGasLimit:(0,tu.hexToBigInt)(f)}}}let td=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function tp(e,t){let r,{account:n=e.account,parameters:a=td,stateOverride:i}=t;if(!n)throw new em.AccountNotFoundError;let o=(0,ep.parseAccount)(n),s=t.paymaster??e?.paymaster,f="string"==typeof s?s:void 0,{getPaymasterStubData:u,getPaymasterData:l}=(()=>{if(!0===s)return{getPaymasterStubData:t=>(0,ey.getAction)(e,tc,"getPaymasterStubData")(t),getPaymasterData:t=>(0,ey.getAction)(e,tl,"getPaymasterData")(t)};if("object"==typeof s){let{getPaymasterStubData:e,getPaymasterData:t}=s;return{getPaymasterStubData:t&&e?e:t,getPaymasterData:t&&e?t:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),c=t.paymasterContext?t.paymasterContext:e?.paymasterContext,d={...t,paymaster:f,sender:o.address},[p,m,y,b,g]=await Promise.all([(async()=>t.calls?o.encodeCalls(t.calls.map(e=>e.abi?{data:(0,ts.encodeFunctionData)(e),to:e.to,value:e.value}:e)):t.callData)(),(async()=>{if(!a.includes("factory"))return;if(t.initCode)return{initCode:t.initCode};if(t.factory&&t.factoryData)return{factory:t.factory,factoryData:t.factoryData};let{factory:e,factoryData:r}=await o.getFactoryArgs();return"0.6"===o.entryPoint.version?{initCode:e&&r?(0,tf.concat)([e,r]):void 0}:{factory:e,factoryData:r}})(),(async()=>{if(a.includes("fees")){if("bigint"==typeof t.maxFeePerGas&&"bigint"==typeof t.maxPriorityFeePerGas)return d;if(e?.userOperation?.estimateFeesPerGas){let t=await e.userOperation.estimateFeesPerGas({account:o,bundlerClient:e,userOperation:d});return{...d,...t}}try{let r=e.client??e,n=await (0,ey.getAction)(r,to.estimateFeesPerGas,"estimateFeesPerGas")({chain:r.chain,type:"eip1559"});return{maxFeePerGas:"bigint"==typeof t.maxFeePerGas?t.maxFeePerGas:BigInt(2n*n.maxFeePerGas),maxPriorityFeePerGas:"bigint"==typeof t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:BigInt(2n*n.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return"bigint"==typeof t.nonce?t.nonce:o.getNonce()})(),(async()=>{if(a.includes("authorization")){if("object"==typeof t.authorization)return t.authorization;if(o.authorization&&!await o.isDeployed())return{...await (0,ti.prepareAuthorization)(o.client,o.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);async function h(){return r||(e.chain?e.chain.id:r=await (0,ey.getAction)(e,ed.getChainId,"getChainId")({}))}void 0!==p&&(d.callData=p),void 0!==m&&(d={...d,...m}),void 0!==y&&(d={...d,...y}),void 0!==b&&(d.nonce=b),void 0!==g&&(d.authorization=g),a.includes("signature")&&(void 0!==t.signature?d.signature=t.signature:d.signature=await o.getStubSignature(d)),"0.6"!==o.entryPoint.version||d.initCode||(d.initCode="0x");let _=!1;if(a.includes("paymaster")&&u&&!f&&!t.paymasterAndData){let{isFinal:e=!1,sponsor:t,...r}=await u({chainId:await h(),entryPointAddress:o.entryPoint.address,context:c,...d});_=e,d={...d,...r}}if("0.6"!==o.entryPoint.version||d.paymasterAndData||(d.paymasterAndData="0x"),a.includes("gas")){if(o.userOperation?.estimateGas){let e=await o.userOperation.estimateGas(d);d={...d,...e}}if(void 0===d.callGasLimit||void 0===d.preVerificationGas||void 0===d.verificationGasLimit||d.paymaster&&void 0===d.paymasterPostOpGasLimit||d.paymaster&&void 0===d.paymasterVerificationGasLimit){let t=await (0,ey.getAction)(e,tm,"estimateUserOperationGas")({account:o,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...d.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...d});d={...d,callGasLimit:d.callGasLimit??t.callGasLimit,preVerificationGas:d.preVerificationGas??t.preVerificationGas,verificationGasLimit:d.verificationGasLimit??t.verificationGasLimit,paymasterPostOpGasLimit:d.paymasterPostOpGasLimit??t.paymasterPostOpGasLimit,paymasterVerificationGasLimit:d.paymasterVerificationGasLimit??t.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&l&&!f&&!t.paymasterAndData&&!_){let e=await l({chainId:await h(),entryPointAddress:o.entryPoint.address,context:c,...d});d={...d,...e}}return delete d.calls,delete d.parameters,delete d.paymasterContext,"string"!=typeof d.paymaster&&delete d.paymaster,d}async function tm(e,t){let{account:r=e.account,entryPointAddress:n,stateOverride:a}=t;if(!r&&!t.sender)throw new em.AccountNotFoundError;let i=r?(0,ep.parseAccount)(r):void 0,o=(0,eb.serializeStateOverride)(a),s=i?await (0,ey.getAction)(e,tp,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{var f;let t,r=[ta(s),n??i?.entryPoint?.address];return f=await e.request({method:"eth_estimateUserOperationGas",params:o?[...r,o]:[...r]}),t={},f.callGasLimit&&(t.callGasLimit=BigInt(f.callGasLimit)),f.preVerificationGas&&(t.preVerificationGas=BigInt(f.preVerificationGas)),f.verificationGasLimit&&(t.verificationGasLimit=BigInt(f.verificationGasLimit)),f.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(f.paymasterPostOpGasLimit)),f.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(f.paymasterVerificationGasLimit)),t}catch(r){let e=t.calls;throw tt(r,{...s,...e?{calls:e}:{}})}}async function ty(e,{hash:t}){let r,n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new e9({hash:t});let{blockHash:a,blockNumber:i,entryPoint:o,transactionHash:s,userOperation:f}=n;return{blockHash:a,blockNumber:BigInt(i),entryPoint:o,transactionHash:s,userOperation:(r={...f},f.callGasLimit&&(r.callGasLimit=BigInt(f.callGasLimit)),f.maxFeePerGas&&(r.maxFeePerGas=BigInt(f.maxFeePerGas)),f.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=BigInt(f.maxPriorityFeePerGas)),f.nonce&&(r.nonce=BigInt(f.nonce)),f.paymasterPostOpGasLimit&&(r.paymasterPostOpGasLimit=BigInt(f.paymasterPostOpGasLimit)),f.paymasterVerificationGasLimit&&(r.paymasterVerificationGasLimit=BigInt(f.paymasterVerificationGasLimit)),f.preVerificationGas&&(r.preVerificationGas=BigInt(f.preVerificationGas)),f.verificationGasLimit&&(r.verificationGasLimit=BigInt(f.verificationGasLimit)),r)}}var tb=e.i(521562),tg=e.i(638760);async function th(e,{hash:t}){let r,n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new e4({hash:t});return r={...n},n.actualGasCost&&(r.actualGasCost=BigInt(n.actualGasCost)),n.actualGasUsed&&(r.actualGasUsed=BigInt(n.actualGasUsed)),n.logs&&(r.logs=n.logs.map(e=>(0,tb.formatLog)(e))),n.receipt&&(r.receipt=(0,tg.formatTransactionReceipt)(r.receipt)),r}async function t_(e,t){let{account:r=e.account,entryPointAddress:n}=t;if(!r&&!t.sender)throw new em.AccountNotFoundError;let a=r?(0,ep.parseAccount)(r):void 0,i=a?await (0,ey.getAction)(e,tp,"prepareUserOperation")(t):t,o=t.signature||await a?.signUserOperation?.(i),s=ta({...i,signature:o});try{return await e.request({method:"eth_sendUserOperation",params:[s,n??a?.entryPoint?.address]},{retryCount:0})}catch(r){let e=t.calls;throw tt(r,{...i,...e?{calls:e}:{},signature:o})}}var tv=e.i(889776),tw=e.i(32293),tx=e.i(388073);function tE(e){return{estimateUserOperationGas:t=>tm(e,t),getChainId:()=>(0,ed.getChainId)(e),getSupportedEntryPoints:()=>e.request({method:"eth_supportedEntryPoints"}),getUserOperation:t=>ty(e,t),getUserOperationReceipt:t=>th(e,t),prepareUserOperation:t=>tp(e,t),sendUserOperation:t=>t_(e,t),waitForUserOperationReceipt:t=>(function(e,t){let{hash:r,pollingInterval:n=e.pollingInterval,retryCount:a,timeout:i=12e4}=t,o=0,s=(0,tx.stringify)(["waitForUserOperationReceipt",e.uid,r]);return new Promise((t,f)=>{let u=(0,tv.observe)(s,{resolve:t,reject:f},t=>{let s=e=>{l(),e(),u()},f=i?setTimeout(()=>s(()=>t.reject(new e7({hash:r}))),i):void 0,l=(0,tw.poll)(async()=>{a&&o>=a&&(clearTimeout(f),s(()=>t.reject(new e7({hash:r}))));try{let n=await (0,ey.getAction)(e,th,"getUserOperationReceipt")({hash:r});s(()=>t.resolve(n))}catch(e){"UserOperationReceiptNotFoundError"!==e.name&&s(()=>t.reject(e))}finally{clearTimeout(f)}o++},{emitOnBegin:!0,interval:n});return l})})})(e,t)}}function tB(e){let{client:t,key:r="bundler",name:n="Bundler Client",paymaster:a,paymasterContext:i,transport:o,userOperation:s}=e;return Object.assign((0,ec.createClient)({...e,chain:e.chain??t?.chain,key:r,name:n,transport:o,type:"bundlerClient"}),{client:t,paymaster:a,paymasterContext:i,userOperation:s}).extend(tE)}e.s(["createBundlerClient",()=>tB],223506),e.s(["IntegerOutOfRangeError",()=>rx,"InvalidHexBooleanError",()=>rE,"InvalidHexTypeError",()=>rB,"InvalidHexValueError",()=>rP,"InvalidLengthError",()=>rO,"SizeExceedsPaddingSizeError",()=>rI,"SizeOverflowError",()=>rS,"SliceOffsetOutOfBoundsError",()=>rA,"assert",()=>rt,"concat",()=>rr,"from",()=>rn,"fromBoolean",()=>ra,"fromBytes",()=>ri,"fromNumber",()=>ro,"fromString",()=>rs,"isEqual",()=>rf,"padLeft",()=>ru,"padRight",()=>rl,"random",()=>rc,"size",()=>rp,"slice",()=>rd,"toBigInt",()=>rb,"toBoolean",()=>rg,"toBytes",()=>rh,"toNumber",()=>r_,"toString",()=>rv,"trimLeft",()=>rm,"trimRight",()=>ry,"validate",()=>rw],853814);var tP=e.i(944445);let tO=BigInt(0),tS=BigInt(1);function tA(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function tI(e,t,r=""){let n=(0,tP.isBytes)(e),a=e?.length,i=void 0!==t;if(!n||i&&a!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(i?` of length ${t}`:"")+", got "+(n?`length=${a}`:`type=${typeof e}`));return e}function tG(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function tD(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tO:BigInt("0x"+e)}function tU(e){return tD((0,tP.bytesToHex)(e))}function tC(e){return(0,tP.abytes)(e),tD((0,tP.bytesToHex)(Uint8Array.from(e).reverse()))}function tT(e,t){return(0,tP.hexToBytes)(e.toString(16).padStart(2*t,"0"))}function tR(e,t){return tT(e,t).reverse()}function tF(e,t,r){let n;if("string"==typeof t)try{n=(0,tP.hexToBytes)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,tP.isBytes)(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n}let tk=e=>"bigint"==typeof e&&tO<=e;function tL(e){let t;for(t=0;e>tO;e>>=tS,t+=1);return t}let tN=e=>(tS<<BigInt(e))-tS;function tj(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let a=e[t];if(n&&void 0===a)return;let i=typeof a;if(i!==r||null===a)throw Error(`param "${t}" is invalid: expected ${r}, got ${i}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function tH(e){let t=new WeakMap;return(r,...n)=>{let a=t.get(r);if(void 0!==a)return a;let i=e(r,...n);return t.set(r,i),i}}tP.abytes,tP.anumber,tP.bytesToHex,tP.bytesToUtf8,tP.concatBytes,tP.hexToBytes,tP.isBytes,tP.randomBytes,tP.utf8ToBytes;let tV=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r};class t$ extends Error{constructor(e,t={}){const r=(()=>{if(t.cause instanceof t$){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),n=t.cause instanceof t$&&t.cause.docsPath||t.docsPath,a=`https://oxlib.sh${n??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||n?["",r?`Details: ${r}`:void 0,n?`See: ${a}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=r,this.docs=a,this.docsPath=n,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,r):r?null:t}(this,e)}}function tz(e,t,r){return JSON.stringify(e,(e,r)=>"function"==typeof t?t(e,r):"bigint"==typeof r?r.toString()+"#__bigint":r,r)}function tM(e,t){if(t2(e)>t)throw new t8({givenSize:t2(e),maxSize:t})}function tq(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function tK(e,t){if(rp(e)>t)throw new rS({givenSize:rp(e),maxSize:t})}function tZ(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;let a=e.replace("0x","");if(a.length>2*n)throw new rI({size:Math.ceil(a.length/2),targetSize:n,type:"Hex"});return`0x${a["right"===r?"padEnd":"padStart"](2*n,"0")}`}function tW(e,t={}){let{dir:r="left"}=t,n=e.replace("0x",""),a=0;for(let e=0;e<n.length-1;e++)if("0"===n["left"===r?e:n.length-e-1].toString())a++;else break;return"0"===(n="left"===r?n.slice(a):n.slice(0,n.length-a))?"0x":"right"===r&&n.length%2==1?`0x${n}0`:`0x${n}`}let tY=new TextEncoder;function tX(...e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}function tJ(e){return e instanceof Uint8Array?e:"string"==typeof e?t0(e):tQ(e)}function tQ(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function t0(e,t={}){let{size:r}=t,n=e;r&&(tK(e,r),n=rl(e,r));let a=n.slice(2);a.length%2&&(a=`0${a}`);let i=a.length/2,o=new Uint8Array(i);for(let e=0,t=0;e<i;e++){let r=tq(a.charCodeAt(t++)),n=tq(a.charCodeAt(t++));if(void 0===r||void 0===n)throw new t$(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);o[e]=16*r+n}return o}function t1(e,t={}){let{size:r}=t,n=tY.encode(e);return"number"==typeof r?(tM(n,r),function(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new t9({size:e.length,targetSize:n,type:"Bytes"});let a=new Uint8Array(n);for(let t=0;t<n;t++){let i="right"===r;a[i?t:n-t-1]=e[i?t:e.length-t-1]}return a}(n,{dir:"right",size:r})):n}function t2(e){return e.length}function t6(e,t,r,n={}){let{strict:a}=n;if("number"==typeof t&&t>0&&t>t2(e)-1)throw new t4({offset:t,position:"start",size:t2(e)});let i=e.slice(t,r);return a&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&t2(e)!==r-t)throw new t4({offset:r,position:"end",size:t2(e)})}(i,t,r),i}function t5(e,t={}){let{size:r}=t;return void 0!==r&&tM(e,r),rb(ri(e,t),t)}class t3 extends t${constructor(e){super(`Value \`${"object"==typeof e?tz(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class t8 extends t${constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class t4 extends t${constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}class t9 extends t${constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}let t7=new TextEncoder,re=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rt(e,t={}){let{strict:r=!1}=t;if(!e||"string"!=typeof e)throw new rB(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new rP(e)}function rr(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function rn(e){return e instanceof Uint8Array?ri(e):Array.isArray(e)?ri(new Uint8Array(e)):e}function ra(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(tK(r,t.size),ru(r,t.size)):r}function ri(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=re[e[t]];let n=`0x${r}`;return"number"==typeof t.size?(tK(n,t.size),rl(n,t.size)):n}function ro(e,t={}){let r,{signed:n,size:a}=t,i=BigInt(e);a?r=n?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&n?-r-1n:0;if(r&&i>r||i<o){let t="bigint"==typeof e?"n":"";throw new rx({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:n,size:a,value:`${e}${t}`})}let s=(n&&i<0?(1n<<BigInt(8*a))+BigInt(i):i).toString(16),f=`0x${s}`;return a?ru(f,a):f}function rs(e,t={}){return ri(t7.encode(e),t)}function rf(e,t){return tV(t0(e),t0(t))}function ru(e,t){return tZ(e,{dir:"left",size:t})}function rl(e,t){return tZ(e,{dir:"right",size:t})}function rc(e){return ri(crypto.getRandomValues(new Uint8Array(e)))}function rd(e,t,r,n={}){let{strict:a}=n;if("number"==typeof t&&t>0&&t>rp(e)-1)throw new rA({offset:t,position:"start",size:rp(e)});let i=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return a&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&rp(e)!==r-t)throw new rA({offset:r,position:"end",size:rp(e)})}(i,t,r),i}function rp(e){return Math.ceil((e.length-2)/2)}function rm(e){return tW(e,{dir:"left"})}function ry(e){return tW(e,{dir:"right"})}function rb(e,t={}){let{signed:r}=t;t.size&&tK(e,t.size);let n=BigInt(e);if(!r)return n;let a=(1n<<8n*BigInt((e.length-2)/2))-1n;return n<=a>>1n?n:n-a-1n}function rg(e,t={}){t.size&&tK(e,t.size);let r=rm(e);if("0x"===r)return!1;if("0x1"===r)return!0;throw new rE(e)}function rh(e,t={}){return t0(e,t)}function r_(e,t={}){let{signed:r,size:n}=t;return r||n?Number(rb(e,t)):Number(e)}function rv(e,t={}){let{size:r}=t,n=t0(e);return r&&(tM(n,r),n=function(e,t={}){let{dir:r="left"}=t,n=e,a=0;for(let e=0;e<n.length-1;e++)if("0"===n["left"===r?e:n.length-e-1].toString())a++;else break;return"left"===r?n.slice(a):n.slice(0,n.length-a)}(n,{dir:"right"})),new TextDecoder().decode(n)}function rw(e,t={}){let{strict:r=!1}=t;try{return rt(e,{strict:r}),!0}catch{return!1}}class rx extends t${constructor({max:e,min:t,signed:r,size:n,value:a}){super(`Number \`${a}\` is not in safe${n?` ${8*n}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class rE extends t${constructor(e){super(`Hex value \`"${e}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}class rB extends t${constructor(e){super(`Value \`${"object"==typeof e?tz(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class rP extends t${constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class rO extends t${constructor(e){super(`Hex value \`"${e}"\` is an odd length (${e.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}class rS extends t${constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class rA extends t${constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class rI extends t${constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}var rG=e.i(853814);function rD(e,t={}){let{compressed:r}=t,{prefix:n,x:a,y:i}=e;if(!1===r||"bigint"==typeof a&&"bigint"==typeof i){if(4!==n)throw new rj({prefix:n,cause:new rV});return}if(!0===r||"bigint"==typeof a&&void 0===i){if(3!==n&&2!==n)throw new rj({prefix:n,cause:new rH});return}throw new rN({publicKey:e})}function rU(e){let{x:t,y:r}=e;return{prefix:r%2n===0n?2:3,x:t}}function rC(e){let t=(()=>{if(rw(e))return rR(e);if(function(e){try{if(!(e instanceof Uint8Array)&&(!e||"object"!=typeof e||!("BYTES_PER_ELEMENT"in e)||1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name))throw new t3(e);return!0}catch{return!1}}(e))return rT(e);let{prefix:t,x:r,y:n}=e;return"bigint"==typeof r&&"bigint"==typeof n?{prefix:t??4,x:r,y:n}:{prefix:t,x:r}})();return rD(t),t}function rT(e){return rR(ri(e))}function rR(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new r$({publicKey:e});if(130===e.length)return{prefix:4,x:BigInt(rd(e,0,32)),y:BigInt(rd(e,32,64))};if(132===e.length){let t=Number(rd(e,0,1));return{prefix:t,x:BigInt(rd(e,1,33)),y:BigInt(rd(e,33,65))}}return{prefix:Number(rd(e,0,1)),x:BigInt(rd(e,1,33))}}function rF(e,t={}){return t0(rk(e,t))}function rk(e,t={}){rD(e);let{prefix:r,x:n,y:a}=e,{includePrefix:i=!0}=t;return rr(i?ro(r,{size:1}):"0x",ro(n,{size:32}),"bigint"==typeof a?ro(a,{size:32}):"0x")}function rL(e,t={}){try{return rD(e,t),!0}catch(e){return!1}}e.s(["Hex",0,rG],431110);class rN extends t${constructor({publicKey:e}){super(`Value \`${tz(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class rj extends t${constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class rH extends t${constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class rV extends t${constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class r$ extends t${constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${rp(rn(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}e.s(["InvalidCompressedPrefixError",()=>rH,"InvalidError",()=>rN,"InvalidPrefixError",()=>rj,"InvalidSerializedSizeError",()=>r$,"InvalidUncompressedPrefixError",()=>rV,"assert",()=>rD,"compress",()=>rU,"from",()=>rC,"fromBytes",()=>rT,"fromHex",()=>rR,"toBytes",()=>rF,"toHex",()=>rk,"validate",()=>rL],539881);var rz=e.i(539881);e.s(["PublicKey",0,rz],568349);var rM=e.i(837474),rq=e.i(417896);let rK=BigInt(0),rZ=BigInt(1),rW=BigInt(2),rY=BigInt(3),rX=BigInt(4),rJ=BigInt(5),rQ=BigInt(7),r0=BigInt(8),r1=BigInt(9),r2=BigInt(16);function r6(e,t){let r=e%t;return r>=rK?r:t+r}function r5(e,t,r){let n=e;for(;t-- >rK;)n*=n,n%=r;return n}function r3(e,t){if(e===rK)throw Error("invert: expected non-zero number");if(t<=rK)throw Error("invert: expected positive modulus, got "+t);let r=r6(e,t),n=t,a=rK,i=rZ,o=rZ,s=rK;for(;r!==rK;){let e=n/r,t=n%r,f=a-o*e,u=i-s*e;n=r,r=t,a=o,i=s,o=f,s=u}if(n!==rZ)throw Error("invert: does not exist");return r6(a,t)}function r8(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function r4(e,t){let r=(e.ORDER+rZ)/rX,n=e.pow(t,r);return r8(e,n,t),n}function r9(e,t){let r=(e.ORDER-rJ)/r0,n=e.mul(t,rW),a=e.pow(n,r),i=e.mul(t,a),o=e.mul(e.mul(i,rW),a),s=e.mul(i,e.sub(o,e.ONE));return r8(e,s,t),s}function r7(e){if(e<rY)throw Error("sqrt is not defined for small field");let t=e-rZ,r=0;for(;t%rW===rK;)t/=rW,r++;let n=rW,a=ni(e);for(;1===nn(a,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return r4;let i=a.pow(n,t),o=(t+rZ)/rW;return function(e,n){if(e.is0(n))return n;if(1!==nn(e,n))throw Error("Cannot find square root");let a=r,s=e.mul(e.ONE,i),f=e.pow(n,t),u=e.pow(n,o);for(;!e.eql(f,e.ONE);){if(e.is0(f))return e.ZERO;let t=1,r=e.sqr(f);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===a)throw Error("Cannot find square root");let n=rZ<<BigInt(a-t-1),i=e.pow(s,n);a=t,s=e.sqr(i),f=e.mul(f,s),u=e.mul(u,i)}return u}}let ne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nt(e){return tj(e,ne.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),e}function nr(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),a=t.reduce((t,r,a)=>e.is0(r)?t:(n[a]=t,e.mul(t,r)),e.ONE),i=e.inv(a);return t.reduceRight((t,r,a)=>e.is0(r)?t:(n[a]=e.mul(t,n[a]),e.mul(t,r)),i),n}function nn(e,t){let r=(e.ORDER-rZ)/rW,n=e.pow(t,r),a=e.eql(n,e.ONE),i=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!a&&!i&&!o)throw Error("invalid Legendre symbol result");return a?1:i?0:-1}function na(e,t){void 0!==t&&(0,tP.anumber)(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ni(e,t,r=!1,n={}){let a,i,o,s;if(e<=rK)throw Error("invalid field: expected ORDER > 0, got "+e);let f=!1;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(i=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(f=t.modFromBytes),s=t.allowedLengths}else"number"==typeof t&&(i=t),n.sqrt&&(o=n.sqrt);let{nBitLength:u,nByteLength:l}=na(e,i);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:e,isLE:r,BITS:u,BYTES:l,MASK:tN(u),ZERO:rK,ONE:rZ,allowedLengths:s,create:t=>r6(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return rK<=t&&t<e},is0:e=>e===rK,isValidNot0:e=>!c.is0(e)&&c.isValid(e),isOdd:e=>(e&rZ)===rZ,neg:t=>r6(-t,e),eql:(e,t)=>e===t,sqr:t=>r6(t*t,e),add:(t,r)=>r6(t+r,e),sub:(t,r)=>r6(t-r,e),mul:(t,r)=>r6(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<rK)throw Error("invalid exponent, negatives unsupported");if(r===rK)return e.ONE;if(r===rZ)return t;let n=e.ONE,a=t;for(;r>rK;)r&rZ&&(n=e.mul(n,a)),a=e.sqr(a),r>>=rZ;return n})(c,e,t),div:(t,r)=>r6(t*r3(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>r3(t,e),sqrt:o||(t=>(a||(a=function(e){if(e%rX===rY)return r4;if(e%r0===rJ)return r9;if(e%r2===r1){let t,r,n,a,i,o;return t=ni(e),n=(r=r7(e))(t,t.neg(t.ONE)),a=r(t,n),i=r(t,t.neg(n)),o=(e+rQ)/r2,(e,t)=>{let r=e.pow(t,o),s=e.mul(r,n),f=e.mul(r,a),u=e.mul(r,i),l=e.eql(e.sqr(s),t),c=e.eql(e.sqr(f),t);r=e.cmov(r,s,l),s=e.cmov(u,f,c);let d=e.eql(e.sqr(s),t),p=e.cmov(r,s,d);return r8(e,p,t),p}}return r7(e)}(e)),a(c,t))),toBytes:e=>r?tR(e,l):tT(e,l),fromBytes:(t,n=!0)=>{if(s){if(!s.includes(t.length)||t.length>l)throw Error("Field.fromBytes: expected "+s+" bytes, got "+t.length);let e=new Uint8Array(l);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);let a=r?tC(t):tU(t);if(f&&(a=r6(a,e)),!n&&!c.isValid(a))throw Error("invalid field element: outside of range 0..ORDER");return a},invertBatch:e=>nr(c,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(c)}function no(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function ns(e){let t=no(e);return t+Math.ceil(t/2)}let nf=BigInt(0),nu=BigInt(1);function nl(e,t){let r=t.negate();return e?r:t}function nc(e,t){let r=nr(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function nd(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function np(e,t){nd(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),a=2**e;return{windows:r,windowSize:n,mask:tN(e),maxNumber:a,shiftBy:BigInt(e)}}function nm(e,t,r){let{windowSize:n,mask:a,maxNumber:i,shiftBy:o}=r,s=Number(e&a),f=e>>o;s>n&&(s-=i,f+=nu);let u=t*n,l=u+Math.abs(s)-1,c=0===s;return{nextN:f,offset:l,isZero:c,isNeg:s<0,isNegF:t%2!=0,offsetF:u}}let ny=new WeakMap,nb=new WeakMap;function ng(e){return nb.get(e)||1}function nh(e){if(e!==nf)throw Error("invalid wNAF")}class n_{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>nf;)t&nu&&(r=r.add(n)),n=n.double(),t>>=nu;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=np(t,this.bits),a=[],i=e,o=i;for(let e=0;e<r;e++){o=i,a.push(o);for(let e=1;e<n;e++)o=o.add(i),a.push(o);i=o.double()}return a}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,a=this.BASE,i=np(e,this.bits);for(let e=0;e<i.windows;e++){let{nextN:o,offset:s,isZero:f,isNeg:u,isNegF:l,offsetF:c}=nm(r,e,i);r=o,f?a=a.add(nl(l,t[c])):n=n.add(nl(u,t[s]))}return nh(r),{p:n,f:a}}wNAFUnsafe(e,t,r,n=this.ZERO){let a=np(e,this.bits);for(let e=0;e<a.windows&&r!==nf;e++){let{nextN:i,offset:o,isZero:s,isNeg:f}=nm(r,e,a);if(r=i,!s){let e=t[o];n=n.add(f?e.negate():e)}}return nh(r),n}getPrecomputes(e,t,r){let n=ny.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),ny.set(t,n))),n}cached(e,t,r){let n=ng(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let a=ng(e);return 1===a?this._unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)}createCache(e,t){nd(t,this.bits),nb.set(e,t),ny.delete(e)}hasCache(e){return 1!==ng(e)}}function nv(e,t,r){if(!t)return ni(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return nt(t),t}let nw=(e,t)=>(e+(e>=0?t:-t)/nS)/t;function nx(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function nE(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return tA(r.lowS,"lowS"),tA(r.prehash,"prehash"),void 0!==r.format&&nx(r.format),r}let nB={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=nB;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,a=tG(n);if(a.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?tG(a.length/2|128):"";return tG(e)+i+a+t},decode(e,t){let{Err:r}=nB,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let a=t[n++],i=0;if(128&a){let e=127&a;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)i=i<<8|e;if(n+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=a;let o=t.subarray(n,n+i);if(o.length!==i)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=nB;if(e<nP)throw new t("integer: negative integers are not allowed");let r=tG(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=nB;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return tU(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=nB,a=tF("signature",e),{v:i,l:o}=n.decode(48,a);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:s,l:f}=n.decode(2,i),{v:u,l:l}=n.decode(2,f);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(s),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=nB,n=t.encode(2,r.encode(e.r)),a=t.encode(2,r.encode(e.s));return t.encode(48,n+a)}},nP=BigInt(0),nO=BigInt(1),nS=BigInt(2),nA=BigInt(3),nI=BigInt(4);function nG(e,t){let r,{BYTES:n}=e;if("bigint"==typeof t)r=t;else{let a=tF("private key",t);try{r=e.fromBytes(a)}catch(e){throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function nD(e){return Uint8Array.of(e?2:3)}function nU(e,t){nt(e);let{A:r,B:n,Z:a}=t;if(!e.isValid(r)||!e.isValid(n)||!e.isValid(a))throw Error("mapToCurveSimpleSWU: invalid opts");let i=function(e,t){let r=e.ORDER,n=nP;for(let e=r-nO;e%nS===nP;e/=nS)n+=nO;let a=n,i=nS<<a-nO-nO,o=i*nS,s=(r-nO)/o,f=(s-nO)/nS,u=o-nO,l=e.pow(t,s),c=e.pow(t,(s+nO)/nS),d=(t,r)=>{let n=l,o=e.pow(r,u),s=e.sqr(o);s=e.mul(s,r);let d=e.mul(t,s);d=e.pow(d,f),d=e.mul(d,o),o=e.mul(d,r),s=e.mul(d,t);let p=e.mul(s,o);d=e.pow(p,i);let m=e.eql(d,e.ONE);o=e.mul(s,c),d=e.mul(p,n),s=e.cmov(o,s,m),p=e.cmov(d,p,m);for(let t=a;t>nO;t--){let r=t-nS;r=nS<<r-nO;let a=e.pow(p,r),i=e.eql(a,e.ONE);o=e.mul(s,n),n=e.mul(n,n),a=e.mul(p,n),s=e.cmov(o,s,i),p=e.cmov(a,p,i)}return{isValid:m,value:s}};if(e.ORDER%nI===nA){let r=(e.ORDER-nA)/nI,n=e.sqrt(e.neg(t));d=(t,a)=>{let i=e.sqr(a),o=e.mul(t,a);i=e.mul(i,o);let s=e.pow(i,r);s=e.mul(s,o);let f=e.mul(s,n),u=e.mul(e.sqr(s),a),l=e.eql(u,t),c=e.cmov(f,s,l);return{isValid:l,value:c}}}return d}(e,a);if(!e.isOdd)throw Error("Field does not have .isOdd()");return t=>{let o,s,f,u,l,c,d,p;o=e.sqr(t),o=e.mul(o,a),s=e.sqr(o),s=e.add(s,o),f=e.add(s,e.ONE),f=e.mul(f,n),u=e.cmov(a,e.neg(s),!e.eql(s,e.ZERO)),u=e.mul(u,r),s=e.sqr(f),c=e.sqr(u),l=e.mul(c,r),s=e.add(s,l),s=e.mul(s,f),c=e.mul(c,u),l=e.mul(c,n),s=e.add(s,l),d=e.mul(o,f);let{isValid:m,value:y}=i(s,c);p=e.mul(o,t),p=e.mul(p,y),d=e.cmov(d,f,m),p=e.cmov(p,y,m);let b=e.isOdd(t)===e.isOdd(p);p=e.cmov(e.neg(p),p,b);let g=nr(e,[u],!0)[0];return{x:d=e.mul(d,g),y:p}}}function nC(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function nT(e,t){let r=t=>(function(e){let t,{CURVE:r,curveOpts:n,hash:a,ecdsaOpts:i}=function(e){let t,r,n,a,{CURVE:i,curveOpts:o}=(t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,a={Fp:r,Fn:ni(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes},{CURVE:t,curveOpts:a}),s={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:i,curveOpts:o,hash:e.hash,ecdsaOpts:s}}(e),o=function(e,t,r={}){(0,tP.ahash)(t),tj(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||tP.randomBytes,a=r.hmac||((e,...r)=>(0,rq.hmac)(t,e,(0,tP.concatBytes)(...r))),{Fp:i,Fn:o}=e,{ORDER:s,BITS:f}=o,{keygen:u,getPublicKey:l,getSharedSecret:c,utils:d,lengths:p}=function(e,t={}){let{Fn:r}=e,n=t.randomBytes||tP.randomBytes,a=Object.assign(nC(e.Fp,r),{seed:ns(r.ORDER)});function i(e){try{return!!nG(r,e)}catch(e){return!1}}function o(e=n(a.seed)){return function(e,t,r=!1){let n=e.length,a=no(t),i=ns(t);if(n<16||n<i||n>1024)throw Error("expected "+i+"-1024 bytes of input, got "+n);let o=r6(r?tC(e):tU(e),t-rZ)+rZ;return r?tR(o,a):tT(o,a)}(tI(e,a.seed,"seed"),r.ORDER)}function s(t,n=!0){return e.BASE.multiply(nG(r,t)).toBytes(n)}function f(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:n,publicKey:i,publicKeyUncompressed:o}=a;if(r.allowedLengths||n===i)return;let s=tF("key",t).length;return s===i||s===o}return Object.freeze({getPublicKey:s,getSharedSecret:function(t,n,a=!0){if(!0===f(t))throw Error("first arg must be private key");if(!1===f(n))throw Error("second arg must be public key");let i=nG(r,t);return e.fromHex(n).multiply(i).toBytes(a)},keygen:function(e){let t=o(e);return{secretKey:t,publicKey:s(t)}},Point:e,utils:{isValidSecretKey:i,isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:i}=a;try{let a=t.length;if(!0===r&&a!==n||!1===r&&a!==i)return!1;return!!e.fromBytes(t)}catch(e){return!1}},randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:e=>nG(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:a})}(e,r),m={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},y="compact";function b(e,t){if(!o.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class g{constructor(e,t,r){this.r=b("r",e),this.s=b("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=y){var r,n;let a,i;if(r=e,nx(n=t),i=p.signature,tI(r,"compact"===n?i:"recovered"===n?i+1:void 0,`${n} signature`),"der"===t){let{r:t,s:r}=nB.toSig(tI(e));return new g(t,r)}"recovered"===t&&(a=e[0],t="compact",e=e.subarray(1));let s=o.BYTES,f=e.subarray(0,s),u=e.subarray(s,2*s);return new g(o.fromBytes(f),o.fromBytes(u),a)}static fromHex(e,t){return this.fromBytes((0,tP.hexToBytes)(e),t)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(t){let r=i.ORDER,{r:n,s:a,recovery:f}=this;if(null==f||![0,1,2,3].includes(f))throw Error("recovery id invalid");if(s*nS<r&&f>1)throw Error("recovery id is ambiguous for h>1 curve");let u=2===f||3===f?n+s:n;if(!i.isValid(u))throw Error("recovery id 2 or 3 invalid");let l=i.toBytes(u),c=e.fromBytes((0,tP.concatBytes)(nD((1&f)==0),l)),d=o.inv(u),p=_(tF("msgHash",t)),m=o.create(-p*d),y=o.create(a*d),b=e.BASE.multiplyUnsafe(m).add(c.multiplyUnsafe(y));if(b.is0())throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>s>>nO}toBytes(e=y){if(nx(e),"der"===e)return(0,tP.hexToBytes)(nB.hexFromSig(this));let t=o.toBytes(this.r),r=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return(0,tP.concatBytes)(Uint8Array.of(this.recovery),t,r)}return(0,tP.concatBytes)(t,r)}toHex(e){return(0,tP.bytesToHex)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return g.fromBytes(tF("sig",e),"compact")}static fromDER(e){return g.fromBytes(tF("sig",e),"der")}normalizeS(){return this.hasHighS()?new g(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,tP.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,tP.bytesToHex)(this.toBytes("compact"))}}let h=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=tU(e),r=8*e.length-f;return r>0?t>>BigInt(r):t},_=r.bits2int_modN||function(e){return o.create(h(e))},v=tN(f);function w(e){var t,r,n,a="num < 2^"+f;if(t=e,r=nP,n=v,!(tk(t)&&tk(r)&&tk(n))||!(r<=t)||!(t<n))throw Error("expected valid "+a+": "+nP+" <= n < "+v+", got "+e);return o.toBytes(e)}function x(e,r){return tI(e,void 0,"message"),r?tI(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:c,utils:d,lengths:p,Point:e,sign:function(r,i,f={}){let{seed:u,k2sig:l}=function(t,r,a){if(["recovered","canonical"].some(e=>e in a))throw Error("sign() legacy options not supported");let{lowS:i,prehash:f,extraEntropy:u}=nE(a,m),l=_(t=x(t,f)),c=nG(o,r),d=[w(c),w(l)];if(null!=u&&!1!==u){let e=!0===u?n(p.secretKey):u;d.push(tF("extraEntropy",e))}return{seed:(0,tP.concatBytes)(...d),k2sig:function(t){let r=h(t);if(!o.isValidNot0(r))return;let n=o.inv(r),a=e.BASE.multiply(r).toAffine(),f=o.create(a.x);if(f===nP)return;let u=o.create(n*o.create(l+f*c));if(u===nP)return;let d=2*(a.x!==f)|Number(a.y&nO),p=u;return i&&u>s>>nO&&(p=o.neg(u),d^=1),new g(f,p,d)}}}(r=tF("message",r),i,f);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),a=n(e),i=n(e),o=0,s=()=>{a.fill(1),i.fill(0),o=0},f=(...e)=>r(i,a,...e),u=(e=n(0))=>{(i=f(Uint8Array.of(0),e),a=f(),0!==e.length)&&(i=f(Uint8Array.of(1),e),a=f())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(a=f()).slice();r.push(t),e+=a.length}return(0,tP.concatBytes)(...r)};return(e,t)=>{let r;for(s(),u(e);!(r=t(l()));)u();return s(),r}})(t.outputLen,o.BYTES,a)(u,l)},verify:function(t,r,n,a={}){let{lowS:i,prehash:s,format:f}=nE(a,m);if(n=tF("publicKey",n),r=x(tF("message",r),s),"strict"in a)throw Error("options.strict was renamed to lowS");let u=void 0===f?function(e){let t,r="string"==typeof e||(0,tP.isBytes)(e),n=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!n)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)t=new g(e.r,e.s);else if(r){try{t=g.fromBytes(tF("sig",e),"der")}catch(e){if(!(e instanceof nB.Err))throw e}if(!t)try{t=g.fromBytes(tF("sig",e),"compact")}catch(e){return!1}}return!!t&&t}(t):g.fromBytes(tF("sig",t),f);if(!1===u)return!1;try{let t=e.fromBytes(n);if(i&&u.hasHighS())return!1;let{r:a,s}=u,f=_(r),l=o.inv(s),c=o.create(f*l),d=o.create(a*l),p=e.BASE.multiplyUnsafe(c).add(t.multiplyUnsafe(d));if(p.is0())return!1;return o.create(p.x)===a}catch(e){return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=nE(r,m);return t=x(t,n),g.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:g,hash:t})}(function(e,t={}){let r=function(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>nf))throw Error(`CURVE.${e} must be positive bigint`)}let a=nv(t.p,r.Fp,n),i=nv(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!a.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:a,Fn:i}}("weierstrass",e,t),{Fp:n,Fn:a}=r,i=r.CURVE,{h:o,n:s}=i;tj(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:f}=t;if(f&&(!n.is0(i.a)||"bigint"!=typeof f.beta||!Array.isArray(f.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let u=nC(n,a);function l(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let c=t.toBytes||function(e,t,r){let{x:a,y:i}=t.toAffine(),o=n.toBytes(a);if(tA(r,"isCompressed"),!r)return(0,tP.concatBytes)(Uint8Array.of(4),o,n.toBytes(i));{l();let e=!n.isOdd(i);return(0,tP.concatBytes)(nD(e),o)}},d=t.fromBytes||function(e){tI(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=u,a=e.length,i=e[0],o=e.subarray(1);if(a===t&&(2===i||3===i)){let e,t=n.fromBytes(o);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=p(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return l(),(1&i)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(a===r&&4===i){let e=n.BYTES,t=n.fromBytes(o.subarray(0,e)),r=n.fromBytes(o.subarray(e,2*e));if(!m(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${a}, expected compressed=${t} or uncompressed=${r}`)};function p(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,i.a)),i.b)}function m(e,t){let r=n.sqr(t),a=p(e);return n.eql(r,a)}if(!m(i.Gx,i.Gy))throw Error("bad curve params: generator point");let y=n.mul(n.pow(i.a,nA),nI),b=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(y,b)))throw Error("bad curve params: a or b");function g(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function h(e){if(!(e instanceof E))throw Error("ProjectivePoint expected")}function _(e){if(!f||!f.basises)throw Error("no endo");return function(e,t,r){let[[n,a],[i,o]]=t,s=nw(o*e,r),f=nw(-a*e,r),u=e-s*n-f*i,l=-s*a-f*o,c=u<nP,d=l<nP;c&&(u=-u),d&&(l=-l);let p=tN(Math.ceil(tL(r)/2))+nO;if(u<nP||u>=p||l<nP||l>=p)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:c,k1:u,k2neg:d,k2:l}}(e,f.basises,a.ORDER)}let v=tH((e,t)=>{let{X:r,Y:a,Z:i}=e;if(n.eql(i,n.ONE))return{x:r,y:a};let o=e.is0();null==t&&(t=o?n.ONE:n.inv(i));let s=n.mul(r,t),f=n.mul(a,t),u=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw Error("invZ was invalid");return{x:s,y:f}}),w=tH(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:a}=e.toAffine();if(!n.isValid(r)||!n.isValid(a))throw Error("bad point: x or y not field elements");if(!m(r,a))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function x(e,t,r,a,i){return r=new E(n.mul(r.X,e),r.Y,r.Z),t=nl(a,t),r=nl(i,r),t.add(r)}class E{constructor(e,t,r){this.X=g("x",e),this.Y=g("y",t,!0),this.Z=g("z",r),Object.freeze(this)}static CURVE(){return i}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof E)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?E.ZERO:new E(t,r,n.ONE)}static fromBytes(e){let t=E.fromAffine(d(tI(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return E.fromBytes(tF("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return P.createCache(this,e),t||this.multiply(nA),this}assertValidity(){w(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){h(e);let{X:t,Y:r,Z:a}=this,{X:i,Y:o,Z:s}=e,f=n.eql(n.mul(t,s),n.mul(i,a)),u=n.eql(n.mul(r,s),n.mul(o,a));return f&&u}negate(){return new E(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=i,r=n.mul(t,nA),{X:a,Y:o,Z:s}=this,f=n.ZERO,u=n.ZERO,l=n.ZERO,c=n.mul(a,a),d=n.mul(o,o),p=n.mul(s,s),m=n.mul(a,o);return m=n.add(m,m),l=n.mul(a,s),l=n.add(l,l),f=n.mul(e,l),u=n.mul(r,p),u=n.add(f,u),f=n.sub(d,u),u=n.add(d,u),u=n.mul(f,u),f=n.mul(m,f),l=n.mul(r,l),p=n.mul(e,p),m=n.sub(c,p),m=n.mul(e,m),m=n.add(m,l),l=n.add(c,c),c=n.add(l,c),c=n.add(c,p),c=n.mul(c,m),u=n.add(u,c),p=n.mul(o,s),p=n.add(p,p),c=n.mul(p,m),f=n.sub(f,c),l=n.mul(p,d),l=n.add(l,l),new E(f,u,l=n.add(l,l))}add(e){h(e);let{X:t,Y:r,Z:a}=this,{X:o,Y:s,Z:f}=e,u=n.ZERO,l=n.ZERO,c=n.ZERO,d=i.a,p=n.mul(i.b,nA),m=n.mul(t,o),y=n.mul(r,s),b=n.mul(a,f),g=n.add(t,r),_=n.add(o,s);g=n.mul(g,_),_=n.add(m,y),g=n.sub(g,_),_=n.add(t,a);let v=n.add(o,f);return _=n.mul(_,v),v=n.add(m,b),_=n.sub(_,v),v=n.add(r,a),u=n.add(s,f),v=n.mul(v,u),u=n.add(y,b),v=n.sub(v,u),c=n.mul(d,_),u=n.mul(p,b),c=n.add(u,c),u=n.sub(y,c),c=n.add(y,c),l=n.mul(u,c),y=n.add(m,m),y=n.add(y,m),b=n.mul(d,b),_=n.mul(p,_),y=n.add(y,b),b=n.sub(m,b),b=n.mul(d,b),_=n.add(_,b),m=n.mul(y,_),l=n.add(l,m),m=n.mul(v,_),u=n.mul(g,u),u=n.sub(u,m),m=n.mul(g,y),c=n.mul(v,c),new E(u,l,c=n.add(c,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(E.ZERO)}multiply(e){let r,n,{endo:i}=t;if(!a.isValidNot0(e))throw Error("invalid scalar: out of range");let o=e=>P.cached(this,e,e=>nc(E,e));if(i){let{k1neg:t,k1:a,k2neg:s,k2:f}=_(e),{p:u,f:l}=o(a),{p:c,f:d}=o(f);n=l.add(d),r=x(i.beta,u,c,t,s)}else{let{p:t,f:a}=o(e);r=t,n=a}return nc(E,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!a.isValid(e))throw Error("invalid scalar: out of range");if(e===nP||this.is0())return E.ZERO;if(e===nO)return this;if(P.hasCache(this))return this.multiply(e);if(!r)return P.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:a,k2:i}=_(e),{p1:o,p2:s}=function(e,t,r,n){let a=t,i=e.ZERO,o=e.ZERO;for(;r>nf||n>nf;)r&nu&&(i=i.add(a)),n&nu&&(o=o.add(a)),a=a.double(),r>>=nu,n>>=nu;return{p1:i,p2:o}}(E,this,n,i);return x(r.beta,o,s,t,a)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return v(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return o===nO||(e?e(E,this):P.unsafe(this,s).is0())}clearCofactor(){let{clearCofactor:e}=t;return o===nO?this:e?e(E,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(e=!0){return tA(e,"isCompressed"),this.assertValidity(),c(E,this,e)}toHex(e=!0){return(0,tP.bytesToHex)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return nc(E,e)}static msm(e,t){return function(e,t,r,n){if(!Array.isArray(r))throw Error("array expected");r.forEach((t,r)=>{if(!(t instanceof e))throw Error("invalid point at index "+r)});if(!Array.isArray(n))throw Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)});let a=r.length,i=n.length;if(a!==i)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,s=tL(BigInt(a)),f=1;s>12?f=s-3:s>4?f=s-2:s>0&&(f=2);let u=tN(f),l=Array(Number(u)+1).fill(o),c=Math.floor((t.BITS-1)/f)*f,d=o;for(let e=c;e>=0;e-=f){l.fill(o);for(let t=0;t<i;t++){let a=Number(n[t]>>BigInt(e)&u);l[a]=l[a].add(r[t])}let t=o;for(let e=l.length-1,r=o;e>0;e--)r=r.add(l[e]),t=t.add(r);if(d=d.add(t),0!==e)for(let e=0;e<f;e++)d=d.double()}return d}(E,a,e,t)}static fromPrivateKey(e){return E.BASE.multiply(nG(a,e))}}E.BASE=new E(i.Gx,i.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=a;let B=a.BITS,P=new n_(E,t.endo?Math.ceil(B/2):B);return E.BASE.precompute(8),E}(r,n),a,i);return t=o.Point,Object.assign({},o,{ProjectivePoint:t,CURVE:Object.assign({},e,na(t.Fn.ORDER,t.Fn.BITS))})})({...e,hash:t});return{...r(t),create:r}}function nR(e,t){if(nF(e),nF(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function nF(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function nk(e){if(!(0,tP.isBytes)(e)&&"string"!=typeof e)throw Error("DST must be Uint8Array or string");return"string"==typeof e?(0,tP.utf8ToBytes)(e):e}function nL(e,t,r){var n;let a;tj(r,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:i,k:o,m:s,hash:f,expand:u,DST:l}=r;if(!("function"==typeof(n=r.hash)&&Number.isSafeInteger(n.outputLen)))throw Error("expected valid hash");(0,tP.abytes)(e),nF(t);let c=Math.ceil((i.toString(2).length+o)/8),d=t*s*c;if("xmd"===u)a=function(e,t,r,n){(0,tP.abytes)(e),nF(r),(t=nk(t)).length>255&&(t=n((0,tP.concatBytes)((0,tP.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:a,blockLen:i}=n,o=Math.ceil(r/a);if(r>65535||o>255)throw Error("expand_message_xmd: invalid lenInBytes");let s=(0,tP.concatBytes)(t,nR(t.length,1)),f=nR(0,i),u=nR(r,2),l=Array(o),c=n((0,tP.concatBytes)(f,e,u,nR(0,1),s));l[0]=n((0,tP.concatBytes)(c,nR(1,1),s));for(let e=1;e<=o;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(c,l[e-1]),nR(e+1,1),s];l[e]=n((0,tP.concatBytes)(...t))}return(0,tP.concatBytes)(...l).slice(0,r)}(e,l,d,f);else if("xof"===u)a=function(e,t,r,n,a){if((0,tP.abytes)(e),nF(r),(t=nk(t)).length>255){let e=Math.ceil(2*n/8);t=a.create({dkLen:e}).update((0,tP.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:r}).update(e).update(nR(r,2)).update(t).update(nR(t.length,1)).digest()}(e,l,d,o,f);else if("_internal_pass"===u)a=e;else throw Error('expand must be "xmd" or "xof"');let p=Array(t);for(let e=0;e<t;e++){let t=Array(s);for(let r=0;r<s;r++){let n=c*(r+e*s),o=a.subarray(n,n+c);t[r]=r6(tU(o),i)}p[e]=t}return p}let nN=(0,tP.utf8ToBytes)("HashToScalar-");function nj(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");function n(r){return e.fromAffine(t(r))}function a(t){let r=t.clearCofactor();return r.equals(e.ZERO)?e.ZERO:(r.assertValidity(),r)}return{defaults:r,hashToCurve(e,t){let i=nL(e,2,Object.assign({},r,t)),o=n(i[0]),s=n(i[1]);return a(o.add(s))},encodeToCurve(e,t){let i=r.encodeDST?{DST:r.encodeDST}:{};return a(n(nL(e,1,Object.assign({},r,i,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw Error("expected array of bigints");for(let t of e)if("bigint"!=typeof t)throw Error("expected array of bigints");return a(n(e))},hashToScalar:(t,n)=>nL(t,1,Object.assign({},r,{p:e.Fn.ORDER,m:1,DST:nN},n))[0][0]}}let nH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},nV={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},n$=BigInt(0),nz=BigInt(2),nM=ni(nH.p,{sqrt:function(e){let t=nH.p,r=BigInt(3),n=BigInt(6),a=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),f=BigInt(88),u=e*e*e%t,l=u*u*e%t,c=r5(l,r,t)*l%t,d=r5(c,r,t)*l%t,p=r5(d,nz,t)*u%t,m=r5(p,a,t)*p%t,y=r5(m,i,t)*m%t,b=r5(y,s,t)*y%t,g=r5(b,f,t)*b%t,h=r5(g,s,t)*y%t,_=r5(h,r,t)*l%t,v=r5(_,o,t)*m%t,w=r5(v,n,t)*u%t,x=r5(w,nz,t);if(!nM.eql(nM.sqr(x),e))throw Error("Cannot find square root");return x}}),nq=nT({...nH,Fp:nM,lowS:!0,endo:nV},rM.sha256);nq.Point;let nK=(t=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e))).map(e=>Array.from(e).reverse()),(e,r)=>{let[n,a,i,o]=t.map(t=>t.reduce((t,r)=>nM.add(nM.mul(t,e),r))),[s,f]=nr(nM,[a,o],!0);return e=nM.mul(n,s),r=nM.mul(r,nM.mul(i,f)),{x:e,y:r}}),nZ=nU(nM,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:nM.create(BigInt("-11"))});nj(nq.Point,e=>{let{x:t,y:r}=nZ(nM.create(e[0]));return nK(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:nM.ORDER,m:1,k:128,expand:"xmd",hash:rM.sha256});let nW=2n**256n-1n;function nY(e,t={}){let{recovered:r}=t;if(void 0===e.r||void 0===e.s||r&&void 0===e.yParity)throw new as({signature:e});if(e.r<0n||e.r>nW)throw new af({value:e.r});if(e.s<0n||e.s>nW)throw new au({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new al({value:e.yParity})}function nX(e){return nJ(ri(e))}function nJ(e){if(130!==e.length&&132!==e.length)throw new ao({signature:e});let t=BigInt(rd(e,0,32)),r=BigInt(rd(e,32,64)),n=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return aa(t)}catch{throw new al({value:t})}})();return void 0===n?{r:t,s:r}:{r:t,s:r,yParity:n}}function nQ(e){if(void 0!==e.r&&void 0!==e.s)return n0(e)}function n0(e){let t="string"==typeof e?nJ(e):e instanceof Uint8Array?nX(e):"string"==typeof e.r?n5(e):e.v?n6(e):{r:e.r,s:e.s,...void 0!==e.yParity?{yParity:e.yParity}:{}};return nY(t),t}function n1(e){return n2(ri(e))}function n2(e){let{r:t,s:r}=nq.Signature.fromDER(rn(e).slice(2));return{r:t,s:r}}function n6(e){return{r:e.r,s:e.s,yParity:aa(e.v)}}function n5(e){let t=(()=>{let t=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if("number"==typeof t&&"number"!=typeof r&&(r=aa(t)),"number"!=typeof r)throw new al({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function n3(e){let[t,r,n]=e;return n0({r:"0x"===r?0n:BigInt(r),s:"0x"===n?0n:BigInt(n),yParity:"0x"===t?0:Number(t)})}function n8(e){return t0(n4(e))}function n4(e){nY(e);let t=e.r,r=e.s;return rr(ro(t,{size:32}),ro(r,{size:32}),"number"==typeof e.yParity?ro(ai(e.yParity),{size:1}):"0x")}function n9(e){return new nq.Signature(e.r,e.s).toDERRawBytes()}function n7(e){let t=new nq.Signature(e.r,e.s);return`0x${t.toDERHex()}`}function ae(e){return{r:e.r,s:e.s,v:ai(e.yParity)}}function at(e){let{r:t,s:r,yParity:n}=e;return{r:ro(t,{size:32}),s:ro(r,{size:32}),yParity:0===n?"0x0":"0x1"}}function ar(e){let{r:t,s:r,yParity:n}=e;return[n?"0x01":"0x",0n===t?"0x":rm(ro(t)),0n===r?"0x":rm(ro(r))]}function an(e,t={}){try{return nY(e,t),!0}catch{return!1}}function aa(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return+(e%2==0);throw new ac({value:e})}function ai(e){if(0===e)return 27;if(1===e)return 28;throw new al({value:e})}class ao extends t${constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${rp(rn(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class as extends t${constructor({signature:e}){super(`Signature \`${tz(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class af extends t${constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class au extends t${constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class al extends t${constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class ac extends t${constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}e.s(["InvalidRError",()=>af,"InvalidSError",()=>au,"InvalidSerializedSizeError",()=>ao,"InvalidVError",()=>ac,"InvalidYParityError",()=>al,"MissingPropertiesError",()=>as,"assert",()=>nY,"extract",()=>nQ,"from",()=>n0,"fromBytes",()=>nX,"fromDerBytes",()=>n1,"fromDerHex",()=>n2,"fromHex",()=>nJ,"fromLegacy",()=>n6,"fromRpc",()=>n5,"fromTuple",()=>n3,"toBytes",()=>n8,"toDerBytes",()=>n9,"toDerHex",()=>n7,"toHex",()=>n4,"toLegacy",()=>ae,"toRpc",()=>at,"toTuple",()=>ar,"vToYParity",()=>aa,"validate",()=>an,"yParityToV",()=>ai],383511);var ad=e.i(383511);e.s(["Signature",0,ad],512518),e.s(["CredentialCreationFailedError",()=>aL,"CredentialRequestFailedError",()=>aN,"createChallenge",()=>aI,"createCredential",()=>aG,"getAuthenticatorData",()=>aD,"getClientDataJSON",()=>aU,"getCredentialCreationOptions",()=>aC,"getCredentialRequestOptions",()=>aT,"getSignPayload",()=>aR,"sign",()=>aF,"verify",()=>ak],459279);let ap=new TextEncoder,am=new TextDecoder,ay=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),ab={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function ag(e){let t=e.replace(/=+$/,""),r=t.length,n=new Uint8Array(r+3);ap.encodeInto(t+"===",n);for(let e=0,r=0;e<t.length;e+=4,r+=3){let t=(ab[n[e]]<<18)+(ab[n[e+1]]<<12)+(ab[n[e+2]]<<6)+ab[n[e+3]];n[r]=t>>16,n[r+1]=t>>8&255,n[r+2]=255&t}return new Uint8Array(n.buffer,0,(r>>2)*3+(r%4&&r%4-1))}e.i(70492);var ah=e.i(626014),a_=e.i(403893);function av(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,n=(0,a_.sha256)(tJ(e));return"Bytes"===r?n:ri(n)}let aw={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},ax={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},aE={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},aB=ni(aw.p),aP=ni(ax.p),aO=ni(aE.p),aS=nT({...aw,Fp:aB,lowS:!1},rM.sha256);async function aA(e){try{let t=e.getPublicKey();if(!t)throw new aL;let r=new Uint8Array(t),n=await crypto.subtle.importKey("spki",new Uint8Array(r),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),a=new Uint8Array(await crypto.subtle.exportKey("raw",n));return rC(a)}catch(i){if("Permission denied to access object"!==i.message)throw i;let t=new Uint8Array(e.attestationObject),r=e=>{let r=new Uint8Array([e,88,32]);for(let e=0;e<t.length-r.length;e++)if(r.every((r,n)=>t[e+n]===r))return e+r.length;throw new aL},n=r(33),a=r(34);return rC(new Uint8Array([4,...t.slice(n,n+32),...t.slice(a,a+32)]))}}nj(aS.Point,(f=aS.Point,u={A:aw.a,B:aw.b,Z:aS.Point.Fp.create(BigInt("-10"))},r=nU(f.Fp,u),e=>r(e[0])),{DST:"P256_XMD:SHA-256_SSWU_RO_",encodeDST:"P256_XMD:SHA-256_SSWU_NU_",p:aw.p,m:1,k:128,expand:"xmd",hash:rM.sha256}),nT({...ax,Fp:aP,lowS:!1},rM.sha384),nT({...aE,Fp:aO,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},rM.sha512);let aI=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function aG(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...r}=e,n=aC(r);try{let e=await t(n);if(!e)throw new aL;let r=e.response,a=await aA(r);return{id:e.id,publicKey:a,raw:e}}catch(e){throw new aL({cause:e})}}function aD(e={}){let{flag:t=5,rpId:r=window.location.hostname,signCount:n=0}=e;return rr(av(rs(r)),ro(t,{size:1}),ro(n,{size:4}))}function aU(e){let{challenge:t,crossOrigin:r=!1,extraClientData:n,origin:a=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:function(e,t={}){return function(e,t={}){let{pad:r=!0,url:n=!1}=t,a=new Uint8Array(4*Math.ceil(e.length/3));for(let t=0,r=0;r<e.length;t+=4,r+=3){let n=(e[r]<<16)+(e[r+1]<<8)+(0|e[r+2]);a[t]=ay[n>>18],a[t+1]=ay[n>>12&63],a[t+2]=ay[n>>6&63],a[t+3]=ay[63&n]}let i=e.length%3,o=4*Math.floor(e.length/3)+(i&&i+1),s=am.decode(new Uint8Array(a.buffer,0,o));return r&&1===i&&(s+="=="),r&&2===i&&(s+="="),n&&(s=s.replaceAll("+","-").replaceAll("/","_")),s}(t0(e),t)}(t,{url:!0,pad:!1}),origin:a,crossOrigin:r,...n})}function aC(e){let{attestation:t="none",authenticatorSelection:r={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:n=aI,excludeCredentialIds:a,name:i,rp:o={id:window.location.hostname,name:window.document.title},user:s,extensions:f}=e,u=s?.name??i;return{publicKey:{attestation:t,authenticatorSelection:r,challenge:n,...a?{excludeCredentials:a?.map(e=>({id:ag(e),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:o,user:{id:s?.id??function(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,n=(0,ah.keccak_256)(tJ(e));return"Bytes"===r?n:ri(n)}(t1(u),{as:"Bytes"}),name:u,displayName:s?.displayName??u},extensions:f}}}function aT(e){let{credentialId:t,challenge:r,rpId:n=window.location.hostname,userVerification:a="required"}=e;return{publicKey:{...t?{allowCredentials:[{id:ag(t),type:"public-key"}]}:{},challenge:t0(r),rpId:n,userVerification:a}}}function aR(e){let{challenge:t,crossOrigin:r,extraClientData:n,flag:a,origin:i,rpId:o,signCount:s,userVerification:f="required"}=e,u=aD({flag:a,rpId:o,signCount:s}),l=aU({challenge:t,crossOrigin:r,extraClientData:n,origin:i}),c=av(rs(l)),d=l.indexOf('"challenge"'),p=l.indexOf('"type"');return{metadata:{authenticatorData:u,clientDataJSON:l,challengeIndex:d,typeIndex:p,userVerificationRequired:"required"===f},payload:rr(u,c)}}async function aF(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...r}=e,n=aT(r);try{var a;let e,r,i,o,s,f=await t(n);if(!f)throw new aN;let u=f.response,l=String.fromCharCode(...new Uint8Array(u.clientDataJSON)),c=l.indexOf('"challenge"'),d=l.indexOf('"type"'),p=(a=new Uint8Array(u.signature),r=(e=0===a[4]?5:4)+32,i=0===a[r+2]?r+3:r+2,o=BigInt(ri(a.slice(e,r))),s=BigInt(ri(a.slice(i))),{r:o,s:s>aS.CURVE.n/2n?aS.CURVE.n-s:s});return{metadata:{authenticatorData:ri(new Uint8Array(u.authenticatorData)),clientDataJSON:l,challengeIndex:c,typeIndex:d,userVerificationRequired:"required"===n.publicKey.userVerification},signature:p,raw:f}}catch(e){throw new aN({cause:e})}}function ak(e){let{challenge:t,hash:r=!0,metadata:n,publicKey:a,signature:i}=e,{authenticatorData:o,challengeIndex:s,clientDataJSON:f,typeIndex:u,userVerificationRequired:l}=n,c=t0(o);if(c.length<37)return!1;let d=c[32];if((1&d)!=1||l&&(4&d)!=4||(8&d)!=8&&(16&d)==16)return!1;let p='"type":"webauthn.get"';if(p!==f.slice(Number(u),p.length+1))return!1;let m=f.slice(Number(s)).match(/^"challenge":"(.*?)"/);if(!m)return!1;let[y,b]=m;return ri(ag(b))===t&&function(e){let{hash:t,payload:r,publicKey:n,signature:a}=e;return aS.verify(a,r instanceof Uint8Array?r:t0(r),rk(n).substring(2),...t?[{prehash:!0,lowS:!0}]:[])}({hash:r,payload:tX(c,av(t1(f),{as:"Bytes"})),publicKey:a,signature:i})}class aL extends t${constructor({cause:e}={}){super("Failed to create credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}}class aN extends t${constructor({cause:e}={}){super("Failed to request credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}}var aj=e.i(459279);async function aH(e={}){let{extractable:t=!1}=e,r=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),n=rC(new Uint8Array(await globalThis.crypto.subtle.exportKey("raw",r.publicKey)));return{privateKey:r.privateKey,publicKey:n}}async function aV(e){let{payload:t,privateKey:r}=e,n=tQ(new Uint8Array(await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},r,tJ(t)))),a=t5(t6(n,0,32)),i=t5(t6(n,32,64));return i>aS.CURVE.n/2n&&(i=aS.CURVE.n-i),{r:a,s:i}}async function a$(e){let{payload:t,signature:r}=e,n=await globalThis.crypto.subtle.importKey("raw",rF(e.publicKey),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await globalThis.crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},n,tX(t0(ro(r.r,void 0)),t0(ro(r.s,void 0))),tJ(t))}e.s(["WebAuthnP256",0,aj],349531),e.s(["createKeyPair",()=>aH,"sign",()=>aV,"verify",()=>a$],937688);var az=e.i(937688);e.s(["WebCryptoP256",0,az],175464);var aM=e.i(300059);function aq(e){let{r:t,s:r}=aM.secp256k1.Signature.fromCompact(e.slice(2,130)),n=Number(`0x${e.slice(130)}`),[a,i]=(()=>{if(0===n||1===n)return[void 0,n];if(27===n)return[BigInt(n),0];if(28===n)return[BigInt(n),1];throw Error("Invalid yParityOrV value")})();return void 0!==a?{r:(0,tr.numberToHex)(t,{size:32}),s:(0,tr.numberToHex)(r,{size:32}),v:a,yParity:i}:{r:(0,tr.numberToHex)(t,{size:32}),s:(0,tr.numberToHex)(r,{size:32}),yParity:i}}e.s(["parseSignature",()=>aq],311135);let aK=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];e.s(["entryPoint06Abi",0,aK],976037),e.s(["entryPoint06Address",0,"0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789"],747384);var aZ=e.i(925282),aW=e.i(717630),aY=e.i(754270);function aX(e){let{authorization:t,factory:r,factoryData:n}=e;if("0x7702"===r||"0x7702000000000000000000000000000000000000"===r){if(!t)return"0x7702000000000000000000000000000000000000";let e=t.address;return(0,tf.concat)([e,n??"0x"])}return r?(0,tf.concat)([r,n??"0x"]):"0x"}function aJ(e){let{callGasLimit:t,callData:r,maxPriorityFeePerGas:n,maxFeePerGas:a,paymaster:i,paymasterData:o,paymasterPostOpGasLimit:s,paymasterVerificationGasLimit:f,sender:u,signature:l="0x",verificationGasLimit:c}=e,d=(0,tf.concat)([(0,tn.pad)((0,tr.numberToHex)(c||0n),{size:16}),(0,tn.pad)((0,tr.numberToHex)(t||0n),{size:16})]),p=aX(e),m=(0,tf.concat)([(0,tn.pad)((0,tr.numberToHex)(n||0n),{size:16}),(0,tn.pad)((0,tr.numberToHex)(a||0n),{size:16})]),y=e.nonce??0n;return{accountGasLimits:d,callData:r,initCode:p,gasFees:m,nonce:y,paymasterAndData:i?(0,tf.concat)([i,(0,tn.pad)((0,tr.numberToHex)(f||0n),{size:16}),(0,tn.pad)((0,tr.numberToHex)(s||0n),{size:16}),o||"0x"]):"0x",preVerificationGas:e.preVerificationGas??0n,sender:u,signature:l}}let aQ={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function a0(e){let{chainId:t,entryPointAddress:r,entryPointVersion:n}=e,a=e.userOperation,{authorization:i,callData:o="0x",callGasLimit:s,maxFeePerGas:f,maxPriorityFeePerGas:u,nonce:l,paymasterAndData:c="0x",preVerificationGas:d,sender:p,verificationGasLimit:m}=a;if("0.8"===n)return(0,aY.hashTypedData)(function(e){let{chainId:t,entryPointAddress:r,userOperation:n}=e;return{types:aQ,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:r},message:aJ(n)}}({chainId:t,entryPointAddress:r,userOperation:a}));let y=(()=>{if("0.6"===n){let e=aX({authorization:i,factory:a.initCode?.slice(0,42),factoryData:a.initCode?.slice(42)});return(0,aZ.encodeAbiParameters)([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[p,l,(0,aW.keccak256)(e),(0,aW.keccak256)(o),s,m,d,f,u,(0,aW.keccak256)(c)])}if("0.7"===n){let e=aJ(a);return(0,aZ.encodeAbiParameters)([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[e.sender,e.nonce,(0,aW.keccak256)(e.initCode),(0,aW.keccak256)(e.callData),e.accountGasLimits,e.preVerificationGas,e.gasFees,(0,aW.keccak256)(e.paymasterAndData)])}throw Error(`entryPointVersion "${n}" not supported.`)})();return(0,aW.keccak256)((0,aZ.encodeAbiParameters)([{type:"bytes32"},{type:"address"},{type:"uint256"}],[(0,aW.keccak256)(y),r,BigInt(t)]))}e.s(["getUserOperationHash",()=>a0],659486);var a1=e.i(463605),a2=e.i(795523),a6=e.i(990389),a5=(e.i(896410),e.i(640276)),a3=e.i(568836);function a8(e){let{address:t,data:r,signature:n,to:a="hex"}=e,i=(0,tf.concatHex)([(0,aZ.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,r,n]),"0x6492649264926492649264926492649264926492649264926492649264926492"]);return"hex"===a?i:(0,a3.hexToBytes)(i)}async function a4(e){let{extend:t,nonceKeyManager:r=function(e){let{source:t}=e,r=new Map,n=new a5.LruMap(8192),a=new Map,i=({address:e,chainId:t})=>`${e}.${t}`;return{async consume({address:e,chainId:r,client:a}){let o=i({address:e,chainId:r}),s=this.get({address:e,chainId:r,client:a});this.increment({address:e,chainId:r});let f=await s;return await t.set({address:e,chainId:r},f),n.set(o,f),f},async increment({address:e,chainId:t}){let n=i({address:e,chainId:t}),a=r.get(n)??0;r.set(n,a+1)},async get({address:e,chainId:o,client:s}){let f=i({address:e,chainId:o}),u=a.get(f);return u||(u=(async()=>{try{let r=await t.get({address:e,chainId:o,client:s}),a=n.get(f)??0;if(a>0&&r<=a)return a+1;return n.delete(f),r}finally{this.reset({address:e,chainId:o})}})(),a.set(f,u)),(r.get(f)??0)+await u},reset({address:e,chainId:t}){let n=i({address:e,chainId:t});r.delete(n),a.delete(n)}}}({source:{get:()=>Date.now(),set(){}}}),...n}=e,a=!1,i=await e.getAddress();return{...t,...n,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(t){let n=t?.key??BigInt(await r.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...t,key:n}):await (0,a6.readContract)(e.client,{abi:(0,a1.parseAbi)(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,n]})},isDeployed:async()=>!!a||(a=!!await (0,ey.getAction)(e.client,a2.getCode,"getCode")({address:i})),...e.sign?{async sign(t){let[{factory:r,factoryData:n},a]=await Promise.all([this.getFactoryArgs(),e.sign(t)]);return r&&n?a8({address:r,data:n,signature:a}):a}}:{},async signMessage(t){let[{factory:r,factoryData:n},a]=await Promise.all([this.getFactoryArgs(),e.signMessage(t)]);return r&&n&&"0x7702"!==r?a8({address:r,data:n,signature:a}):a},async signTypedData(t){let[{factory:r,factoryData:n},a]=await Promise.all([this.getFactoryArgs(),e.signTypedData(t)]);return r&&n&&"0x7702"!==r?a8({address:r,data:n,signature:a}):a},type:"smart"}}e.s(["toSmartAccount",()=>a4],519175)}]);