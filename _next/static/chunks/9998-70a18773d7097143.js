"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9998],{12687:function(e,t,n){n.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx}});var c=n(31113),a=n(19757),r=n(26361),o=n(22818),s=n(83978),i=n.n(s),l=n(64103),u=n(47259),d=n(58714),p=n(96670),f=n(4408),h=n(59175);let m={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:c}=(0,p.m)(),s=(0,h.p)(),{data:i}=(0,f.p)(),[v,x]=(0,l.useState)(!1),b=(0,l.useMemo)(()=>Object.keys(e).filter(e=>e!==a.K8),[e]),[w,g]=(0,l.useState)(t&&m[t]||{}),updateAllownce=(e,n)=>{t&&(m[t]={...m[t]||{},[e]:n},g(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{c&&t&&s&&b.forEach(e=>{(0,o.B)(s).readContract({abi:d.Wo,address:e,functionName:"allowance",args:[c,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[b,s,c]);let[A,k]=(0,l.useState)(!1),y=(0,l.useMemo)(()=>b.filter(t=>(0,r.ok)(e,t)>0n&&(0,r.ok)(e,t)>(0,r.ok)(w,t)),[e,b,w]),approve=async()=>{if(0!=y.length&&t)try{k(!0),x(!1);for(let c=0;c<y.length;c++){let a=y[c],r=!1===n?e[a]:n,l=await (null==i?void 0:i.writeContract({abi:d.Wo,address:a,functionName:"approve",args:[t,r]}));l&&await (0,o.B)(s).waitForTransactionReceipt({hash:l}),updateAllownce(a,r)}u.A.success("Approve success"),k(!1),x(!0)}catch(e){u.A.error((0,r.az)(e)),k(!1),x(!1)}};return{approve,loading:A,shouldApprove:y.length>0,isSuccess:v}},v={},useNftApproves=(e,t)=>{let{address:n}=(0,p.m)(),c=(0,h.p)(),{data:a}=(0,f.p)(),[s,m]=(0,l.useState)(!1),x=i().keys(e),[b,w]=(0,l.useState)(t&&v[t]||{}),updateAllownce=(e,n)=>{t&&(v[t]={...v[t]||{},[e]:n},w(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{n&&t&&c&&x.forEach(e=>{(0,o.B)(c).readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==b[e]&&updateAllownce(e,t)).catch(console.error)})},[x,c,n]);let[g,A]=(0,l.useState)(!1),k=(0,l.useMemo)(()=>x.filter(e=>!b[e]),[e,x,b]),approve=async()=>{if(0!=k.length&&t)try{A(!0),m(!1);for(let e=0;e<k.length;e++){let n=k[e],r=await (null==a?void 0:a.writeContract({abi:d.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));r&&await (0,o.B)(c).waitForTransactionReceipt({hash:r}),updateAllownce(n,!0)}u.A.success("Approve success"),A(!1),m(!0)}catch(e){u.A.error((0,r.az)(e)),A(!1),m(!1)}};return{approve,loading:g,shouldApprove:k.length>0,isSuccess:s}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:c}=t||{},[a,s]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),{data:p}=(0,f.p)(),m=(0,h.p)(),v=!p||!p.account||a||!e||p.chain.id!==m,write=async()=>{if(!v){s(!0),d(!1);try{let a="function"==typeof e?await e():e,r=(0,o.B)(m),s={account:p.account,...a};if(!(null==t?void 0:t.skipSimulate)){let e=await r.simulateContract(s);s=e.request}let i=await p.writeContract(s),l=await r.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==l.status)throw"Transaction reverted";d(!0),c&&c(l),n&&u.A.success("Transaction success")}catch(e){n&&u.A.error((0,r.az)(e))}s(!1)}};return{write,isDisabled:v,isLoading:a,isSuccess:i}}var x=n(88501),b=n(60689),w=n(60986);function SwitchChain(e){let{className:t}=e,{switchChain:n,isPending:a}=(0,w.o)(),r=(0,h.p)();return(0,c.jsx)(b.k,{className:(0,x.m)("flex items-center justify-center gap-4 whitespace-nowrap",t),onClick:()=>n({chainId:r}),busy:a,disabled:a,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:r,spender:o,requestAmount:s,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:v}=e,{write:w,isDisabled:g,isLoading:A}=useWrapContractWrite(i,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:f}),k=p||g||A||!1===i.enabled,{approve:y,shouldApprove:N,loading:j,isSuccess:C}=useApproves(r||{},o,s),S=(0,l.useRef)();S.current=v,(0,l.useEffect)(()=>{S.current&&C&&S.current()},[C]);let W=(0,h.t)();return W?(0,c.jsx)(SwitchChain,{className:t}):N?(0,c.jsx)(b.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:y,busy:j,disabled:p||!y||j||W,children:"Approve"}):(0,c.jsx)(b.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:A,busyShowContent:a,disabled:k,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:a=!0,approves:r,spender:o,requestAmount:s,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:v}=e,{write:w,isDisabled:g,isLoading:A}=useWrapContractWrite(i,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:f}),k=p||g||A||!1===i.enabled,{approve:y,shouldApprove:N,loading:j,isSuccess:C}=useNftApproves(null!=r?r:{},o),S=(0,l.useRef)();S.current=v,(0,l.useEffect)(()=>{S.current&&C&&S.current()},[C]);let W=(0,h.t)();return W?(0,c.jsx)(SwitchChain,{className:t}):N?(0,c.jsx)(b.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:y,busy:j,disabled:p||!y||j||W,children:"Approve"}):(0,c.jsx)(b.k,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:A,busyShowContent:a,disabled:k,children:n})}},6868:function(e,t,n){n.d(t,{B:function(){return Demo},K:function(){return Noti}});var c=n(31113),a=n(26361),r=n(63114);function Noti(e){let{data:t,className:n}=e;return(0,c.jsxs)("div",{className:(0,a.cn)("w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",n),children:[(0,c.jsx)("div",{className:"",children:(0,c.jsx)(r.pMA,{size:20})}),(0,c.jsx)("div",{className:"text-sm ml-1 ",children:t})]})}function Demo(e){let{className:t}=e;return(0,c.jsx)("div",{className:(0,a.cn)("text-xs px-1.5 text-center py-[1px] rounded-full bg-red-500 text-slate-50",t),children:"DEMO"})}},44939:function(e,t,n){n.d(t,{E:function(){return PageWrap}});var c=n(31113),a=n(26361);n(64103);var r=n(12045);function PageWrap(e){let{children:t,className:n}=e;return(0,r.l)(e=>e.theme),(0,c.jsx)("div",{className:(0,a.cn)("h-auto pt-[30px] pb-6",n),children:t})}},36762:function(e,t,n){n.d(t,{$:function(){return Spinner}});var c=n(31113),a=n(26361);let Spinner=e=>{let{className:t}=e;return(0,c.jsxs)("svg",{fill:"none",className:(0,a.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,n){n.d(t,{k:function(){return BBtn}});var c=n(31113),a=n(26361),r=n(83978),o=n.n(r),s=n(64103),i=n(36762);function BBtn(e){let{borderWidth:t=1,children:n,busy:r,busyShowContent:l=!0,className:u,hiddenBorder:d,...p}=e,f=(0,s.useRef)(null),[h,m]=(0,s.useState)("0_0"),v="unset",x="unset";if(f.current&&!d){let e=f.current,n=e.clientWidth,c=e.clientHeight,a=parseInt(getComputedStyle(e).borderRadius.replace("px","")),r="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(a," ").concat(t,"L").concat(n-a," ").concat(t),s="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-t," ").concat(a,"L").concat(n-t," ").concat(c-a),i="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(n-a," ").concat(c-t,"L").concat(a," ").concat(c-t," "),l="A".concat(a-t," ").concat(a-t," 0, 0, 1, ").concat(t," ").concat(c-a,"L").concat(t," ").concat(a),u="M ".concat(t," ").concat(a," ").concat(r," ").concat(s," ").concat(i," ").concat(l),d="M 0 0 L 0 ".concat(c," L ").concat(n," ").concat(c," L ").concat(n," 0 L 0 0 ").concat(u," Z");v="path('".concat(d,"')");let p=2*n,tranP=e=>o().round(e/2,2);x="radial-gradient(122.5% ".concat(o().round(122.5/(n/c),2),"% at ").concat(o().round((52.9*n+50*p-50*n)/p,2),"% ").concat(o().round((16.25*c+50*p-50*c)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,s.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;m("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,c.jsxs)("button",{...p,ref:f,className:(0,a.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,c.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:v},children:(0,c.jsx)("div",{className:(0,a.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:x}})}),r&&(0,c.jsx)(i.$,{}),(l||!r)&&n]})}}}]);