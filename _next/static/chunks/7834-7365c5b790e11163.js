"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7834],{57834:function(e,t,n){n.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx},$M:function(){return Txs},g7:function(){return TxsStat},Rb:function(){return withTokenApprove}});var a=n(52987),r=n(7347),s=n(13854),c=n(62013),o=n(61469),l=n(77317),i=n(47259),u=n(85058),d=n(42302),p=n(41331),f=n(99409);let h={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:a}=(0,d.m)(),o=(0,f.pK)(),{data:m}=(0,p.p)(),[x,w]=(0,l.useState)(!1),b=(0,l.useMemo)(()=>Object.keys(e).filter(e=>!(0,r.Mg)(e)),[e]),[v,g]=(0,l.useState)(t&&h[t]||{}),updateAllownce=(e,n)=>{t&&(h[t]={...h[t]||{},[e]:n},g(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{a&&t&&o&&b.forEach(e=>{(0,c.B)(o).readContract({abi:u.Wo,address:e,functionName:"allowance",args:[a,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[b,o,a]);let[N,k]=(0,l.useState)(!1),y=(0,l.useMemo)(()=>b.filter(t=>(0,s.ok)(e,t)>0n&&(0,s.ok)(e,t)>(0,s.ok)(v,t)),[e,b,v]),approve=async()=>{if(0!=y.length&&t&&a)try{k(!0),w(!1);for(let r=0;r<y.length;r++){let s=y[r],l=!1===n?e[s]:n,d=await (null==m?void 0:m.writeContract({abi:u.Wo,address:s,functionName:"approve",args:[t,l]}));d&&await (0,c.B)(o).waitForTransactionReceipt({hash:d});let p=await (0,c.B)(o).readContract({abi:u.Wo,address:s,functionName:"allowance",args:[a,t]});p<e[s]&&i.A.error("Insufficient amount of approve"),updateAllownce(s,p)}i.A.success("Approve success"),k(!1),w(!0)}catch(e){i.A.error((0,s.az)(e)),k(!1),w(!1)}};return{approve,loading:N,shouldApprove:y.length>0,isSuccess:x}},m={},useNftApproves=(e,t)=>{let{address:n}=(0,d.m)(),a=(0,f.pK)(),{data:r}=(0,p.p)(),[h,x]=(0,l.useState)(!1),w=(0,o.X)(e),[b,v]=(0,l.useState)(t&&m[t]||{}),updateAllownce=(e,n)=>{t&&(m[t]={...m[t]||{},[e]:n},v(t=>({...t,[e]:n})))};(0,l.useEffect)(()=>{n&&t&&a&&w.forEach(e=>{(0,c.B)(a).readContract({abi:u.Hr,address:e,functionName:"isApprovedForAll",args:[n,t]}).then(t=>t!==b[e]&&updateAllownce(e,t)).catch(console.error)})},[w,a,n]);let[g,N]=(0,l.useState)(!1),k=(0,l.useMemo)(()=>w.filter(e=>!b[e]),[e,w,b]),approve=async()=>{if(0!=k.length&&t)try{N(!0),x(!1);for(let e=0;e<k.length;e++){let n=k[e],s=await (null==r?void 0:r.writeContract({abi:u.Hr,address:n,functionName:"setApprovalForAll",args:[t,!0]}));s&&await (0,c.B)(a).waitForTransactionReceipt({hash:s}),updateAllownce(n,!0)}i.A.success("Approve success"),N(!1),x(!0)}catch(e){i.A.error((0,s.az)(e)),N(!1),x(!1)}};return{approve,loading:g,shouldApprove:k.length>0,isSuccess:h}};function useWrapContractWrite(e,t){let{autoToast:n=!0,onSuccess:a}=t||{},[r,o]=(0,l.useState)(!1),[u,d]=(0,l.useState)(!1),{data:h}=(0,p.p)(),m=(0,f.pK)(),x=!h||!h.account||r||!e||h.chain.id!==m,write=async()=>{if(!x){o(!0),d(!1);try{let r="function"==typeof e?await e():e,s=(0,c.B)(m),o={account:h.account,...r};if(!(null==t?void 0:t.skipSimulate)){let e=await s.simulateContract(o);o=e.request}let l=await h.writeContract(o),u=await s.waitForTransactionReceipt({hash:l,confirmations:null==t?void 0:t.confirmations});if("success"!==u.status)throw"Transaction reverted";d(!0),a&&a(u),n&&i.A.success("Transaction success")}catch(e){n&&i.A.error((0,s.az)(e))}o(!1)}};return{write,isDisabled:x,isLoading:r,isSuccess:u}}var x=n(88501),w=n(34113),b=n(82790),v=n(95499),g=n(68654),N=n(45820),k=n(93108),y=n(16804),A=n(86589),j=n(25282);function SwitchNet(e){let{className:t}=e,n=(0,g.o)(),r=(0,f.pK)();return(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4 whitespace-nowrap w-fit min-w-[200px]",t),onClick:()=>n.switchChainAsync({chainId:r}).catch(console.error),busy:n.isPending,disabled:n.isPending,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:n,busyShowTxet:r=!0,approves:s,spender:c,requestAmount:o,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,disabledHidden:h,confirmations:m,onTxSuccess:w,onApproveSuccess:b}=e,{write:v,isDisabled:g,isLoading:k}=useWrapContractWrite(i,{onSuccess:e=>w&&w(e),autoToast:u,skipSimulate:d,confirmations:m}),y=p||g||k||!1===i.enabled,{approve:A,shouldApprove:j,loading:C,isSuccess:S}=useApproves(s||{},c,o),T=(0,l.useRef)();T.current=b,(0,l.useEffect)(()=>{T.current&&S&&T.current()},[S]);let E=p||!A||C,W=(0,f.tx)();return h&&(y||E)?null:W?(0,a.jsx)(SwitchNet,{className:t}):j?(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:A,busy:C,disabled:E,children:"Approve"}):(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>v(),busy:k,busyShowContent:r,disabled:y,children:n})}function NftApproveAndTx(e){let{className:t,tx:n,busyShowTxet:r=!0,approves:s,spender:c,requestAmount:o,config:i,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:h,onTxSuccess:m,onApproveSuccess:w}=e,{write:b,isDisabled:v,isLoading:g}=useWrapContractWrite(i,{onSuccess:e=>m&&m(e),autoToast:u,skipSimulate:d,confirmations:h}),k=p||v||g||!1===i.enabled,{approve:y,shouldApprove:A,loading:j,isSuccess:C}=useNftApproves(null!=s?s:{},c),S=(0,l.useRef)();S.current=w,(0,l.useEffect)(()=>{S.current&&C&&S.current()},[C]);let T=(0,f.tx)();return T?(0,a.jsx)(SwitchNet,{className:t}):A?(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:y,busy:j,disabled:p||!y||j,children:"Approve"}):(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>b(),busy:g,busyShowContent:r,disabled:k,children:n})}let C=(0,k.Ue)(()=>({txs:[],progress:0}));function Txs(e){let{className:t,tx:n,txs:r,disabled:o,disableSendCalls:l=!0,disableProgress:u,beforeSimulate:d,busyShowTxet:h=!0,toast:m=!0,onTxSuccess:b}=e,{data:g}=(0,p.p)(),k=(0,f.tx)(),y=(0,f.pK)(),{mutate:A,isPending:j}=(0,v.D)({mutationFn:async()=>{if(!g)return;let e=(0,c.B)(y),t=await (0,s.IE)(r,{pc:e,wc:g}).then(e=>Promise.all(e.map(s.IE)));console.info("calls:",g.account.address,t);try{if(l)throw Error("disable wallet_sendCalls");if(1==t.length)throw Error("calls length one wallet_sendCalls");let e=t.map(e=>({data:(0,w.R)({abi:e.abi,functionName:e.functionName,args:e.args}),to:e.address})),{id:n}=await g.sendCalls({account:g.account.address,calls:e});for(;;){let e=await g.waitForCallsStatus({id:n});if("pending"!=e.status){if("success"==e.status)m&&i.A.success("Transactions Success"),null==b||b();else throw Error("Transactions ".concat(e.status," ").concat(JSON.stringify(e)));break}}}catch(r){let n=(0,s.az)(r),a=!u&&t.length>1;if(n&&(n.includes("wallet_sendCalls")||n.includes("EIP-7702 not supported"))){let n=0;for(let r of(a&&C.setState({txs:t,progress:n}),t)){let t=d?(await e.simulateContract(r)).request:r,s=await g.writeContract(t),c=await e.waitForTransactionReceipt({hash:s,confirmations:1});if("success"!==c.status)throw Error("Transactions Reverted");n++,a&&C.setState({progress:n})}m&&i.A.success("Transactions Success"),C.setState({progress:0,txs:[]}),null==b||b()}}},onError:e=>{C.setState({progress:0,txs:[]}),m&&(0,s.S3)(e)}}),S=o||j||"function"!=typeof r&&0==r.length||!g;return k?(0,a.jsx)(SwitchNet,{className:t}):(0,a.jsx)(N.k6,{className:(0,x.m)("flex items-center justify-center gap-4",t),onClick:()=>A(),busy:j,busyShowContent:h,disabled:S,children:n})}async function withTokenApprove(e){let{approves:t,pc:n,user:a,tx:s}=e,c=0n,o=await Promise.all(t.map(async e=>{var t;if(b.DR===e.token)return c+=e.amount,null;let s=await n.readContract({abi:u.Wo,address:e.token,functionName:"allowance",args:[a,e.spender]});if(s>=e.amount)return null;let o=null!==(t=e.name)&&void 0!==t?t:"Approve ".concat((0,r.kb)(e.token,await n.getChainId()).symbol);return{name:o,abi:u.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]}})).then(e=>e.filter(e=>null!==e));return[...o,{...s,...c>0n?{value:c}:{}}]}function TxsStat(e){let{className:t}=e,{txs:n,progress:r}=C();return 0==n.length?null:(0,a.jsxs)(y.o,{open:!0,disableClose:!0,className:(0,s.cn)("w-80 text-black dark:text-white flex flex-col gap-2 p-4",t),children:[(0,a.jsxs)("div",{className:"text-xl font-semibold",children:["Progress ",(0,a.jsx)(j.C,{children:"Will require multiple signatures, this will be simplified into 1 approval with future updates!"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 max-h-80 overflow-y-auto px-2.5",children:n.map((e,t)=>{var n;return(0,a.jsxs)("div",{className:(0,s.cn)("animitem flex items-center gap-5 bg-primary/20 px-4 py-2",{"border-t border-black/20 dark:border-white/20":t>0}),children:[(0,a.jsx)("span",{className:"font-semibold",children:t+1}),null!==(n=e.name)&&void 0!==n?n:e.functionName,(0,a.jsxs)("div",{className:(0,s.cn)("ml-auto text-xl",{"animate-spin":r==t}),children:[r==t&&(0,a.jsx)(A.fCD,{}),r>t&&(0,a.jsx)(A.l_A,{className:"text-green-500"})]})]},"tx_item_stat_".concat(t))})})]})}},77087:function(e,t,n){n.d(t,{$:function(){return Spinner}});var a=n(52987),r=n(13854);let Spinner=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{fill:"none",className:(0,r.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},45820:function(e,t,n){n.d(t,{HY:function(){return Swap},k6:function(){return BBtn}});var a=n(52987),r=n(13854),s=n(80329),c=n(77317),o=n(83496),l=n(77087);function BBtn(e){let{borderWidth:t=1,children:n,busy:o,busyShowContent:i=!0,className:u,hiddenBorder:d,...p}=e,f=(0,c.useRef)(null),[h,m]=(0,c.useState)("0_0"),x="unset",w="unset";if(f.current&&!d){let e=f.current,n=e.clientWidth,a=e.clientHeight,r=parseInt(getComputedStyle(e).borderRadius.replace("px","")),c="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(r," ").concat(t,"L").concat(n-r," ").concat(t),o="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(n-t," ").concat(r,"L").concat(n-t," ").concat(a-r),l="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(n-r," ").concat(a-t,"L").concat(r," ").concat(a-t," "),i="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(t," ").concat(a-r,"L").concat(t," ").concat(r),u="M ".concat(t," ").concat(r," ").concat(c," ").concat(o," ").concat(l," ").concat(i),d="M 0 0 L 0 ".concat(a," L ").concat(n," ").concat(a," L ").concat(n," 0 L 0 0 ").concat(u," Z");x="path('".concat(d,"')");let p=2*n,tranP=e=>(0,s.N)(e/2,2);w="radial-gradient(122.5% ".concat((0,s.N)(122.5/(n/a),2),"% at ").concat((0,s.N)((52.9*n+50*p-50*n)/p,2),"% ").concat((0,s.N)((16.25*a+50*p-50*a)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,c.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;m("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,a.jsxs)("button",{...p,ref:f,className:(0,r.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},u),children:[!d&&(0,a.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:x},children:(0,a.jsx)("div",{className:(0,r.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:w}})}),o&&(0,a.jsx)(l.$,{}),(i||!o)&&n]})}function Swap(e){let{className:t,style:n,...s}=e;return(0,a.jsx)("div",{...s,style:{transform:"rotateX(180deg) rotateZ(90deg)",...n||{}},className:(0,r.cn)("flex w-8 h-8 justify-center items-center self-center text-sm cursor-pointer border border-slate-500 text-slate-500 rounded-full hover:text-primary hover:border-primary",t),children:(0,a.jsx)(o.t4O,{})})}},25282:function(e,t,n){n.d(t,{C:function(){return Tip}});var a=n(52987),r=n(13854),s=n(43099),c=n(40219);function Tip(e){let{children:t,node:n,className:o,contentClassName:l,inFlex:i}=e,u=document.getElementById("tooltip-root");return t?(0,a.jsx)(s.zt,{children:(0,a.jsxs)(s.fC,{children:[(0,a.jsx)(s.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:n?(0,a.jsx)("div",{className:(0,r.cn)("inline-block cursor-default",o),style:{verticalAlign:"text-bottom"},children:n}):(0,a.jsx)("div",{className:(0,r.cn)(i?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",o),children:(0,a.jsx)(c.apP,{className:"inline-block stroke-slate-500"})})}),(0,a.jsx)(s.h_,{container:u,children:(0,a.jsxs)(s.VY,{className:(0,r.cn)("max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",l),children:[t,(0,a.jsx)(s.Eh,{})]})})]})}):n}}}]);