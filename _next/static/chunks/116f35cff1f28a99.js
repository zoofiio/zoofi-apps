(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,833957,e=>{"use strict";var t=e.i(29743),a=e.i(647163),n=e.i(785046);function r({children:e,className:r}){return(0,n.useThemeState)(e=>e.theme),(0,t.jsx)("div",{className:(0,a.cn)("h-auto lg:pt-[30px] pb-6",r),children:e})}e.s(["PageWrap",()=>r])},59084,e=>{"use strict";function t(e,a,n=1){if(null==a&&(a=e,e=0),!Number.isInteger(n)||0===n)throw Error("The step value must be a non-zero integer.");let r=Math.max(Math.ceil((a-e)/n),0),s=Array(r);for(let t=0;t<r;t++)s[t]=e+t*n;return s}e.s(["range",()=>t])},480790,e=>{"use strict";var t=e.i(234162),a=e.i(529334);function n(e,r="wei"){return(0,a.parseUnits)(e,t.etherUnits[r])}e.s(["parseEther",()=>n])},599457,95377,416301,e=>{"use strict";var t=e.i(29743),a=e.i(647163);function n(e,t,a=0){if(Object.is(t=Number(t),-0)&&(t="-0"),a=Math.min(Number.parseInt(a,10),292)){let[n,r=0]=t.toString().split("e"),s=Math[e](Number(`${n}e${Number(r)+a}`));Object.is(s,-0)&&(s="-0");let[o,i=0]=s.toString().split("e");return Number(`${o}e${Number(i)-a}`)}return Math[e](Number(t))}function r(e,t=0){return n("floor",e,t)}function s(){return(0,t.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,t.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}e.s(["decimalAdjust",()=>n],95377),e.s(["floor",()=>r],416301),e.s(["default",0,({header:e,data:n,span:o={},empty:i=(0,t.jsx)(s,{}),className:l,headerClassName:u,headerItemClassName:c,tbodyClassName:d="",rowClassName:f,rowStyle:p,cellClassName:b,onClickRow:y,onRowMouseHover:m})=>{let B=e.reduce((e,t,a)=>e+(o[a]??1),0),S=B>0?100/B:0;return(0,t.jsxs)("table",{className:(0,a.cn)("relative w-full bg-transparent ",l),children:[(0,t.jsx)("thead",{className:"",children:(0,t.jsx)("tr",{className:(0,a.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",u),children:e.map((e,n)=>(0,t.jsx)("th",{style:{width:`${r(S*(o[n]??1),2)}%`},scope:"col",className:(0,a.cn)(0==o[n]?"p-0 w-0":"p-3 font-normal text-sm","function"==typeof c?c(n):c),children:e},n))})}),(0,t.jsxs)("tbody",{className:(0,a.cn)(d),children:[n.map((n,r)=>(0,t.jsx)("tr",{onClick:()=>y&&y(r),onMouseEnter:()=>m&&m(r),onMouseLeave:()=>m&&m(-1),style:"function"==typeof p?p(r):p,className:(0,a.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",y?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof f?f(r):f),children:n.map((n,s)=>s>=e.length?(0,t.jsx)(t.Fragment,{children:n}):(0,t.jsx)("td",{className:(0,a.cn)(0==o[s]?"p-0 w-max":"px-3 py-2 text-sm w-max",{"flex items-center gap-2":0==s},"function"==typeof b?b(r,s):b),children:n},s))},r)),0===n.length&&i]})]})}],599457)},211051,e=>{"use strict";var t=e.i(570963);e.s(["displayBalance",0,(e,a=3,n=18)=>{if(!e)return"0";let r="bigint"==typeof e?e:BigInt(e),s=Number((0,t.formatUnits)(r,n)),o=Number((.1**a).toFixed(a));return s>0&&s<o?"<"+o:s<0&&s>-o?"â‰ˆ0":s.toLocaleString("en-US",{maximumFractionDigits:a})}])},763894,e=>{"use strict";var t=e.i(751755),a=e.i(647163);let n={[t.berachainTestnet.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[t.berachain.id]:"0x4737c3BAB13a1Ad94ede8B46Bc6C22fb8bBE9c81"},r={[t.berachainTestnet.id]:"0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",[t.berachain.id]:"0x7D3Cec2f46279229277802D30702e4E7FB19bAC0"},s={[t.berachainTestnet.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89",[t.berachain.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},o={[t.berachainTestnet.id]:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",[t.berachain.id]:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce"},i={[t.berachainTestnet.id]:"0xDf1126d3627b7f5D2a44d978A7180AcbD3c34aB6",[t.berachain.id]:"0x6E603014ACE3Ae06F34Ffe259106Af77c056d913"},l=(0,a.proxyGetDef)({[t.berachain.id]:[{vault:"0xf579c039c52ab795F0C4E358d3b462bE883cDd9F",asset:"0x9659dc8c1565E0bd82627267e3b4eEd1a377ebE6",pToken:"0xF0d0CEAE071b3aDfaad4Aa1722c9E9A94fb7Dd04",pTokenV2:!0,assetSymbol:"WETH-WBERA",pTokenSymbol:"pWETHWBERA",yTokenSymbol:"yWETHWBERA",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]},{vault:"0x94822b9BA715E9e3079ed12489Dc7A016694FC67",asset:"0xdd70a5ef7d8cfe5c5134b5f9874b09fb5ce812b4",pToken:"0x0DA715b18AaF66c7c044D4F315D479f6036728Ea",pTokenV2:!0,assetSymbol:"WBERA-WETH",pTokenSymbol:"pWBERAWETH",yTokenSymbol:"yWBERAWETH",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]},{vault:"0xE6d15592F337f54E8BD47e56BbB22aF12F0D4083",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0xc2C5EaDF0f48702bEEDD2e2a35517e1fC4dBF7A7",pTokenV2:!0,assetSymbol:"HONEY-USDC",pTokenSymbol:"pUSDCeHONEY",yTokenSymbol:"yUSDCeHONEY",rewardSymbol:"iBGT",protocolAddress:"0x9F0956c33f45141a7D8D5751038ae0A71C562f87",protocolSettingsAddress:"0xE34e1C9FC5313D9ac4B121B5F93C51e619dd778A",bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]},{vault:"0x702B707c2F8dd26F4F1e51cF425035d355A02767",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0xA58f5A2487abaBc5c5A23E3e3796E6615d12FCaf",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:"0xd75Dc0496826FF0C13cE6D6aA5Bf8D64126E4fF1",protocolSettingsAddress:"0x45a47E8013425AF3e6e71f1aa24e3B8c523386EA",bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]},{vault:"0x6686bDfF3ad20AE45E811c2451DfeE8AA0f338C0",asset:"0xdE04c469Ad658163e2a5E860a03A86B52f6FA8C8",pToken:"0x83f933af46458102cf54Eabe441DBB659a1B2eA5",assetSymbol:"HONEY-BYUSD",pTokenSymbol:"pHONEYBYUSD",yTokenSymbol:"yHONEYBYUSD",rewardSymbol:"iBGT",protocolAddress:n[t.berachain.id],protocolSettingsAddress:r[t.berachain.id],bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]},{vault:"0x33C42E171cFD7Ec85D3dB34D7f6d3D8121f64E63",asset:"0xf961a8f6d8c69e7321e78d254ecafbcc3a637621",pToken:"0x70B851f6877D16D6D5aD546B17d06281b8aBDd4b",assetSymbol:"HONEY-USDC",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",rewardSymbol:"iBGT",protocolAddress:"0xc0fA386aE92f18A783476d09121291A1972C30Dc",protocolSettingsAddress:"0x8c6E434Bb1C51728BdCc250255c1F654471d85eB",bQueryAddres:i[t.berachain.id],onEnv:["test","prod"]}]},[]);e.s(["BVAULTS_CONFIG",0,l,"CrocQueryAddress",0,s,"HONEY_Address",0,o])},675307,427301,e=>{"use strict";var t=e.i(96932),a=e.i(731724);e.i(621440);var n=e.i(131406),n=n,r=e.i(403939),r=r,s=e.i(879020),s=s,o=e.i(522912),o=o,i=e.i(875219),l=e.i(809948),u=e.i(751755),c=e.i(472064),d=e.i(647163);function f(e,t){let a={},n=Object.keys(e);for(let r=0;r<n.length;r++){let s=n[r],o=e[s];a[s]=t(o,s,e)}return a}var p=e.i(59084);function b(e){return e}var y=e.i(216020),m=e.i(823331);function B(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function S(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function h(e,t,a,n){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,a,n){if(null==t)return!0;if(Array.isArray(t))return g(e,t,a,n);if(t instanceof Map){var r,s,o,i,l=e,u=t,c=a,d=n;if(0===u.size)return!0;if(!(l instanceof Map))return!1;for(let[e,t]of u.entries())if(!1===c(l.get(e),t,e,l,u,d))return!1;return!0}if(t instanceof Set){return r=e,s=t,o=a,i=n,0===s.size||r instanceof Set&&g([...r],[...s],o,i)}let f=Object.keys(t);if(null==e)return 0===f.length;if(0===f.length)return!0;if(n&&n.has(t))return n.get(t)===e;n&&n.set(t,e);try{for(let r=0;r<f.length;r++){let s=f[r];if(!B(e)&&!(s in e)||void 0===t[s]&&void 0!==e[s]||null===t[s]&&null!==e[s]||!a(e[s],t[s],s,e,t,n))return!1}return!0}finally{n&&n.delete(t)}}(e,t,a,n);case"function":if(Object.keys(t).length>0)return h(e,{...t},a,n);return S(e,t);default:if(null===e||"object"!=typeof e&&"function"!=typeof e)return S(e,t);if("string"==typeof t)return""===t;return!0}}function g(e,t,a,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;let r=new Set;for(let s=0;s<t.length;s++){let o=t[s],i=!1;for(let l=0;l<e.length;l++){if(r.has(l))continue;let u=e[l],c=!1;if(a(u,o,s,e,t,n)&&(c=!0),c){r.add(l),i=!0;break}}if(!i)return!1}return!0}function A(e,t){var a;return"function"!=typeof(a=()=>void 0)?A(e,t):h(e,t,function e(t,n,r,s,o,i){let l=a(t,n,r,s,o,i);return void 0!==l?!!l:h(t,n,e,i)},new Map)}var E=e.i(572767);function C(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let v="[object String]",T="[object Number]",x="[object Boolean]",D="[object Arguments]";var N=e.i(233882);function k(e,t,a,n=new Map,r){let s=r?.(e,t,a,n);if(null!=s)return s;if(B(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){let t=Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=k(e[s],s,a,n,r);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,o]of(n.set(e,t),e))t.set(s,k(o,s,a,n,r));return t}if(e instanceof Set){let t=new Set;for(let s of(n.set(e,t),e))t.add(k(s,void 0,a,n,r));return t}if(void 0!==E.Buffer&&E.Buffer.isBuffer(e))return e.subarray();if((0,N.isTypedArray)(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=k(e[s],s,a,n,r);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),j(t,e,a,n,r),t}if("undefined"!=typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return n.set(e,t),j(t,e,a,n,r),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return n.set(e,t),j(t,e,a,n,r),t}if(e instanceof Error){let t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,j(t,e,a,n,r),t}if("object"==typeof e&&function(e){switch(C(e)){case D:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case x:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case T:case"[object Object]":case"[object RegExp]":case"[object Set]":case v:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),j(t,e,a,n,r),t}return e}function j(e,t,a=e,n,r){let s=[...Object.keys(t),...Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))];for(let o=0;o<s.length;o++){let i=s[o],l=Object.getOwnPropertyDescriptor(e,i);(null==l||l.writable)&&(e[i]=k(t[i],i,a,n,r))}}var w=e.i(151920),I=e.i(460057);let O=/^(?:0|[1-9]\d*)$/;function L(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===C(e)}e.s(["isArguments",()=>L],427301);var P=e.i(942337),F=e.i(567353),V=e.i(280924),M=e.i(40143),U=e.i(463605),q=e.i(142276),_=e.i(388654),Y=e.i(520194),Y=Y,K=e.i(763894),R=e.i(979353),s=s,o=o;let $=function(e,t={}){return(a,n)=>f(e,(e,r)=>e(e=>a({[r]:{...n()[r],...e}}),()=>n()[r],t[r]))}({sliceBVaultsStore:(e,t,a={})=>{let B=async(e,t)=>{let a=t.asset,[[s,o],i]=await Promise.all([e.readContract({abi:r.default,address:"0x4Be03f781C497A489E3cB0287833452cA9B9E80B",functionName:"getPoolTokens",args:[l.LP_TOKENS[a].poolId]}),e.readContract({abi:n.default,address:a,functionName:l.LP_TOKENS[a].isStable?"getActualSupply":"totalSupply"})]),u=s.findIndex(e=>e==l.LP_TOKENS[a].base),c=s.findIndex(e=>e==l.LP_TOKENS[a].quote);return{lp:a,vault:t.vault,baseBalance:o[u],quoteBalance:o[c],totalSupply:i}},S=async(e,t)=>{let a=t.asset,n=(0,U.parseAbi)(["function getUnderlyingBalances() external view returns(uint256,uint256)"]),[[r,s],o]=await Promise.all([e.readContract({abi:n,address:a,functionName:"getUnderlyingBalances"}),e.readContract({abi:M.erc20Abi,address:a,functionName:"totalSupply"})]);return{lp:a,vault:t.vault,baseBalance:r,quoteBalance:s,totalSupply:o}},h=async(a,n)=>{let r=(0,V.now)();console.info("timeStart:updateBvaults",r);let i=(0,_.getPC)(a),[f,p,h]=await Promise.all([Promise.all(n.map(e=>i.readContract({abi:e.isOld?o.default:s.default,address:e.bQueryAddres,functionName:"queryBVault",args:[e.vault]}).then(t=>({vault:e.vault,item:t})))),u.berachain.id==a?Promise.all(n.map(e=>l.LP_TOKENS[e.asset]?.poolId?B(i,e):l.LP_TOKENS[e.asset]?.isKodiak?S(i,e):Promise.resolve(null))):Promise.resolve(null),Promise.all(n.map(e=>e.pTokenV2?i.readContract({abi:[(0,q.parseAbiItem)("function rebaseRate() view returns (uint256)")],address:e.pToken,functionName:"rebaseRate"}):0n))]);console.info("timeEND:updateBvaults",(0,V.now)()-r);let g=(function(e,t=b){if(!e)return[];if(t=function(e){var t,a;if(null==e)return b;switch(typeof e){case"function":return e;case"object":if(Array.isArray(e)&&2===e.length)return function(e,t){var a,n,r;switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=(0,w.toKey)(e)}return n=a=t,r=(e,t,n,r)=>{let s;if(null!=s)return s;if("object"==typeof a)switch(Object.prototype.toString.call(a)){case T:case v:case x:{let e=new a.constructor(a?.valueOf());return j(e,a),e}case D:{let e={};return j(e,a),e.length=a.length,e[Symbol.iterator]=a[Symbol.iterator],e}default:return}},t=k(n,void 0,n,new Map,r),function(a){let n=(0,m.get)(a,e);if(void 0===n){let t;var r=e;if(0===(t=Array.isArray(r)?r:"string"==typeof r&&(0,I.isDeepKey)(r)&&a?.[r]==null?(0,P.toPath)(r):[r]).length)return!1;let n=a;for(let e=0;e<t.length;e++){let a=t[e];if((null==n||!Object.hasOwn(n,a))&&!((Array.isArray(n)||L(n))&&function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return O.test(e)}}(a)&&a<n.length))return!1;n=n[a]}return!0}return void 0===t?void 0===n:A(n,t)}}(e[0],e[1]);return t=k(a=t=e,void 0,a,new Map,void 0),e=>A(e,t);case"string":case"symbol":case"number":return function(t){return(0,m.get)(t,e)}}}(t),!Array.isArray(e)){let a=[],n=Object.keys(e),r=(0,y.isArrayLike)(e)?e.length:n.length;for(let s=0;s<r;s++){let r=n[s],o=e[r];t(o,r,e)&&a.push(o)}return a}let a=[],n=e.length;for(let r=0;r<n;r++){let n=e[r];t(n,r,e)&&a.push(n)}return a})(f,e=>null!=e).reduce((e,t,a)=>({...e,[t.vault]:{...t.item,ptRebaseRate:h[a]}}),{});if(await Promise.all(n.filter(e=>g[e.vault]?.closed).map(e=>i.readContract({abi:M.erc20Abi,functionName:"balanceOf",address:e.asset,args:[e.vault]}).then(t=>{g[e.vault].lockedAssetTotal=t}))),p){for(let e of p)if(e){let t=g[e.vault];t.lpLiq=t.lockedAssetTotal;let a=t.lpLiq*c.DECIMAL/e.totalSupply;t.lpBase=(0,d.toDecimal18)(e.baseBalance*a/c.DECIMAL,l.LP_TOKENS[e.lp].baseDecimal),t.lpQuote=(0,d.toDecimal18)(e.quoteBalance*a/c.DECIMAL,l.LP_TOKENS[e.lp].quoteDecimal)}}return e({bvaults:{...t().bvaults,...g}}),g},g=async(a,n,r)=>{let i=r||(0,p.range)(1,parseInt(((t().bvaults[n.vault]?.epochCount||0n)+1n).toString())).map(e=>BigInt(e));if(0==i.length)return{};let l=(0,_.getPC)(a),u=(await Promise.all(i.map(e=>l.readContract({abi:n.isOld?o.default:s.default,address:n.bQueryAddres,functionName:"queryBVaultEpoch",args:[n.vault,e]})))).reduce((e,t)=>({...e,[`${n.vault}_${t.epochId.toString()}`]:t}),{});return e({epoches:{...t().epoches,...u}}),u},E=async(a,n)=>{let r=n?.map(e=>e.vault)||(0,F.keys)(t().bvaults),s=f(await (0,i.getBvaultsPtSynthetic)(a,r),e=>BigInt(e));return e({yTokenSythetic:{...t().yTokenSythetic,...s}}),s};return{bvaults:{},epoches:{},yTokenSythetic:{},...a,updateBvaults:h,updateEpoches:g,updateYTokenSythetic:E}},sliceTokenStore:(e,t,a={})=>{let n=async(a,n)=>{let r=(0,_.getPC)(a),s=await Promise.all(n.map(e=>Promise.all([r.readContract({abi:Y.default,address:K.CrocQueryAddress[a],functionName:"queryPrice",args:[l.LP_TOKENS[e].base,l.LP_TOKENS[e].quote,BigInt(l.LP_TOKENS[e].poolType)]}),r.readContract({abi:Y.default,address:K.CrocQueryAddress[a],functionName:"queryLiquidity",args:[l.LP_TOKENS[e].base,l.LP_TOKENS[e].quote,BigInt(l.LP_TOKENS[e].poolType)]})]))),o={[K.HONEY_Address[a]]:c.DECIMAL};n.forEach((e,t)=>{let a=l.LP_TOKENS[e].base,n=l.LP_TOKENS[e].quote,r=s[t][0],i="0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c"==n?10n**6n:1n;o[e]=r/i**2n,o[n]=(r*10n**9n/(0x10000000000000000n*i))**2n*o[a]/c.DECIMAL}),console.info("lpPrics:",o),e({prices:{...t().prices,...o}})},r=async(a,r)=>{let s=function(e,t){let a={};for(let n=0;n<e.length;n++){let r=e[n],s=t(r);Object.hasOwn(a,s)||(a[s]=[]),a[s].push(r)}return a}(r,e=>l.LP_TOKENS[e]?"lp":"token").lp||[];if(0!==s.length){if(console.info("mlps;",r,s),a===u.berachainTestnet.id)await n(a,s);else if(a===u.berachain.id){let a=await (0,i.getTokensPriceByPyth)();e({prices:{...t().prices,...a}})}}return{}},s=async t=>{let a={[u.berachain.id]:"https://hub.berachain.com/internal-env/defaultTokenList.json",[u.berachainTestnet.id]:"https://raw.githubusercontent.com/berachain/default-lists/main/src/tokens/bartio/defaultTokenList.json"}[t];if(!a)return[];let n=await fetch(a).then(e=>e.json()).then(e=>e.tokens.filter(e=>e.chainId===t).map(e=>({symbol:e.symbol,address:e.address,decimals:e.decimals,name:e.name,url:(e.logoURI||"").replace("https://https://","https://")}))).catch(e=>[]);return localStorage.setItem("catchedDefTokenList_"+t,JSON.stringify(n)),e({defTokenList:n}),n},o=async(a,n,r)=>{let s=f(await (0,i.getNftTokensIdsByUser)(a,n,r),e=>e.map(e=>BigInt(e)));return e({nftBalance:{...t().nftBalance,...s}}),{}};return{totalSupply:{},updateTokenTotalSupply:async(a,n)=>{if(0==n.length)return{};let r=(0,_.getPC)(a),s=(await Promise.all(n.map(e=>(0,R.isNativeToken)(e)?Promise.resolve(0n):r.readContract({abi:M.erc20Abi,address:e,functionName:"totalSupply"})))).reduce((e,t,a)=>({...e,[n[a]]:t}),{});return e({totalSupply:{...t().totalSupply,...s}}),s},balances:{},updateTokensBalance:async(a,n,r)=>{if(0==n.length)return{};let s=(0,_.getPC)(a),o=(await Promise.all(n.map(e=>(0,R.isNativeToken)(e)?s.getBalance({address:r}):s.readContract({abi:M.erc20Abi,address:e,functionName:"balanceOf",args:[r]})))).reduce((e,t,a)=>({...e,[n[a]]:t}),{});return e({balances:{...t().balances,...o}}),o},prices:{"0x549943e04f40284185054145c6E4e9568C1D3241":c.DECIMAL,"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce":c.DECIMAL,"0x688e72142674041f8f6Af4c808a4045cA1D6aC82":c.DECIMAL},updateTokenPrices:r,defTokenList:(e=>{try{return JSON.parse(localStorage.getItem("catchedDefTokenList_"+e)||"[]")}catch(e){return[]}})(u.berachain.id),updateDefTokenList:s,nftBalance:{},updateNftBalance:o,...a}},sliceUserBVaults:(e,t,a)=>{let n=async(a,n,r,i)=>{let l=i.filter(e=>e.epochId>0n);if(0==l.length)return{};let u=(0,_.getPC)(a),c=await Promise.all(l.map(e=>u.readContract({abi:n.isOld?o.default:s.default,address:n.bQueryAddres,functionName:"queryBVaultEpochUser",args:[n.vault,e.epochId,r]})));return e({epoches:{...t().epoches,[n.vault]:c}}),c};return{epoches:{},...a,updateEpoches:n,reset:()=>e({epoches:{}})}}},{}),Q=(0,a.create)($);function H(e,a=[""]){let n=Q();return(0,t.useMemo)(()=>e(n),a.map(e=>e?(0,m.get)(n,e):n))}e.s(["useBoundStore",0,Q,"useStore",()=>H],675307)},149271,278746,e=>{"use strict";var t=e.i(763894),a=e.i(472064),n=e.i(675307),r=e.i(962220),s=e.i(567353),o=e.i(96932),i=e.i(717560),l=e.i(567543),u=e.i(31368);function c(){return(0,r.useQuery)({initialData:{},gcTime:36e5,queryKey:["getAdditionalConfig"],queryFn:async()=>u.default.get("https://raw.githubusercontent.com/zoofiio/configs/refs/heads/main/additional.json").then(e=>e.data)})}function d(){let e=(0,l.useCurrentChainId)(),s=(0,o.useMemo)(()=>t.BVAULTS_CONFIG[e].filter(e=>(e.onEnv||[]).includes(a.ENV)),[e,a.ENV]),{isLoading:u}=(0,r.useQuery)({queryKey:["UpdateBVaults",s],queryFn:async()=>(await Promise.all([n.useBoundStore.getState().sliceBVaultsStore.updateBvaults(e,s),n.useBoundStore.getState().sliceBVaultsStore.updateYTokenSythetic(e,s)]),!0)}),{address:d}=(0,i.useAccount)(),f=(0,o.useMemo)(()=>s.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[s]),{isLoading:p}=(0,r.useQuery)({queryKey:["UpdateBvautlsTokens",f],queryFn:async()=>(await Promise.all([n.useBoundStore.getState().sliceTokenStore.updateTokenTotalSupply(e,f),n.useBoundStore.getState().sliceTokenStore.updateTokenPrices(e,f)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),{isLoading:b}=(0,r.useQuery)({queryKey:["UpdateUserBvautlsTokens",f,d],queryFn:async()=>!!d&&(await n.useBoundStore.getState().sliceTokenStore.updateTokensBalance(e,f,d),!0)}),{isLoading:y}=c();return{loading:u||p||b||y}}function f(){let{address:e}=(0,i.useAccount)(),u=(0,l.useCurrentChainId)(),c=(0,o.useMemo)(()=>t.BVAULTS_CONFIG[u].filter(e=>(e.onEnv||[]).includes(a.ENV)),[u,a.ENV]),d=(0,n.useStore)(e=>(0,s.keys)(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,r.useQuery)({queryKey:["UpdateAllUserBvaults",c,u,e,d],queryFn:async()=>{if(!e)return!1;let t=n.useBoundStore.getState().sliceBVaultsStore.bvaults;for(let e of c)if(!t[e.vault])return!1;return await Promise.all(c.map(e=>n.useBoundStore.getState().sliceBVaultsStore.updateEpoches(u,e))),await Promise.all(c.map(t=>n.useBoundStore.getState().sliceUserBVaults.updateEpoches(u,t,e,(e=>{let t=n.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault],a=[];for(let r=parseInt(t.epochCount.toString());r>0;r--){let t=n.useBoundStore.getState().sliceBVaultsStore.epoches[`${e.vault}_${r}`];a.push(t)}return a})(t)))),!0}})}e.s(["AdditionalSupportTokens",0,{BERA:"0x6969696969696969696969696969696969696969",HONEY:"0xFCBD14DC51f0A4d49d5E53C2E0950e0bC26d0Dce",USDC:"0x549943e04f40284185054145c6E4e9568C1D3241",BYUSD:"0x688e72142674041f8f6Af4c808a4045cA1D6aC82",WETH:"0x2F6F07CDcf3588944Bf4C42aC74ff24bF56e7590",iBGT:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"},"useGetAdditionalConfig",()=>c],278746),e.s(["useLoadBVaults",()=>d,"useLoadUserBVaults",()=>f],149271)},59500,e=>{"use strict";var t=e.i(472064),a=e.i(567543),n=e.i(647163),r=e.i(211051),s=e.i(96932),o=e.i(717560),i=e.i(675307),l=e.i(809948),u=e.i(59084);function c(e){return(0,i.useStore)(t=>t.sliceBVaultsStore.bvaults[e]||(0,n.proxyGetDef)({current:(0,n.proxyGetDef)({},0n)},0n),[`sliceBVaultsStore.bvaults.${e}`])}function d(e){return(0,i.useStore)(t=>{let a=t.sliceBVaultsStore.bvaults[e];if(!a||a.epochCount<=0n)return[];let n=(0,u.range)(1,parseInt((a.epochCount+1n).toString())).reverse(),r=t.sliceBVaultsStore.epoches;return n.map(t=>r[`${e}_${t}`]).filter(e=>null!=e)},[`sliceBVaultsStore.bvaults.${e}`,"sliceBVaultsStore.epoches"])}function f(e){let t=d(e),a=(0,i.useStore)(t=>t.sliceUserBVaults.epoches[e]||[],[`sliceUserBVaults.epoches.${e}`]);return(0,s.useMemo)(()=>{let e=a.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,n.proxyGetDef)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,a])}function p(e){let t=f(e),a=c(e);return(0,s.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance>10n&&(e.settled||a.closed));return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t,a.closed])}function b(e){let a=(0,i.useStore)(()=>{let a,n,s,o,l,u,c;return a=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e],n=a?.current.vaultYTokenBalance||0n,o=(s=a?.Y||0n)>0n?n*t.DECIMAL/s:0n,l=a?.current.yTokenAmountForSwapYT||0n,u=a?.lockedAssetTotal||0n,c=l>0n?u*t.DECIMAL/l:0n,console.info("calcBootst:",(0,r.displayBalance)(o),(0,r.displayBalance)(c)),o},[`sliceBVaultsStore.bvaults.${e}`]);return[(0,r.displayBalance)(a,0),a]}function y(e){let a,r,s,o=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault],l=(r=(a=i.useBoundStore.getState()).sliceBVaultsStore.bvaults[e.vault],0n==(s=(0,n.getBigint)(a.sliceBVaultsStore.yTokenSythetic,[e.vault]))&&(s=(0,n.getBigint)(a.sliceTokenStore.totalSupply,e.pToken)*(r?.current.duration||0n)),s),u=0n;return u=e.pTokenV2?o&&o.ptRebaseRate&&o.pTokenTotal?o.ptRebaseRate/t.DECIMAL*t.YEAR_SECONDS*BigInt(1e10)/o.pTokenTotal/t.DECIMAL:0n:o&&o.current.assetTotalSwapAmount&&l?o.current.assetTotalSwapAmount*t.YEAR_SECONDS*BigInt(1e10)/l:0n,console.info("apy:",e.vault,u,e.pTokenV2,o?.ptRebaseRate,o?.pTokenTotal,l),u}function m(e){let t=(0,i.useStore)(()=>y(e),[`sliceBVaultsStore.bvaults.${e.vault}`,`sliceBVaultsStore.yTokenSythetic.${e.vault}`]);return[(0,n.fmtPercent)(t,10),t]}function B(e,t){let{address:r}=(0,o.useAccount)(),s=(0,a.useCurrentChainId)();return()=>{(0,n.retry)(async()=>{if(t?.(),!r)return;await Promise.all([i.useBoundStore.getState().sliceTokenStore.updateTokensBalance(s,[e.asset,e.pToken],r),i.useBoundStore.getState().sliceTokenStore.updateTokenTotalSupply(s,[e.asset,e.pToken]),i.useBoundStore.getState().sliceBVaultsStore.updateBvaults(s,[e]),i.useBoundStore.getState().sliceBVaultsStore.updateYTokenSythetic(s,[e])]);let a=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e.vault];await i.useBoundStore.getState().sliceBVaultsStore.updateEpoches(s,e,a.epochCount>1n?[a.epochCount,a.epochCount-1n]:[a.epochCount]);let n=[];for(let t=parseInt(a.epochCount.toString());t>0;t--){let a=i.useBoundStore.getState().sliceBVaultsStore.epoches[`${e.vault}_${t}`];n.push(a)}console.info("onUserAction:epoches",n),await i.useBoundStore.getState().sliceUserBVaults.updateEpoches(s,e,r,n)},3,1e3)}}function S(e,t){let a=l.LP_TOKENS[t];if(!a)return 0n;let r=i.useBoundStore.getState().sliceBVaultsStore.bvaults[e];if(!r)return 0n;let s=i.useBoundStore.getState().sliceTokenStore.prices,o=r.lpBase*(0,n.getBigint)(s,a.base,0n)+r.lpQuote*(0,n.getBigint)(s,a.quote);return r.lpLiq>0n?o/r.lpLiq:0n}e.s(["calcBVaultPTApy",()=>y,"calcLPPrice",()=>S,"useBVault",()=>c,"useBVaultApy",()=>m,"useBVaultBoost",()=>b,"useBVaultEpoches",()=>d,"useCalcClaimable",()=>p,"useEpochesData",()=>f,"useUpBVaultForUserAction",()=>B])},348009,e=>{"use strict";e.i(621440);var t=e.i(979496),a=e.i(472064),n=e.i(388654),r=e.i(675307),s=e.i(59500),o=e.i(962220),i=e.i(147245),l=e.i(480790),u=e.i(278746),c=e.i(404427),d=e.i(567543),f=e.i(647163),p=e.i(4433),b=e.i(280924);function y(e,t,n){let r=t>0n?e*n/t:0n;return r>100n*a.DECIMAL?0n:r}function m(e,t,n,r,s){let o=t>0n&&n>0n?t+n*r:0n,i=(o>0n?e*a.DECIMAL/o:0n)*(a.DECIMAL*r)/a.DECIMAL;return s>0n?i*a.DECIMAL/s:0n}function B(e,S=0n,h=0n){var g,A;let E,C,v,T=(0,s.useBVault)(e.vault),{data:x,isLoading:D}=(g=e.vault,E=(0,d.useCurrentChainId)(),(0,o.useQuery)({initialData:0n,queryKey:["getReturnsIBGT",g,E],queryFn:async()=>{let e=await c.default.get(E,`/api/bvault/getYieldiBGT/${g}`);return BigInt(e.yield)/BigInt(e.dur)}})),{data:N,isLoading:k}=(0,u.useGetAdditionalConfig)(),j=T.current.duration+T.current.startTime,w=j>0n?j-BigInt((0,p.round)((0,b.now)()/1e3)):0n,I=T.current.yTokenAmountForSwapYT,O=I>0n?x*a.DECIMAL*w/I:0n,L=(0,r.useStore)(e=>e.sliceTokenStore.prices["0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"],["sliceTokenStore.prices.0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b"])||0n,P=(0,r.useStore)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"])||0n,F=(0,s.calcLPPrice)(e.vault,e.asset);console.info("Prices:",e.assetSymbol,(0,i.formatEther)(L),(0,i.formatEther)(F));let V=T.current.vaultYTokenBalance,M=I+S>0n?x*a.DECIMAL*w/(I+S):0n,U=V>0n?T.Y*a.DECIMAL/V:0n,q=U*F/a.DECIMAL,_=h*F/a.DECIMAL,Y=y(O,q,L),K=S>0n?y(M,_,L):0n;console.info("restakingapy:",e.assetSymbol,(0,i.formatEther)(Y),(0,i.formatEther)(O),(0,i.formatEther)(U),(0,i.formatEther)(q));let R=N[`${e.vault}`]?.[parseInt(T.epochCount.toString())],$=R&&R.token&&R.amount?(0,f.getBigint)(P,u.AdditionalSupportTokens[R.token])*(0,l.parseEther)(R.amount.toFixed(6))/a.DECIMAL:0n,{data:Q,isLoading:H}=(A=e.vault,C=(0,s.useBVault)(A),v=(0,d.useCurrentChainId)(),(0,o.useQuery)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",v,A,C.current.adhocBribesPool],enabled:!!A&&!!C.current.adhocBribesPool,queryFn:async()=>(0,n.getPC)(v).readContract({abi:t.abiAdhocBribesPool,address:C.current.adhocBribesPool,functionName:"totalSupply"})})),G=m($,Q,I,w,q),W=S>0n?m($,Q,I+S,w,_):0n,z=D||k||H;return{roi:!z&&I>0n&&O>0n?Y+G-a.DECIMAL:0n,roiChange:!z&&I>0n&&O>0n?K+W-a.DECIMAL:0n,restakingIncomesApy:Y,additionalRoi:G}}e.s(["useBvaultROI",()=>B],348009)},22525,e=>{"use strict";var t=e.i(29743),a=e.i(147763),n=e.i(833957),r=e.i(599457),s=e.i(763894),o=e.i(809948),i=e.i(472064),l=e.i(567543),u=e.i(149271),c=e.i(675307),d=e.i(647163),f=e.i(59500),p=e.i(211051),b=e.i(348009),y=e.i(96932);let m=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,t.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function B({title:e,sub:a,tHeader:n,tData:s,tableProps:o}){return(0,t.jsxs)("div",{className:"animitem card whitespace-nowrap",children:["string"==typeof e?(0,t.jsx)("div",{className:"text-2xl leading-none font-semibold",children:e}):e,"string"==typeof a?(0,t.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:a}):a,(0,t.jsx)("div",{className:"my-4 h-px bg-border/60 dark:bg-border"}),(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsx)(r.default,{headerClassName:"border-b-0",header:n,data:s,...o||{}})})]})}function S(){let e,n,r,u,d,f=(e=(0,l.useCurrentChainId)(),n=s.BVAULTS_CONFIG[e].filter(e=>(e.onEnv||[]).includes(i.ENV)),r=(0,c.useStore)(e=>e.sliceBVaultsStore.bvaults),u=(0,c.useStore)(e=>e.sliceTokenStore.prices),{tvl:(d=[].concat(n.map(e=>{let t=o.LP_TOKENS[e.asset],a=r[e.vault],n=t&&a&&a.lpLiq&&a.lpBase&&a.lpQuote&&u[t.base]&&u[t.quote]?(u[t.base]*a.lpBase+u[t.quote]*a.lpQuote)/a.lpLiq:u[e.asset]||i.DECIMAL,s=a?.lpLiq||a?.lockedAssetTotal||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:n,amount:s,usdAmount:n*s/i.DECIMAL}}).reduce((e,t)=>{let a=e.find(e=>e.symbol==t.symbol);return a?(a.amount+=t.amount,a.usdAmount+=t.usdAmount,e):[...e,t]},[]))).reduce((e,t)=>e+t.usdAmount,0n),tvlItems:d}),b=(0,y.useMemo)(()=>f.tvlItems.map(e=>[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(a.CoinIcon,{symbol:e.symbol,size:20}),(0,t.jsx)("span",{children:e.symbol})]},"icon"),`$${(0,p.displayBalance)(e.price)}`,(0,p.displayBalance)(e.amount),`$${(0,p.displayBalance)(e.usdAmount)}`]),[f.tvlItems]);return(0,t.jsx)(B,{title:"Total Value Locked",sub:`$${(0,p.displayBalance)(f.tvl)}`,tHeader:["Asset","NAV","Amount","Total"],tData:b})}function h({vc:e}){let{roi:a}=(0,b.useBvaultROI)(e);return(0,t.jsx)(t.Fragment,{children:(0,d.fmtPercent)(a,18,2)})}function g(){let e=(0,l.useCurrentChainId)(),n=(0,y.useMemo)(()=>s.BVAULTS_CONFIG[e].filter(e=>(e.onEnv||[]).includes(i.ENV)),[e]),r=(0,c.useStore)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),u=(0,c.useStore)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),b=(0,y.useMemo)(()=>{let e=n.map(e=>{let t=(0,d.getBigint)(r,[e.vault,"lockedAssetTotal"]),a=t*(0,d.getBigint)(u,[e.asset])/i.DECIMAL,n=o.LP_TOKENS[e.asset];if(n){let t=(0,d.getBigint)(r,[e.vault,"lpBase"]),s=(0,d.getBigint)(r,[e.vault,"lpQuote"]);a=(t*(0,d.getBigint)(u,[n.base])+s*(0,d.getBigint)(u,[n.quote]))/i.DECIMAL}let[s,l]=n?e.assetSymbol.split("-"):["",""],c=Math.max(22+5*(0,p.displayBalance)(t).length,5*(0,p.displayBalance)(a).length+5);return{bvc:e,totalDeposit:t,totalDepositUsd:a,totalLeftWidth:c,lp:n,baseSymbol:s,quoteSymbol:l}}),s=e.reduce((e,t)=>Math.max(e,t.totalLeftWidth),0)+48;return e.map(({bvc:e,totalDeposit:n,totalDepositUsd:o,lp:i,baseSymbol:l,quoteSymbol:u})=>[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(a.CoinIcon,{symbol:e.assetSymbol,size:20}),(0,t.jsx)("span",{children:e.assetSymbol})]},"icon"),(0,t.jsxs)("div",{className:"flex gap-6 items-start",children:[(0,t.jsxs)("div",{style:{width:s},children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(a.CoinIcon,{symbol:e.assetSymbol,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)(n)})]},"icon"),(0,t.jsxs)("div",{className:"opacity-60",children:["~",(0,p.displayBalance)(o)]})]}),i&&(0,t.jsxs)("div",{style:{width:s},children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(a.CoinIcon,{symbol:l,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)((0,d.getBigint)(r,[e.vault,"lpBase"]))})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(a.CoinIcon,{symbol:u,size:14}),(0,t.jsx)("span",{children:(0,p.displayBalance)((0,d.getBigint)(r,[e.vault,"lpQuote"]))})]})]})]},"total"),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[m,(0,t.jsxs)("span",{children:["Epoch ",(0,d.getBigint)(r,[e.vault,"epochCount"]).toString()]})]},"status"),(0,d.fmtPercent)((0,f.calcBVaultPTApy)(e),10),(0,t.jsx)(h,{vc:e},"roi")])},[n,r,u]);return(0,t.jsx)(B,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT ROI"],tData:b,tableProps:{span:{1:2},cellClassName:(e,t)=>0==t?"h-14":""}})}function A(){return(0,u.useLoadBVaults)(),(0,t.jsx)(n.PageWrap,{children:(0,t.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,t.jsx)(S,{}),(0,t.jsx)(g,{})]})})}e.s(["default",()=>A],22525)}]);