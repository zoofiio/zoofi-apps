"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7834],{57834:function(e,t,a){a.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx},$M:function(){return Txs},g7:function(){return TxsStat},Rb:function(){return withTokenApprove}});var n=a(52987),c=a(7347),r=a(13854),s=a(62013),i=a(61469),o=a(77317),l=a(47259),d=a(26694),u=a(86167),f=a(58123),p=a(99409);let m={},useApproves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:n}=(0,u.m)(),i=(0,p.pK)(),{data:h}=(0,f.p)(),[b,x]=(0,o.useState)(!1),v=(0,o.useMemo)(()=>Object.keys(e).filter(e=>!(0,c.Mg)(e)),[e]),[w,g]=(0,o.useState)(t&&m[t]||{}),updateAllownce=(e,a)=>{t&&(m[t]={...m[t]||{},[e]:a},g(t=>({...t,[e]:a})))};(0,o.useEffect)(()=>{n&&t&&i&&v.forEach(e=>{(0,s.B)(i).readContract({abi:d.Wo,address:e,functionName:"allowance",args:[n,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,i,n]);let[y,C]=(0,o.useState)(!1),A=(0,o.useMemo)(()=>v.filter(t=>(0,r.ok)(e,t)>0n&&(0,r.ok)(e,t)>(0,r.ok)(w,t)),[e,v,w]),approve=async()=>{if(0!=A.length&&t&&n)try{C(!0),x(!1);for(let c=0;c<A.length;c++){let r=A[c],o=!1===a?e[r]:a,u=await (null==h?void 0:h.writeContract({abi:d.Wo,address:r,functionName:"approve",args:[t,o]}));u&&await (0,s.B)(i).waitForTransactionReceipt({hash:u});let f=await (0,s.B)(i).readContract({abi:d.Wo,address:r,functionName:"allowance",args:[n,t]});f<e[r]&&l.A.error("Insufficient amount of approve"),updateAllownce(r,f)}l.A.success("Approve success"),C(!1),x(!0)}catch(e){l.A.error((0,r.az)(e)),C(!1),x(!1)}};return{approve,loading:y,shouldApprove:A.length>0,isSuccess:b}},h={},useNftApproves=(e,t)=>{let{address:a}=(0,u.m)(),n=(0,p.pK)(),{data:c}=(0,f.p)(),[m,b]=(0,o.useState)(!1),x=(0,i.X)(e),[v,w]=(0,o.useState)(t&&h[t]||{}),updateAllownce=(e,a)=>{t&&(h[t]={...h[t]||{},[e]:a},w(t=>({...t,[e]:a})))};(0,o.useEffect)(()=>{a&&t&&n&&x.forEach(e=>{(0,s.B)(n).readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[a,t]}).then(t=>t!==v[e]&&updateAllownce(e,t)).catch(console.error)})},[x,n,a]);let[g,y]=(0,o.useState)(!1),C=(0,o.useMemo)(()=>x.filter(e=>!v[e]),[e,x,v]),approve=async()=>{if(0!=C.length&&t)try{y(!0),b(!1);for(let e=0;e<C.length;e++){let a=C[e],r=await (null==c?void 0:c.writeContract({abi:d.Hr,address:a,functionName:"setApprovalForAll",args:[t,!0]}));r&&await (0,s.B)(n).waitForTransactionReceipt({hash:r}),updateAllownce(a,!0)}l.A.success("Approve success"),y(!1),b(!0)}catch(e){l.A.error((0,r.az)(e)),y(!1),b(!1)}};return{approve,loading:g,shouldApprove:C.length>0,isSuccess:m}};function useWrapContractWrite(e,t){let{autoToast:a=!0,onSuccess:n}=t||{},[c,i]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),{data:m}=(0,f.p)(),h=(0,p.pK)(),b=!m||!m.account||c||!e||m.chain.id!==h,write=async()=>{if(!b){i(!0),u(!1);try{let c="function"==typeof e?await e():e,r=(0,s.B)(h),i={account:m.account,...c};if(!(null==t?void 0:t.skipSimulate)){let e=await r.simulateContract(i);i=e.request}let o=await m.writeContract(i),d=await r.waitForTransactionReceipt({hash:o,confirmations:null==t?void 0:t.confirmations});if("success"!==d.status)throw"Transaction reverted";u(!0),n&&n(d),a&&l.A.success("Transaction success")}catch(e){a&&l.A.error((0,r.az)(e))}i(!1)}};return{write,isDisabled:b,isLoading:c,isSuccess:d}}var b=a(88501),x=a(2861),v=a(49461),w=a(95499),g=a(69245),y=a(45820),C=a(93108),A=a(16804),N=a(86589),k=a(25282);function SwitchNet(e){let{className:t}=e,a=(0,g.o)(),c=(0,p.pK)();return(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4 whitespace-nowrap w-fit min-w-[200px]",t),onClick:()=>a.switchChainAsync({chainId:c}).catch(console.error),busy:a.isPending,disabled:a.isPending,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:a,busyShowTxet:c=!0,approves:r,spender:s,requestAmount:i,config:l,toast:d=!0,skipSimulate:u=!1,disabled:f,disabledHidden:m,confirmations:h,onTxSuccess:x,onApproveSuccess:v}=e,{write:w,isDisabled:g,isLoading:C}=useWrapContractWrite(l,{onSuccess:e=>x&&x(e),autoToast:d,skipSimulate:u,confirmations:h}),A=f||g||C||!1===l.enabled,{approve:N,shouldApprove:k,loading:E,isSuccess:j}=useApproves(r||{},s,i),S=(0,o.useRef)();S.current=v,(0,o.useEffect)(()=>{S.current&&j&&S.current()},[j]);let T=f||!N||E,D=(0,p.tx)();return m&&(A||T)?null:D?(0,n.jsx)(SwitchNet,{className:t}):k?(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:N,busy:E,disabled:T,children:"Approve"}):(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:C,busyShowContent:c,disabled:A,children:a})}function NftApproveAndTx(e){let{className:t,tx:a,busyShowTxet:c=!0,approves:r,spender:s,requestAmount:i,config:l,toast:d=!0,skipSimulate:u=!1,disabled:f,confirmations:m,onTxSuccess:h,onApproveSuccess:x}=e,{write:v,isDisabled:w,isLoading:g}=useWrapContractWrite(l,{onSuccess:e=>h&&h(e),autoToast:d,skipSimulate:u,confirmations:m}),C=f||w||g||!1===l.enabled,{approve:A,shouldApprove:N,loading:k,isSuccess:E}=useNftApproves(null!=r?r:{},s),j=(0,o.useRef)();j.current=x,(0,o.useEffect)(()=>{j.current&&E&&j.current()},[E]);let S=(0,p.tx)();return S?(0,n.jsx)(SwitchNet,{className:t}):N?(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:A,busy:k,disabled:f||!A||k,children:"Approve"}):(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:()=>v(),busy:g,busyShowContent:c,disabled:C,children:a})}let E=(0,C.Ue)(()=>({txs:[],progress:0})),j=[];function Txs(e){let{className:t,tx:a,txs:c,disabled:i,disableProgress:o,beforeSimulate:d,busyShowTxet:u=!0,toast:m=!0,onTxSuccess:h}=e,{data:v}=(0,f.p)(),g=(0,p.tx)(),C=(0,p.pK)(),{mutate:A,isPending:N}=(0,w.D)({mutationFn:async()=>{if(!v)return;let e=(0,s.B)(C),t=await (0,r.IE)(c,{pc:e,wc:v}).then(e=>Promise.all(e.map(r.IE)));console.info("calls:",v.name,v.account.address,t);try{if(1==t.length||!j.includes(C))throw Error("unuse wallet_sendCalls");let e=t.map(e=>({data:(0,x.R)({abi:e.abi,functionName:e.functionName,args:e.args}),to:e.address})),{id:a}=await v.sendCalls({account:v.account.address,calls:e});for(;;){let e=await v.waitForCallsStatus({id:a});if("pending"!=e.status){if("success"==e.status)m&&l.A.success("Transactions Success"),null==h||h();else throw Error("Transactions ".concat(e.status," ").concat(JSON.stringify(e)));break}}}catch(c){let a=(0,r.az)(c),n=!o&&t.length>1;if(a&&(a.includes("wallet_sendCalls")||a.includes("EIP-7702 not supported"))){let a=0;for(let c of(n&&E.setState({txs:t,progress:a}),t)){let t=d?(await e.simulateContract(c)).request:c,r=await v.writeContract(t),s=await e.waitForTransactionReceipt({hash:r,confirmations:1});if("success"!==s.status)throw Error("Transactions Reverted");a++,n&&E.setState({progress:a})}m&&l.A.success("Transactions Success"),E.setState({progress:0,txs:[]}),null==h||h()}}},onError:e=>{E.setState({progress:0,txs:[]}),m&&(0,r.S3)(e)}}),k=i||N||"function"!=typeof c&&0==c.length||!v;return g?(0,n.jsx)(SwitchNet,{className:t}):(0,n.jsx)(y.k6,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:()=>A(),busy:N,busyShowContent:u,disabled:k,children:a})}async function withTokenApprove(e){let{approves:t,pc:a,user:n,tx:r}=e,s=0n,i=await Promise.all(t.map(async e=>{var t;if(v.DR===e.token)return s+=e.amount,null;let r=await a.readContract({abi:d.Wo,address:e.token,functionName:"allowance",args:[n,e.spender]});if(r>=e.amount)return null;let i=null!==(t=e.name)&&void 0!==t?t:"Approve ".concat((0,c.kb)(e.token,await a.getChainId()).symbol);return{name:i,abi:d.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]}})).then(e=>e.filter(e=>null!==e));return[...i,{...r,...s>0n?{value:s}:{}}]}function TxsStat(e){let{className:t}=e,{txs:a,progress:c}=E();return 0==a.length?null:(0,n.jsxs)(A.o,{open:!0,disableClose:!0,className:(0,r.cn)("w-80 text-black dark:text-white flex flex-col gap-2 p-4",t),children:[(0,n.jsxs)("div",{className:"text-xl font-semibold",children:["Progress ",(0,n.jsx)(k.C,{children:"Will require multiple signatures, this will be simplified into 1 approval with future updates!"})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2 max-h-80 overflow-y-auto px-2.5",children:a.map((e,t)=>{var a;return(0,n.jsxs)("div",{className:(0,r.cn)("animitem flex items-center gap-5 bg-primary/20 px-4 py-2",{"border-t border-black/20 dark:border-white/20":t>0}),children:[(0,n.jsx)("span",{className:"font-semibold",children:t+1}),null!==(a=e.name)&&void 0!==a?a:e.functionName,(0,n.jsxs)("div",{className:(0,r.cn)("ml-auto text-xl",{"animate-spin":c==t}),children:[c==t&&(0,n.jsx)(N.fCD,{}),c>t&&(0,n.jsx)(N.l_A,{className:"text-green-500"})]})]},"tx_item_stat_".concat(t))})})]})}},77087:function(e,t,a){a.d(t,{$:function(){return Spinner}});var n=a(52987),c=a(13854);let Spinner=e=>{let{className:t}=e;return(0,n.jsxs)("svg",{fill:"none",className:(0,c.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},45820:function(e,t,a){a.d(t,{HY:function(){return Swap},k6:function(){return BBtn}});var n=a(52987),c=a(13854),r=a(80329),s=a(77317),i=a(83496),o=a(77087);function BBtn(e){let{borderWidth:t=1,children:a,busy:i,busyShowContent:l=!0,className:d,hiddenBorder:u,...f}=e,p=(0,s.useRef)(null),[m,h]=(0,s.useState)("0_0"),b="unset",x="unset";if(p.current&&!u){let e=p.current,a=e.clientWidth,n=e.clientHeight,c=parseInt(getComputedStyle(e).borderRadius.replace("px","")),s="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(c," ").concat(t,"L").concat(a-c," ").concat(t),i="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(a-t," ").concat(c,"L").concat(a-t," ").concat(n-c),o="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(a-c," ").concat(n-t,"L").concat(c," ").concat(n-t," "),l="A".concat(c-t," ").concat(c-t," 0, 0, 1, ").concat(t," ").concat(n-c,"L").concat(t," ").concat(c),d="M ".concat(t," ").concat(c," ").concat(s," ").concat(i," ").concat(o," ").concat(l),u="M 0 0 L 0 ".concat(n," L ").concat(a," ").concat(n," L ").concat(a," 0 L 0 0 ").concat(d," Z");b="path('".concat(u,"')");let f=2*a,tranP=e=>(0,r.N)(e/2,2);x="radial-gradient(122.5% ".concat((0,r.N)(122.5/(a/n),2),"% at ").concat((0,r.N)((52.9*a+50*f-50*a)/f,2),"% ").concat((0,r.N)((16.25*n+50*f-50*n)/f,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,s.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;h("".concat((null===(e=p.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=p.current)||void 0===t?void 0:t.clientWidth)||0))});return p.current&&e.observe(p.current),()=>{p.current&&e.unobserve(p.current)}},[p.current]),(0,n.jsxs)("button",{...f,ref:p,className:(0,c.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed bg-btn  dark:bg-btndark",{"hover:bg-btnhover dark:hover:bg-btndarkhover":!e.disabled},d),children:[!u&&(0,n.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:p.current?"visible":"hidden",clipPath:b},children:(0,n.jsx)("div",{className:(0,c.cn)("w-[200%] aspect-square shrink-0",{"dark:group-hover/bbtn:opacity-60":!e.disabled}),style:{background:x}})}),i&&(0,n.jsx)(o.$,{}),(l||!i)&&a]})}function Swap(e){let{className:t,style:a,...r}=e;return(0,n.jsx)("div",{...r,style:{transform:"rotateX(180deg) rotateZ(90deg)",...a||{}},className:(0,c.cn)("flex w-8 h-8 justify-center items-center self-center text-sm cursor-pointer border border-slate-500 text-slate-500 rounded-full hover:text-primary hover:border-primary",t),children:(0,n.jsx)(i.t4O,{})})}},25282:function(e,t,a){a.d(t,{C:function(){return Tip}});var n=a(52987),c=a(13854),r=a(61533),s=a(77317),i=a(40219),o=a(23449);function Tip(e){let{children:t,node:a,className:l,contentClassName:d,inFlex:u}=e,[f,p]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,o.Z)(m,e=>{f&&(e.preventDefault(),e.stopPropagation(),p(!1))});let h=document.getElementById("tooltip-root");return t?(0,n.jsx)(r.zt,{children:(0,n.jsxs)(r.fC,{open:f,delayDuration:100,children:[(0,n.jsx)(r.xz,{asChild:!0,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClickCapture:()=>!f&&p(!0),children:a?(0,n.jsx)("div",{className:(0,c.cn)("inline-block cursor-default",l),style:{verticalAlign:"text-bottom"},children:a}):(0,n.jsx)("div",{className:(0,c.cn)(u?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",l),children:(0,n.jsx)(i.apP,{className:"inline-block stroke-slate-500"})})}),(0,n.jsx)(r.h_,{container:h,children:(0,n.jsxs)(r.VY,{ref:m,className:(0,c.cn)("max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",d),children:[t,(0,n.jsx)(r.Eh,{})]})})]})}):a}},7347:function(e,t,a){a.d(t,{Mg:function(){return isNativeToken},kb:function(){return getTokenBy}});var n=a(49461),c=a(75577),r=a(45359),s=a(49952),i=a(53414);let o=[{address:n.DR,symbol:"ETH",decimals:18,chain:r.R.id,isNative:!0},{address:n.DR,symbol:"ETH",decimals:18,chain:s.F.id,isNative:!0},{address:n.DR,symbol:"0G",decimals:18,chain:i.Cn.id,isNative:!0},{address:n.DR,symbol:"0G",decimals:18,chain:i.ZS.id,isNative:!0},{address:"0xb09a8ba59615a552231cefcee80c3b88706597ed",symbol:"YTK",decimals:18,chain:s.F.id},{address:"0xf37b6ec18cee80634de01aef83701d6e726e7fc9",symbol:"BT-INFRA",decimals:18,chain:s.F.id},{address:"0xe01C85599300f9ED5DE2d7D4FE3Dc2Dc4c5c3877",symbol:"0G",decimals:18,chain:i.Cn.id},{address:"0x78A8D4014000dF30b49eB0c29822B6C7C79D68cA",symbol:"v0G",decimals:18,chain:i.Cn.id},{address:"0x937F60B54dA360b31D60372d2e19FE55Cb8eee53",symbol:"y0G",decimals:18,chain:i.Cn.id},{address:"0x8D44BF9d72039C22dB4e8d7aB50d27038002fAC8",symbol:"lp0G",decimals:18,chain:i.Cn.id},{address:"0x88d6Cb5a4334658443e74bbDbd6FF7E49E8F31fb",symbol:"v0G",decimals:18,chain:i.ZS.id},{address:"0xC43aac9D6C5358ed0Bb4FEfAfc87961E9ec87a88",symbol:"lp0G",decimals:18,chain:i.ZS.id},{address:"0xd839962d55d9e8309f0f64c391887a33ab8cb4d0",symbol:"ATH",decimals:18,chain:i.yX.id},{address:"0x01e80CC2b282D6f926605c20e5aF7D74345615Ac",symbol:"vATH",decimals:18,chain:i.yX.id},{address:"0xf79f736e6787911a5167ebfac7ca5c3de4327a88",symbol:"lpATH",decimals:18,chain:i.yX.id},{address:"0xc87B37a581ec3257B734886d9d3a581F5A9d056c",symbol:"ATH",decimals:18,chain:i.yX.id},{address:"0x24ef95c39DfaA8f9a5ADf58edf76C5b22c34Ef46",symbol:"vATH",decimals:18,chain:i.yX.id},{address:"0xbf4b4A83708474528A93C123F817e7f2A0637a88",symbol:"lpATH",decimals:18,chain:i.yX.id}],l=o.reduce((e,t)=>({...e,["".concat(t.chain,"_").concat(t.address.toLowerCase())]:t}),{});function getTokenBy(e,t,a){if(!e||!t)return;let n="".concat(t,"_").concat(e.toLowerCase()),c=l[n];if(!c){let{symbol:c="Token",decimals:r=18,isNative:s}=null!=a?a:{};return l[n]={address:e,chain:t,symbol:c,decimals:r,isNative:s},l[n]}return c}function isNativeToken(e){return(0,c.E)(e,"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")||e==n.DR}},62013:function(e,t,a){a.d(t,{B:function(){return getPC}});var n=a(53414),c=a(93108);let r=(0,c.Ue)((e,t)=>({readingCount:0,upReadingCount:a=>e({readingCount:t().readingCount+a})}));var s=a(93342),i=a(61469),o=a(95319),l=a(46502);let d={};function getPC(e,t){d[e]||(d[e]={pcs:function(e){let t=n.Af.find(t=>t.id==e);if(!t)throw"No Chain for chianId:".concat(e);let a=function(e){let t=(0,i.X)(e.rpcUrls);return(0,s.x)(t.map(t=>e.rpcUrls[t].http))}(t);if(0==a.length)throw"No Chain rpc for chianId:".concat(e);let c=a.map(t=>{let a=(0,o.v)({batch:{multicall:n.y1},chain:n.Af.find(t=>t.id==e),transport:(0,l.d)(t,{batch:n.Xp})}),c=a.readContract;return a.readContract=async function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];try{return r.getState().upReadingCount(1),await c(...t)}catch(e){throw console.error("readError",e,"\nArgs",[...t]),e}finally{r.getState().upReadingCount(-1)}},a});return c}(e),next:0,time:0});let a=d[e];if("number"==typeof t)return a.time=Date.now(),a.pcs[t%a.pcs.length];{let e=Date.now();a.pcs.length>1&&e-a.time>n.Xp.wait&&(a.next++,a.next>=a.pcs.length&&(a.next=0),a.time=e);let t=a.pcs[a.next];return t}}}}]);