"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1627],{12687:function(e,t,s){s.d(t,{v:function(){return ApproveAndTx},L:function(){return NftApproveAndTx}});var r=s(31113),n=s(19757),i=s(26361),a=s(78403),l=s(83978),o=s.n(l),c=s(64103),d=s(47259),p=s(58714),u=s(96670),f=s(4408),x=s(59175);let h={},useApproves=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:r}=(0,u.m)(),l=(0,x.p)(),{data:o}=(0,f.p)(),[m,g]=(0,c.useState)(!1),v=(0,c.useMemo)(()=>Object.keys(e).filter(e=>e!==n.K8),[e]),[b,j]=(0,c.useState)(t&&h[t]||{}),updateAllownce=(e,s)=>{t&&(h[t]={...h[t]||{},[e]:s},j(t=>({...t,[e]:s})))};(0,c.useEffect)(()=>{r&&t&&l&&v.forEach(e=>{(0,a.B)(l).readContract({abi:p.Wo,address:e,functionName:"allowance",args:[r,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,l,r]);let[w,L]=(0,c.useState)(!1),N=(0,c.useMemo)(()=>v.filter(t=>(0,i.ok)(e,t)>0n&&(0,i.ok)(e,t)>(0,i.ok)(b,t)),[e,v,b]),approve=async()=>{if(0!=N.length&&t)try{L(!0),g(!1);for(let r=0;r<N.length;r++){let n=N[r],i=!1===s?e[n]:s,c=await (null==o?void 0:o.writeContract({abi:p.Wo,address:n,functionName:"approve",args:[t,i]}));c&&await (0,a.B)(l).waitForTransactionReceipt({hash:c}),updateAllownce(n,i)}d.A.success("Approve success"),L(!1),g(!0)}catch(e){d.A.error((0,i.az)(e)),L(!1),g(!1)}};return{approve,loading:w,shouldApprove:N.length>0,isSuccess:m}},m={},useNftApproves=(e,t)=>{let{address:s}=(0,u.m)(),r=(0,x.p)(),{data:n}=(0,f.p)(),[l,h]=(0,c.useState)(!1),g=o().keys(e),[v,b]=(0,c.useState)(t&&m[t]||{}),updateAllownce=(e,s)=>{t&&(m[t]={...m[t]||{},[e]:s},b(t=>({...t,[e]:s})))};(0,c.useEffect)(()=>{s&&t&&r&&g.forEach(e=>{(0,a.B)(r).readContract({abi:p.Hr,address:e,functionName:"isApprovedForAll",args:[s,t]}).then(t=>t!==v[e]&&updateAllownce(e,t)).catch(console.error)})},[g,r,s]);let[j,w]=(0,c.useState)(!1),L=(0,c.useMemo)(()=>g.filter(e=>!v[e]),[e,g,v]),approve=async()=>{if(0!=L.length&&t)try{w(!0),h(!1);for(let e=0;e<L.length;e++){let s=L[e],i=await (null==n?void 0:n.writeContract({abi:p.Hr,address:s,functionName:"setApprovalForAll",args:[t,!0]}));i&&await (0,a.B)(r).waitForTransactionReceipt({hash:i}),updateAllownce(s,!0)}d.A.success("Approve success"),w(!1),h(!0)}catch(e){d.A.error((0,i.az)(e)),w(!1),h(!1)}};return{approve,loading:j,shouldApprove:L.length>0,isSuccess:l}};function useWrapContractWrite(e,t){let{autoToast:s=!0,onSuccess:r}=t||{},[n,l]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),{data:u}=(0,f.p)(),h=(0,x.p)(),m=!u||!u.account||n||!e||u.chain.id!==h,write=async()=>{if(!m){l(!0),p(!1);try{let n="function"==typeof e?await e():e,i=(0,a.B)(h),l={account:u.account,...n};if(!(null==t?void 0:t.skipSimulate)){let e=await i.simulateContract(l);l=e.request}let o=await u.writeContract(l),c=await i.waitForTransactionReceipt({hash:o,confirmations:null==t?void 0:t.confirmations});if("success"!==c.status)throw"Transaction reverted";p(!0),r&&r(c),s&&d.A.success("Transaction success")}catch(e){s&&d.A.error((0,i.az)(e))}l(!1)}};return{write,isDisabled:m,isLoading:n,isSuccess:o}}var g=s(88501),v=s(60689);function ApproveAndTx(e){let{className:t,tx:s,busyShowTxet:n=!0,approves:i,spender:a,requestAmount:l,config:o,toast:d=!0,skipSimulate:p=!1,disabled:u,confirmations:f,onTxSuccess:h,onApproveSuccess:m}=e,{write:b,isDisabled:j,isLoading:w}=useWrapContractWrite(o,{onSuccess:e=>h&&h(e),autoToast:d,skipSimulate:p,confirmations:f}),L=u||j||w||!1===o.enabled,{approve:N,shouldApprove:y,loading:D,isSuccess:A}=useApproves(i||{},a,l),k=(0,c.useRef)();k.current=m,(0,c.useEffect)(()=>{k.current&&A&&k.current()},[A]);let B=(0,x.t)();return y?(0,r.jsx)(v.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:N,busy:D,disabled:u||!N||D||B,children:"Approve"}):(0,r.jsx)(v.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:()=>b(),busy:w,busyShowContent:n,disabled:L,children:s})}function NftApproveAndTx(e){let{className:t,tx:s,busyShowTxet:n=!0,approves:i,spender:a,requestAmount:l,config:o,toast:d=!0,skipSimulate:p=!1,disabled:u,confirmations:f,onTxSuccess:h,onApproveSuccess:m}=e,{write:b,isDisabled:j,isLoading:w}=useWrapContractWrite(o,{onSuccess:e=>h&&h(e),autoToast:d,skipSimulate:p,confirmations:f}),L=u||j||w||!1===o.enabled,{approve:N,shouldApprove:y,loading:D,isSuccess:A}=useNftApproves(null!=i?i:{},a),k=(0,c.useRef)();k.current=m,(0,c.useEffect)(()=>{k.current&&A&&k.current()},[A]);let B=(0,x.t)();return y?(0,r.jsx)(v.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:N,busy:D,disabled:u||!N||D||B,children:"Approve"}):(0,r.jsx)(v.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:()=>b(),busy:w,busyShowContent:n,disabled:L,children:s})}},44939:function(e,t,s){s.d(t,{E:function(){return PageWrap}});var r=s(31113);s(64103);var n=s(26361),i=s(69708),a=s(12045);function PageWrap(e){let{children:t,className:s}=e,l=(0,a.l)(e=>e.theme),o=(0,i.usePathname)();return(0,r.jsx)("div",{className:(0,n.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",s),style:{backgroundSize:"contain",background:"light"==l?"#eeeeee":"/"==o?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:t})}},96769:function(e,t,s){s.d(t,{HQ:function(){return PreDeposit},z0:function(){return D}});var r=s(31113),n=s(68535),i=s(26361),a=s(78403),l=s(64370),o=s(21416),c=s.n(o),d=s(95891),p=s(96670),u=s(59175);let f=(0,d.V)(["function deposit(uint256 nftId) external","function withdraw(uint256 nftId) external","function multicall(bytes[] calldata data) external returns (bytes[] memory results)","function deposited(address user) external view returns (uint256[] memory)","function deposited(address user,uint256 count,uint256 skip) external view returns (uint256[] memory)","function depositedCount(address user) external view returns (uint256)","function totalDeposit() external view returns (uint256)"]),chunckCount=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50n,s=[];if(e<=t)return s.push([(0,i.NA)([e,t]),0n]),s;for(let r=0n;r<e;r+=t)s.push([t,r]);let r=e%t;return r>0n&&s.push([r,t*BigInt(s.length)]),s};function usePreDepositByUser(e){let{address:t}=(0,p.m)(),s=(0,u.p)();return(0,l.a)({queryKey:["preDepositDataByUser:",s,e.preDeposit,t],enabled:!!e.preDeposit&&!!t,initialData:{deposited:[],nfts:[]},queryFn:async()=>{let r=(0,a.B)(s),l=e.preDeposit.prelnt,o=e.preDeposit.nft,d=await r.readContract({abi:f,address:l,functionName:"depositedCount",args:[t]}),p=d>50n?Promise.all(chunckCount(d).map(e=>{let[s,n]=e;return r.readContract({abi:f,address:l,functionName:"deposited",args:[t,s,n]})})).then(e=>c()(e)):r.readContract({abi:f,address:l,functionName:"deposited",args:[t]});return(0,i.S0)({deposited:p,nfts:(0,n.bY)(o,t)})}})}var x=s(55349),h=s(83978),m=s.n(h),g=s(42487),v=s.n(g),b=s(64103),j=s(58409),w=s(71996),L=s(12687),N=s(95702),y=s(2987);let D=[{name:"Reppo Network",tit:(0,r.jsxs)("div",{children:["Reppo ",(0,r.jsx)("span",{className:"text-red-400",children:"Preminum Solver Node"})]}),infos:["Price: 0.17ETH","Sales Link:",(0,r.jsx)(v(),{href:"https://repposolvers.xyz/",target:"_blank",children:"https://repposolvers.xyz/"},"link")],about:"Reppo are building plug & play style infrastructure for AI Agents, Developers & Physical AI to permissionlessly discover, negotiate, commit, and settle on community-governed capital, specialized datasets, and infrastructure through an intent-centric architecture.",totalNodes:100000n,totalTokenSupply:10000000000000n,nodeMining:"Node Mining: 26% ~ 2years",net:"Base",preDeposit:{nft:"0x1a245cfA2515089017792D92E9d68B8F8b3691eE",prelnt:"0x58a4f5cecb69b85600b26092f0c0a73430ea8800",withdrawTime:17598816e5}},{name:"Reppo Network",tit:(0,r.jsxs)("div",{children:["Reppo ",(0,r.jsx)("span",{className:"text-yellow-300",children:"Standard Solver Node"})]}),infos:["Price: 0.08ETH","Sales Link:",(0,r.jsx)(v(),{href:"https://repposolvers.xyz/",target:"_blank",children:"https://repposolvers.xyz/"},"link")],about:"Reppo are building plug & play style infrastructure for AI Agents, Developers & Physical AI to permissionlessly discover, negotiate, commit, and settle on community-governed capital, specialized datasets, and infrastructure through an intent-centric architecture.",totalNodes:100000n,totalTokenSupply:10000000000000n,nodeMining:"Node Mining: 26% ~ 2years",net:"Base",preDeposit:{nft:"0x8A1BCBd935c9c7350013786D5d1118832F10e149",prelnt:"0xaf021d48339e52edd84bab1221df9bac7f10cb69",withdrawTime:17598816e5}}];function BtnB(e){let{children:t,...s}=e;return(0,r.jsx)("button",{...s,className:"text-[1em] p-[.75em] w-[12.5em] rounded-[.5em]  cursor-pointer border dark:border-white border-black btn-b disabled:opacity-60 disabled:cursor-not-allowed",children:t})}function NodeLicenseInfo(e){let{data:t}=e;return(0,r.jsxs)("div",{style:{backdropFilter:"blur(20px)"},className:"bg-white/5 border border-[#4A5546] rounded-2xl flex flex-col p-7 gap-5 min-h-[25rem]",children:[(0,r.jsxs)("div",{className:"flex gap-7",children:[(0,r.jsx)(N.cL,{symbol:"ReppoNft",size:161}),(0,r.jsxs)("div",{className:"flex flex-col whitespace-nowrap gap-5 h-full text-sm font-medium",children:[(0,r.jsx)("div",{className:"text-base font-semibold",children:t.tit}),t.infos.map((e,t)=>(0,r.jsx)("div",{children:e},"info_".concat(t)))]})]}),(0,r.jsx)("div",{className:"bg-[#4A5546] h-[1px] w-full shrink-0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"text-base font-medium",children:["About ",t.name]}),(0,r.jsx)("div",{className:"opacity-60 text-sm font-medium leading-normal",children:t.about})]})]})}function InSvg(){return(0,r.jsxs)("svg",{width:"60",height:"67",viewBox:"0 0 60 67",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M53.7305 30.0801L26.8652 26.5V40.6973L53.7305 43.5156V30.0801Z",fill:"#118C26"}),(0,r.jsx)("path",{d:"M5.37305 31.1465L26.8652 26.5V42.6191L5.37305 47.2656V31.1465Z",fill:"#30CA39"}),(0,r.jsx)("path",{d:"M30.4453 36.5195L53.7305 30.0801V60.5254L30.4453 66.9648V36.5195Z",fill:"#2BBD34"}),(0,r.jsx)("path",{d:"M5.37305 31.1465L30.4453 36.5195V66.8008L5.37305 60.7012V31.1465Z",fill:"#118C26"}),(0,r.jsx)("path",{d:"M30.4453 36.4727L5.37305 31.1465L0 41.8926L25.9687 47.9922L30.4453 36.4727Z",fill:"#2BBD34"}),(0,r.jsx)("path",{d:"M30.4453 36.5195L53.7305 30.0801L60 40.8262L37.6113 48.1621L30.4453 36.5195Z",fill:"#6FE167"}),(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M41.5 20L36 21L30 18L34 17L41.5 20Z",fill:"#D93E46"}),(0,r.jsx)("path",{d:"M28 22.5V3L36 1.5V21L41.5 20L31.5 34L21.5 24L28 22.5Z",fill:"#F14851"}),(0,r.jsx)("path",{d:"M21 1L28 3L36 1.5L29 0L21 1Z",fill:"#D03B41"}),(0,r.jsx)("path",{d:"M28 22.5V3L21 1V19.5L28 22.5Z",fill:"#9D323D"}),(0,r.jsx)("path",{d:"M21 19.5L28 22.5L21.5 24L16 20.5L21 19.5Z",fill:"#D03B41"}),(0,r.jsx)("path",{d:"M21.5 24L31.5 34L21 25.5L16 20.5L21.5 24Z",fill:"#9E333E"})]})]})}function OutSvg(){return(0,r.jsxs)("svg",{width:"60",height:"65",viewBox:"0 0 60 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M53.7305 27.5801L26.8652 24V38.1973L53.7305 41.0156V27.5801Z",fill:"#118C26"}),(0,r.jsx)("path",{d:"M5.37305 28.6465L26.8652 24V40.1191L5.37305 44.7656V28.6465Z",fill:"#30CA39"}),(0,r.jsx)("path",{d:"M30.4453 34.0195L53.7305 27.5801V58.0254L30.4453 64.4648V34.0195Z",fill:"#2BBD34"}),(0,r.jsx)("path",{d:"M5.37305 28.6465L30.4453 34.0195V64.3008L5.37305 58.2012V28.6465Z",fill:"#118C26"}),(0,r.jsx)("path",{d:"M30.4453 33.9727L5.37305 28.6465L0 39.3926L25.9687 45.4922L30.4453 33.9727Z",fill:"#2BBD34"}),(0,r.jsx)("path",{d:"M30.4453 34.0195L53.7305 27.5801L60 38.3262L37.6113 45.6621L30.4453 34.0195Z",fill:"#6FE167"}),(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M30 31V14.5L23 14V29.5L30 31Z",fill:"#AAAD16"}),(0,r.jsx)("path",{d:"M30 14.5V31L37 29V13L42 12L33.5 0L23 16L30 14.5Z",fill:"#E5CF3E"}),(0,r.jsx)("path",{d:"M23 16L33.5 0H27L16.5 14L23 16Z",fill:"#BBB73C"})]})]})}function LntPreDeposit(e){let{node:t,onSuccess:s}=e,[n,a]=(0,j.Z)({}),l=m().keys(n).filter(e=>n[e]).map(e=>BigInt(e)),o=(0,b.useMemo)(()=>{let e=m().keys(n).filter(e=>n[e]).map(e=>BigInt(e));return e.map(e=>(0,w.R)({abi:f,functionName:"deposit",args:[e]}))},[n]),c=t.preDeposit,{data:{nfts:d},refetch:p}=usePreDepositByUser(t);return(0,r.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5",children:[(0,r.jsx)("div",{className:"w-full text-start",children:"Licenses ID"}),(0,r.jsx)("div",{className:"w-[32rem] h-72 overflow-y-auto",children:(0,r.jsx)("div",{className:"w-full gap-2 grid grid-cols-4 ",children:d.map(e=>(0,r.jsxs)("div",{className:(0,i.cn)("flex gap-1 items-center cursor-pointer",{"text-primary":n[e.toString()]}),onClick:()=>a({[e.toString()]:!n[e.toString()]}),children:[(0,r.jsx)("div",{className:(0,i.cn)("w-3 h-3 border border-black/20 bg-[#EBEBEB] rounded-full",{"bg-primary":n[e.toString()]})}),"#",e.toString()]},e.toString()))})}),(0,r.jsx)(L.L,{tx:"Deposit",approves:{[c.nft]:!0},spender:c.prelnt,confirmations:5,onTxSuccess:()=>{let e={};l.forEach(t=>{e[t.toString()]=!1}),a(e),s(),p()},config:{abi:f,address:c.prelnt,functionName:"multicall",enabled:l.length>0,args:[o]}})]})}function LntPreWithdraw(e){let{node:t,onSuccess:s}=e,[n,a]=(0,j.Z)({}),l=m().keys(n).filter(e=>n[e]).map(e=>BigInt(e)),o=(0,b.useMemo)(()=>{let e=m().keys(n).filter(e=>n[e]).map(e=>BigInt(e));return e.map(e=>(0,w.R)({abi:f,functionName:"withdraw",args:[e]}))},[n]),{data:{deposited:c}}=usePreDepositByUser(t),d=t.preDeposit,{address:u}=(0,p.m)();return(0,r.jsxs)("div",{className:"flex flex-col gap-5 items-center p-5",children:[(0,r.jsx)("div",{className:"w-full text-start",children:"Licenses ID"}),(0,r.jsx)("div",{className:"w-[32rem] h-72 overflow-y-auto",children:(0,r.jsx)("div",{className:"w-full gap-2 grid grid-cols-4 ",children:c.map(e=>(0,r.jsxs)("div",{className:(0,i.cn)("flex gap-1 items-center cursor-pointer",{"text-primary":n[e.toString()]}),onClick:()=>a({[e.toString()]:!n[e.toString()]}),children:[(0,r.jsx)("div",{className:(0,i.cn)("w-3 h-3 border border-black/20 bg-[#EBEBEB] rounded-full",{"bg-primary":n[e.toString()]})}),"#",e.toString()]},e.toString()))})}),(0,r.jsx)(L.L,{tx:"Withdraw",confirmations:5,onTxSuccess:()=>{let e={};l.forEach(t=>{e[t.toString()]=!1}),a(e),s(),x.w.getState().sliceTokenStore.updateNftBalance([d.nft],u)},config:{abi:f,address:d.prelnt,functionName:"multicall",enabled:l.length>0,args:[o]}})]})}function PrePool(e){let{data:t}=e,s=(0,b.useRef)(null),n=(0,b.useRef)(null),{data:{totalDeposit:o},refetch:c}=function(e){let t=(0,u.p)();return(0,l.a)({queryKey:["preDepositData:",t,e.preDeposit],enabled:!!e.preDeposit,initialData:{totalDeposit:0n},queryFn:async()=>{let s=(0,a.B)(t);return(0,i.S0)({totalDeposit:s.readContract({abi:f,address:e.preDeposit.prelnt,functionName:"totalDeposit"})})}})}(t),{data:{deposited:d,nfts:p},refetch:x}=usePreDepositByUser(t);return(0,r.jsxs)("div",{style:{backdropFilter:"blur(20px)"},className:"bg-white/5 border border-[#4A5546] rounded-2xl flex flex-col p-7 gap-5",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"text-xl font-bold",children:"Pre-Deposit Pool"}),(0,r.jsxs)("div",{className:"text-xs font-medium",children:["Network: ",t.net]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"opacity-60 text-xs font-medium",children:"Total Deposited"}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:[(0,r.jsx)("span",{className:"text-2xl font-bold mr-2",children:o.toString()}),"Licenses"]})]})]}),(0,r.jsx)("div",{className:"bg-[#4A5546] h-[1px] w-full shrink-0"}),(0,r.jsxs)("div",{className:"flex gap-5 flex-1",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-between items-center h-full pb-5",children:[(0,r.jsxs)("div",{className:"self-start",children:["In-Wallet: ",p.length]}),(0,r.jsx)(InSvg,{}),(0,r.jsx)(y.o,{triggerRef:s,triggerProps:{className:"flex-1",disabled:!t.preDeposit},trigger:(0,r.jsx)(BtnB,{disabled:!t.preDeposit,children:"Deposit"}),children:(0,r.jsx)(LntPreDeposit,{node:t,onSuccess:()=>{var e;null===(e=s.current)||void 0===e||e.click(),c(),x()}})})]}),(0,r.jsx)("div",{className:"bg-[#4A5546] w-[1px] h-full shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-between items-center h-full pb-5",children:[(0,r.jsxs)("div",{className:"self-end",children:["Deposited: ",d.length]}),(0,r.jsx)(OutSvg,{}),(0,r.jsx)(y.o,{triggerRef:n,triggerProps:{className:"flex-1",disabled:!t.preDeposit||(t.preDeposit.withdrawTime||0)>m().now()},trigger:(0,r.jsx)(BtnB,{disabled:!t.preDeposit||(t.preDeposit.withdrawTime||0)>m().now(),children:"Withdraw"}),children:(0,r.jsx)(LntPreWithdraw,{node:t,onSuccess:()=>{var e;null===(e=n.current)||void 0===e||e.click(),c(),x()}})})]})]})]})}function PreDeposit(e){let{data:t}=e;return(0,r.jsxs)("div",{className:"gap-8 w-full grid grid-cols-[5fr_6fr]",children:[(0,r.jsx)(NodeLicenseInfo,{data:t}),(0,r.jsx)(PrePool,{data:t})]})}}}]);